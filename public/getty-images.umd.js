(function(yr,$r){typeof exports=="object"&&typeof module!="undefined"?$r(exports):typeof define=="function"&&define.amd?define(["exports"],$r):(yr=typeof globalThis!="undefined"?globalThis:yr||self,$r(yr.GettyIntegration={}))})(this,function(yr){"use strict";var rme=Object.defineProperty,ime=Object.defineProperties;var nme=Object.getOwnPropertyDescriptors;var M0=Object.getOwnPropertySymbols;var OB=Object.prototype.hasOwnProperty,MB=Object.prototype.propertyIsEnumerable;var FB=(yr,$r,Br)=>$r in yr?rme(yr,$r,{enumerable:!0,configurable:!0,writable:!0,value:Br}):yr[$r]=Br,L=(yr,$r)=>{for(var Br in $r||($r={}))OB.call($r,Br)&&FB(yr,Br,$r[Br]);if(M0)for(var Br of M0($r))MB.call($r,Br)&&FB(yr,Br,$r[Br]);return yr},ge=(yr,$r)=>ime(yr,nme($r));var To=(yr,$r)=>{var Br={};for(var Mn in yr)OB.call(yr,Mn)&&$r.indexOf(Mn)<0&&(Br[Mn]=yr[Mn]);if(yr!=null&&M0)for(var Mn of M0(yr))$r.indexOf(Mn)<0&&MB.call(yr,Mn)&&(Br[Mn]=yr[Mn]);return Br};var $r=Object.create,Br=Object.defineProperty,Mn=Object.getOwnPropertyDescriptor,PB=Object.getOwnPropertyNames,AB=Object.getPrototypeOf,zB=Object.prototype.hasOwnProperty,$B=(e,t,r)=>t in e?Br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qT=e=>Br(e,"__esModule",{value:!0}),F=(e,t)=>()=>(e&&(t=e(e=0)),t),T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_r=(e,t)=>{for(var r in t)Br(e,r,{get:t[r],enumerable:!0})},XT=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of PB(t))!zB.call(e,n)&&(r||n!=="default")&&Br(e,n,{get:()=>t[n],enumerable:!(i=Mn(t,n))||i.enumerable});return e},ni=(e,t)=>XT(qT(Br(e!=null?$r(AB(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Zi=(e=>(t,r)=>e&&e.get(t)||(r=XT(qT({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0),x=(e,t,r,i)=>{for(var n=i>1?void 0:i?Mn(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(n=(i?s(t,r,n):s(n))||n);return i&&n&&Br(t,r,n),n},Ue=(e,t,r)=>($B(e,typeof t!="symbol"?t+"":t,r),r),Nr,Eo=F(()=>{Nr=e=>{if(e){e.width=1,e.height=1;const t=e.getContext("2d");t&&t.clearRect(0,0,1,1)}}}),wl,zc,YT=F(()=>{wl={imgly_font_bernier_regular:"imgly_font_sancreek",imgly_font_cheque_regular:"imgly_font_kumar_one_outline",imgly_font_gagalin_regular:"imgly_font_permanent_marker",imgly_font_hagin_caps_thin:"imgly_font_nixie_one",imgly_font_intro_inline:"imgly_font_bungee_inline",imgly_font_nexa_script:"imgly_font_molle",imgly_font_panton_blackitalic_caps:"imgly_font_roboto_black_italic",imgly_font_panton_lightitalic_caps:"imgly_font_roboto_light_italic",imgly_font_perfograma:"imgly_font_codystar",imgly_font_panton_black_caps:"imgly_font_roboto_black",imgly_font_panton_light_caps:"imgly_font_roboto_light",imgly_font_summer_font_light:"imgly_font_sue_ellen_francisco"},zc=(e,t=!1)=>wl[e]?(t&&console.warn(`Font ${e} was deprecated. Please use ${wl[e]} instead.`),wl[e]):e}),BB=T((e,t)=>{var r=typeof Element!="undefined",i=typeof Map=="function",n=typeof Set=="function",o=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(a,l){if(a===l)return!0;if(a&&l&&typeof a=="object"&&typeof l=="object"){if(a.constructor!==l.constructor)return!1;var c,h,f;if(Array.isArray(a)){if(c=a.length,c!=l.length)return!1;for(h=c;h--!==0;)if(!s(a[h],l[h]))return!1;return!0}var d;if(i&&a instanceof Map&&l instanceof Map){if(a.size!==l.size)return!1;for(d=a.entries();!(h=d.next()).done;)if(!l.has(h.value[0]))return!1;for(d=a.entries();!(h=d.next()).done;)if(!s(h.value[1],l.get(h.value[0])))return!1;return!0}if(n&&a instanceof Set&&l instanceof Set){if(a.size!==l.size)return!1;for(d=a.entries();!(h=d.next()).done;)if(!l.has(h.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(l)){if(c=a.length,c!=l.length)return!1;for(h=c;h--!==0;)if(a[h]!==l[h])return!1;return!0}if(a.constructor===RegExp)return a.source===l.source&&a.flags===l.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===l.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===l.toString();if(f=Object.keys(a),c=f.length,c!==Object.keys(l).length)return!1;for(h=c;h--!==0;)if(!Object.prototype.hasOwnProperty.call(l,f[h]))return!1;if(r&&a instanceof Element)return!1;for(h=c;h--!==0;)if(!((f[h]==="_owner"||f[h]==="__v"||f[h]==="__o")&&a.$$typeof)&&!s(a[f[h]],l[f[h]]))return!1;return!0}return a!==a&&l!==l}t.exports=function(l,c){try{return s(l,c)}catch(h){if((h.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw h}}}),LB=T((e,t)=>{t.exports=(r,i=1,n)=>{if(n=L({indent:" ",includeEmptyLines:!1},n),typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof i!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof i}\``);if(typeof n.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(i===0)return r;const o=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(o,n.indent.repeat(i))}}),UB=T(()=>{}),NB=T((e,t)=>{var r=UB(),i=/\s+at.*(?:\(|\s)(.*)\)?/,n=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,o=typeof r.homedir=="undefined"?"":r.homedir();t.exports=(s,a)=>(a=Object.assign({pretty:!1},a),s.replace(/\\/g,"/").split(`
`).filter(l=>{const c=l.match(i);if(c===null||!c[1])return!0;const h=c[1];return h.includes(".app/Contents/Resources/electron.asar")||h.includes(".app/Contents/Resources/default_app.asar")?!1:!n.test(h)}).filter(l=>l.trim()!=="").map(l=>a.pretty?l.replace(i,(c,h)=>c.replace(h,h.replace(o,"~"))):l).join(`
`))}),jB=T((e,t)=>{var r=LB(),i=NB(),n=s=>s.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),o=class extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);s=[...s].map(l=>l instanceof Error?l:l!==null&&typeof l=="object"?Object.assign(new Error(l.message),l):new Error(l));let a=s.map(l=>typeof l.stack=="string"?n(i(l.stack)):String(l)).join(`
`);a=`
`+r(a,4),super(a),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:s})}*[Symbol.iterator](){for(const s of this._errors)yield s}};t.exports=o}),Hh=T((e,t)=>{var r=jB();t.exports=async(i,n,{concurrency:o=1/0,stopOnError:s=!0}={})=>new Promise((a,l)=>{if(typeof n!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(o)||o===1/0)&&o>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${o}\` (${typeof o})`);const c=[],h=[],f=i[Symbol.iterator]();let d=!1,p=!1,v=0,g=0;const m=()=>{if(d)return;const y=f.next(),_=g;if(g++,y.done){p=!0,v===0&&(!s&&h.length!==0?l(new r(h)):a(c));return}v++,(async()=>{try{const b=await y.value;c[_]=await n(b,_),v--,m()}catch(b){s?(d=!0,l(b)):(h.push(b),v--,m())}})()};for(let y=0;y<o&&(m(),!p);y++);})}),Sl={};_r(Sl,{FragmentPrecision:()=>P0,ImageFormat:()=>$c,OptionType:()=>dm,RenderType:()=>Pn,RendererType:()=>pm,UniformType:()=>fm});var Pn,$c,dm,fm,pm,P0,An=F(()=>{Pn={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},$c={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"},dm=(e=>(e.NUMBER="number",e.VECTOR2="vector2",e.COLOR_MATRIX="color-matrix",e.COLOR="color",e.ARRAY="array",e.OBJECT="object",e.STRING="string",e.BOOLEAN="boolean",e.CONFIGURABLE="configurable",e.IMAGE="image",e.FUNCTION="function",e.TEXTURE="texture",e.ALL="*",e))(dm||{}),fm=(e=>(e.SAMPLER2D="sampler2d",e.INT="i",e.INT1="1i",e.INT2="2i",e.INT3="3i",e.INT4="4i",e.FLOAT="f",e.FLOAT1="1f",e.FLOAT2="2f",e.FLOAT_VECTOR2="2fv",e.FLOAT3="3f",e.FLOAT4="4f",e.MAT3="mat3",e.MAT3FV="mat3fv",e.MAT4="mat4",e))(fm||{}),pm=(e=>(e.WEBGL="webgl",e.CANVAS="canvas",e))(pm||{}),P0=(e=>(e.High="highp",e.Medium="mediump",e.Low="lowp",e))(P0||{})}),Wh,QT,HB=F(()=>{Wh=()=>document.createElement("canvas"),QT=(e,t)=>{const r=t||Wh();r.width=e.width,r.height=e.height;const i=r.getContext("2d");if(!i)throw new Error("Cannot render context");return i.clearRect(0,0,r.width,r.height),i.drawImage(e,0,0,e.width,e.height),r}}),A0,KT=F(()=>{A0=class{constructor(e,t,r){this.width=e,this.height=t,this.data=r}}}),ZT={};_r(ZT,{glGet:()=>Vh,webUtils:()=>rE});var Vh,JT,eE,tE,rE,WB=F(()=>{HB(),Eo(),KT(),Vh=e=>{const t={preserveDrawingBuffer:!0};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)},JT=()=>{const e=Wh(),t=Vh(e),r=t.getParameter(t.MAX_TEXTURE_SIZE),i=t.getExtension("WEBGL_lose_context");return i&&i.loseContext(),Nr(e),r},eE=(e,t)=>{if(t instanceof A0)e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,t.data);else{const r=QT(t);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),Nr(r)}},tE=e=>Boolean(e.tagName&&e.tagName.toUpperCase()==="IMG"),rE={isSupported:()=>Boolean(Vh(Wh())),isCanvas:e=>e.constructor.name==="Canvas"||Boolean(e.tagName&&e.tagName.toUpperCase()==="CANVAS"),isImage:tE,Image:typeof window!="undefined"?window.Image:void 0,glMaxTexture:JT,glGet:Vh,createCanvas:Wh,glResize(e,t){return e},glTexImage:eE}}),iE,zn,mm,z0,nE,cs=F(()=>{An(),iE=(WB(),Zi(ZT)).webUtils,zn=iE,mm=e=>e._type==="webgl",z0=e=>Boolean(e&&"tagName"in e&&e.tagName&&e.tagName.toUpperCase()==="CANVAS"),nE=e=>Boolean("tagName"in e&&e.tagName.toUpperCase()==="IMG")}),$0,oE,VB=F(()=>{$0=class{static head(e){return e[0]}static tail(e){return e.slice(1)}static last(e){return e[e.length-1]}static init(e){return e.slice(0,e.length-1)}static remove(e,t){return e.filter((r,i,n)=>!t(r,i,n))}static findIndex(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return-1}static find(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return e[r]}static flatten(e){return e.reduce(function(t,r){return t.concat(Array.isArray(r)?$0.flatten(r):r)},[])}static range(e,t){const r=[];if(t>e)for(let i=e;i<t;i++)r.push(i);return r}static repeat(e,t){const r=[];for(let i=0;i<t;i++)r[i]=e;return r}static zip(e,t){const r=Math.min(e.length,t.length),i=[];for(let n=0;n<r;n++)i[n]=[e[n],t[n]];return i}},oE=$0}),us,sE,na,Gh=F(()=>{us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",sE={encode(e){let t="",r,i,n,o,s,a,l,c=0;do r=e[c++],i=e[c++],n=e[c++],o=r>>2,s=(r&3)<<4|i>>4,a=(i&15)<<2|n>>6,l=n&63,isNaN(i)?a=l=64:isNaN(n)&&(l=64),t=t+us.charAt(o)+us.charAt(s)+us.charAt(a)+us.charAt(l),r=i=n="",o=s=a=l="";while(c<e.length);return t},decode(e){let t,r,i,n,o,s,a,l=0;const c=[];if(/[^A-Za-z0-9+/=]/g.exec(e))throw new Error(`There were invalid base64 characters in the input text.
Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='
Expect errors in decoding.`);e=e.replace(/[^A-Za-z0-9+/=]/g,"");do n=us.indexOf(e.charAt(l++)),o=us.indexOf(e.charAt(l++)),s=us.indexOf(e.charAt(l++)),a=us.indexOf(e.charAt(l++)),t=n<<2|o>>4,r=(o&15)<<4|s>>2,i=(s&3)<<6|a,c.push(t),s!==64&&c.push(r),a!==64&&c.push(i),t=r=i="",n=o=s=a="";while(l<e.length);return c}},na=sE}),Cl,B0,Ce,hs=F(()=>{cs(),VB(),Gh(),Cl=class{static mapRange(e,t,r){return(e-t.getMin())*r.getLength()/t.getLength()+r.getMin()}static isPlainObject(e){if(typeof e!="object"||!e)return!1;if(typeof Object.getPrototypeOf=="function"){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}return Object.prototype.toString.call(e)==="[object Object]"}static isMobile(){if(typeof navigator=="undefined")return!1;const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}static isBrowser(){return typeof window!="undefined"}static values(e){const t=[];for(const r in e)t.push(e[r]);return t}static generateUUID(){let e=new Date().getTime();return typeof window.performance!="undefined"&&typeof window.performance.now=="function"&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const r=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t==="x"?r:r&3|8).toString(16)})}static resizeVectorToFit(e,t){const r=Math.min(t.x/e.x,t.y/e.y);return e.clone().multiply(r)}static resizeVectorToFill(e,t){const r=e.x/e.y,i=t.x/t.y;return r>i?t.clone().set(t.y*r,t.y):t.clone().set(t.x,t.x/r)}static isExtendable(e){return typeof e!="undefined"&&e!==null&&(typeof e=="object"||typeof e=="function")}static defaults(e,...t){const r={};for(const i in e)r[i]=e[i];for(let i=0;i<t.length;i++){const n=t[i];for(const o in n)typeof r[o]=="undefined"&&(r[o]=n[o])}return r}static deepMerge(e,...t){const r=(i,n)=>{if(n===void 0)return r(null,i);if(Array.isArray(n))return[...n];if(!Cl.isPlainObject(n))return n;if(!Cl.isPlainObject(i))return L({},n);const o=L({},i);return Object.keys(n).forEach(s=>{const a=n[s];a!==void 0&&(o[s]=r(i[s],a))}),o};return t.reduce(r,e)}static deepDefaults(e,...t){const r=[...t].reverse();return Cl.deepMerge(...r,e)}static deepClone(e){const t={};for(const r in e)Cl.isExtendable(e[r])?t[r]=Cl.deepClone(e[r]):t[r]=e[r];return t}static extend(e,...t){const r={};for(const i in e)r[i]=e[i];for(let i=0;i<t.length;i++){const n=t[i];for(const o in n)r[o]=n[o]}return r}static clone(e){return this.extend({},e)}static getUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}static createCanvas(){return zn.createCanvas()}static isPowerOfTwo(e){return(e.x&e.x-1)===0&&(e.y&e.y-1)===0}static nextLowestPOT(e){for(let t=1;t<32;t<<=1)e|=e>>t;return e-(e>>1)}static nextHighestPOT(e){e--;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}static moveArrayItem(e,t,r){if(r>=e.length){let i=r-e.length;for(;i--+1;)e.push(void 0)}e.splice(r,0,e.splice(t,1)[0])}static ensureCanvasDimensions(e,t){return e.width!==t.x||e.height!==t.y?(e.width=t.x,e.height=t.y,!0):!1}static byteArrayToString(e){return e.map(t=>String.fromCharCode(t)).join("")}static clamp(e,t,r){return Math.max(t,Math.min(e,r))}static wildCardMatch(e,t){return new RegExp(`^${t.split("*").join(".*")}$`).test(e)}static flipObject(e){const t={};for(const r in e)t[e[r]]=r;return t}static ISODateString(e){function t(r){return r<10?`0${r}`:r}return`${e.getUTCFullYear()}-${t(e.getUTCMonth()+1)}-${t(e.getUTCDate())}T${t(e.getUTCHours())}:${t(e.getUTCMinutes())}:${t(e.getUTCSeconds())}Z`}static getCrossOriginValue(e){if(!e)return"anonymous";if(e!=="none")return e}static invariant(e,t){if(!e)throw new Error(t)}static executePromises(e){const t=e.length;let r=0;const i=[],n=[];return new Promise((o,s)=>{const a=()=>{r++,r>=t&&(n.length<=0?o(i):s(n))},l=h=>{i.push(h),a()},c=h=>{n.push(h),a()};e.forEach(h=>{h.then(l).catch(c)})})}},B0=Cl,Ue(B0,"Array",oE),Ce=B0}),aE,L0,lE,cE,uE,gm,Ke,Do=F(()=>{hs(),aE=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],L0=()=>console&&console.group&&console.groupCollapsed&&console.groupEnd,lE=()=>typeof navigator!="undefined"&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/),cE=(e,t)=>["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0",`background: ${e}; color: ${t}; line-height: 20px; padding: 4px 0; font-weight: bold`,"background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"],uE=class{constructor(e="warn",t=aE){this._levels=[...t],this._maxLevel=this.getLevelIndexByName(e),this._consoleFuncs={trace:(...r)=>{L0()?(console.groupCollapsed(...r),console.trace(),console.groupEnd()):console.trace(...r)}},this._levels.forEach(({name:r})=>{this[r]=(i,...n)=>{this._log(r,i,...n)}})}getLevelIndexByName(e){return Ce.Array.findIndex(this._levels,t=>t.name===e)}getLevelObjectByName(e){return Ce.Array.find(this._levels,t=>t.name===e)}canLog(e){const t=this.getLevelIndexByName(e);return t<0?!1:t>=this._maxLevel}setLevel(e){const t=this.getLevelIndexByName(e);t<0||(this._maxLevel=t)}_log(e,t,...r){const i=this.getLevelObjectByName(e);if(!i||!this.canLog(e))return;const{name:n,type:o,background:s,color:a}=i,l=r.filter(d=>d!==void 0).map(d=>d.toObject?JSON.parse(JSON.stringify(d.toObject())):d),c=this._consoleFuncs[o]||console[o]?(...d)=>console[o](...d):(...d)=>console.log(...d),h=l.length,f=cE(s,a);{if(!lE()){const d=l.length;if(d<=0){c(`PhotoEditorSDK | ${t} `);return}if(d===1&&typeof l[0]=="string"){c(`PhotoEditorSDK | ${t} | ${l[0]}`);return}c(`PhotoEditorSDK | ${t} | `,...l);return}if(h<=0){c(`%c  %c PhotoEditorSDK %c  %c ${t} %c %c  `,...f);return}if(h===1&&typeof l[0]=="string"){c(`%c  %c PhotoEditorSDK %c  %c ${t} %c  ${l[0]}  %c  `,...f);return}L0()?(console.groupCollapsed(`%c  %c PhotoEditorSDK %c  %c ${t} %c`,...Ce.Array.init(f)),c(...l),console.groupEnd()):c(`%c  %c PhotoEditorSDK %c  %c ${t} %c`,...Ce.Array.init(f),...l)}}image(e="",t){{let r=new window.Image;const i=()=>{const{width:n}=r,{height:o}=r;e&&console.log(e),console.log("%c+",`
        font-size: 1px;
        padding: 0px ${Math.floor(n/2)}px;
        line-height: ${o}px;
        background: url(${r.src});
        color: transparent;
        background-repeat: no-repeat;
        background-size: ${n}px ${o}px;`)};return r.onload=i,t instanceof window.HTMLCanvasElement?r.src=t.toDataURL():t instanceof window.Image?(r=t,i()):typeof t=="string"?r.src=t:this.log(e,t),r}}texture(e="",t){{if(!t){this.log(e,"texture: null or undefined");return}const r=t.getBaseTexture(),i=r.getRenderers(),n=Ce.Array.find(i,a=>a&&a.constructor.type==="webgl"),{width:o,height:s}=r.getFrame();if(n){const a=n.getContext(),l=r.getGLTextureForRenderer(n);this.logGlTexture(a,l,o,s,e)}else gm.image(e,r.getSource())}}logGlTexture(e,t,r=150,i=150,n){{e.bindTexture(e.TEXTURE_2D,t);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);const s=new Uint8Array(r*i*4);e.readPixels(0,0,r,i,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(o);const a=document.createElement("canvas");a.width=r,a.height=i;const l=a.getContext("2d"),c=l.createImageData(r,i);return c.data.set(s),l.putImageData(c,0,0),gm.image(n,a)}}},gm=new uE("warn"),Ke=gm}),ds,qh=F(()=>{ds={load(e,t={cors:!0,value:"anonymous"}){return(()=>Promise.resolve([e,e]))().then(([i,n])=>this._createAndLoadImage(i,n,t))},loadImage(e,t={cors:!0,value:"anonymous"}){return this._loadWithoutExif(e,t)},_loadWithoutExif(e,t={cors:!0,value:"anonymous"}){return new Promise((r,i)=>{const n=new window.Image;n.addEventListener("load",()=>{r(n)}),n.addEventListener("error",()=>{i(new Error(`Failed to load image at ${e}`))}),t.cors&&(n.crossOrigin=t.value),n.src=e})},_createAndLoadImage(e,t,r={cors:!0,value:"anonymous"}){return new Promise((i,n)=>{{const o=this._loadWithoutExif(t,r).then(a=>i(a)),s=new Promise((a,l)=>{this._loadAsDataURL(t,r).then(c=>{const h=new window.Image;h.addEventListener("load",()=>{a(h)}),h.src=c,h.rawSource=c}).catch(c=>{o.then(h=>a(h))})});return this._stringEndsWith(t,".svg")?o.then(a=>i(a)):s.then(a=>i(a))}})},_stringEndsWith(e,t,r=e.length){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t},_loadAsDataURL(e,t={cors:!0,value:"anonymous"}){return new Promise((r,i)=>{const n=new XMLHttpRequest;n.onload=function(){const o=new FileReader;o.onloadend=function(){o.error&&i(o.error),r(o.result)},o.readAsDataURL(n.response)},n.open("GET",e),n.responseType="blob",n.withCredentials=t.cors&&t.value==="use-credentials",n.send()})},loadXHR(e,t){return new Promise((r,i)=>{let n;window.XDomainRequest?(n=new window.XDomainRequest,t&&n.overrideMimeType(t),n.onload=function(){r(n)},n.onerror=function(o){i(o)}):window.XMLHttpRequest&&(n=new window.XMLHttpRequest,t&&n.overrideMimeType(t),n.onreadystatechange=function(o){n.readyState===4&&(n.status===200?r(n):i(new Error(`HTTP Status ${n.status}`)))}),n.open("GET",e,!0),n.send()})}}}),GB=T((e,t)=>{function r(i,n){return Object.prototype.hasOwnProperty.call(i,n)}t.exports=function(i,n,o,s){n=n||"&",o=o||"=";var a={};if(typeof i!="string"||i.length===0)return a;var l=/\+/g;i=i.split(n);var c=1e3;s&&typeof s.maxKeys=="number"&&(c=s.maxKeys);var h=i.length;c>0&&h>c&&(h=c);for(var f=0;f<h;++f){var d=i[f].replace(l,"%20"),p=d.indexOf(o),v,g,m,y;p>=0?(v=d.substr(0,p),g=d.substr(p+1)):(v=d,g=""),m=decodeURIComponent(v),y=decodeURIComponent(g),r(a,m)?Array.isArray(a[m])?a[m].push(y):a[m]=[a[m],y]:a[m]=y}return a}}),qB=T((e,t)=>{var r=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}};t.exports=function(i,n,o,s){return n=n||"&",o=o||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(a){var l=encodeURIComponent(r(a))+o;return Array.isArray(i[a])?i[a].map(function(c){return l+encodeURIComponent(r(c))}).join(n):l+encodeURIComponent(r(i[a]))}).join(n):s?encodeURIComponent(r(s))+o+encodeURIComponent(r(i)):""}}),XB=T(e=>{e.decode=e.parse=GB(),e.encode=e.stringify=qB()});function vm(e){typeof e=="string"&&(e=Xh(e));var t=function(r,i,n){var o=r.auth,s=r.hostname,a=r.protocol||"",l=r.pathname||"",c=r.hash||"",h=r.query||"",f=!1;o=o?encodeURIComponent(o).replace(/%3A/i,":")+"@":"",r.host?f=o+r.host:s&&(f=o+(~s.indexOf(":")?"["+s+"]":s),r.port&&(f+=":"+r.port)),h&&typeof h=="object"&&(h=i.encode(h));var d=r.search||h&&"?"+h||"";return a&&a.substr(-1)!==":"&&(a+=":"),r.slashes||(!a||n.test(a))&&f!==!1?(f="//"+(f||""),l&&l[0]!=="/"&&(l="/"+l)):f||(f=""),c&&c[0]!=="#"&&(c="#"+c),d&&d[0]!=="?"&&(d="?"+d),{protocol:a,host:f,pathname:l=l.replace(/[?#]/g,encodeURIComponent),search:d=d.replace("#","%23"),hash:c}}(e,U0.default,dE);return""+t.protocol+t.host+t.pathname+t.search+t.hash}function hE(e,t){var r=typeof e=="string"?Xh(e):e;e=typeof e=="object"?vm(e):e;var i=Xh(t),n="";r.protocol&&!r.slashes&&(n=r.protocol,e=e.replace(r.protocol,""),n+=t[0]==="/"||e[0]==="/"?"/":""),n&&i.protocol&&(n="",i.slashes||(n=i.protocol,t=t.replace(i.protocol,"")));var o=e.match(fE);o&&!i.protocol&&(e=e.substr((n=o[1]+(o[2]||"")).length),/^\/\/[^/]/.test(t)&&(n=n.slice(0,-1)));var s=new URL(e,bm+"/"),a=new URL(t,s).toString().replace(bm,""),l=i.protocol||r.protocol;return l+=r.slashes||i.slashes?"//":"",!n&&l?a=a.replace(ym,l):n&&(a=a.replace(ym,"")),pE.test(a)||~t.indexOf(".")||e.slice(-1)==="/"||t.slice(-1)==="/"||a.slice(-1)!=="/"||(a=a.slice(0,-1)),n&&(a=n+(a[0]==="/"?a.substr(1):a)),a}function Bc(){}function Xh(e,t,r){if(t===void 0&&(t=!1),r===void 0&&(r=!1),e&&typeof e=="object"&&e instanceof Bc)return e;var i=(e=e.trim()).match(mE);e=i?i[1].replace(/\\/g,"/")+i[2]:e.replace(/\\/g,"/"),yE.test(e)&&e.slice(-1)!=="/"&&(e+="/");var n=!/(^javascript)/.test(e)&&e.match(gE),o=vE.test(e),s="";n&&(xm.test(n[1])||(s=n[1].toLowerCase(),e=""+n[2]+n[3]),n[2]||(o=!1,xm.test(n[1])?(s=n[1],e=""+n[3]):e="//"+n[3]),n[2].length!==3&&n[2].length!==1||(s=n[1],e="/"+n[3]));var a,l=(i?i[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),c=l&&l[1],h=new Bc,f="",d="";try{a=new URL(e)}catch(g){f=g,s||r||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(d="/",e=e.substr(1));try{a=new URL(e,bm)}catch{return h.protocol=s,h.href=s,h}}h.slashes=o&&!d,h.host=a.host===_m?"":a.host,h.hostname=a.hostname===_m?"":a.hostname.replace(/(\[|\])/g,""),h.protocol=f?s||null:a.protocol,h.search=a.search.replace(/\\/g,"%5C"),h.hash=a.hash.replace(/\\/g,"%5C");var p=e.split("#");!h.search&&~p[0].indexOf("?")&&(h.search="?"),h.hash||p[1]!==""||(h.hash="#"),h.query=t?U0.default.decode(a.search.substr(1)):h.search.substr(1),h.pathname=d+(n?function(g){return g.replace(/['^|`]/g,function(m){return"%"+m.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(m,y){try{return decodeURIComponent(y).split("").map(function(_){var b=_.charCodeAt();return b>256||/^[a-z0-9]$/i.test(_)?_:"%"+b.toString(16).toUpperCase()}).join("")}catch{return y}})}(a.pathname):a.pathname),h.protocol==="about:"&&h.pathname==="blank"&&(h.protocol="",h.pathname=""),f&&e[0]!=="/"&&(h.pathname=h.pathname.substr(1)),s&&!xm.test(s)&&e.slice(-1)!=="/"&&h.pathname==="/"&&(h.pathname=""),h.path=h.pathname+h.search,h.auth=[a.username,a.password].map(decodeURIComponent).filter(Boolean).join(":"),h.port=a.port,c&&!h.host.endsWith(c)&&(h.host+=c,h.port=c.slice(1)),h.href=d?""+h.pathname+h.search+h.hash:vm(h);var v=/^(file)/.test(h.href)?["host","hostname"]:[];return Object.keys(h).forEach(function(g){~v.indexOf(g)||(h[g]=h[g]||null)}),h}var U0,dE,ym,_m,bm,fE,pE,xm,mE,gE,vE,yE,YB=F(()=>{U0=ni(XB(),1),dE=/https?|ftp|gopher|file/,ym="http://",_m="w.w",bm=ym+_m,fE=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,pE=/https?|ftp|gopher|file/,Bc.prototype.parse=Xh,Bc.prototype.format=vm,Bc.prototype.resolve=hE,Bc.prototype.resolveObject=hE,xm=/^https?|ftp|gopher|file/,mE=/^(.*?)([#?].*)/,gE=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,vE=/^([a-z0-9.+-]*:)?\/\/\/*/i,yE=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i}),_E,Lc,Uc,Yh=F(()=>{YB(),_E=5e3,Lc=typeof window!="undefined"?window:global,Uc=class{constructor(e){this._url=e,this._parsedUrl=Xh(this._url,!0)}_isJSONPRequest(){const{query:e}=this._parsedUrl;for(const t in e)if(e[t]==="?")return!0;return!1}load(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}_loadJSON(){return new Promise((e,t)=>{let r;Lc.XDomainRequest?(r=new Lc.XDomainRequest,r.onload=function(){const i=JSON.parse(r.responseText);e(i)},r.onerror=function(i){t(i)},r.open("GET",this._url,!0),r.send()):Lc.XMLHttpRequest&&(r=new XMLHttpRequest,r.onreadystatechange=function(i){if(r.readyState===4)if(r.status===200){const n=JSON.parse(r.responseText);e(n)}else t(new Error(`HTTP Status ${r.status}`))},r.open("GET",this._url,!0),r.send())})}_loadJSONP(){let e=!1,t=!1;const r=`pesdk${Math.round(Math.random()*99999999999999)}`;return new Promise((i,n)=>{const o=this._createJSONPNode(r);Lc[r]=s=>{this._removeJSONPNode(o),e||(t=!0,i(s))},Lc.setTimeout(()=>{t||(this._removeJSONPNode(o),e=!0,n(new Error("Timeout of 5 seconds exceeded.")))},_E)})}_createJSONPNode(e){const t=this._buildJSONPUrl(e),r=document.querySelector("head"),i=document.createElement("script");return i.src=t,r.appendChild(i),i}_removeJSONPNode(e){e.parentNode.removeChild(e)}_buildJSONPUrl(e){const{query:t}=this._parsedUrl;let r=null;for(const i in t)if(t[i]==="?"){r=i;break}return delete this._parsedUrl.search,t[r]=e,vm(this._parsedUrl)}}}),bE={};_r(bE,{ImageLoader:()=>ds,JSONLoader:()=>Uc});var QB=F(()=>{qh(),Yh()}),Ji,Pe,Nc=F(()=>{Ji=class{constructor(e,t,r,i=1){this.r=e,this.g=t,this.b=r,this.a=i}toRGBA(){return`rgba(${[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255),this.a.toFixed(2)].join(",")})`}set(e,t,r,i=this.a){return this.r=e,this.g=t,this.b=r,this.a=i,this}toRGB(){return[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)]}toHex(){return`#${[this._componentToHex(Math.round(this.r*255)),this._componentToHex(Math.round(this.g*255)),this._componentToHex(Math.round(this.b*255))].join("")}`}toGLColor(){return[this.r,this.g,this.b,this.a]}toArray(){return this.toGLColor()}toRGBGLColor(){return[this.r,this.g,this.b]}toHSV(){const e=Math.max(this.r,this.g,this.b),t=Math.min(this.r,this.g,this.b);let r,i;const n=e,o=e-t;if(i=e===0?0:o/e,e===t)r=0;else{switch(e){case this.r:r=(this.g-this.b)/o,this.g<this.b&&(r+=6);break;case this.g:r=(this.b-this.r)/o+2;break;case this.b:r=(this.r-this.g)/o+4;break}r/=6}return[r,i,n]}fromHSV(e,t,r){return this.copy(Ji.fromHSV(e,t,r)),this}static fromHSV(e,t,r,i=1){let[n,o,s]=[];const a=Math.floor(e*6),l=e*6-a,c=r*(1-t),h=r*(1-l*t),f=r*(1-(1-l)*t);switch(a%6){case 0:n=r,o=f,s=c;break;case 1:n=h,o=r,s=c;break;case 2:n=c,o=r,s=f;break;case 3:n=c,o=h,s=r;break;case 4:n=f,o=c,s=r;break;case 5:n=r,o=c,s=h;break}return new Ji(n,o,s,i)}static fromArray(e){return new Ji(e[0],e[1],e[2],e[3])}static fromHex(e){const[t,r,i]=e.match(/[0-9A-fa-f]{1,2}/g);return new Ji(parseInt(t,16)/255,parseInt(r,16)/255,parseInt(i,16)/255,1)}clone(){return new Ji(this.r,this.g,this.b,this.a)}cloneRGB(){return new Ji(this.r,this.g,this.b,1)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this}minus(e){return this.r-=e.r,this.g-=e.g,this.b-=e.b,this.a-=e.a,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this.a*=e,this}divideScalar(e){return this.r/=e,this.g/=e,this.b/=e,this.a/=e,this}clamp(e,t){return this.r=Math.min(Math.max(this.r,e),t),this.g=Math.min(Math.max(this.g,e),t),this.b=Math.min(Math.max(this.b,e),t),this.a=Math.min(Math.max(this.a,e),t),this}mix(e,t){return this.r=(1-t)*this.r+t*e.r,this.g=(1-t)*this.g+t*e.g,this.b=(1-t)*this.b+t*e.b,this.a=(1-t)*this.a+t*e.a,this}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}_componentToHex(e){const t=e.toString(16);return t.length===1?`0${t}`:t}toString(){return`Color(${this.r}, ${this.g}, ${this.b}, ${this.a})`}static get TRANSPARENT(){return new Ji(0,0,0,0)}static get WHITE(){return new Ji(1,1,1,1)}static get BLACK(){return new Ji(0,0,0,1)}static get RED(){return new Ji(1,0,0,1)}static get BLUE(){return new Ji(0,0,1,1)}static get GREEN(){return new Ji(0,1,0,1)}},Pe=Ji}),xE,wE,oa,Qh=F(()=>{Do(),xE=12,wE=class{constructor(){this._maxListeners=xE,this._events={},this._pipeDestinations=[]}pipeEvents(e){this._pipeDestinations.push(e)}unpipeEvents(e){const t=this._pipeDestinations.indexOf(e);t!==-1&&this._pipeDestinations.splice(t,1)}on(e,t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);if(typeof t!="function")throw new TypeError;const r=this._events[e]||(this._events[e]=[]);return r.indexOf(t)!==-1?this:(r.push(t),this._maxListeners&&r.length>this._maxListeners&&(Ke.warn("EventEmitter",`Possible memory leak detected, added ${r.length} \`${e}\` listeners (current limit is ${this._maxListeners})`),typeof console!="undefined"&&console.trace()),this)}once(e,t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);const r=this;function i(){r.off(e,i),t.apply(null,arguments)}return this.on(e,i)}off(e,...t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);if(t.length===0)return this._events[e]=null,this;const r=t[0];if(typeof r!="function")throw new TypeError;const i=this._events[e];if(!i||!i.length)return this;const n=i.indexOf(r);return n===-1?this:(i.splice(n,1),this)}emit(e,...t){if(typeof e=="undefined")throw new Error(`Invalid event type: \`${e}\``);this._pipeDestinations.forEach(i=>{i.emit(e,...t)});const r=this._events[e];return!r||!r.length?!1:(r.slice(0).forEach(i=>i.apply(null,t)),!0)}setMaxListeners(e){if(parseInt(e,10)!==e)throw new TypeError;this._maxListeners=e}},oa=wE}),Kh,SE=F(()=>{Do(),Eo(),Kh={checkFramebufferStatus(e,t){const r=t.checkFramebufferStatus(t.FRAMEBUFFER),i={[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT]:"Incomplete attachment",[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT]:"Missing attachment",[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS]:"Incomplete dimensions",[t.FRAMEBUFFER_UNSUPPORTED]:"Framebuffer unsupported"};r!==t.FRAMEBUFFER_COMPLETE&&Ke.warn(e,`Framebuffer incomplete: ${i[r]}`)},determineGPUName(e){let t=null,r=null;e||(r=document.createElement("canvas"),e=r.getContext("experimental-webgl")||r.getContext("webgl"));const i=e&&e.getExtension("WEBGL_debug_renderer_info");return i&&(t=e.getParameter(i.UNMASKED_RENDERER_WEBGL),r&&r.remove()),Nr(r),t},isGPUBlacklisted(e,t=null){return!1}}}),wm,KB=F(()=>{wm=e=>typeof e=="number"}),CE,kl,Zh,Qe,sa=F(()=>{KB(),CE=e=>e instanceof Qe,kl=(e,t)=>CE(e)?{x:e.x,y:e.y}:{x:e,y:wm(t)?t:e},Zh=(e,t)=>(r,i)=>{const{x:n,y:o}=kl(r,i);return e.x=t(e.x,n),e.y=t(e.y,o),e},Qe=class{constructor(e=0,t=0){this.add=Zh(this,(r,i)=>r+i),this.subtract=Zh(this,(r,i)=>r-i),this.divide=Zh(this,(r,i)=>r/i),this.multiply=Zh(this,(r,i)=>r*i),this.x=e,this.y=t}set(e,t){const{x:r,y:i}=kl(e,t);return this.x=r,this.y=i,this}clone(){return new Qe(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}clamp(e,t){return wm(e)&&(e=new Qe(e,e)),wm(t)&&(t=new Qe(t,t)),e&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),t&&(this.x=Math.min(t.x,this.x),this.y=Math.min(t.y,this.y)),this}dot(e,t){const{x:r,y:i}=kl(e,t);return this.x*r+this.y*i}equals(e,t){const{x:r,y:i}=kl(e,t);return r===this.x&&i===this.y}flip(){const e=this.x;return this.x=this.y,this.y=e,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}floor(){return this.x|=0,this.y|=0,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}len(){return Math.sqrt(this.x*this.x+this.y*this.y)}min(){return Math.min(this.x,this.y)}max(){return Math.max(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toString(){return`Vector2({ x: ${this.x}, y: ${this.y} })`}roundDecimal(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this}asArray(e=!1){return e?[this.y,this.x]:[this.x,this.y]}static fromObject(e){return new Qe(e.x,e.y)}static get NULL(){return new Qe(0,0)}}}),aa,kE=F(()=>{sa(),aa=class{constructor(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.reset()}multiply(e){let t,r,i,n,o,s;return t=this.a*e.a+this.b*e.c,r=this.a*e.b+this.b*e.d,i=this.c*e.a+this.d*e.c,n=this.c*e.b+this.d*e.d,o=this.tx*e.a+this.ty*e.c+e.tx,s=this.tx*e.b+this.ty*e.d+e.ty,this.a=t,this.b=r,this.c=i,this.d=n,this.tx=o,this.ty=s,this}applyToVector(e){const{x:t,y:r}=e;return e=e.clone(),e.x=this.a*t+this.c*r+this.tx,e.y=this.b*t+this.d*r+this.tx,e}applyInverseToVector(e){const t=1/(this.a*this.d+this.c*-this.b),{x:r,y:i}=e;return e=e.clone(),e.x=this.d*t*r+-this.c*t*i+(this.ty*this.c-this.tx*this.d)*t,e.y=this.a*t*i+-this.b*t*r+(-this.ty*this.a+this.tx*this.b)*t,e}rectangleToCoordinates(e,t=new Qe(0,0)){const r=e.width*(1-t.x),i=e.width*-t.x,n=e.height*(1-t.y),o=e.height*-t.y,s=[];return s.push(new Qe(this.a*i+this.c*o+this.tx,this.d*o+this.b*i+this.ty)),s.push(new Qe(this.a*r+this.c*o+this.tx,this.d*o+this.b*r+this.ty)),s.push(new Qe(this.a*r+this.c*n+this.tx,this.d*n+this.b*r+this.ty)),s.push(new Qe(this.a*i+this.c*n+this.tx,this.d*n+this.b*i+this.ty)),s}reset(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}toArray(){const e=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return typeof Float32Array=="undefined"?e:new Float32Array(e)}toString(){return`Matrix({ a: ${this.a}, b: ${this.b}, c: ${this.c}, d: ${this.d}, tx: ${this.tx}, ty: ${this.ty} })`}static get IDENTITY(){return new aa}}}),oi,TE=F(()=>{sa(),oi=class{constructor(e=0,t=0,r=0,i=0){this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=t,this.width=r,this.height=i}set(e,t,r,i){return this.x=e,this.y=t,this.width=r,this.height=i,this}clone(){return new oi(this.x,this.y,this.width,this.height)}copy(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}equals(e,t,r,i){return e instanceof oi?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&t===this.y&&r===this.width&&i===this.height}translate(e,t){const{x:r,y:i}=kl(e,t);return this.x+=r,this.y+=i,this}scale(e,t){const{x:r,y:i}=kl(e,t);return this.width*=r,this.height*=i,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}getPosition(){return new Qe(this.x,this.y)}getSize(){return new Qe(this.width,this.height)}insetBy(e,t){return this.x+=e,this.y+=t,this.width-=2*e,this.height-=2*t,this}intersects(e){const t=new Qe(this.x,this.y),r=new Qe(this.x+this.width,this.y+this.height),i=new Qe(e.x,e.y),n=new Qe(e.x+e.width,e.y+e.height);return!(i.x>r.x||t.x>n.x||n.y<t.y||r.y<i.y)}toString(){return`Rectangle({ x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height} })`}static FromDiagonalPoints(e,t){let r=!1;t.x-e.x<0&&(r=!0);const i=r?t:e,n=r?e:t,o=n.x-i.x,s=n.y-i.y;return new oi(i.x,i.y,o,s)}}}),jc,EE,Tl,Or=F(()=>{Do(),An(),Nc(),Qh(),SE(),kE(),TE(),sa(),hs(),jc=2e3,EE=5,Tl=EE*4}),Sm,N0=F(()=>{Or(),Sm=class{constructor(){this._position=new Qe(0,0),this._scale=new Qe(1,1),this._pivot=new Qe(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new aa,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new oi(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new oi(0,0,1,1),this._filterRectangle=new oi(0,0,0,0)}renderWebGL(e){Ke.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}renderCanvas(e){Ke.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}updateTransform(){const e=this._parent?this._parent.getWorldTransform():aa.IDENTITY,t=this._worldTransform,r=Math.sin(this._rotation),i=Math.cos(this._rotation);t.a=i*this._scale.x,t.b=r*this._scale.x,t.c=-r*this._scale.y,t.d=i*this._scale.y,t.tx=this._position.x,t.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(t.tx-=this._pivot.x*t.a+this._pivot.y*t.c,t.ty-=this._pivot.x*t.b+this._pivot.y*t.d),t.multiply(e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}addShader(e){this._shaders.push(e)}removeShader(e){const t=this._shaders.indexOf(e);return t!==-1?(this._shaders.splice(t,1),!0):!1}removeShaderAt(e){return this._shaders[e]?(this._shaders.splice(e,1),!0):!1}getBounds(){return this._bounds.clone()}getPosition(){return this._position}setPosition(e,t){this._position.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getScale(){return this._scale}setScale(e,t){this._scale.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getPivot(){return this._pivot}setPivot(e,t){this._pivot.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getRotation(){return this._rotation}setRotation(e){this._rotation=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getAlpha(){return this._alpha}setAlpha(e){this._alpha=e}getWorldAlpha(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}getWorldTransform(){return this._worldTransform}getParent(){return this._parent}setParent(e){this._parent=e}getFilterRectangle(){return this._filterRectangle}setFilterRectangle(e){this._filterRectangle.copy(e)}isVisible(){return this._visible}setVisible(e){this._visible=e}}}),Hc,j0=F(()=>{Or(),N0(),Hc=class extends Sm{constructor(){super(),this._children=[],this._filters=[]}addFilter(e){this._filters.push(e)}removeFilter(e){const t=this._filters.indexOf(e);return t!==-1?(this._filters.splice(t,1),!0):!1}setFilters(e){this._filters=e}addChild(e){const t=e.getParent();t instanceof Hc&&t.removeChild(e),e.setParent(this),this._children.push(e)}prependChild(e){const t=e.getParent();t instanceof Hc&&t.removeChild(e),e.setParent(this),this._children.unshift(e)}hasChild(e){return this._children.indexOf(e)!==-1}removeChild(e){const t=this._children.indexOf(e);t!==-1?(this._children.splice(t,1),e.setParent(null)):Ke.info(this.constructor.name,"Tried to remove a child that does not exist")}clearChildren(){this._children=[]}renderWebGL(e){if(!this._visible)return;const t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),e.getCurrentObjectRenderer().start(),this._renderWebGL(e),this._children.forEach(r=>{r.renderWebGL(e)}),e.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&t.popFilters(),e.getCurrentObjectRenderer().start()}_renderWebGL(e){}renderCanvas(e){if(!this._visible)return;const t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),this._renderCanvas(e),this._children.forEach(r=>{r.renderCanvas(e)}),this._filters&&this._filters.length&&t.popFilters()}_renderCanvas(e){}updateTransform(){super.updateTransform(),this._children.forEach(e=>{e.updateTransform()})}getLocalBounds(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}getBounds(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}getChildren(){return this._children}getFilters(){return this._filters}dispose(){}}});function ZB(e,t,r,i,n,o){if(!(isNaN(o)||o<1)){o|=0;var s=e.data,a,l,c,h,f,d,p,v,g,m,y,_,b,w,S,C,D,E,I,M,k,R,$,H,j=o+o+1,V=i-1,J=n-1,ae=o+1,U=ae*(ae+1)/2,N=new DE,B,W=N;for(c=1;c<j;c++)W=W.next=new DE,c==ae&&(B=W);W.next=N;var q=null,xe=null;p=d=0;var Te=IE[o],Se=RE[o];for(l=0;l<n;l++){for(C=D=E=I=v=g=m=y=0,_=ae*(M=s[d]),b=ae*(k=s[d+1]),w=ae*(R=s[d+2]),S=ae*($=s[d+3]),v+=U*M,g+=U*k,m+=U*R,y+=U*$,W=N,c=0;c<ae;c++)W.r=M,W.g=k,W.b=R,W.a=$,W=W.next;for(c=1;c<ae;c++)h=d+((V<c?V:c)<<2),v+=(W.r=M=s[h])*(H=ae-c),g+=(W.g=k=s[h+1])*H,m+=(W.b=R=s[h+2])*H,y+=(W.a=$=s[h+3])*H,C+=M,D+=k,E+=R,I+=$,W=W.next;for(q=N,xe=B,a=0;a<i;a++)s[d+3]=$=y*Te>>Se,$!==0?($=255/$,s[d]=(v*Te>>Se)*$,s[d+1]=(g*Te>>Se)*$,s[d+2]=(m*Te>>Se)*$):s[d]=s[d+1]=s[d+2]=0,v-=_,g-=b,m-=w,y-=S,_-=q.r,b-=q.g,w-=q.b,S-=q.a,h=p+((h=a+o+1)<V?h:V)<<2,C+=q.r=s[h],D+=q.g=s[h+1],E+=q.b=s[h+2],I+=q.a=s[h+3],v+=C,g+=D,m+=E,y+=I,q=q.next,_+=M=xe.r,b+=k=xe.g,w+=R=xe.b,S+=$=xe.a,C-=M,D-=k,E-=R,I-=$,xe=xe.next,d+=4;p+=i}for(a=0;a<i;a++){for(D=E=I=C=g=m=y=v=0,d=a<<2,_=ae*(M=s[d]),b=ae*(k=s[d+1]),w=ae*(R=s[d+2]),S=ae*($=s[d+3]),v+=U*M,g+=U*k,m+=U*R,y+=U*$,W=N,c=0;c<ae;c++)W.r=M,W.g=k,W.b=R,W.a=$,W=W.next;for(f=i,c=1;c<=o;c++)d=f+a<<2,v+=(W.r=M=s[d])*(H=ae-c),g+=(W.g=k=s[d+1])*H,m+=(W.b=R=s[d+2])*H,y+=(W.a=$=s[d+3])*H,C+=M,D+=k,E+=R,I+=$,W=W.next,c<J&&(f+=i);for(d=a,q=N,xe=B,l=0;l<n;l++)h=d<<2,s[h+3]=$=y*Te>>Se,$>0?($=255/$,s[h]=v*Te>>Se,s[h+1]=g*Te>>Se,s[h+2]=m*Te>>Se):s[h]=s[h+1]=s[h+2]=0,v-=_,g-=b,m-=w,y-=S,_-=q.r,b-=q.g,w-=q.b,S-=q.a,h=a+((h=l+ae)<J?h:J)*i<<2,v+=C+=q.r=s[h],g+=D+=q.g=s[h+1],m+=E+=q.b=s[h+2],y+=I+=q.a=s[h+3],q=q.next,_+=M=xe.r,b+=k=xe.g,w+=R=xe.b,S+=$=xe.a,C-=M,D-=k,E-=R,I-=$,xe=xe.next,d+=i}}}function DE(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var IE,RE,JB=F(()=>{IE=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],RE=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]}),fs,Cm,FE=F(()=>{Nc(),fs=class{constructor(e=1,t=0,r=0,i=0,n=0,o=0,s=1,a=0,l=0,c=0,h=0,f=0,d=1,p=0,v=0,g=0,m=0,y=0,_=1,b=0){this.set(e,t,r,i,n,o,s,a,l,c,h,f,d,p,v,g,m,y,_,b)}set(e,t,r,i,n,o,s,a,l,c,h,f,d,p,v,g,m,y,_,b){this.a=e,this.b=t,this.c=r,this.d=i,this.e=n,this.f=o,this.g=s,this.h=a,this.i=l,this.j=c,this.k=h,this.l=f,this.m=d,this.n=p,this.o=v,this.p=g,this.q=m,this.r=y,this.s=_,this.t=b}reset(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}apply(e){const t=this.a*e.r+this.b*e.g+this.c*e.b+this.d*e.a+this.e,r=this.f*e.r+this.g*e.g+this.h*e.b+this.i*e.a+this.j,i=this.k*e.r+this.l*e.g+this.m*e.b+this.n*e.a+this.o,n=this.p*e.r+this.q*e.g+this.r*e.b+this.s*e.a+this.t;return new Pe(t,r,i,n)}multiply(e){let t,r,i,n,o,s,a,l,c,h,f,d,p,v,g,m,y,_,b,w;const S=e,C=this;return t=S.a*C.a+S.b*C.f+S.c*C.k+S.d*C.p,r=S.a*C.b+S.b*C.g+S.c*C.l+S.d*C.q,i=S.a*C.c+S.b*C.h+S.c*C.m+S.d*C.r,n=S.a*C.d+S.b*C.i+S.c*C.n+S.d*C.s,s=S.f*C.a+S.g*C.f+S.h*C.k+S.i*C.p,a=S.f*C.b+S.g*C.g+S.h*C.l+S.i*C.q,l=S.f*C.c+S.g*C.h+S.h*C.m+S.i*C.r,c=S.f*C.d+S.g*C.i+S.h*C.n+S.i*C.s,f=S.k*C.a+S.l*C.f+S.m*C.k+S.n*C.p,d=S.k*C.b+S.l*C.g+S.m*C.l+S.n*C.q,p=S.k*C.c+S.l*C.h+S.m*C.m+S.n*C.r,v=S.k*C.d+S.l*C.i+S.m*C.n+S.n*C.s,m=S.p*C.a+S.q*C.f+S.r*C.k+S.s*C.p,y=S.p*C.b+S.q*C.g+S.r*C.l+S.s*C.q,_=S.p*C.c+S.q*C.h+S.r*C.m+S.s*C.r,b=S.p*C.d+S.q*C.i+S.r*C.n+S.s*C.s,o=S.a*C.e+S.b*C.j+S.c*C.o+S.d*C.t+S.e,h=S.f*C.e+S.g*C.j+S.h*C.o+S.i*C.t+S.j,g=S.k*C.e+S.l*C.j+S.m*C.o+S.n*C.t+S.o,w=S.p*C.e+S.q*C.j+S.r*C.o+S.s*C.t+S.t,this.a=t,this.b=r,this.c=i,this.d=n,this.e=o,this.f=s,this.g=a,this.h=l,this.i=c,this.j=h,this.k=f,this.l=d,this.m=p,this.n=v,this.o=g,this.p=m,this.q=y,this.r=_,this.s=b,this.t=w,this}clone(){const e=new fs;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e}equals(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f&&this.g===e.g&&this.h===e.h&&this.i===e.i&&this.j===e.j&&this.k===e.k&&this.l===e.l&&this.m===e.m&&this.n===e.n&&this.o===e.o&&this.p===e.p&&this.q===e.q&&this.r===e.r&&this.s===e.s&&this.t===e.t}getOffsets(){return[this.e,this.j,this.o,this.t]}toString(){return`ColorMatrix( ${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e},
      ${this.f}, ${this.g}, ${this.h}, ${this.i}, ${this.j},
      ${this.k}, ${this.l}, ${this.m}, ${this.n}, ${this.o},
      ${this.p}, ${this.q}, ${this.r}, ${this.s}, ${this.t} )`}toArray(){return"abcdefghijklmnopqrst".split("").map(e=>this[e])}static get IDENTITY(){return new fs}static createBrightnessMatrix(e){const t=new fs;return t.e=e,t.j=e,t.o=e,t}static createContrastMatrix(e){const t=new fs,r=(1-e)/2;return t.a=t.g=t.m=e,t.e=t.j=t.o=r,t}static createSaturationMatrix(e=1){const t=new fs,r=1-e,i=.213*r,n=.715*r,o=.072*r;return t.a=i+e,t.b=n,t.c=o,t.f=i,t.g=n+e,t.h=o,t.k=i,t.l=n,t.m=o+e,t}static createExposureMatrix(e=0){const t=Math.pow(2,e);return new fs(t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0)}static createLinearMatrix(e=1,t=0){const r=new fs;return r.a=r.g=r.m=e,r.e=r.j=r.o=t,r}},Cm=fs}),Jh,rr,ed=F(()=>{An(),cs(),Nc(),Qh(),FE(),sa(),hs(),Jh=class extends oa{constructor(e={},t={}){super(),this.availableOptions=L(L({},Object.getPrototypeOf(this).availableOptions),t),this._onConfigurableUpdate=this._onConfigurableUpdate.bind(this),this._initOptions(e)}_buildConfigError(e){let t="";return this.constructor.name&&(t=`${this.constructor.name}: `),t+=e,new Error(t)}_onOptionsChange(){}validateSettings(){return new Promise((e,t)=>{for(const r in this.availableOptions)if(this.availableOptions[r].required&&typeof this._options[r]=="undefined")return t(this._buildConfigError(`Option \`${r}\` is required.`));e()})}_initOptions(e={}){this._options={};let t,r,i;const n=this;for(t in this.availableOptions){if(i=t.charAt(0).toUpperCase()+t.slice(1),r=this.availableOptions[t],["string","number","boolean","object","vector2","color","configurable","color-matrix","array","image","function","*"].indexOf(r.type)===-1)throw this._buildConfigError(`Unknown option type: \`${r.type}\``);if(function(a){n[`set${i}`]=function(l,c,h){n.setOption(a,l,c,h)},n[`get${i}`]=function(){return n.getOption(a)}}(t),r.type==="configurable"&&(this._options[t]=new Jh(void 0,r.structure||{}),this._options[t].on("update",this._onConfigurableUpdate)),!(t in e)||typeof e[t]=="undefined")if(typeof r.default!="undefined"){let s=r.default;typeof r.default=="function"&&(s=r.default()),this[`set${i}`](s,!1,!0)}else r.type!=="configurable"&&(this._options[t]=void 0)}for(t in e){if(typeof this.availableOptions[t]=="undefined")throw new Error(`Invalid option: ${t}`);typeof e[t]!="undefined"&&(i=t.charAt(0).toUpperCase()+t.slice(1),this[`set${i}`](e[t],!1,!0))}}set(e,t=!0){Object.keys(e).forEach(r=>{this.setOption(r,e[r],!1)}),this._onOptionsChange(),t&&this.emit("update",this,e)}getOption(e){return this._options[e]}hasOption(e){return!!this.availableOptions[e]}getOptionDefault(e){const t=this.availableOptions[e];if(!t)throw new Error(`Invalid option: ${e}`);return t.default}resetOptions(){this.set(this.getDefaultOptions())}getDefaultOptions(){const e={};for(const t in this.availableOptions){const r=this.availableOptions[t].default;typeof r!="undefined"&&(e[t]=r)}return e}getOptions(){return L({},this._options)}equals(e){const t=e.getOptions();return this.optionsEqual(t)}optionsEqual(e){for(const t in e){const r=e[t];if(!this._optionEquals(t,r))return!1}return!0}_optionEquals(e,t){if(typeof this.availableOptions[e]=="undefined")throw new Error(`Invalid option: ${e}`);const i=this.availableOptions[e].type,n=this._options[e];if(n===t)return!0;if(typeof t=="undefined"||typeof n=="undefined")return!1;switch(i){case"object":return typeof n.optionsEqual=="function"?n.optionsEqual(t._options):n===t;case"string":case"number":case"boolean":case"function":case"*":return n===t;case"vector2":return n.equals(t);case"color":case"color-matrix":return t.equals(n);case"configurable":return n.optionsEqual(t);case"array":return this._arrayOptionEquals(e,t);case"image":return n.src===t.src}}_arrayOptionEquals(e,t){const r=this._options[e];if(t.length!==r.length)return!1;let i=!0;for(let n=0;n<r.length;n++){const o=r[n],s=t[n];if(o instanceof Jh){if(typeof s=="undefined"||!o.optionsEqual(s)){i=!1;break}}else if(s!==o){i=!1;break}}return i}serializeOptions(e=Object.keys(this._options),t=!1){const r={};return e.forEach(i=>{if(typeof this.availableOptions[i]=="undefined")return Log.warn(`Trying to serialize a key that does not exist: ${i}`);this.availableOptions[i].serializable!==!1&&(r[i]=this.serializeOption(i,t))}),r}serializeOption(e,t=!1){const r=this.availableOptions[e],i=r.type,n=this._options[e];if(!n)return n;if(r.serializable===!1)throw new Error(`Option \`${e}\` is not serializable.`);switch(i){case"string":case"number":case"boolean":case"object":case"function":case"*":return n;case"vector2":return t?n.toObject():n.clone();case"color":case"color-matrix":return t?n.toArray():n.clone();case"configurable":return n.serializeOptions(void 0,t);case"array":return n.slice(0);case"image":return t?n.src:n}}setOption(e,t,r=!0,i=!1){const n=this.availableOptions[e];if(!n)throw new Error(`Invalid option: ${e}`);if(typeof n.setter!="undefined"&&(t=n.setter.call(this,t,i)),typeof n.validation!="undefined"&&n.validation(t),t===null||typeof t=="undefined"){if(n.required)throw this._buildConfigError(`Option \`${e}\` is required.`);this._options[e]=t}else switch(n.type){case"string":{if(typeof t!="string")throw this._buildConfigError(`Option \`${e}\` has to be a string.`);const{available:o}=n;if(typeof o!="undefined"&&o.indexOf(t)===-1)throw this._buildConfigError(`Invalid value for \`${e}\` (valid values are: ${n.available.join(", ")})`);this._options[e]=t;break}case"number":if(typeof t!="number")throw this._buildConfigError(`Option \`${e}\` has to be a number.`);this._options[e]=t;break;case"boolean":if(typeof t!="boolean")throw this._buildConfigError(`Option \`${e}\` has to be a boolean.`);this._options[e]=t;break;case"vector2":if(!(t instanceof Qe)&&!(typeof t=="object"&&"x"in t&&"y"in t))throw this._buildConfigError(`Option \`${e}\` has to be an instance of Vector2 or an Object holding x and y values.`);t instanceof Qe?this._options[e]=t.clone():this._options[e]=Qe.fromObject(t);break;case"color":if(!(t instanceof Pe))throw this._buildConfigError(`Option \`${e}\` has to be an instance of Color.`);this._options[e]=t;break;case"color-matrix":if(!(t instanceof Cm))throw this._buildConfigError(`Option \`${e}\` has to be an instance of ColorMatrix.`);this._options[e]=t.clone();break;case"function":if(typeof t!="function")throw this._buildConfigError(`Option \`${e}\` has to be a function.`);this._options[e]=t;break;case"object":case"*":this._options[e]=t;break;case"image":{const{Image:o}=zn;if(typeof t=="string"){const s=new o;nE(s)&&(s.crossOrigin=Ce.getCrossOriginValue(n.crossOrigin)),s.src=t,this._options[e]=s}else if(t instanceof o||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement)this._options[e]=t;else throw this._buildConfigError(`Option \`${e}\` has to be an Image, Canvas or String.`);break}case"configurable":t instanceof Jh?this._options[e]=t:this._options[e].set(t);break;case"array":if(!(t instanceof Array))throw this._buildConfigError(`Option \`${e}\` has to be an Array.`);this._options[e]=t.slice(0);break;default:throw this._buildConfigError(`Unknown option type: \`${n.type}\``)}r&&(this._onOptionsChange(),this.emit("update",this,{[e]:t}))}_onConfigurableUpdate(...e){this.emit("update",...e)}hasChanges(){const e=this.getDefaultOptions();return!this.optionsEqual(e)}},rr=Jh}),H0,OE=F(()=>{An(),Or(),Or(),H0=class{constructor(e,t,r,i={},n=[]){this._program=null,this._renderer=e,this._vertexSource=t,this._fragmentSource=r,this._uniforms=i,this._uniformLocations={},this._attributes=n,this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}_init(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}_onContextChange(){this._init()}setupBuffers(e,t){const r=this._renderer.getContext();r.bindBuffer(r.ARRAY_BUFFER,e),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t),r.vertexAttribPointer(this._attributeLocations.a_position,2,r.FLOAT,!1,Tl,0),r.vertexAttribPointer(this._attributeLocations.a_texCoord,2,r.FLOAT,!1,Tl,2*4),r.vertexAttribPointer(this._attributeLocations.a_color,4,r.UNSIGNED_BYTE,!0,Tl,4*4)}syncUniforms(){Object.keys(this._uniforms).forEach(e=>{this.syncUniform(e)})}syncUniform(e){const t=this._renderer.getContext(),r=this._uniforms[e],i=this._uniformLocations[e];switch(r.type){case"sampler2d":t.uniform1i(i,r.value);break;case"i":case"1i":t.uniform1i(i,r.value);break;case"2i":t.uniform2i(i,r.value[0],r.value[1]);break;case"3i":t.uniform3i(i,r.value[0],r.value[1],r.value[2]);break;case"4i":t.uniform4i(i,r.value[0],r.value[1],r.value[2],r.value[3]);break;case"f":case"1f":t.uniform1f(i,r.value);break;case"2f":t.uniform2f(i,r.value[0],r.value[1]);break;case"3f":t.uniform3f(i,r.value[0],r.value[1],r.value[2]);break;case"4f":t.uniform4f(i,r.value[0],r.value[1],r.value[2],r.value[3]);break;case"2fv":t.uniform2fv(i,r.value);break;case"mat3":case"mat3fv":t.uniformMatrix3fv(i,!1,r.value);break;case"mat4":t.uniformMatrix4fv(i,!1,r.value);break;default:Ke.warn(this.constructor.name,`Unknown uniform type: ${r.type}`)}}_cacheAttributeLocations(){const e=this._renderer.getContext();this._attributes.forEach(t=>{this._program&&(this._attributeLocations[t]=e.getAttribLocation(this._program,t))})}_cacheUniformLocations(){const e=this._renderer.getContext();Object.keys(this._uniforms).forEach(r=>{if(this._program){const i=e.getUniformLocation(this._program,r);i&&(this._uniformLocations[r]=i)}})}_addPrecisionToSource(e){const t=this._renderer.getMaxFloatPrecision();let r="mediump";return Ce.isMobile()&&t==="highp"&&(r="highp"),`precision ${r} float;
${e}`}_compile(){const e=this._renderer.getContext(),t=this._compileShader(e.VERTEX_SHADER,this._vertexSource);this._vertexShader=t;const r=this._addPrecisionToSource(this._fragmentSource),i=this._compileShader(e.FRAGMENT_SHADER,r);this._fragmentShader=i;const n=e.createProgram();if(!n)return;if(e.attachShader(n,t),e.attachShader(n,i),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS))this._program=n;else{let s=e.getProgramInfoLog(n);e.isContextLost()&&(s="WebGL context lost"),e.deleteProgram(n),Ke.error(this.constructor.name,`WebGL program linking error: ${s}`)}}_compileShader(e,t){const r=this._renderer.getContext(),i=r.createShader(e);if(!i)throw new Error(`Cannot create shared: ${JSON.stringify(e)}`);if(r.shaderSource(i,t),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS)){let o=r.getShaderInfoLog(i);r.isContextLost()&&(o="WebGL context lost"),r.deleteShader(i),Ke.error(this.constructor.name,`WebGL shader compilation error: ${o}`)}return i}setUniform(e,t,r=!1){this._uniforms[e].value=t,r&&this.syncUniform(e)}setUniforms(e,t=!1){Object.keys(e).forEach(r=>{this._uniforms[r].value=e[r],t&&this.syncUniform(r)})}getUniforms(){return this._uniforms}getAttributes(){return this._attributes}getAttributeLocations(){return this._attributeLocations}getProgram(){return this._program}dispose(){const e=this._renderer.getContext();e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._renderer.off("context",this._onContextChange)}}}),ME,e9=F(()=>{ME=`uniform sampler2D u_image;
varying vec2 v_texCoord;
varying vec4 v_color;

void main() {
  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;
}
`}),PE,t9=F(()=>{PE=`attribute vec2 a_position;
attribute vec2 a_texCoord;
attribute vec4 a_color;
varying vec2 v_texCoord;
varying vec4 v_color;
uniform mat3 u_projMatrix;

void main() {
  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);
  v_texCoord = a_texCoord;
  v_color = vec4(a_color.rgb * a_color.a, a_color.a);
}
`}),AE,ps,zE,r9=F(()=>{An(),Or(),OE(),e9(),t9(),AE=new aa,ps={vertexSource:PE,fragmentSource:ME,uniforms:{u_image:{type:"sampler2d",value:0},u_projMatrix:{type:"mat3",value:AE.toArray()}},attributes:["a_position","a_texCoord","a_color"]},zE=class extends H0{constructor(e,t=ps.vertexSource,r=ps.fragmentSource){super(e,t,r,ps.uniforms,ps.attributes)}}}),$E=F(()=>{OE(),r9()}),Wc,td=F(()=>{Eo(),JB(),An(),ed(),Or(),$E(),cs(),Wc=class extends rr{constructor(e={},t={}){super(e,t),this._initOptions(e)}_initOptions(e={}){this._shaders=[],this._availableUniforms=ps.uniforms,this._attributes=ps.attributes,this._vertexSource=ps.vertexSource,this._fragmentSource=ps.fragmentSource,this._initUniforms(),super._initOptions(e)}_initUniforms(){this._uniforms={};for(const e in this._availableUniforms){const t=this._availableUniforms[e];this._uniforms[e]={type:t.type,value:t.default||null}}for(const e in this.availableOptions){const t=this.availableOptions[e];t.uniformType?this._uniforms[`u_${e}`]={type:t.uniformType,value:t.default||null}:Ke.trace(this.constructor.name,`Option \`${e}\` is missing a \`uniformType\`!`)}}setOption(e,t,r=!0){super.setOption(e,t,r);let i=t;const n=this.availableOptions[e];if(!n.uniformType)return;const o=`u_${e}`;switch(n.type){case"color":n.uniformType==="4f"?i=t.toGLColor():n.uniformType==="3f"&&(i=t.toRGBGLColor());break;case"vector2":i=[t.x,t.y];break;case"color-matrix":{i=[t.a,t.b,t.c,t.d,t.f,t.g,t.h,t.i,t.k,t.l,t.m,t.n,t.p,t.q,t.r,t.s];const s=[t.e,t.j,t.o,t.t];this._uniforms[`${o}_vec`]={value:s,type:"4f"}}}this.setUniform(o,i)}setUniform(e,t,r=!1){this._uniforms[e].value=t}setUniforms(e,t=!1){Object.entries(e).forEach(([r,i])=>{this._uniforms[r].value=i,t&&this.syncUniform(r)})}syncUniform(e){this._shaders.forEach(t=>{t.syncUniform(e)})}syncUniforms(){this._shaders.forEach(e=>{e.syncUniforms()})}getShaderForRenderer(e){const{id:t}=e;this._shaders||(this._shaders=[]);let r=this._shaders[t];return r||(r=new H0(e,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[t]=r),r}apply(e,t,r,i=!1){mm(e)?this._applyWebGL(e,t,r,i):this._applyCanvas(e,t,r,i)}_applyWebGL(e,t,r,i=!1){const n=e.getContext(),o=this.getShaderForRenderer(e);e.setRenderTarget(r),i&&r.clear(),e.setShader(o);const s=e.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",s),o.syncUniforms(),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=r.getContext();Ke.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),o.clearRect(0,0,n.width,n.height),o.drawImage(n,0,0)}dispose(){this._shaders.forEach(e=>e.dispose()),this._shaders=[]}_blurImage(e,t,r){const n=e.getCanvas(),o=Math.min(1,10/(r*Math.min(n.width,n.height))),s=Ce.createCanvas();s.width=Math.round(n.width*o),s.height=Math.round(n.height*o);const a=s.getContext("2d");a.drawImage(n,0,0,n.width,n.height,0,0,s.width,s.height);const l=r*Math.min(s.width,s.height),c=a.getImageData(0,0,s.width,s.height);ZB(c,0,0,s.width,s.height,l),a.putImageData(c,0,0),t.getContext().drawImage(s,0,0,s.width,s.height,0,0,n.width,n.height),Nr(s)}}}),BE,i9=F(()=>{BE=`uniform sampler2D u_image;
varying vec2 v_texCoord;
varying vec4 v_color;

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);
}
`}),W0,n9=F(()=>{td(),i9(),W0=class extends Wc{constructor(){super(),this._fragmentSource=BE}}}),LE,o9=F(()=>{LE=`uniform sampler2D u_image;
varying vec2 v_texCoord;
uniform vec4 u_color;

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;
}
`}),UE,NE,V0,jE,s9=F(()=>{Or(),td(),o9(),{OptionType:UE,UniformType:NE}=Sl,V0=class extends Wc{constructor(...e){super(...e),this._fragmentSource=LE}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),{color:a}=this._options,l=o.getImageData(0,0,n.width,n.height),c=s.getImageData(0,0,n.width,n.height),h=n.width*n.height,f=new Pe,d=new Pe;for(let p=0;p<h*4;p+=4){f.set(l.data[p]/255,l.data[p+1]/255,l.data[p+2]/255,l.data[p+3]/255),d.set(c.data[p]/255,c.data[p+1]/255,c.data[p+2]/255,c.data[p+3]/255);const v=d.r+f.a*(f.r-d.r);c.data[p]=(v+f.a*(a.r-v))*255;const g=d.g+f.a*(f.g-d.g);c.data[p+1]=(g+f.a*(a.g-g))*255;const m=d.b+f.a*(f.b-d.b);c.data[p+2]=(m+f.a*(a.b-m))*255}s.putImageData(c,0,0)}},V0.prototype.availableOptions={color:{type:UE.COLOR,default:Pe.WHITE,uniformType:NE.FLOAT4}},jE=V0}),HE,a9=F(()=>{HE=`uniform sampler2D u_image;
varying vec2 v_texCoord;
uniform vec4 u_color;
uniform int u_mode;
vec3 W = vec3(0.2125, 0.7154, 0.0721);
const float EPSILON = 0.0000001;
void main() {
    vec4 color = texture2D(u_image, v_texCoord); // Is premultiplied.
    color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha.
    vec4 newColor;
    if (u_mode == 0) {
        newColor = vec4(color.rgb, 1.0); // We use alpha 1.0 becaue color is not premultiplied.
        newColor *= color.a; // Premultiply the result
    } else if (u_mode == 1) {
        newColor = vec4(u_color.rgb, 1.0); // Use alpha 1.0 because it is not premultiplied.
        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.
    } else if (u_mode == 2) {
        float luminance = dot(color.rgb, W); // Convert to color to gray value.
        newColor = vec4(vec3(luminance) * u_color.rgb, 1.0); // Colorize and with alpha 1.0 because it is not premultiplied.
        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.
    }
    gl_FragColor = newColor;
}`}),G0,q0,El,WE,l9=F(()=>{Or(),td(),a9(),{OptionType:G0,UniformType:q0}=Sl,El=class extends Wc{constructor(...e){super(...e),this._fragmentSource=HE}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),{mode:l,color:c}=this._options,{r:h,g:f,b:d,a:p}=c,v=[.2125,.7154,.0721];switch(l){case El.MODES.SOLID:for(let g=0;g<n.width*n.height;g++){const m=g*4;a.data[m]+=(h*255-a.data[m])*p,a.data[m+1]+=(f*255-a.data[m+1])*p,a.data[m+2]+=(d*255-a.data[m+2])*p}break;case El.MODES.COLORIZED:for(let g=0;g<n.width*n.height;g++){const m=g*4,y=a.data[m]/255*v[0]+a.data[m+1]/255*v[1]+a.data[m+2]/255*v[2],_=new Pe(y*h,y*f,y*d);a.data[m]+=(_.r*255-a.data[m])*p,a.data[m+1]+=(_.g*255-a.data[m+1])*p,a.data[m+2]+=(_.b*255-a.data[m+2])*p}break}s.putImageData(a,0,0)}},El.MODES={NONE:0,SOLID:1,COLORIZED:2},El.prototype.availableOptions={color:{type:G0.COLOR,default:Pe.WHITE,uniformType:q0.FLOAT4},mode:{type:G0.NUMBER,default:El.MODES.NONE,uniformType:q0.INT}},WE=El}),VE,c9=F(()=>{VE=`uniform sampler2D u_image;
varying vec2 v_texCoord;
uniform sampler2D u_overlayImage;
uniform int u_blendMode;
uniform float u_alpha;

const float EPSILON = 0.000001;

vec4 overlay(vec4 a, vec4 b) {
    vec3 result = mix(
          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),
          2.0 * a.rgb * b.rgb,
          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)
      );
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 hardLight(vec4 b, vec4 a) {
    vec3 result = mix(
          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),
          2.0 * a.rgb * b.rgb,
          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)
      );
    return mix(b, vec4(result, b.a), u_alpha * a.a);
}

vec4 softLight(vec4 a, vec4 b) {
    vec3 result = mix(
          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),
          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),
          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)
      );
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 multiply(vec4 a, vec4 b) {
    vec3 result = a.rgb * b.rgb;
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 darken(vec4 a, vec4 b) {
    vec3 result = min(a.rgb, b.rgb);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 lighten(vec4 a, vec4 b) {
    vec3 result = max(a.rgb, b.rgb);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 screen(vec4 a, vec4 b) {
    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 colorBurn(vec4 a, vec4 b) {
    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);
    return mix(a, vec4(result, a.a), u_alpha * b.a);
}

vec4 normal(vec4 a, vec4 b) {
    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);
}

void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);

  vec4 resultColor;
  if (u_blendMode == 0) {
    resultColor = normal(color, overlayColor);
  } else if (u_blendMode == 1) {
    resultColor = overlay(color, overlayColor);
  } else if (u_blendMode == 2) {
    resultColor = hardLight(color, overlayColor);
  } else if (u_blendMode == 3) {
    resultColor = softLight(color, overlayColor);
  } else if (u_blendMode == 4) {
    resultColor = multiply(color, overlayColor);
  } else if (u_blendMode == 5) {
    resultColor = darken(color, overlayColor);
  } else if (u_blendMode == 6) {
    resultColor = lighten(color, overlayColor);
  } else if (u_blendMode == 7) {
    resultColor = screen(color, overlayColor);
  } else if (u_blendMode == 8) {
    resultColor = colorBurn(color, overlayColor);
  }
  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);
}
`}),rd,km,Tm,en,GE,u9=F(()=>{Or(),td(),c9(),{OptionType:rd,UniformType:km}=Sl,Tm=1e-6,en=class extends Wc{constructor(...e){super(...e),this._fragmentSource=VE,this._lastImage=null}_applyCanvas(e,t,r,i=!1){const n=this._options.overlayTexture.getRenderTarget().getContext(),o=t.getCanvas(),s=t.getContext(),a=r.getContext(),l=s.getImageData(0,0,o.width,o.height),c=n.getImageData(0,0,o.width,o.height),{blendMode:h,alpha:f}=this._options,d=new Pe,p=new Pe,v=new Pe;for(let g=0;g<o.width*o.height*4;g+=4){d.set(l.data[g]/255,l.data[g+1]/255,l.data[g+2]/255,l.data[g+3]/255),p.set(c.data[g]/255,c.data[g+1]/255,c.data[g+2]/255,c.data[g+3]/255);let m,y,_,b,w,S,C,D,E;switch(h){case en.BLEND_MODES.NORMAL:v.set(d.r+p.a*f*(p.r-d.r),d.g+p.a*f*(p.g-d.g),d.b+p.a*f*(p.b-d.b),d.a);break;case en.BLEND_MODES.OVERLAY:m=1-2*(1-d.r)*(1-p.r),y=2*d.r*p.r,_=m+(d.r<.5?1:0)*(y-m),b=1-2*(1-d.g)*(1-p.g),w=2*d.g*p.g,S=b+(d.g<.5?1:0)*(w-b),C=1-2*(1-d.b)*(1-p.b),D=2*d.b*p.b,E=C+(d.b<.5?1:0)*(D-C),v.set(d.r+p.a*f*(_-d.r),d.g+p.a*f*(S-d.g),d.b+p.a*f*(E-d.b),d.a);break;case en.BLEND_MODES.HARD_LIGHT:m=1-2*(1-p.r)*(1-d.r),y=2*p.r*d.r,_=m+(p.r<.5?1:0)*(y-m),b=1-2*(1-p.g)*(1-d.g),w=2*p.g*d.g,S=b+(p.g<.5?1:0)*(w-b),C=1-2*(1-p.b)*(1-d.b),D=2*p.b*d.b,E=C+(p.b<.5?1:0)*(D-C),v.set(d.r+p.a*f*(_-d.r),d.g+p.a*f*(S-d.g),d.b+p.a*f*(E-d.b),d.a);break;case en.BLEND_MODES.SOFT_LIGHT:m=2*d.r*(1-p.r)+(2*p.r-1)*Math.sqrt(d.r),y=2*d.r*p.r+d.r*d.r*(1-2*p.r),_=m+(p.r<.5?1:0)*(y-m),b=2*d.g*(1-p.g)+(2*p.g-1)*Math.sqrt(d.g),w=2*d.g*p.g+d.g*d.g*(1-2*p.g),S=b+(p.g<.5?1:0)*(w-b),C=2*d.b*(1-p.b)+(2*p.b-1)*Math.sqrt(d.b),D=2*d.b*p.b+d.b*d.b*(1-2*p.b),E=C+(p.b<.5?1:0)*(D-C),v.set(d.r+p.a*f*(_-d.r),d.g+p.a*f*(S-d.g),d.b+p.a*f*(E-d.b),d.a);break;case en.BLEND_MODES.MULTIPLY:_=d.r*p.r,S=d.g*p.g,E=d.b*p.b,v.set(d.r+p.a*f*(_-d.r),d.g+p.a*f*(S-d.g),d.b+p.a*f*(E-d.b),d.a);break;case en.BLEND_MODES.DARKEN:_=Math.min(d.r,p.r),S=Math.min(d.g,p.g),E=Math.min(d.b,p.b),v.set(d.r+p.a*f*(_-d.r),d.g+p.a*f*(S-d.g),d.b+p.a*f*(E-d.b),d.a);break;case en.BLEND_MODES.LIGHTEN:_=Math.max(d.r,p.r),S=Math.max(d.g,p.g),E=Math.max(d.b,p.b),v.set(d.r+p.a*f*(_-d.r),d.g+p.a*f*(S-d.g),d.b+p.a*f*(E-d.b),d.a);break;case en.BLEND_MODES.SCREEN:_=1-(1-d.r)*(1-p.r),S=1-(1-d.g)*(1-p.g),E=1-(1-d.b)*(1-p.b),v.set(d.r+p.a*f*(_-d.r),d.g+p.a*f*(S-d.g),d.b+p.a*f*(E-d.b),d.a);break;case en.BLEND_MODES.COLOR_BURN:_=Math.max(0,Math.min(1,1-(1-d.r)/Math.max(p.r,Tm))),S=Math.max(0,Math.min(1,1-(1-d.g)/Math.max(p.g,Tm))),E=Math.max(0,Math.min(1,1-(1-d.b)/Math.max(p.b,Tm))),v.set(d.r+p.a*f*(_-d.r),d.g+p.a*f*(S-d.g),d.b+p.a*f*(E-d.b),d.a);break}l.data[g]=v.r*255,l.data[g+1]=v.g*255,l.data[g+2]=v.b*255,l.data[g+3]=v.a*255}a.putImageData(l,0,0)}},en.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},en.prototype.availableOptions={blendMode:{type:rd.NUMBER,default:en.BLEND_MODES.NORMAL,uniformType:km.INT},overlayImage:{type:rd.NUMBER,required:!0,uniformType:km.SAMPLER2D},overlayTexture:{type:rd.OBJECT,required:!0},alpha:{type:rd.NUMBER,default:1,uniformType:km.FLOAT}},GE=en}),qE={};_r(qE,{ColorOverlayFilter:()=>jE,OverlayFilter:()=>GE,TintFilter:()=>WE,UnpremultiplyFilter:()=>W0});var XE=F(()=>{n9(),s9(),l9(),u9()}),X0,Vc,Vr,id=F(()=>{Or(),cs(),X0={[1]:"LINEAR",[0]:"NEAREST",[2]:"LINEAR_MIPMAP_NEAREST",[3]:"LINEAR_MIPMAP_LINEAR"},Vc=class extends oa{constructor(e){super(),this._renderers=[],this._glTextures={},this._dirty=!0,this._mipMapping=!1,this._glUnit=0,this._magFilter=Vc.DefaultMagFilter,this._minFilter=Vc.DefaultMinFilter,this._repeatX=0,this._repeatY=0,this._pixelRatio=1,this._loaded=!1,this._frame=new oi(0,0,100,100),this._onSourceLoaded=this._onSourceLoaded.bind(this),this._source=e,this._loadSource()}resizeTo(e){this._frame.width===e.x&&this._frame.height===e.y||(this._frame.width=e.x,this._frame.height=e.y,this._dirty=!0)}_loadSource(){const e=this._source;if(!!e){if(zn.isCanvas(e))return this._onSourceLoaded();if(e.complete)return this._onSourceLoaded();e.addEventListener&&e.addEventListener("load",this._onSourceLoaded)}}_onSourceLoaded(){this._loaded=!0,this.emit("loaded"),this.update()}_updateGLFilters(){if(!this._source)return;const e=new Qe(this._source.width,this._source.height);Ce.isPowerOfTwo(e)?(Ke.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=Vc.TrilinearFilter,this._mipMapping=!0):(this._minFilter=Vc.LinearFilter,this._mipMapping=!1)}update(){!this._source||((this._frame.width!==this._source.width||this._frame.height!==this._source.height)&&(this._frame=new oi(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update"))}getRenderers(){return[...this._renderers]}getGLFilter(e,t){switch(t){case"min":return e[X0[this._minFilter]];case"mag":return e[X0[this._magFilter]]}}isLoaded(){return this._loaded}setLoaded(e){this._loaded=e}getSource(){return this._source}setSource(e){this._source=e}getGLTextureForRenderer(e){return this._glTextures[e.id]}setGLTextureForRenderer(e,t){this._renderers[t.id]=t,this._glTextures[t.id]=e}getFrame(){return this._frame}setFrame(e){this._frame=e}getDimensions(){return new Qe(this._frame.width,this._frame.height)}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e}getGLUnit(){return this._glUnit}setGLUnit(e){this._glUnit=e}setMinFilter(e){this._minFilter=e}getMinFilter(){return this._minFilter}setMagFilter(e){this._magFilter=e}getMagFilter(){return this._magFilter}setRepeatX(e){this._repeatX=e}getRepeatX(){return this._repeatX}setRepeatY(e){this._repeatY=e}getRepeatY(){return this._repeatY}getGLRepeat(e,t){switch(t==="x"?this.getRepeatX():this.getRepeatY()){case 0:return e.CLAMP_TO_EDGE;case 1:return e.REPEAT;case 2:return e.MIRRORED_REPEAT;default:return 0}}isDirty(){return this._dirty}setDirty(e){this._dirty=e}disposeGLTextures(){this._renderers.forEach(e=>{mm(e)&&this.disposeGLTexturesForRenderer(e)})}disposeGLTexturesForRenderer(e){if(!this._glTextures[e.id])return;e.getContext().deleteTexture(this._glTextures[e.id]),delete this._glTextures[e.id],this._renderers[e.id]||delete this._renderers[e.id]}isMipMappingEnabled(){return this._mipMapping}setMipMappingEnabled(e){this._mipMapping=e}dispose(){this.disposeGLTextures(),this._source=void 0}},Vr=Vc,Vr.NearestFilter=0,Vr.LinearFilter=1,Vr.BilinearFilter=2,Vr.TrilinearFilter=3,Vr.DefaultMagFilter=0,Vr.DefaultMinFilter=1,Vr.Repeat=1,Vr._id=0}),nd,Em=F(()=>{Or(),id(),cs(),nd=class{constructor(e,t,r,i=zn.createCanvas(),n){this._width=e,this._height=t,this._pixelRatio=r,this._baseTexture=new Vr,this._canvas=i;const o=n||this._canvas.getContext("2d");if(!o)throw new Error("Cannot get canvas context");this._context=o,this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filters:[]}]}clear(){const e=this._context;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}resizeTo(e){this._baseTexture.resizeTo(e),this._width!==e.x&&(this._width=e.x,this._canvas.width=this._width*this._pixelRatio),this._height!==e.y&&(this._height=e.y,this._canvas.height=this._height*this._pixelRatio)}getCanvas(){return this._canvas}getContext(){return this._context}getFilterStack(){return this._filterStack}getWidth(){return this._width}getHeight(){return this._height}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e}getDimensions(){return new Qe(this._width,this._height)}getBaseTexture(){return this._baseTexture}dispose(){delete this._canvas,delete this._context,this._baseTexture.dispose()}}}),Dm,Y0=F(()=>{Or(),Em(),Dm=class{constructor(e){this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._textures=[],this._textureFrame=new oi(0,0,e.getWidth(),e.getHeight())}resizeTo(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._textures.forEach(t=>t.resizeTo(e))}pushFilters(e,t){this._currentFrame=e.getBounds();const r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),this._filterStack.push({renderTarget:r,filters:t}),r.clear()}popFilters(){const e=this._filterStack.pop();if(!e)return;const{filters:t,renderTarget:r}=e,i=this._filterStack[this._filterStack.length-1],n=r,o=i.renderTarget;return t.length===1?(t[0].apply(this._renderer,n,o),this._textures.push(n)):this._applyFilters(t,n,o),t}_applyFilters(e,t,r){let i=t,n=this._getOrCreateRenderTarget(!0);const o=e[e.length-1];e.forEach(s=>{if(s===o)s.apply(this._renderer,i,r);else{s.apply(this._renderer,i,n);const l=i;i=n,n=l}}),this._textures.push(i),this._textures.push(n)}_getOrCreateRenderTarget(e=!1){let t=this._textures.pop();return t||(t=new nd(this._textureFrame.width,this._textureFrame.height,1)),e&&t.clear(),t}setFilterStack(e){this._filterStack=e}dispose(){}}}),Im=T((e,t)=>{(function(){var r,i,n,o,s,a;typeof performance!="undefined"&&performance!==null&&performance.now?t.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(t.exports=function(){return(r()-s)/1e6},i=process.hrtime,r=function(){var l;return l=i(),l[0]*1e9+l[1]},o=r(),a=process.uptime()*1e9,s=o-a):Date.now?(t.exports=function(){return Date.now()-n},n=Date.now()):(t.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(e)}),Q0,YE,K0,QE=F(()=>{Or(),Q0=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Im(),YE=class{constructor(e){this._context=e,this._tracking=!1;const t=this;for(const r in e)typeof e[r]=="function"?this[r]=function(...n){const o=e[r];if(!t._tracking)return o.apply(e,n);const s=Q0(),a=o.apply(e,n),l=Q0()-s,c={functionName:r,arguments:n,duration:l};return t._trackedCalls.push(c),a}:this._makePropertyWrapper(r)}_makePropertyWrapper(e){if(["_context","_trackedCalls","_tracking"].indexOf(e)!==-1)return;const r=this._context;this.__defineGetter__(e,()=>r[e]),this.__defineSetter__(e,i=>{r[e]=i})}startFrame(){this._tracking=!0,this._trackedCalls=[]}endFrame(){const e="Rendering";Ke.log(e,"Frame rendering results:"),Ke.log(e,`Context calls: ${this._trackedCalls.length}`);const t={};this._trackedCalls.forEach(({functionName:i,duration:n})=>{t[i]=t[i]||{totalDuration:0,calls:0},t[i].totalDuration+=n,t[i].calls++});let r=[];for(const i in t){const n=t[i];n.averageDuration=n.totalDuration/n.calls,r.push({functionName:i,data:n})}r.sort((i,n)=>n.data.totalDuration-i.data.totalDuration),r=r.slice(0,3),r.forEach(i=>{Ke.log(e,`${i.functionName}: ${i.data.calls} calls, ${i.data.totalDuration.toFixed(2)}ms`)})}},K0=YE}),Z0,KE=F(()=>{Or(),Z0=class extends oa{constructor(e=800,t=600,r){super(),this._maxTextureSize=null,this._options=ge(L({debug:!1,transparent:!1,clearColor:Pe.TRANSPARENT},r),{pixelRatio:1}),this.setMaxListeners(0),this._width=e,this._height=t,this._dimensions=new Qe(this._width,this._height),this._maxTextureSize=null,this._pixelRatio=this._options.pixelRatio,this._canvas=this._options.canvas,this._clearColor=this._options.transparent?Pe.TRANSPARENT:this._options.clearColor||Pe.BLACK}setCanvas(e){const t=this._canvas;this._canvas=e,t!==e&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new Qe(this._width,this._height))}getCanvas(){return this._canvas}_onBeforeContext(){}resizeTo(e,t=!0){this._width=e.x*this._pixelRatio,this._height=e.y*this._pixelRatio,t&&this._canvas&&(this._canvas.width=this._width,this._canvas.height=this._height,"style"in this._canvas&&(this._canvas.style.width=`${this._width/this._pixelRatio}px`,this._canvas.style.height=`${this._height/this._pixelRatio}px`)),this._dimensions=e.clone()}_createContext(){Ke.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}_setupContext(){Ke.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}render(e){Ke.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}getMaxDimensions(){return null}getContext(){return this._context}getWidth(){return this._dimensions.x}getHeight(){return this._dimensions.y}getDimensions(){return this._dimensions}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(e)}getMaxTextureSize(){return this._maxTextureSize}getFilterManager(){return this._filterManager}setFilterManager(e){this._filterManager=e}setClearColor(e){this._clearColor=e}getClearColor(){return this._clearColor}isOfType(e){return this._type===e}dispose(){Ke.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}}),J0,e1,od,h9=F(()=>{Eo(),N0(),Or(),Y0(),Em(),QE(),cs(),KE(),{RendererType:J0}=Sl,e1=class extends Z0{constructor(e=800,t=600,r){super(e,t,L({},r)),this.id=0,this.setCanvas((r==null?void 0:r.canvas)||zn.createCanvas()),this._type=J0.CANVAS}_createContext(){let t=this._canvas.getContext("2d");if(!!t)return this._options.debug&&(t=new K0(t)),this.id=e1.contextId++,this._context=t,this.emit("context",t),t}_setupContext(){const e=this._context;"imageSmoothingEnabled"in e?e.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(t=>{e[t]&&(e[t]=!0)}),this._defaultRenderTarget=new nd(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new Dm(this)}render(e){const t=this._renderTarget.getContext(),r=e.getParent();e.setParent(new Sm),e.updateTransform(),r&&e.setParent(r),t.setTransform(1,0,0,1,0,0),t.globalAlpha=1;const{width:i,height:n}=this._canvas;t.clearRect(0,0,i,n),this._clearColor.a!==0&&(t.save(),t.fillStyle=this._clearColor.toRGBA(),t.fillRect(0,0,i,n),t.restore()),this.renderDisplayObject(e,this._renderTarget)}renderDisplayObject(e,t){const r=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack()),this.setRenderTarget(t),e.renderCanvas(this),this.setRenderTarget(r)}getCurrentRenderTarget(){return this._renderTarget}setRenderTarget(e){this._renderTarget=e}getContext(){return this._renderTarget.getContext()}dispose(){Nr(this._canvas),this._filterManager.dispose()}},od=e1,od.contextId=0,od.type=J0.CANVAS}),ZE,d9=F(()=>{ZE=e=>{if(typeof window!="undefined"){const{WebGLDebugUtils:t}=window;if(t){const r=(i,n)=>{console.error(`gl.${i}(${t.glFunctionArgsToString(i,n)})`)};e=t.makeDebugContext(e,null,r)}}return e}}),JE,f9=F(()=>{JE=class{constructor(e){this.vertices=new Float32Array([0,0,100,0,100,100,0,100]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.vertexBuffer=null,this.indexBuffer=null,this.gl=e,this.initBuffers(),this.uploadBuffers()}map(e,t){const{x:r,y:i}=t;this.uvs[2]=t.width/e.width,this.uvs[4]=this.uvs[2],this.uvs[5]=t.height/e.height,this.uvs[7]=this.uvs[5],this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+t.width,this.vertices[3]=i,this.vertices[4]=this.vertices[2],this.vertices[5]=i+t.height,this.vertices[6]=r,this.vertices[7]=this.vertices[5],this.uploadBuffers()}getVertexBuffer(){return this.vertexBuffer}getIndexBuffer(){return this.indexBuffer}dispose(){this.cleanBuffer()}initBuffers(){const{gl:e}=this;this.cleanBuffer(),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,(8+8+16)*4,e.DYNAMIC_DRAW),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)}uploadBuffers(){const{gl:e}=this;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.bufferSubData(e.ARRAY_BUFFER,8*4,this.uvs),e.bufferSubData(e.ARRAY_BUFFER,(8+8)*4,this.colors)}cleanBuffer(){const{gl:e}=this;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)}}}),sd,Rm=F(()=>{Or(),id(),sd=class{constructor(e,t,r,i,n=!1){this._renderer=e,this._gl=e.getContext(),this._width=t,this._height=r,this._frame=null,this._pixelRatio=i,this._projectionMatrix=new aa,this._mipMapping=!1,this._baseTexture=new Vr;const o=this._baseTexture.getFrame();o.width=t,o.height=r,this._baseTexture.setPixelRatio(i),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=n,this._filterStack=[{renderTarget:this,filters:[]}],n||this._initFrameBuffer()}resizeTo(e){this._width=e.x|0,this._height=e.y|0,this._baseTexture.resizeTo(e),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}_getMinFilter(){let e=Vr.DefaultMinFilter;return this._mipMapping&&(e=Vr.TrilinearFilter),e}_getMagFilter(){return Vr.DefaultMagFilter}_resizeTexture(){const e=this._gl,t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this._renderer._options.debug&&Kh.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e);const i=new Qe(this._width,this._height);Ce.isPowerOfTwo(i)?(Ke.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}activate(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),e.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),e.disable(e.STENCIL_TEST)}clear(e=Pe.TRANSPARENT){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._renderer._options.debug&&Kh.checkFramebufferStatus("WebGLRenderTarget#clear",t),t.clearColor.apply(t,e.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}_calculateProjectionMatrix(){const e=this._projectionMatrix;e.reset();const t=this._frame||new oi(0,0,this._width,this._height),{x:r,y:i}=t;this._isRoot?(e.a=1/this._width*2,e.d=-1/this._height*2,e.tx=-1-r*e.a,e.ty=1-i*e.d):(e.a=1/this._width*2,e.d=1/this._height*2,e.tx=-1-r*e.a,e.ty=-1-i*e.d)}_initFrameBuffer(){const e=this._gl;this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._framebuffer=e.createFramebuffer(),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new Qe(this._width,this._height)),this._renderer._options.debug&&Kh.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e)}getProjectionMatrix(){return this._projectionMatrix}getTexture(){return this._texture}getFrame(){return this._frame}setFrame(e){this._frame=e}getFilterStack(){return this._filterStack}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e,this._isRoot||this._resizeTexture()}getBaseTexture(){return this._baseTexture}dispose(){const e=this._gl;this._baseTexture.dispose(),this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null)}}}),t1,eD=F(()=>{XE(),Or(),f9(),cs(),Rm(),t1=class{constructor(e){this._renderer=e,this._filterStack=[],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new oi(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}resizeTo(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._renderTargets.forEach(t=>t.resizeTo(e))}getFilterStack(){return this._filterStack}setFilterStack(e){this._filterStack=e}_getOrCreateRenderTarget(e=!1){let t=this._renderTargets.pop();return t||(t=new sd(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),this._currentFrame&&t.setFrame(this._currentFrame),e&&t.clear(),t}pushFilters(e,t){const r=e.getBounds();this._currentFrame=r;const i=e.getFilterRectangle();i.width>0&&i.height>0&&(this._currentFrame=i);const n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),t[0]instanceof W0?n.clear(this._renderer.getClearColor()):n.clear(),this._filterStack.push({renderTarget:n,filters:t})}popFilters(){const e=this._filterStack.pop();if(!e)return;const{filters:t,renderTarget:r}=e,i=this._filterStack[this._filterStack.length-1],n=r,o=i.renderTarget,s=n.getFrame();s&&this._quad.map(this._textureFrame,s);const a=t[0].getShaderForRenderer(this._renderer),l=this._quad.getVertexBuffer(),c=this._quad.getIndexBuffer(),h=this._renderer.getContext();h.bindBuffer(h.ARRAY_BUFFER,l),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,c);const f=a.getAttributeLocations();return h.vertexAttribPointer(f.a_position,2,h.FLOAT,!1,0,0),h.vertexAttribPointer(f.a_texCoord,2,h.FLOAT,!1,0,2*4*4),h.vertexAttribPointer(f.a_color,4,h.FLOAT,!1,0,4*4*4),this._renderer.updateTexture(n.getBaseTexture(),!1),t.length===1?(t[0].apply(this._renderer,n,o),this._renderTargets.push(n)):this._applyFilters(t,n,o),t}_applyFilters(e,t,r){let i=t,n=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(n.getBaseTexture(),!1);const o=e[e.length-1];e.forEach(s=>{if(s===o)s.apply(this._renderer,i,r,!0);else{s.apply(this._renderer,i,n,!0);const l=i;i=n,n=l}}),this._renderTargets.push(i),this._renderTargets.push(n)}_onContextChange(){this._renderTargets.length=0,mm(this._renderer)&&(this._quad&&this._quad.dispose(),this._quad=new JE(this._renderer.getContext()))}dispose(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(e=>{e.dispose()})}}}),p9=T((e,t)=>{var r=function(){function i(p){return s.appendChild(p.dom),p}function n(p){for(var v=0;v<s.children.length;v++)s.children[v].style.display=v===p?"block":"none";o=p}var o=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",function(p){p.preventDefault(),n(++o%s.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,h=i(new r.Panel("FPS","#0ff","#002")),f=i(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=i(new r.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:s,addPanel:i,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){c++;var p=(performance||Date).now();if(f.update(p-a,200),p>l+1e3&&(h.update(1e3*c/(p-l),100),l=p,c=0,d)){var v=performance.memory;d.update(v.usedJSHeapSize/1048576,v.jsHeapSizeLimit/1048576)}return p},update:function(){a=this.end()},domElement:s,setMode:n}};r.Panel=function(i,n,o){var s=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),h=80*c,f=48*c,d=3*c,p=2*c,v=3*c,g=15*c,m=74*c,y=30*c,_=document.createElement("canvas");_.width=h,_.height=f,_.style.cssText="width:80px;height:48px";var b=_.getContext("2d");return b.font="bold "+9*c+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=o,b.fillRect(0,0,h,f),b.fillStyle=n,b.fillText(i,d,p),b.fillRect(v,g,m,y),b.fillStyle=o,b.globalAlpha=.9,b.fillRect(v,g,m,y),{dom:_,update:function(w,S){s=Math.min(s,w),a=Math.max(a,w),b.fillStyle=o,b.globalAlpha=1,b.fillRect(0,0,h,g),b.fillStyle=n,b.fillText(l(w)+" "+i+" ("+l(s)+"-"+l(a)+")",d,p),b.drawImage(_,v+c,g,m-c,y,v,g,m-c,y),b.fillRect(v+m-c,g,c,y),b.fillStyle=o,b.globalAlpha=.9,b.fillRect(v+m-c,g,c,l((1-w/S)*y))}}},typeof t=="object"&&(t.exports=r)}),la,tD,m9=F(()=>{la=ni(p9()),tD=class{constructor(e){this._context=e,this._domAvailable=typeof document!="undefined",this._hookIntoContext(),this._textures={},this._framebuffers={},this._programs={},this._shaders={},this._buffers={},this._boundTexture=null,this._id=0,this._enums={},this._setupStats(),this._createEnumMap(),this._updateMemoryStats=this._updateMemoryStats.bind(this),this._updateMemoryStats()}_createEnumMap(){for(const e in this._context){const t=this._context[e];typeof t=="number"&&(this._enums[t]=e)}}_enumValueToString(e){const t=this._enums[e];return typeof t=="undefined"?e:t}_setupStats(){!this._domAvailable||(this._stats=new la.default,this._stats.showPanel(3),this._memPanel=this._stats.addPanel(new la.default.Panel("MB [WebGL]","#43ADEB","#282828")),this._texPanel=this._stats.addPanel(new la.default.Panel("Textures","#43ADEB","#282828")),this._bufPanel=this._stats.addPanel(new la.default.Panel("Buffers","#43ADEB","#282828")),this._fboPanel=this._stats.addPanel(new la.default.Panel("FBOs","#43ADEB","#282828")),this._prgPanel=this._stats.addPanel(new la.default.Panel("Programs","#43ADEB","#282828")),this._shdPanel=this._stats.addPanel(new la.default.Panel("Shaders","#43ADEB","#282828")))}_updatePanel(e){if(!!this._domAvailable){switch(this._stats.begin(),e){case"tex":this._texPanel.update(this.getTexturesCount(),50);break;case"buf":this._bufPanel.update(this.getBuffersCount(),50);break;case"fbo":this._fboPanel.update(this.getFBOCount(),50);break;case"prg":this._prgPanel.update(this.getProgramCount(),50);break;case"shd":this._shdPanel.update(this.getShaderCount(),50);break}this._stats.end()}}getTexturesCount(){return Object.keys(this._textures).length}getBuffersCount(){return Object.keys(this._buffers).length}getFBOCount(){return Object.keys(this._framebuffers).length}getProgramCount(){return Object.keys(this._programs).length}getShaderCount(){return Object.keys(this._shaders).length}_updateMemoryStats(){if(!this._domAvailable)return;const e=this._getMemoryUsage()/1e3/1e3;this._memPanel.update(e,400),setTimeout(this._updateMemoryStats,1e3)}_getMemoryUsage(){let e=0;for(const t in this._textures)e+=this._textures[t].memory;for(const t in this._buffers)e+=this._buffers[t].memory;return e}_hookIntoContext(){for(const e in this._context)typeof this._context[e]=="function"?this[e]=function(...r){const i=this._context[e];return this._trackGLCall(i,e,r)}:this._makePropertyWrapper(e)}_makePropertyWrapper(e){if(["_context"].indexOf(e)!==-1)return;const r=this._context;this.__defineGetter__(e,()=>r[e]),this.__defineSetter__(e,i=>{r[e]=i})}_trackGLCall(e,t,r){const i=["texImage2D","bindTexture","createTexture","deleteTexture","createBuffer","bindBuffer","bufferData","deleteBuffer","createFramebuffer","deleteFramebuffer","createProgram","deleteProgram","createShader","deleteShader"];let n;i.indexOf(t)!==-1?n=this[`_${t}`](r):n=e.apply(this._context,r);const o=this._context.getError();if(o!==0){let s=r.join(", ");s.length>100&&(s=`${s.substr(0,100)}...`),console.error(new Error(`WebGL Error ${this._enumValueToString(o)} in ${t}(${s})`))}return n}_createProgram(){const e=this._context.createProgram();return e._wmmId=this._id++,this._programs[e._wmmId]=e,this._updatePanel("prg"),e}_deleteProgram([e]){!e||!this._programs[e._wmmId]||(delete this._programs[e._wmmId],this._context.deleteProgram(e),this._updatePanel("prg"))}_createShader([e]){const t=this._context.createShader(e);return t._wmmId=this._id++,this._shaders[t._wmmId]=t,this._updatePanel("shd"),t}_deleteShader([e]){!e||!this._shaders[e._wmmId]||(delete this._shaders[e._wmmId],this._context.deleteShader(e),this._updatePanel("shd"))}_createFramebuffer(){const e=this._context.createFramebuffer();return e._wmmId=this._id++,this._framebuffers[e._wmmId]=e,this._updatePanel("fbo"),e}_deleteFramebuffer([e]){!e||!this._framebuffers[e._wmmId]||(delete this._framebuffers[e._wmmId],this._context.deleteFramebuffer(e),this._updatePanel("fbo"))}_createBuffer(){const e=this._context.createBuffer();return e._wmmId=this._id++,this._buffers[e._wmmId]={buffer:e,memory:0},this._updatePanel("buf"),e}_bindBuffer([e,t]){this._context.bindBuffer(e,t),this._boundBuffer=t._wmmId}_bufferData([e,t,r]){this._context.bufferData(e,t,r);let i;typeof t=="number"?i=t:"byteLength"in t?i=t.byteLength:"length"in t&&(i=t.length),this._buffers[this._boundBuffer].memory=i}_deleteBuffer([e]){!e||!this._buffers[e._wmmId]||(delete this._buffers[e._wmmId],this._context.deleteBuffer(e),this._updatePanel("buf"))}_createTexture(){const e=this._context.createTexture();return e._wmmId=this._id++,this._textures[e._wmmId]={texture:e,memory:0},this._updatePanel("tex"),e}_deleteTexture([e]){!e||!this._textures[e._wmmId]||(delete this._textures[e._wmmId],this._context.deleteTexture(e),this._updatePanel("tex"))}_bindTexture([e,t]){this._context.bindTexture(e,t),this._boundTexture=t._wmmId}_texImage2D(e){let[,,t,r,i,n,,,o]=e;typeof o=="undefined"&&(o=n),this._context.texImage2D.apply(this._context,e);const s=this._calculateByteCountForTexture(t,r,i,o);this._textures[this._boundTexture].memory=s}_calculateByteCountForTexture(e,t,r,i){if(i!==null)if("width"in i)t=i.width,r=i.height;else return i.length;let n=1;switch(e){case this._context.ALPHA:n=1;break;case this._context.RGB:n=3;break;case this._context.RGBA:n=4;break}return t*r*n}}}),r1,rD=F(()=>{r1=class{constructor(e){this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}_onContextChange(){}start(){}stop(){this.flush()}flush(){}dispose(){this._renderer.off("context",this._onContextChange),delete this._renderer}}}),iD,g9=F(()=>{Or(),rD(),iD=class extends r1{constructor(e){super(e),this._vertexBuffer=null,this._indexBuffer=null,this._maxBatchSize=jc,this._vertices=new ArrayBuffer(jc*4*Tl),this._positions=new Float32Array(this._vertices),this._colors=new Uint32Array(this._vertices),this._indices=new Uint16Array(jc*6);for(let t=0,r=0;t<jc*6;t+=6,r+=4)this._indices[t+0]=r+0,this._indices[t+1]=r+1,this._indices[t+2]=r+2,this._indices[t+3]=r+0,this._indices[t+4]=r+2,this._indices[t+5]=r+3;this._sprites=[],this._currentBatchSize=0,this._onContextChange()}render(e){const t=e.getTexture();if(!t)return;const r=t.getFrame();t.getBaseTexture(),this._currentBatchSize>=this._maxBatchSize&&this.flush();const i=t.getUVs();if(!i)return;const n=this._currentBatchSize*Tl;this._addVertexCoordinates(e,n,r),this._addTextureUVs(e,n,i),this._addColors(e,n),this._sprites[this._currentBatchSize]=e,this._currentBatchSize++}_addColors(e,t){const r=this._colors,i=16777215,n=(i>>16)+(i&65280)+((i&255)<<16)+(e.getWorldAlpha()*255<<24);r[t+4]=r[t+9]=r[t+14]=r[t+19]=n}_addTextureUVs(e,t,r){const i=this._positions,[n,o,s,a]=r;i[t+2]=n.x,i[t+3]=n.y,i[t+7]=o.x,i[t+8]=o.y,i[t+12]=s.x,i[t+13]=s.y,i[t+17]=a.x,i[t+18]=a.y}_addVertexCoordinates(e,t,r){const i=this._positions,n=e.getWorldTransform(),o=e.getAnchor(),s=n.rectangleToCoordinates(r,o),a=5;for(let l=0;l<4;l++)i[t+l*a]=s[l].x,i[t+l*a+1]=s[l].y}_onContextChange(){const e=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer&&(this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer=null),this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)}start(){this._vertexBuffer&&this._indexBuffer&&this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}flush(){var e;const t=this._renderer,r=t.getContext();if(this._currentBatchSize===0)return;if(this._currentBatchSize>jc*.5)r.bufferSubData(r.ARRAY_BUFFER,0,this._vertices);else{const d=this._positions.subarray(0,this._currentBatchSize*Tl);r.bufferSubData(r.ARRAY_BUFFER,0,d)}let i=0,n=null,o=null,s=null,a=null,l=!1,c=!1,h=null,f=0;for(let d=0,p=this._currentBatchSize;d<p;d++){if(h=this._sprites[d],o=(e=h.getTexture())==null?void 0:e.getBaseTexture(),a=h.getShader()||this._shader,l=s!==a,c=n!==o,(c||l)&&(n&&this._renderBatch(n,i,f),f=d,i=0,n=o,l)){s=a,t.setShader(s);const g=t.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",g),s.syncUniforms(),r.activeTexture(r.TEXTURE0)}i++}n&&this._renderBatch(n,i,f),this._currentBatchSize=0,this._sprites=[]}_renderBatch(e,t,r){if(t===0)return;const i=this._renderer,n=i.getContext();let o=e.getGLTextureForRenderer(i);o||(o=i.getOrCreateGLTexture(e)),e.isDirty()&&(i.updateTexture(e),e.setDirty(!1)),n.activeTexture(n.TEXTURE0+e.getGLUnit()),n.bindTexture(n.TEXTURE_2D,o);const s=t*6,a=r*6*2;n.drawElements(n.TRIANGLES,s,n.UNSIGNED_SHORT,a)}dispose(){const t=this._renderer.getContext();this._sprites.forEach(r=>{r.dispose()}),this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),delete this._vertices,delete this._positions,delete this._colors,delete this._indices,super.dispose()}}}),i1,n1,v9=F(()=>{d9(),Eo(),An(),N0(),Or(),eD(),$E(),QE(),cs(),Rm(),m9(),KE(),rD(),g9(),i1=class extends Z0{constructor(e=800,t=600,r){super(e,t,r),this.type="webgl",this.maxTextureDimensions=null,this._type="webgl",this._onContextLost=this._onContextLost.bind(this),this._onContextRestored=this._onContextRestored.bind(this),this.setCanvas(this._options.canvas||zn.createCanvas()),this.shaders={default:new zE(this,void 0,void 0)},this.renderers={sprite:new iD(this)}}_onContextLost(e){e.preventDefault(),Ke.warn(this.constructor.name,"WebGL context has been lost - trying to restore."),this.emit("context-lost")}_onContextCreationError(e){e.preventDefault(),Ke.warn(this.constructor.name,`Failed to create WebGL context: ${e.statusMessage||"Unknown error"}`)}_onContextRestored(){Ke.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._createContext(),this._setupContext(),this.emit("context-restored")}_onBeforeContext(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new t1(this),this._currentObjectRenderer=new r1(this)}setShader(e){this._currentShader=e,this._context.useProgram(e.getProgram()),this._setAttributesForShader(e)}setCanvas(e){this._canvas&&this._removeContextEventListeners(),super.setCanvas(e),this._addContextEventListeners()}_addContextEventListeners(){z0(this._canvas)&&(this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError))}_removeContextEventListeners(){z0(this._canvas)&&(this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError))}_setAttributesForShader(e){if(!this._canvas)return;const t=this._context,r=e.getAttributes(),i=e.getAttributeLocations();r.forEach(n=>{const o=i[n];t.enableVertexAttribArray(o)})}_createContext(){if(!this._canvas)return;let e=zn.glGet(this._canvas);return this._options.debug&&ZE(e),this._options.debug&&(e=new K0(e),e=new tD(e)),this.id=i1.contextId++,this._context=e,this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.emit("context",e),e}_setupContext(){const e=this._context;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new sd(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}getContext(){return this._context}_getMaxPrecision(){const e=this._context,t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);this._maxFloatPrecision=(t==null?void 0:t.precision)!==0?"highp":"mediump";const r=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT);this._maxIntPrecision=(r==null?void 0:r.rangeMax)!==0?"highp":"lowp"}resizeTo(e,t=!0){super.resizeTo(e,t),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e),this._context=zn.glResize(this._context,e)}setRenderTarget(e=this._defaultRenderTarget){this._currentRenderTarget=e,this._currentRenderTarget.activate()}setObjectRenderer(e){this._currentObjectRenderer.stop(),this._currentObjectRenderer=e,this._currentObjectRenderer.start()}render(e){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);const t=e.getParent();e.setParent(new Sm),e.updateTransform(),t&&e.setParent(t),this.renderDisplayObject(e,this._defaultRenderTarget)}renderDisplayObject(e,t){this.setRenderTarget(t),this._filterManager.setFilterStack(t.getFilterStack()),e.renderWebGL(this),this._currentObjectRenderer.flush()}clear(){const e=this._context;e.clearColor.apply(e,this._clearColor.toGLColor),e.clear(e.COLOR_BUFFER_BIT)}save(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}restore(e){this.setRenderTarget(e.renderTarget),this._filterManager.setFilterStack(e.filterStack),this._currentObjectRenderer=e.objectRenderer}getOrCreateGLTexture(e){const t=this._context;let r=e.getGLTextureForRenderer(this);return r||(r=t.createTexture(),e.setGLTextureForRenderer(r,this)),r}updateTexture(e,t=!0){const r=e.getSource(),i=this._context,n=e.getGLUnit(),o=this.getOrCreateGLTexture(e);i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,o),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t&&r&&zn.glTexImage(i,r),e.isMipMappingEnabled()?i.generateMipmap(i.TEXTURE_2D):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e.getGLRepeat(i,"x")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e.getGLRepeat(i,"y"))),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,e.getGLFilter(i,"min")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e.getGLFilter(i,"mag")),i.activeTexture(i.TEXTURE0)}getMaxDimensions(){return this.maxTextureDimensions||(this.maxTextureDimensions=zn.glMaxTexture(this._context)),this.maxTextureDimensions}getCurrentRenderTarget(){return this._currentRenderTarget}getCurrentObjectRenderer(){return this._currentObjectRenderer}getMaxFloatPrecision(){return this._maxFloatPrecision}getMaxIntPrecision(){return this._maxIntPrecision}dispose(){this._canvas&&Nr(this._canvas),this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose();for(const r in this.shaders)this.shaders[r].dispose(),delete this.shaders[r];this._removeContextEventListeners();const t=this._context.getExtension("WEBGL_lose_context");t&&t.loseContext()}},n1=i1,n1.contextId=0}),nD,oD,o1,y9=F(()=>{sa(),nD=()=>[new Qe(0,0),new Qe(1,0),new Qe(1,1),new Qe(0,1)],oD=(e,t,r)=>{const[i,n,o,s]=e;return i.x=t.x/r.width,i.y=t.y/r.height,n.x=(t.x+t.width)/r.width,n.y=t.y/r.height,o.x=(t.x+t.width)/r.width,o.y=(t.y+t.height)/r.height,s.x=t.x/r.width,s.y=(t.y+t.height)/r.height,e},o1={create:nD,updateViaFrames:oD}}),ad,sD=F(()=>{y9(),Or(),id(),ad=class extends oa{constructor(e,t){if(super(),!(e instanceof Vr))throw new Error("`baseTexture` should be an instance of BaseTexture");this._uvs=o1.create(),this._frame=t?t.clone():new oi(0,0,1,1),this._frameLocked=Boolean(t),this._onBaseTextureLoaded=this._onBaseTextureLoaded.bind(this),this._onBaseTextureUpdated=this._onBaseTextureUpdated.bind(this),this.setBaseTexture(e)}static fromImage(e){const t=new Vr(e);return new ad(t)}static fromCanvas(e){const t=new Vr(e);return new ad(t)}_onBaseTextureLoaded(){if(!this._frameLocked){const e=this._baseTexture.getFrame().clone();this.setFrame(e)}this._baseTexture.on("update",this._onBaseTextureUpdated)}_onBaseTextureUpdated(){const{width:e,height:t}=this._baseTexture.getFrame();this._frame.width=e,this._frame.height=t,this.emit("update")}_updateUVs(){this._uvs=o1.updateViaFrames(this._uvs,this._frame,this._baseTexture.getFrame())}getBaseTexture(){return this._baseTexture}setBaseTexture(e){if(this._baseTexture=e,!this._baseTexture.isLoaded())this._baseTexture.once("loaded",this._onBaseTextureLoaded);else{const{width:t,height:r}=e.getFrame();this._frameLocked||(this._frame=new oi(0,0,t,r)),this._onBaseTextureLoaded()}}getFrame(){return this._frame}setFrame(e){this._frame=e,this._updateUVs()}getWidth(){return this._frame.width}getHeight(){return this._frame.height}getUVs(){return this._uvs}getDimensions(){return new Qe(this._frame.width,this._frame.height)}dispose(e=!0){e&&this._baseTexture.dispose()}}}),Gc,s1,aD=F(()=>{An(),Or(),Y0(),eD(),Em(),Rm(),id(),sD(),Gc=e=>e._type==="webgl",s1=class extends ad{constructor(e,t=100,r=100,i=1){super(new Vr,new oi(0,0,t,r)),this._loaded=!0,this._width=t,this._height=r,this._pixelRatio=i,this._renderer=e,this._setupFilterManager(),this._setupBuffer(),this.setBaseTexture(this._renderTarget.getBaseTexture()),this._updateUVs()}_setupFilterManager(){this._filterManager&&this._filterManager.dispose(),Gc(this._renderer)?this._filterManager=new t1(this._renderer):this._filterManager=new Dm(this._renderer),this._filterManager.resizeTo(new Qe(this._width,this._height))}_setupBuffer(){this._renderTarget&&this._renderTarget.dispose(),Gc(this._renderer)?this._renderTarget=new sd(this._renderer,this._width,this._height,this._pixelRatio):this._renderTarget=new nd(this._width,this._height,this._pixelRatio)}clear(e){this._renderTarget.clear(e)}resizeTo(e){this._width===e.x&&this._height===e.y||(this._width=e.x,this._height=e.y,this._frame.width=e.x,this._frame.height=e.y,this._renderTarget.resizeTo(e),this._filterManager.resizeTo(e))}render(e){Gc(this._renderer)?this._renderWebGL(e):this._renderCanvas(e)}_renderWebGL(e){if(!Gc(this._renderer))return;this._renderTarget.activate(),e.getWorldTransform().reset(),e.getChildren().forEach(r=>{r.updateTransform()});const t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}_renderCanvas(e){if(Gc(this._renderer))return;e.getWorldTransform().reset(),e.getChildren().forEach(r=>{r.updateTransform()});const t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}getRenderTarget(){return this._renderTarget}dispose(){this._renderTarget.dispose(),this._filterManager.dispose(),super.dispose()}}}),Fm,ld,Om=F(()=>{Fm={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"},ld={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}});function me(e,t,r){e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function Ct(){return new me(null)}function _9(e,t,r,i,n,o){for(;--o>=0;){var s=t*this[e++]+r[i]+n;n=Math.floor(s/67108864),r[i++]=s&67108863}return n}function b9(e,t,r,i,n,o){for(var s=t&32767,a=t>>15;--o>=0;){var l=this[e]&32767,c=this[e++]>>15,h=a*l+c*s;l=s*l+((h&32767)<<15)+r[i]+(n&1073741823),n=(l>>>30)+(h>>>15)+a*c+(n>>>30),r[i++]=l&1073741823}return n}function x9(e,t,r,i,n,o){for(var s=t&16383,a=t>>14;--o>=0;){var l=this[e]&16383,c=this[e++]>>14,h=a*l+c*s;l=s*l+((h&16383)<<14)+r[i]+n,n=(l>>28)+(h>>14)+a*c,r[i++]=l&268435455}return n}function lD(e){return pD.charAt(e)}function cD(e,t){var r=ud[e.charCodeAt(t)];return r==null?-1:r}function w9(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function S9(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function ca(e){var t=Ct();return t.fromInt(e),t}function C9(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var i=e.length,n=!1,o=0;--i>=0;){var s=r==8?e[i]&255:cD(e,i);if(s<0){e.charAt(i)=="-"&&(n=!0);continue}n=!1,o==0?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&me.ZERO.subTo(this,this)}function k9(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function T9(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,i,n=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(i=this[s]>>a)>0&&(n=!0,o=lD(i));s>=0;)a<t?(i=(this[s]&(1<<a)-1)<<t-a,i|=this[--s]>>(a+=this.DB-t)):(i=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),i>0&&(n=!0),n&&(o+=lD(i));return n?o:"0"}function E9(){var e=Ct();return me.ZERO.subTo(this,e),e}function D9(){return this.s<0?this.negate():this}function I9(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this[r]-e[r])!=0)return t;return 0}function Mm(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function R9(){return this.t<=0?0:this.DB*(this.t-1)+Mm(this[this.t-1]^this.s&this.DM)}function F9(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function O9(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function M9(e,t){var r=e%this.DB,i=this.DB-r,n=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)t[a+o+1]=this[a]>>i|s,s=(this[a]&n)<<r;for(a=o-1;a>=0;--a)t[a]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()}function P9(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var i=e%this.DB,n=this.DB-i,o=(1<<i)-1;t[0]=this[r]>>i;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&o)<<n,t[s-r]=this[s]>>i;i>0&&(t[this.t-r-1]|=(this.s&o)<<n),t.t=this.t-r,t.clamp()}function A9(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()}function z9(e,t){var r=this.abs(),i=e.abs(),n=r.t;for(t.t=n+i.t;--n>=0;)t[n]=0;for(n=0;n<i.t;++n)t[n+r.t]=r.am(0,i[n],t,n,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&me.ZERO.subTo(t,t)}function $9(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function B9(e,t,r){var i=e.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Ct());var o=Ct(),s=this.s,a=e.s,l=this.DB-Mm(i[i.t-1]);l>0?(i.lShiftTo(l,o),n.lShiftTo(l,r)):(i.copyTo(o),n.copyTo(r));var c=o.t,h=o[c-1];if(h!=0){var f=h*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),d=this.FV/f,p=(1<<this.F1)/f,v=1<<this.F2,g=r.t,m=g-c,y=t==null?Ct():t;for(o.dlShiftTo(m,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),me.ONE.dlShiftTo(c,y),y.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--m>=0;){var _=r[--g]==h?this.DM:Math.floor(r[g]*d+(r[g-1]+v)*p);if((r[g]+=o.am(0,_,r,m,0,c))<_)for(o.dlShiftTo(m,y),r.subTo(y,r);r[g]<--_;)r.subTo(y,r)}t!=null&&(r.drShiftTo(c,t),s!=a&&me.ZERO.subTo(t,t)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),s<0&&me.ZERO.subTo(r,r)}}}function L9(e){var t=Ct();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(me.ZERO)>0&&e.subTo(t,t),t}function Dl(e){this.m=e}function U9(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function N9(e){return e}function j9(e){e.divRemTo(this.m,null,e)}function H9(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function W9(e,t){e.squareTo(t),this.reduce(t)}function V9(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Il(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function G9(e){var t=Ct();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(me.ZERO)>0&&this.m.subTo(t,t),t}function q9(e){var t=Ct();return e.copyTo(t),this.reduce(t),t}function X9(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e[t]&32767,i=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Y9(e,t){e.squareTo(t),this.reduce(t)}function Q9(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function K9(){return(this.t>0?this[0]&1:this.s)==0}function Z9(e,t){if(e>4294967295||e<1)return me.ONE;var r=Ct(),i=Ct(),n=t.convert(this),o=Mm(e)-1;for(n.copyTo(r);--o>=0;)if(t.sqrTo(r,i),(e&1<<o)>0)t.mulTo(i,n,r);else{var s=r;r=i,i=s}return t.revert(r)}function J9(e,t){var r;return e<256||t.isEven()?r=new Dl(t):r=new Il(t),this.exp(e,r)}function eL(){var e=Ct();return this.copyTo(e),e}function tL(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function rL(){return this.t==0?this.s:this[0]<<24>>24}function iL(){return this.t==0?this.s:this[0]<<16>>16}function nL(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function oL(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function sL(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=ca(r),n=Ct(),o=Ct(),s="";for(this.divRemTo(i,n,o);n.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,n.divRemTo(i,n,o);return o.intValue().toString(e)+s}function aL(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),n=!1,o=0,s=0,a=0;a<e.length;++a){var l=cD(e,a);if(l<0){e.charAt(a)=="-"&&this.signum()==0&&(n=!0);continue}s=t*s+l,++o>=r&&(this.dMultiply(i),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),n&&me.ZERO.subTo(this,this)}function lL(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(me.ONE.shiftLeft(e-1),a1,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(me.ONE.shiftLeft(e-1),this);else{var i=new Array,n=e&7;i.length=(e>>3)+1,t.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function cL(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,i,n=0;if(e-- >0)for(r<this.DB&&(i=this[e]>>r)!=(this.s&this.DM)>>r&&(t[n++]=i|this.s<<this.DB-r);e>=0;)r<8?(i=(this[e]&(1<<r)-1)<<8-r,i|=this[--e]>>(r+=this.DB-8)):(i=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(t[n++]=i);return t}function uL(e){return this.compareTo(e)==0}function hL(e){return this.compareTo(e)<0?this:e}function dL(e){return this.compareTo(e)>0?this:e}function fL(e,t,r){var i,n,o=Math.min(e.t,this.t);for(i=0;i<o;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(n=e.s&this.DM,i=o;i<this.t;++i)r[i]=t(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=o;i<e.t;++i)r[i]=t(n,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function pL(e,t){return e&t}function mL(e){var t=Ct();return this.bitwiseTo(e,pL,t),t}function a1(e,t){return e|t}function gL(e){var t=Ct();return this.bitwiseTo(e,a1,t),t}function uD(e,t){return e^t}function vL(e){var t=Ct();return this.bitwiseTo(e,uD,t),t}function hD(e,t){return e&~t}function yL(e){var t=Ct();return this.bitwiseTo(e,hD,t),t}function _L(){for(var e=Ct(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function bL(e){var t=Ct();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function xL(e){var t=Ct();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function wL(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function SL(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+wL(this[e]);return this.s<0?this.t*this.DB:-1}function CL(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function kL(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=CL(this[r]^t);return e}function TL(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<e%this.DB)!=0}function EL(e,t){var r=me.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function DL(e){return this.changeBit(e,a1)}function IL(e){return this.changeBit(e,hD)}function RL(e){return this.changeBit(e,uD)}function FL(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()}function OL(e){var t=Ct();return this.addTo(e,t),t}function ML(e){var t=Ct();return this.subTo(e,t),t}function PL(e){var t=Ct();return this.multiplyTo(e,t),t}function AL(){var e=Ct();return this.squareTo(e),e}function zL(e){var t=Ct();return this.divRemTo(e,t,null),t}function $L(e){var t=Ct();return this.divRemTo(e,null,t),t}function BL(e){var t=Ct(),r=Ct();return this.divRemTo(e,t,r),new Array(t,r)}function LL(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function UL(e,t){if(e!=0){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function cd(){}function dD(e){return e}function NL(e,t,r){e.multiplyTo(t,r)}function jL(e,t){e.squareTo(t)}function HL(e){return this.exp(e,new cd)}function WL(e,t,r){var i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()}function VL(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)}function qc(e){this.r2=Ct(),this.q3=Ct(),me.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function GL(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Ct();return e.copyTo(t),this.reduce(t),t}function qL(e){return e}function XL(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function YL(e,t){e.squareTo(t),this.reduce(t)}function QL(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function KL(e,t){var r=e.bitLength(),i,n=ca(1),o;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?o=new Dl(t):t.isEven()?o=new qc(t):o=new Il(t);var s=new Array,a=3,l=i-1,c=(1<<i)-1;if(s[1]=o.convert(this),i>1){var h=Ct();for(o.sqrTo(s[1],h);a<=c;)s[a]=Ct(),o.mulTo(h,s[a-2],s[a]),a+=2}var f=e.t-1,d,p=!0,v=Ct(),g;for(r=Mm(e[f])-1;f>=0;){for(r>=l?d=e[f]>>r-l&c:(d=(e[f]&(1<<r+1)-1)<<l-r,f>0&&(d|=e[f-1]>>this.DB+r-l)),a=i;(d&1)==0;)d>>=1,--a;if((r-=a)<0&&(r+=this.DB,--f),p)s[d].copyTo(n),p=!1;else{for(;a>1;)o.sqrTo(n,v),o.sqrTo(v,n),a-=2;a>0?o.sqrTo(n,v):(g=n,n=v,v=g),o.mulTo(v,s[d],n)}for(;f>=0&&(e[f]&1<<r)==0;)o.sqrTo(n,v),g=n,n=v,v=g,--r<0&&(r=this.DB-1,--f)}return o.revert(n)}function ZL(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var i=t;t=r,r=i}var n=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(n<o&&(o=n),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function JL(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this[0]%e;else for(var i=this.t-1;i>=0;--i)r=(t*r+this[i])%e;return r}function e7(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return me.ZERO;for(var r=e.clone(),i=this.clone(),n=ca(1),o=ca(0),s=ca(0),a=ca(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!n.isEven()||!o.isEven())&&(n.addTo(this,n),o.subTo(e,o)),n.rShiftTo(1,n)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),t?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(i)>=0?(r.subTo(i,r),t&&n.subTo(s,n),o.subTo(a,o)):(i.subTo(r,i),t&&s.subTo(n,s),a.subTo(o,a))}if(i.compareTo(me.ONE)!=0)return me.ZERO;if(a.compareTo(e)>=0)return a.subtract(e);if(a.signum()<0)a.addTo(e,a);else return a;return a.signum()<0?a.add(e):a}function t7(e){var t,r=this.abs();if(r.t==1&&r[0]<=Ti[Ti.length-1]){for(t=0;t<Ti.length;++t)if(r[0]==Ti[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Ti.length;){for(var i=Ti[t],n=t+1;n<Ti.length&&i<mD;)i*=Ti[n++];for(i=r.modInt(i);t<n;)if(i%Ti[t++]==0)return!1}return r.millerRabin(e)}function r7(e){var t=this.subtract(me.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var i=t.shiftRight(r);e=e+1>>1,e>Ti.length&&(e=Ti.length);for(var n=Ct(),o=0;o<e;++o){n.fromInt(Ti[Math.floor(Math.random()*Ti.length)]);var s=n.modPow(i,this);if(s.compareTo(me.ONE)!=0&&s.compareTo(t)!=0){for(var a=1;a++<r&&s.compareTo(t)!=0;)if(s=s.modPowInt(2,this),s.compareTo(me.ONE)==0)return!1;if(s.compareTo(t)!=0)return!1}}return!0}var Pm,ua,fD,l1,Am,pD,ud,Xc,$n,Ti,mD,gD,i7=F(()=>{for(Pm={},Pm=typeof window!="undefined"?window.navigator:{},fD=0xdeadbeefcafe,l1=(fD&16777215)==15715070,l1&&Pm.appName=="Microsoft Internet Explorer"?(me.prototype.am=b9,ua=30):l1&&Pm.appName!="Netscape"?(me.prototype.am=_9,ua=26):(me.prototype.am=x9,ua=28),me.prototype.DB=ua,me.prototype.DM=(1<<ua)-1,me.prototype.DV=1<<ua,Am=52,me.prototype.FV=Math.pow(2,Am),me.prototype.F1=Am-ua,me.prototype.F2=2*ua-Am,pD="0123456789abcdefghijklmnopqrstuvwxyz",ud=new Array,Xc="0".charCodeAt(0),$n=0;$n<=9;++$n)ud[Xc++]=$n;for(Xc="a".charCodeAt(0),$n=10;$n<36;++$n)ud[Xc++]=$n;for(Xc="A".charCodeAt(0),$n=10;$n<36;++$n)ud[Xc++]=$n;Dl.prototype.convert=U9,Dl.prototype.revert=N9,Dl.prototype.reduce=j9,Dl.prototype.mulTo=H9,Dl.prototype.sqrTo=W9,Il.prototype.convert=G9,Il.prototype.revert=q9,Il.prototype.reduce=X9,Il.prototype.mulTo=Q9,Il.prototype.sqrTo=Y9,me.prototype.copyTo=w9,me.prototype.fromInt=S9,me.prototype.fromString=C9,me.prototype.clamp=k9,me.prototype.dlShiftTo=F9,me.prototype.drShiftTo=O9,me.prototype.lShiftTo=M9,me.prototype.rShiftTo=P9,me.prototype.subTo=A9,me.prototype.multiplyTo=z9,me.prototype.squareTo=$9,me.prototype.divRemTo=B9,me.prototype.invDigit=V9,me.prototype.isEven=K9,me.prototype.exp=Z9,me.prototype.toString=T9,me.prototype.negate=E9,me.prototype.abs=D9,me.prototype.compareTo=I9,me.prototype.bitLength=R9,me.prototype.mod=L9,me.prototype.modPowInt=J9,me.ZERO=ca(0),me.ONE=ca(1),cd.prototype.convert=dD,cd.prototype.revert=dD,cd.prototype.mulTo=NL,cd.prototype.sqrTo=jL,qc.prototype.convert=GL,qc.prototype.revert=qL,qc.prototype.reduce=XL,qc.prototype.mulTo=QL,qc.prototype.sqrTo=YL,Ti=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],mD=(1<<26)/Ti[Ti.length-1],me.prototype.chunkSize=nL,me.prototype.toRadix=sL,me.prototype.fromRadix=aL,me.prototype.fromNumber=lL,me.prototype.bitwiseTo=fL,me.prototype.changeBit=EL,me.prototype.addTo=FL,me.prototype.dMultiply=LL,me.prototype.dAddOffset=UL,me.prototype.multiplyLowerTo=WL,me.prototype.multiplyUpperTo=VL,me.prototype.modInt=JL,me.prototype.millerRabin=r7,me.prototype.clone=eL,me.prototype.intValue=tL,me.prototype.byteValue=rL,me.prototype.shortValue=iL,me.prototype.signum=oL,me.prototype.toByteArray=cL,me.prototype.equals=uL,me.prototype.min=hL,me.prototype.max=dL,me.prototype.and=mL,me.prototype.or=gL,me.prototype.xor=vL,me.prototype.andNot=yL,me.prototype.not=_L,me.prototype.shiftLeft=bL,me.prototype.shiftRight=xL,me.prototype.getLowestSetBit=SL,me.prototype.bitCount=kL,me.prototype.testBit=TL,me.prototype.setBit=DL,me.prototype.clearBit=IL,me.prototype.flipBit=RL,me.prototype.add=OL,me.prototype.subtract=ML,me.prototype.multiply=PL,me.prototype.divide=zL,me.prototype.remainder=$L,me.prototype.divideAndRemainder=BL,me.prototype.modPow=KL,me.prototype.modInverse=e7,me.prototype.pow=HL,me.prototype.gcd=ZL,me.prototype.isProbablePrime=t7,me.prototype.square=AL,gD=me});function n7(e){var t=8;function r(g,m){var y=(g&65535)+(m&65535),_=(g>>16)+(m>>16)+(y>>16);return _<<16|y&65535}function i(g,m){return g>>>m|g<<32-m}function n(g,m){return g>>>m}function o(g,m,y){return g&m^~g&y}function s(g,m,y){return g&m^g&y^m&y}function a(g){return i(g,2)^i(g,13)^i(g,22)}function l(g){return i(g,6)^i(g,11)^i(g,25)}function c(g){return i(g,7)^i(g,18)^n(g,3)}function h(g){return i(g,17)^i(g,19)^n(g,10)}function f(g,m){var y=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),_=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),b=new Array(64),w,S,C,D,E,I,M,k,R,$,H,j;g[m>>5]|=128<<24-m%32,g[(m+64>>9<<4)+15]=m;for(var R=0;R<g.length;R+=16){w=_[0],S=_[1],C=_[2],D=_[3],E=_[4],I=_[5],M=_[6],k=_[7];for(var $=0;$<64;$++)$<16?b[$]=g[$+R]:b[$]=r(r(r(h(b[$-2]),b[$-7]),c(b[$-15])),b[$-16]),H=r(r(r(r(k,l(E)),o(E,I,M)),y[$]),b[$]),j=r(a(w),s(w,S,C)),k=M,M=I,I=E,E=r(D,H),D=C,C=S,S=w,w=r(H,j);_[0]=r(w,_[0]),_[1]=r(S,_[1]),_[2]=r(C,_[2]),_[3]=r(D,_[3]),_[4]=r(E,_[4]),_[5]=r(I,_[5]),_[6]=r(M,_[6]),_[7]=r(k,_[7])}return _}function d(g){for(var m=Array(),y=(1<<t)-1,_=0;_<g.length*t;_+=t)m[_>>5]|=(g.charCodeAt(_/t)&y)<<24-_%32;return m}function p(g){g=g.replace(/\r\n/g,`
`);for(var m="",y=0;y<g.length;y++){var _=g.charCodeAt(y);_<128?m+=String.fromCharCode(_):_>127&&_<2048?(m+=String.fromCharCode(_>>6|192),m+=String.fromCharCode(_&63|128)):(m+=String.fromCharCode(_>>12|224),m+=String.fromCharCode(_>>6&63|128),m+=String.fromCharCode(_&63|128))}return m}function v(g){for(var m="0123456789abcdef",y="",_=0;_<g.length*4;_++)y+=m.charAt(g[_>>2]>>(3-_%4)*8+4&15)+m.charAt(g[_>>2]>>(3-_%4)*8&15);return y}return e=p(e),v(f(d(e),e.length*t))}var o7=F(()=>{}),vD,yD,Yc,s7=F(()=>{vD=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,yD=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,Yc=class{get major(){return this._major}get minor(){return this._minor}get patch(){return this._patch}constructor(e,t=!1){const r=t?yD:vD,i=r.exec(e);r.lastIndex=0,this._major=i[1],this._minor=i[2],this._patch=i[3]||0}equals(e){return this._major===e._major&&this._minor===e._minor&&this._patch===e._patch}isMoreRecentThan(e){if(this._major<e.major)return!1;if(this._major>e.major)return!0;if(this._minor<e.minor)return!1;if(this._minor>e.minor)return!0;if(this._patch<=e.patch)return!1;if(this._patch>e.patch)return!0}}});function a7(e){return e.map(t=>`0${(t&255).toString(16)}`.slice(-2)).join("")}var si,_D,bD,c1,xD,u1,zm,wD,SD,$m,CD,kD,TD,h1,ED=F(()=>{Yh(),i7(),o7(),Gh(),s7(),hs(),si=e=>Ce.byteArrayToString(na.decode(e)),_D="TDNSeVlXTnJQMkZ3YVV0bGVUMD0=",bD="ZW50ZXJwcmlzZV9saWNlbnNl",c1="YXBwX2lkZW50aWZpZXJz",xD="cGxhdGZvcm0=",u1="ZmVhdHVyZXM=",zm="ZXhwaXJlc19hdA==",wD="ZG9tYWlucw==",SD="YXBpX3Rva2Vu",$m="c2lnbmF0dXJl",CD="dmVyc2lvbg==",kD=class{constructor(e){this._version="2.4",this._l=typeof e=="string"?e.trim():e,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}v(){return this._sigValid()&&!this.isExp()}_jsonValid(){try{this._decLic=JSON.parse(this._l)}catch{return this._decLic={},!1}return!0}_hostnameValid(){if(typeof window=="undefined"||!this._decLic[si(c1)].length)return!0;const{hostname:e}=window.location;let t=!1;return this._decLic[si(c1)].forEach(r=>{Ce.wildCardMatch(e,r)&&(t=!0)}),t}_platformValid(){const e=this._decLic[si(xD)];return"HTML5"===e}c(){return new Promise((e,t)=>{const r=this._validateError();r!==null&&t(r),e()})}validate(){return this._validateError()===null}_validateError(){if(typeof this._l!=="string"||!this._jsonValid()){const t=new Error;return t.code="ELICINVFMT",t}if(!this._sigValid()){const t=new Error;return t.code="ELICINV",t}if(!this._hostnameValid()){const t=new Error;return t.code="ELICINVHOST",t}if(!this._platformValid()){const t=new Error;return t.code="ELICINVPLAT",t}if(this.isExp()){const t=new Error;return t.code="ELICEXP",t}return null}isToolAllowed(e){return this._includesFeature(e)}isWhiteLabel(){return this._includesFeature("whitelabel",new Yc("2.4",!0))}areCustomAssetsAllowed(){return this._includesFeature("customassets",new Yc("2.4",!0))}t(){if(this._decLic.enterprise_license||this._includesFeature("noexporttracking",new Yc("2.4",!0)))return Promise.resolve();const e=this._decLic[si(wD)][0]+si(si(_D))+this._decLic[si(SD)];return new Uc(e).load().catch(()=>{})}isENT(){return this._decLic?this._decLic[si(bD)]:!1}_sigValid(){return this._verify(this._message,this._sig)}exp(){return!!this._decLic[si(zm)]}dl(){return Math.ceil((this._expAt()-Date.now())/(60*60*24*1e3))}isExp(e=Date.now()){return this._decLic[si(zm)]===null?!1:e>this._expAt()}_expAt(){return this._decLic[si(zm)]*1e3}_verify(e,t){let r,i;return i=this._encodeMessage(e),r=this._decodeSignature(t),r=r.substr(-64),i===r}_encodeMessage(e){return n7(e)}_decodeSignature(e){let t;return e=na.decode(e),e=a7(e),e=this._parseBigInt(e,16),t=e.modPowInt(this._e,this._n),t=t.toString(16),t}_parseBigInt(e,t){return new gD(e,t)}_parseLicense(){typeof this._l=="string"&&(!this._jsonValid()||(this._sig=this._decLic[si($m)]||"",delete this._decLic[si($m)],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(`,"${si($m)}":"([^"]*)"`),"")))}_includesFeature(e,t=new Yc("1.0",!0)){const r=new Yc(this._decLic[si(CD)],!0);return t.isMoreRecentThan(r)?!0:this._decLic[si(u1)]&&this._decLic[si(u1)].indexOf(e)!==-1}},TD=class{v(){return!0}c(){return Promise.resolve()}isToolAllowed(e){return!0}isWhiteLabel(){return!1}areCustomAssetsAllowed(){return!0}t(){return Promise.resolve()}isENT(){return!1}exp(){return!1}dl(){return 0}isExp(e=Date.now()){return!1}},h1=kD}),ha,ms,da,d1,hd,l7=F(()=>{ha=typeof window=="undefined"?global:window,ms=ha.requestAnimationFrame,da=ha.cancelAnimationFrame,d1=0,hd=["ms","moz","webkit","o"];for(let e=0;e<hd.length&&!ms;++e)ms=ha[`${hd[e]}RequestAnimationFrame`],da=ha[`${hd[e]}CancelAnimationFrame`]||ha[`${hd[e]}CancelRequestAnimationFrame`];ms&&(ms=ms.bind(ha)),da&&(da=da.bind(ha)),ms||(ms=function(e,t){const r=new Date().getTime(),i=Math.max(0,16-(r-d1)),n=setTimeout(function(){e(r+i)},i);return d1=r+i,n}),da||(da=function(e){clearTimeout(e)})}),DD,f1,c7=F(()=>{Do(),sa(),DD=class{constructor(e=new Qe(0,0),t=new Qe(1,1),r=new Qe(2,-1),i=new Qe(2,0)){this._p0=e.clone(),this._p1=t.clone(),this._p2=r.clone(),this._p3=i.clone(),this._segments=[],this._length=-1,this._sample=[]}set(e=new Qe(0,0),t=new Qe(1,1),r=new Qe(2,1),i=new Qe(2,0)){this._p0=e.clone(),this._p1=t.clone(),this._p2=r.clone(),this._p3=i.clone()}getLength(){return this._length}calculateSegments(e=100){let t=0,r=0;const i=[],n=1/e;let o=this._p0.clone();for(let s=1;s<=e;s++){const a=[];a.push({t,s:r,point:o}),t+=n,t=Math.min(t,1);const l=this.evalAt(t);r+=l.clone().subtract(o).len(),a.push({t,s:r,point:l}),i.push(a),o=l}return this._segments=i,this._length=r,r}evalAt(e){e=this.normalizeParameter(e);const t=this._p0.clone().multiply((1-e)**3),r=this._p1.clone().multiply(3*(1-e)*(1-e)*e),i=this._p2.clone().multiply(3*(1-e)*e*e),n=this._p3.clone().multiply(e*e*e);return t.add(r).add(i).add(n)}isInSegment(e,t){return e=this.normalizeArcLength(e),e>=t[0].s&&e<=t[1].s}getArcLengthSegment(e){e=this.normalizeArcLength(e);for(let t=0;t<this._segments.length;t++){const r=this._segments[t];if(this.isInSegment(e,r))return r}return null}normalizeArcLength(e){return Math.max(Math.min(this._length,e),0)}normalizeParameter(e){return Math.max(Math.min(1,e),0)}getParameterForArcLength(e){const t=this.normalizeArcLength(e),r=this.getArcLengthSegment(t);if(!r)return Ke.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;const i=(t-r[1].s)/(r[0].s-r[1].s);return i*r[0].t+(1-i)*r[1].t}evalAtArcLength(e){return this.evalAt(this.getParameterForArcLength(e))}approximateAtArcLength(e){const t=this.normalizeArcLength(e),r=this.getArcLengthSegment(t);if(!r)return-1;const i=(t-r[1].s)/(r[0].s-r[1].s);return r[0].point.clone().multiply(i).add(r[1].point.clone().multiply(1-i))}parameterSample(e=100){const t=1/e,r=[];let i=0;for(let n=0;n<=e+1;n++)r.push(this.evalAt(i)),i+=t;return this._sample=r,[...r]}arcLengthApproxSample(e=100,t=!1,r=!1){const i=this._length/e,n=[];let o=0;for(let s=t?1:0;s<e+1;s++)n.push(this.approximateAtArcLength(o)),o+=i;return r&&n.pop(),this._sample=n,[...n]}},f1=DD}),ID,p1,u7=F(()=>{ID=class{constructor(e,t){this.min=e,this.max=t}getMin(){return this.min}getMax(){return this.max}getLength(){return this.max-this.min}contains(e){return this.min<=e&&e<=this.max}},p1=ID}),tn,m1,h7=F(()=>{tn=class{constructor(e,t,r){this.x=e,this.y=t,this.z=r,typeof this.x=="undefined"&&(this.x=0),typeof this.y=="undefined"&&(this.y=0),typeof this.z=="undefined"&&(this.z=0)}set(e,t,r){return this.x=e,this.y=t,this.z=r,this}clone(){return new tn(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clamp(e,t){const r=e!==null&&typeof e!="undefined",i=t!==null&&typeof t!="undefined";return!(e instanceof tn)&&r&&(e=new tn(e,e,e)),!(t instanceof tn)&&i&&(t=new tn(t,t,t)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y),this.z=Math.max(e.z,this.z)),i&&(this.x=Math.min(t.x,this.x),this.y=Math.min(t.y,this.y),this.z=Math.min(t.z,this.z)),this}divide(e){return e instanceof tn?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e),this}subtract(e){return e instanceof tn?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e),this}multiply(e){return e instanceof tn?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e),this}add(e){return e instanceof tn?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e),this}equals(e){return e instanceof tn?e.x===this.x&&e.y===this.y&&e.z===this.z:e===this.x&&e===this.y&&e===this.z}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}fract(){return this.x%=1,this.y%=1,this.z%=1,this}toInt(){return this.x|=0,this.y|=0,this.z|=0,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}len(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toObject(){return{x:this.x,y:this.y,z:this.z}}toString(){return`Vector3({ x: ${this.x}, y: ${this.y}, z: ${this.z} })`}roundDecimal(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this.z=parseFloat(this.z.toFixed(e)),this}static fromObject(e){return new tn(e.x,e.y,e.z)}static get NULL(){return new tn(0,0,0)}},m1=tn}),ot={};_r(ot,{ColorMatrix:()=>Cm,CubicBezierCurve:()=>f1,Matrix:()=>aa,Range:()=>p1,Rectangle:()=>oi,Vector2:()=>Qe,Vector3:()=>m1});var RD=F(()=>{FE(),c7(),kE(),u7(),TE(),sa(),h7()}),Bm={};_r(Bm,{Base64:()=>na,Color:()=>Pe,ColorMatrix:()=>Cm,Configurable:()=>rr,Constants:()=>Sl,CubicBezierCurve:()=>f1,Engine:()=>_e,EventEmitter:()=>oa,Events:()=>Fm,FreeLicenseChecker:()=>TD,GLUtils:()=>Kh,LicenseChecker:()=>h1,Log:()=>Ke,Matrix:()=>aa,Range:()=>p1,Rectangle:()=>oi,Utils:()=>Ce,Vector2:()=>Qe,Vector3:()=>m1,cancelAnimationFrame:()=>da,requestAnimationFrame:()=>ms});var Qc=F(()=>{Do(),Om(),An(),Lm(),Gh(),Nc(),ed(),Qh(),SE(),ED(),hs(),l7(),RD()}),FD,d7=F(()=>{j0(),OD(),aD(),Qc(),FD=class{constructor(){this._container=new Hc,this._sprite=new g1,this._container.addChild(this._sprite)}render(e,t,r){const i=r.getDimensions(),n=this._getNextHighestPOT(i);this._renderTexture?this._renderTexture.resizeTo(n):this._renderTexture=new s1(e,n.x,n.y);const o=this._renderTexture.getDimensions();this._sprite.setTexture(r),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(e,t,i,o)}_updateSprite(e,t,r,i){t.setTexture(this._renderTexture),this._renderTexture.setFrame(new oi(0,0,r.x,r.y))}_getNextHighestPOT(e){return new Qe(Ce.nextHighestPOT(e.x),Ce.nextHighestPOT(e.y))}getRenderTexture(){return this._renderTexture}dispose(){!this._renderTexture||(this._renderTexture.dispose(),delete this._renderTexture)}}}),g1,OD=F(()=>{d7(),j0(),Or(),g1=class extends Hc{constructor(e){super(),this._shader=null,this._width=0,this._height=0,this._anchor=new Qe(0,0),this._canvasSmoothingEnabled=!0,this._smoothDownscaling=!1,this._onTextureUpdate=this._onTextureUpdate.bind(this),this.setTexture(e)}_onTextureUpdate(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}_renderWebGL(e){const t=e.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new FD),this._texture&&this._potRenderer.render(e,this,this._texture)),e.restore(t),e.setObjectRenderer(e.renderers.sprite),e.renderers.sprite.render(this)}_renderCanvas(e){if(!this._texture)return;const t=this._worldTransform,r=this._texture.getFrame(),{width:i,height:n}=r,o=e.getCurrentRenderTarget().getPixelRatio(),s=this._anchor.x*-i|0,a=this._anchor.y*-n|0,l=e.getContext();if(l.setTransform(t.a,t.b,t.c,t.d,t.tx*o,t.ty*o),l.globalAlpha=this.getWorldAlpha(),!this._texture)return;const c=this._texture.getBaseTexture(),h=c.getPixelRatio(),f=c.getSource();l.imageSmoothingEnabled=this._canvasSmoothingEnabled,"beforeDraw"in e&&e.beforeDraw(l),l.drawImage(f,0,0,(f.naturalWidth||i)*h,(f.naturalHeight||n)*h,s*o,a*o,i*o,n*o)}isAtPosition(e){if(!this._texture)return;const t=this._worldTransform.applyInverseToVector(e),r=this._texture.getFrame(),{width:i,height:n}=r,o=new Qe(-i,-n);o.multiply(this._anchor);const s=o.clone().add(i,n);return!(t.x<o.x||t.x>s.x||t.y<o.y||t.y>s.y)}getLocalBounds(){if(this._localBoundsNeedUpdate&&this._texture){const e=this._localBounds,t=this._texture.getFrame();e.x=-t.width*this._anchor.x,e.y=-t.height*this._anchor.y,e.width=t.width,e.height=t.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}getBounds(){if(this._boundsNeedUpdate&&this._texture){const e=this._bounds,t=this._texture.getFrame(),r=this._worldTransform,i=this._anchor,n=r.rectangleToCoordinates(t,i);let o=n[0].x,s=n[0].y,a=o,l=s;n.forEach(({x:c,y:h})=>{o=Math.min(o,c),s=Math.min(s,h),a=Math.max(a,c),l=Math.max(l,h)}),e.x=o,e.width=Math.abs(a-o),e.y=s,e.height=Math.abs(l-s),this._boundsNeedUpdate=!1}return this._bounds.clone()}getTexture(){return this._texture}clearTexture(e=!0){!this._texture||(this._texture.off("update",this._onTextureUpdate),e&&this._texture.dispose(),this._texture=null,this._potRenderer&&(e&&this._potRenderer.dispose(),delete this._potRenderer))}setTexture(e){!e||(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=e,e.getBaseTexture().isLoaded()&&this._onTextureUpdate(),e.on("update",this._onTextureUpdate))}getShader(){return this._shader}setShader(e){this._shader=e}getWidth(){return this._width}setWidth(e){!this._texture||(this._scale.x=e/this._texture.getFrame().width,this._width=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0)}getHeight(){return this._height}setHeight(e){!this._texture||(this._scale.y=e/this._texture.getFrame().height,this._height=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0)}getDimensions(){return new Qe(this._width,this._height)}getAnchor(){return this._anchor}setAnchor(e,t){this._anchor.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}isSmoothDownscaling(){return this._smoothDownscaling}setSmoothDownscaling(e){this._smoothDownscaling=e}dispose(e=!1,t=!1){this._texture&&this._texture.off("update",this._onTextureUpdate),(e||t)&&this._texture&&this._texture.dispose(t),this._potRenderer&&this._potRenderer.dispose()}}}),MD,_e,Lm=F(()=>{j0(),XE(),td(),Y0(),h9(),v9(),OD(),id(),aD(),sD(),Em(),KT(),cs(),Rm(),MD={CanvasFilterManager:Dm,Container:Hc,BaseTexture:Vr,Texture:ad,RenderTexture:s1,WebGLRenderTarget:sd,CanvasRenderTarget:nd,Sprite:g1,Filter:Wc,Filters:qE,PixelArrayImage:A0,autoDetectRenderer(e,t,r={}){return zn.isSupported()?new n1(e,t,r):new od(e,t,r)},canvasRenderer(e,t,r={}){return new od(e,t,r)}},_e=MD}),PD,AD,f7=F(()=>{PD=class{static current(){return{}.ENV}static isTest(){return{}.ENV==="test"}static isDevelopment(){return{}.ENV==="development"}static isProduction(){return{}.ENV==="production"||!this.isTest()&&!this.isDevelopment()}},AD=PD}),zD,dd,v1=F(()=>{zD=class{constructor(e){this._head=0,this._buf=e}peekInt8(){return this._buf[this._head]}peekInt16(e=!1){const t=this._buf[this._head],r=this._buf[this._head+1];return e?(r<<8)+t:(t<<8)+r}peekInt24(e=!1){const t=this._buf[this._head],r=this._buf[this._head+1],i=this._buf[this._head+2];return e?(i<<16)+(r<<8)+t:(t<<16)+(r<<8)+i}peekInt32(e=!1){const t=this._buf[this._head],r=this._buf[this._head+1],i=this._buf[this._head+2],n=this._buf[this._head+3];return e?(n<<32)+(i<<16)+(r<<8)+t:(t<<32)+(r<<16)+(i<<8)+n}writeInt8(e){this._buf[this._head]=e&255}writeInt16(e){this._buf[this._head]=e>>8,this._buf[this._head+1]=e&255}readInt8(){const e=this.peekInt8();return this._head+=1,e}readInt16(e=!1){const t=this.peekInt16(e);return this._head+=2,t}readInt24(e=!1){const t=this.peekInt24(e);return this._head+=3,t}readInt32(e=!1){const t=this.peekInt32(e);return this._head+=4,t}readString(e){let t="";for(let r=0;r<e;r++){const i=this.readInt8();t+=String.fromCharCode(i)}return t}getHead(){return this._head}setHead(e){this._head=e}},dd=zD}),$D,BD,Um,y1=F(()=>{$D={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},BD={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},Um={MARKERS:$D,EXIF_TAGS:BD}}),Nm,LD,_1,UD,ND,p7=F(()=>{v1(),hs(),y1(),{invariant:Nm}=Ce,{MARKERS:LD,EXIF_TAGS:_1}=Um,UD=class{constructor(e){this._buf=e,this._stream=new dd(this._buf),this._stream.setHead(0),this._parse(),this._bigEndian=!1}isValid(){return this._stream.setHead(0),!(this._stream.readInt16()!==LD.EXIF||!(this._stream.readInt16()>0)||this._stream.readString(4)!=="Exif")}_parse(){if(!this.isValid())return;this._stream.setHead(10);const e=this._stream.getHead();this._bigEndian=!1;const t=this._stream.readInt16();t===18761?this._bigEndian=!1:t===19789?this._bigEndian=!0:Nm(!1,"Invalid TIFF data: No endian type found"),Nm(this._stream.readInt16(!this._bigEndian)===42,"Invalid TIFF data: No 0x002A");const r=this._stream.readInt32(!this._bigEndian);Nm(r>=8,"Invalid TIFF data: First IFD offset < 8");const i=e+r,n=this._readTags(this._stream,e,i,this._bigEndian);this._tags=n.tags,this._tagData=n.tagData}getTags(){return this._tags}getTagData(){return this._tagData}setOrientation(e){if(this._tagData.Orientation){const{entryOffset:t}=this._tagData.Orientation;this._stream.setHead(t+8),this._stream.writeInt16(this._bigEndian?e:(e&255)<<8|e>>8&255)}}_readTags(e,t,r,i){e.setHead(r);const n=e.readInt16(!i),o={},s=[];for(let a=0;a<n;a++){const l=r+a*12+2;e.setHead(l);let c=e.readInt16(!i),h,f,d;if(_1[c]){c=_1[c],h=e.readInt16(!i),f=e.readInt32(!i),d=e.readInt32(!i)+t;let p=null;switch(h){case 1:case 7:if(f===1)p=e.readInt8(!i);else{p=[];for(let v=0;v<f;v++)p.push(e.readInt8(!i))}break;case 2:e.setHead(f>4?d:l+8),p=e.readString(f);break;case 3:if(e.setHead(f>2?d:l+8),f===1)p=e.readInt16(!i);else{p=[];for(let v=0;v<f;v++)p.push(e.readInt16(!i))}break;case 4:case 9:if(e.setHead(f>1?d:l+8),f===1)p=e.readInt32(!i);else{p=[];for(let v=0;v<f;v++)p.push(e.readInt32(!i))}break;case 5:case 10:if(e.setHead(d),f===1){const v=e.readInt32(!i),g=e.readInt32(!i);p=v/g}else{p=[];for(let v=0;v<f;v++){const g=e.readInt32(!i),m=e.readInt32(!i),y=g/m;p.push(y)}}break}o[c]=p,s[c]={value:p,numValues:f,entryOffset:l,valueOffset:d,type:h}}}return{tags:o,tagData:s}}getBuffer(){return this._buf}},ND=UD}),jD,HD,b1,m7=F(()=>{v1(),y1(),{MARKERS:jD}=Um,HD=class{constructor(e){this._buf=e,this._stream=new dd(this._buf),this._stream.setHead(0)}isValid(){if(this._stream.setHead(0),this._stream.readInt16()!==jD.APP0||!(this._stream.readInt16()>=16))return!1;const r=this._stream.readString(4),i=this._stream.readInt8();return!(r!=="JFIF"||i!==0)}setUnitDensity(e){this._stream.setHead(11),this._stream.writeInt8(e)}setDensityX(e){this._stream.setHead(12),this._stream.writeInt16(e)}setDensityY(e){this._stream.setHead(14),this._stream.writeInt16(e)}getUnitDensity(){return this._stream.setHead(11),this._stream.readInt8()}getDensityX(){return this._stream.setHead(12),this._stream.readInt16()}getDensityY(){return this._stream.setHead(14),this._stream.readInt16()}getBuffer(){return this._buf}},b1=HD}),Kc,fd,WD,gs,jm,VD=F(()=>{v1(),Gh(),y1(),p7(),m7(),hs(),{MARKERS:Kc}=Um,fd="data:image/jpeg;base64,",WD=new RegExp(`^${fd}`,"i"),gs=class{constructor(e){this._buf=e,this._stream=new dd(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new ND(this._getMarkerBuffer(Kc.EXIF)),this._jfifData=new b1(this._getMarkerBuffer(Kc.JFIF))}static toDataURL(e){return fd+na.encode(e)}static fromDataURL(e){const t=e.replace(fd,"");return na.decode(t)}restoreSegmentsInArray(e){return e=this.restoreExifTagsToImageData(e),this.restoreJfifSegmentToImageData(e)}restoreSegments(e){let t=gs.fromDataURL(e);return t=this.restoreSegmentsInArray(t),gs.toDataURL(t)}restoreExifTagsToImageData(e){if(!this._exifData.isValid())return e;const r=this._sliceIntoSegments(e)[1][0],i=e.slice(0,r),n=e.slice(r);let o=i.concat(this._exifData.getBuffer());return o=o.concat(n),o}restoreJfifSegmentToImageData(e){if(!this._jfifData.isValid())return e;const t=this._sliceIntoSegments(e),r=this._findSegment(Kc.JFIF,t);let i=[];if(r){const n=r[0],o=r[1],s=e.slice(0,n),a=e.slice(n,o),l=e.slice(o),c=new b1(a);c.setDensityX(this._jfifData.getDensityX()),c.setDensityY(this._jfifData.getDensityY()),c.setUnitDensity(this._jfifData.getUnitDensity()),i=s.concat(a).concat(l)}else return e;return i}restoreExifTags(e){const t=gs.fromDataURL(e),r=this.restoreExifTagsToImageData(t);return gs.toDataURL(r)}restoreJfifSegment(e){if(!this._jfifData.isValid())return e;const t=gs.fromDataURL(e),r=this.restoreJfifSegmentToImageData(t);return gs.toDataURL(r)}setOrientation(e){return this._exifData.setOrientation(e)}static isJPEG(e){return WD.test(e)}static bufferIsJPEG(e){return e[0]===255&&e[1]===216&&e[2]===255}static fromBase64String(e){const t=e.replace(fd,""),r=na.decode(t);return new gs(r)}_findSegment(e,t=this._segments){for(let r=0;r<t.length;r++){const i=t[r][0],n=t[r][1];if(this._stream.setHead(i),this._stream.peekInt16()===e)return[i,n]}return!1}_getLastSegment(e=this._segments){return e[e.length-1]}_getMarkerBuffer(e,t=this._segments){const r=this._findSegment(e,t);if(r){const i=r[0],n=r[1];return this._buf.slice(i,n)}return!1}_sliceIntoSegments(e){const t=new dd(e),r=[];for(;t.getHead()<e.length;){const i=t.readInt16();if(i!==Kc.SOI){if(i===Kc.SOS)break;if(i>=65280&&i<=65535){const n=t.readInt16(),o=t.getHead()+n-2;r.push([t.getHead()-4,o]),t.setHead(o)}else throw new Error(`Invalid marker: 0x${i.toString(16)}`)}}return this._stream.setHead(0),r}getTags(){return this._exifData.getTags()}getTagData(){return this._exifData.getTagData()}dispose(){this._buf=[],this._segments=[]}},jm=gs}),GD,vs,x1=F(()=>{GD=typeof window!="undefined"&&window.Image,vs=GD}),w1,S1,qD=F(()=>{Qc(),Qh(),w1=class extends oa{constructor(e=[]){super(),this._onOperationUpdate=this._onOperationUpdate.bind(this),this._cacheEnabled=!0,this._stack=e,this._stack.forEach(t=>{t.on("update",this._onOperationUpdate)})}clear(){this.forEach(e=>this.remove(e)),this._stack=[]}hasChanges(){return this._stack.filter(e=>!!e).some(e=>e.hasChanges())}_onOperationUpdate(e,t){this.emit(Fm.OPERATION_UPDATED,e,t)}enableCache(){this._cacheEnabled=!0}disableCache(){this._cacheEnabled=!1}forEach(e){return this._stack.filter(t=>!!t).forEach(e)}render(e,t){const r=t,i=this._stack.filter(l=>!!l).filter(l=>l.getEnabled());i.reverse();const n=i.filter(l=>!l.isDirtyForRenderer(e.getRenderer()))[0],o=i.indexOf(n);i.reverse();let s=0;o!==-1&&(s=i.length-o-1);for(let l=0;l<s;l++)Ke.info(this.constructor.name,`Skipping ${i[l].constructor.name}`);let a=Promise.resolve(r);for(let l=s;l<i.length;l++){const c=i[l];let h,f;a=a.then(d=>c.render(d).then(p=>(h&&p!==h&&!this._cacheEnabled&&f.disposeRenderTextures(),h=p,f=c,p)))}return a.then(l=>{const c=!i.some(h=>h.isDirtyForRenderer(e.getRenderer()));return{outputTexture:l,renderDone:c}})}validateSettings(){return Promise.all(this._stack.filter(e=>!!e).map(e=>e.validateSettings()))}setAllToDirty(e=!1){this.forEach(t=>t.setDirty(!0,e))}updateDirtinessForRenderer(e){let t=!1;for(let r=0;r<this._stack.length;r++){const i=this._stack[r];!i||(i.isDirtyForRenderer(e)&&(t=!0),t&&i.setDirtyForRenderer(!0,e))}}push(e){this._stack.push(e),e.on("update",this._onOperationUpdate)}pop(){const e=this._stack.pop();e&&(e.off("update",this._onOperationUpdate),e.dispose())}unshift(e){this._stack.unshift(e),e.on("update",this._onOperationUpdate)}clone(){return new w1(this._stack.slice(0))}get(e){return this._stack[e]}getByIdentifier(e){return Ce.Array.find(this._stack,t=>t&&t.constructor.identifier===e)}getIndexByIdentifier(e){return Ce.Array.findIndex(this._stack,t=>t&&t.constructor.identifier===e)}moveToTop(e){const t=Ce.Array.findIndex(this._stack,i=>i&&i.constructor.identifier===e);if(t<0||t===this._stack.length-1)return;const r=this.getByIdentifier(e);this._stack.splice(t,1),this._stack[this._stack.length]=r}set(e,t){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack[e]=t,t.on("update",this._onOperationUpdate)}remove(e){const t=this._stack.indexOf(e);t!==-1&&(this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack.splice(t,1))}removeAt(e){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),delete this._stack[e]}getStack(){return this._stack}dispose(){this.forEach(e=>{e.dispose()})}},S1=w1}),C1,XD,k1,YD=F(()=>{Qc(),C1=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Im(),XD=class{constructor(e,t){this._tag=e,this._name=t,this._start=C1()}stop(){const t=C1()-this._start,r=Math.round(1e3/t);Ke.info(this._tag,`${this._name} took ${t.toFixed(2)}ms (${r} FPS)`)}},k1=XD}),T1,Gr,QD=F(()=>{Do(),An(),Lm(),ed(),YD(),T1=class extends rr{constructor(e,t={}){super(t,{enabled:{type:"boolean",default:!0,serializable:!1}}),this._sdk=e,this._cacheEnabled=!1,this._dirtiness={},this._sprite=new _e.Sprite,this._container=new _e.Container,this._container.addChild(this._sprite)}_onOptionsChange(){this.setDirty(!0)}render(e){if(!this.getEnabled())return Ke.info(this.constructor.name,"Disabled - skipping"),Promise.resolve(e);if(!this._renderTexture){const n=e.getDimensions().floor();this._renderTexture=new _e.RenderTexture(this._sdk.getRenderer(),n.x,n.y)}const t=this._sdk.getRenderer();let r,i;if(Ke.canLog("info")&&(i=new k1(this.constructor.name,"Rendering")),this.isDirtyForRenderer(t)){this._sprite.setTexture(e);const n=this.getNewDimensions(e.getDimensions()).floor();this._renderTexture.resizeTo(n),this._renderTexture.clear(),r=this._render(e).then((o=!1)=>(this.setDirtyForRenderer(o,t),this._renderTexture))}else Ke.info(this.constructor.name,"Rendering from cache"),r=Promise.resolve(this._renderTexture);return r.then(n=>(i&&i.stop(),n))}_render(e){let t;return this._sdk.getRenderer().isOfType("webgl")?t=this._renderWebGL.bind(this):t=this._renderCanvas.bind(this),t(e)}_renderWebGL(e){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}_renderCanvas(e){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}getNewDimensions(e){return e.clone()}onBeforeExport(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}onAfterExport(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}_onBeforeExport(){}_onAfterExport(){}setTemporaryTransformChange(e,t){this._tempTransformChange=e,this._tempInverseTransformChange=t}reset(){this._dirty=!0,this._glslPrograms={}}isDirtyForRenderer(e){const t=this._dirtiness[e.id];return typeof t=="undefined"?!0:t}setDirtyForRenderer(e,t,r=!1){this._dirtiness[t.id]=e}setDirty(e,t=!1){for(const r in this._dirtiness)this.setDirtyForRenderer(e,{id:r},t)}getSDK(){return this._sdk}getInputDimensions(e=!0){let t=this._sdk.getInputDimensions();e&&t.multiply(this._sdk.getZoom()).floor();let r;return this._sdk.getOperationsStack().forEach(i=>{if(!r){if(i===this){r=!0;return}t=i.getNewDimensions(t)}}),t.floor()}clone(){const e=this.constructor;return new e(this._sdk,this.serializeOptions())}disposeRenderTextures(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}dispose(){this.disposeRenderTextures(),this._sprite.dispose()}},T1.identifier=null,Gr=T1}),KD,Hm,ZD,g7=F(()=>{Qc(),sa(),QD(),{OptionType:KD}=Sl,Hm=class extends Gr{getRotation(){let e=0;switch(this.getTags().Orientation){case 7:case 8:e=-90;break;case 3:case 4:e=-180;break;case 5:case 6:e=90;break}return e}_getFlipVertically(){const{Orientation:e}=this.getTags();return[5,7].indexOf(e)!==-1}_getFlipHorizontally(){const{Orientation:e}=this.getTags();return[2,4].indexOf(e)!==-1}_getFinalOptions(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}_render(e){const t=this._getFinalOptions(),i=t.rotation%360*(Math.PI/180);this._sprite.setScale(t.flipHorizontally?-1:1,t.flipVertically?-1:1),this._sprite.setRotation(i),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();const n=this._sprite.getBounds();return this._renderTexture.resizeTo(new Qe(n.width,n.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(e){const t=this._getFinalOptions();return e=e.clone(),t.rotation%180&&e.flip(),e}applyTo(e){const t=this._getFinalOptions(),r=Ce.createCanvas();Math.abs(t.rotation%180)===90?(r.width=e.height,r.height=e.width):(r.width=e.width,r.height=e.height);const i=r.getContext("2d"),n=t.rotation*Math.PI/180,o=.5*(r.width-e.width),s=.5*(r.height-e.height);return i.translate(o,s),i.translate(.5*e.width,.5*e.height),i.rotate(n),i.translate(-.5*e.width,-.5*e.height),t.flipVertically&&(i.translate(0,e.height),i.scale(1,-1)),t.flipHorizontally&&(i.translate(e.width,0),i.scale(-1,1)),i.drawImage(e,0,0),r}},Hm.identifier="exif-orientation",Hm.prototype.availableOptions={tags:{type:KD.OBJECT,default:{}}},ZD=Hm}),Wm={};_r(Wm,{ExifOrientationOperation:()=>ZD});var JD=F(()=>{g7()}),E1,e5,v7=F(()=>{Eo(),An(),Lm(),Nc(),ed(),x1(),hs(),E1=class extends rr{constructor(e,t={}){super(t),this._sdk=e}export(){const{imageFormat:e,transparent:t}=this._options,r=i=>i.renderDone?i:this._sdk.render().then(n=>r(n));return this.validateSettings().then(()=>this._prepareSDK().then(i=>r(i))).then(i=>{const{outputTexture:n,renderDone:o}=i,s=this._sdk.getRenderer(),a=s.getClearColor();e==="image/png"&&t&&s.setClearColor(new Pe(0,0,0,0));let l=s.getCanvas();return s.isOfType("webgl")&&(l=this._createCanvasFromTexture(n)),s.setClearColor(a),this._encodeImageFormat(l)}).then(i=>this._restoreExifMetadata(i,e)).then(i=>this._restoreSDK().then(()=>i))}_restoreExifMetadata(e,t,r){if(t===$c.JPEG){const i=this._sdk.getExif();i&&typeof e=="string"&&(e=i.restoreSegments(e))}return Promise.resolve(e)}_encodeAsDataURL(e,t,r){if(Ce.isBrowser){const i=e.toDataURL(t,r);return Nr(e),Promise.resolve(i)}try{const i=e.toDataURL(t,r);return Nr(e),Promise.resolve(i)}catch(i){return Promise.error(i)}}_encodeAsHTMLImage(e,t,r){return this._encodeAsDataURL(e,t,r).then(i=>{const n=new vs;return n.src=i,Nr(e),Promise.resolve(n)})}_encodeAsBuffer(e,t,r){return Promise.reject(new Error("Unsupported platform for RenderType"))}_encodeAsMSBlob(e,t,r){const i=e.msToBlob();return Nr(e),Promise.resolve(i)}_encodeAsBLOB(e,t,r){return new Promise((i,n)=>{e.toBlob(o=>{i(o)},t,r)})}_encodeImageFormat(e){const{imageFormat:t,quality:r}=this._options;let{renderType:i}=this._options;switch(i===Pn.BLOB&&e.msToBlob&&!e.toBlob&&(i=Pn.MSBLOB),i){case Pn.IMAGE:return this._encodeAsHTMLImage(e,t,r);case Pn.DATAURL:return this._encodeAsDataURL(e,t,r);case Pn.BUFFER:return this._encodeAsBuffer(e,t,r);case Pn.MSBLOB:return this._encodeAsMSBlob(e,t,r);case Pn.BLOB:return this._encodeAsBLOB(e,t,r)}return Promise.reject(new Error(`Unsupported RenderType: ${i}!`))}_prepareSDK(){const e=this._sdk.getRenderer();this._sdkSettings={dimensions:e.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),rendererPixelRatio:e.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);const t=e.isOfType("canvas");e.setPixelRatio(1),e.resizeTo(this._sdk.getFinalDimensions(),t),this._sdk.setAllOperationsToDirty(!0);const r=this._sdk.getOperationsStack();return r.forEach(i=>{i.disposeRenderTextures()}),r.disableCache(),this._sdk.render()}_restoreSDK(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);const t=this._sdk.getRenderer(),r=t.isOfType("canvas");return t.setPixelRatio(this._sdkSettings.rendererPixelRatio),t.resizeTo(this._sdkSettings.dimensions,r),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}_createCanvasFromTexture(e){const t=this._sdk.getRenderer(),r=this._sdk.getFinalDimensions(),i=this._sdk.getRenderer().getContext(),n=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,n);const o=e.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o,0);const s=new Uint8Array(r.x*r.y*4);i.readPixels(0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,s);const a=this._checkPixelsForTransparency(s);let l;if(a){const d=new _e.Sprite(e);d.setFilters([new _e.Filters.UnpremultiplyFilter]);const p=new _e.Container;p.addChild(d),l=new _e.RenderTexture(t,r.x,r.y),l.render(p);const v=l.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,v,0),i.readPixels(0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,s),t.setRenderTarget(),l.dispose()}const c=Ce.createCanvas();c.width=r.x,c.height=r.y;const h=c.getContext("2d"),f=h.createImageData(r.x,r.y);return f.data.set(s),h.putImageData(f,0,0),i.deleteFramebuffer(n),c}_checkPixelsForTransparency(e){const t=this._sdk.getFinalDimensions(),r=t.x*t.y*4;let i;for(let n=3;n<r;n+=4)if(i=e[n],i!==255)return!0;return!1}},E1.prototype.availableOptions={renderType:{type:"string",available:Ce.values(Pn),default:Pn.IMAGE},imageFormat:{type:"string",available:Ce.values($c),default:$c.PNG},quality:{type:"number",default:.8},transparent:{type:"boolean",default:!0}},e5=E1}),t5,r5,gn,D1,i5,Vm,Gm,Io,n5,y7,er,o5,s5,I1,a5,ur,_7=F(()=>{Qc(),VD(),x1(),v7(),qD(),YD(),JD(),{Rectangle:t5,Constants:r5,Engine:gn,Utils:D1,EventEmitter:i5,Events:Vm,Vector2:Gm,Log:Io,Base64:n5,Color:y7}=Bm,er=e=>D1.byteArrayToString(n5.decode(e)),{RenderType:o5,ImageFormat:s5,RendererType:I1}=r5,a5=class extends i5{constructor(e,t={}){if(super(),Ue(this,"_onContextLost",()=>{this.emit("context-lost")}),Ue(this,"_initWatermark",()=>{this._options.watermark&&this._options.watermark.watermarkURI&&(this._watermarkOperation=this.createOperation("watermark",{watermarkURI:this._options.watermark.watermarkURI,alignment:this._options.watermark.alignment,inset:this._options.watermark.inset,size:this._options.watermark.size,crossOrigin:this._options.crossOrigin}))}),this._onOperationUpdate=this._onOperationUpdate.bind(this),this._onContextRestored=this._onContextRestored.bind(this),this.version="3.9.0",this[er("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,this._preferredRenderer=e,this._options=ge(L({},t),{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:Math.max(typeof window!="undefined"&&window.devicePixelRatio||1,1)}),this._options.smoothUpscaling&&(gn.BaseTexture.DefaultMagFilter=gn.BaseTexture.LinearFilter),this._options.extensions=Object.assign(this._options.extensions,{operations:[],controls:[],languages:[]}),Io.setLevel(this._options.logLevel),this[er("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,!this[er("X29wdGlvbnM=")][er("bGljZW5zZQ==")])this[er("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,this._l=new Bm[er("RnJlZUxpY2Vuc2VDaGVja2Vy")];else{const r=Bm[er("TGljZW5zZUNoZWNrZXI=")];this._l=new r(this[er("X29wdGlvbnM=")][er("bGljZW5zZQ==")]),this._cv(!0).then(()=>{this._ct()}).catch(i=>{Io.error(er("TGljZW5zaW5n"),i.message)})}this._defaultRenderMode=this._options.renderMode,this._renderMode=this._options.renderMode,this._textureQuality=this._options.textureQuality,this._offset=new Gm,this._zoom=this._options.zoom,this._spriteScale=this._options.spriteScale,this._rotation=this._options.rotation,this._operations={},this._operationsStack=null,this.setOperationsStack(new S1),this._container=new gn.Container,this._sprite=new gn.Sprite,this._container.addChild(this._sprite),this._inputTexture=this._options.inputTexture,this._currentInputTexture=null,this._currentTexture=null,this._resizedTexture=null,this._resizedContainer=new gn.Container,this._resizedSprite=new gn.Sprite,this._resizedContainer.addChild(this._resizedSprite),this._texturesToDispose=[],this.setSmoothDownscaling(this._options.smoothDownscaling),this._registerOperations(),this._initRenderer(),this._renderer.constructor.type,this._options.displayWelcomeMessage,this[er("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&Io.log(er("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LmltZy5seS9zaWdudXAgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LmltZy5seS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2ltZy5seS9kb2NzL3Blc2RrL3dlYi9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),this._options.image&&this.setImage(this._options.image,this._options.exif)}_ct(){this._l.exp()&&(this._l.isExp()?Io.error(er("TGljZW5zaW5n"),er("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg==")):Io.warn(er("TGljZW5zaW5n"),er("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}_cv(e=!1){return this._l.c().catch(t=>{this[er("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;let r=er("SW52YWxpZCBsaWNlbnNlLg==");throw e&&(t.code==="ELICEXP"?r=er("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg=="):t.code==="ELICINVHOST"?r=er("VGhlIGJ1bmRsZSBpZGVudGlmaWVycyB0aGF0IHlvdSBzcGVjaWZpZWQgaW4geW91ciBsaWNlbnNlIGZpbGUgZG8gbm90IG1hdGNoIHRoZSBhcHAncyBidW5kbGUgaWRlbnRpZmllci4gUGxlYXNlIHVwZGF0ZSBhbmQgcmVkb3dubG9hZCB5b3VyIGxpY2Vuc2UgZnJvbSB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZCBhdCBodHRwczovL3d3dy5pbWcubHkvbG9naW4u"):t.code==="ELICINVPLAT"?r=er("VGhlIGxpY2Vuc2UgdGhhdCB5b3Ugc3BlY2lmaWVkIGlzIGZvciBhbm90aGVyIHBsYXRmb3JtLiBQbGVhc2UgZG93bmxvYWQgeW91ciBsaWNlbnNlIGZvciB0aGUgd2ViIHBsYXRmb3JtIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg=="):t.code==="ELICINVFMT"?r=er("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",typeof this._options.license):t.code==="ELICINV"?r=er("VGhlIHNpZ25hdHVyZSBvZiB5b3VyIGxpY2Vuc2UgaXMgbm90IHZhbGlkLiBQbGVhc2UgdHJ5IHRvIHJlZG93bmxvYWQgeW91ciBsaWNlbnNlIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg=="):r=er("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5IHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),t.message=r,new Error(t)})}_t(){this._l.t()}_fl(){return this[er("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}_onOperationUpdate(...e){this.emit(Vm.OPERATION_UPDATED,...e)}_onContextRestored(){Io.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(e=>{e.disposeRenderTextures()}),this.render()}export(e=o5.DATAURL,t=s5.PNG,r=.8,i=!0){return this._cv(!0).then(()=>(this.hasChanges()&&this._t(),this._operationsStack.forEach(o=>{o.onBeforeExport()}),new e5(this,{renderType:e,imageFormat:t,quality:r,transparent:i}).export().then(o=>(this._operationsStack.forEach(s=>{s.onAfterExport()}),Promise.resolve(o)))))}render(e=!0){if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");const t=this._renderer.getContext();t.startFrame&&t.startFrame();let r;Io.canLog("info")&&(r=new k1("\u26A1\u26A1\u26A1","Frame rendering")),Io.info("\u26A1\u26A1\u26A1","Rendering starts");const i=this._operationsStack;return i.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(n=>{this._renderMode==="export"&&(n=this._inputTexture),this._currentTexture=n,this._sprite.setTexture(n),this._container.updateTransform()}).then(()=>i.validateSettings()).then(()=>((this._fl()||!this[er("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")])&&(i.getByIdentifier("license-watermark")?i.moveToTop("license-watermark"):this.createOperation("license-watermark")),i.getByIdentifier("watermark")?i.moveToTop("watermark"):this._initWatermark(),i.render(this,this._currentTexture))).then(n=>{const{outputTexture:o}=n;switch(this._currentTexture=o,this._sprite.setTexture(this._currentTexture),this._renderMode){case"dynamic":{const s=this._renderer.getDimensions().clone().divide(2).add(this._offset);this._container.setScale(this._zoom/this.getTextureScale(),this._zoom/this.getTextureScale()),this._container.setPosition(s),this._sprite.setAnchor(.5,.5),this._sprite.setScale(this._spriteScale,this._spriteScale),this._sprite.setRotation(this._rotation);break}case"export":this._container.setScale(1,1),this._container.setPosition(0,0),this._sprite.setAnchor(0,0),this._sprite.setPosition(0,0),this._sprite.setScale(this._spriteScale,this._spriteScale),this._sprite.setRotation(0);break;case"adapter":this._container.setScale(1,1),this._container.setPosition(0,0),this._sprite.setAnchor(0,0),this._sprite.setPosition(0,0),this._sprite.setScale(1,1),this._sprite.setRotation(0);break}return e&&this._renderer.render(this._container),n}).then(n=>(r&&r.stop(),t.endFrame&&t.endFrame(),this._disposeTextures(),n))}getTextureScale(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}_prepareTexture(){return new Promise((e,t)=>{const r=this.getTextureScale();if(this._textureQuality===1)return e(this._inputTexture);const i=this.getInputDimensions().multiply(r).floor();let n;this._resizedTexture?this._resizedTexture.getDimensions().equals(i)||(this._resizedTexture.resizeTo(i),n=!0):(this._resizedTexture=new gn.RenderTexture(this._renderer,i.x,i.y),n=!0),n&&(this._resizedSprite.setScale(r,r),this._resizedSprite.setTexture(this._inputTexture),this._resizedTexture.render(this._resizedContainer)),e(this._resizedTexture)})}_registerOperations(){this._operations={};for(const e in Wm){const t=Wm[e];this._operations[t.identifier]=t}this._operations=L(L({},this._operations),this._options.extensions.operations)}registerOperations(e){e.forEach(t=>{this._operations[t.identifier]=t})}setAllOperationsToDirty(e=!1){this._operationsStack.setAllToDirty(e)}createOperation(e,t={},r=!0){const i=this._operations[e];if(!i)throw new Error(`No operation with identifier \`${e}\` found.`);const n=new i(this,t);return r&&this.addOperation(n),n}addOperation(e){this._operationsStack.push(e)}removeOperation(e){this._operationsStack.remove(e)}getInputDimensions(){const e=this._inputTexture.getFrame();return new Gm(e.width,e.height)}getFinalDimensions(e=!1){let t=this.getInputDimensions();return this._operationsStack.forEach(i=>{!i.getEnabled()||(t=i.getNewDimensions(t))}),e&&t.multiply(this._spriteScale),t.floor()}getOutputDimensions(e=!1){return this.getFinalDimensions(e).clone().multiply(this._zoom).floor()}getOutputTextureDimensions(e=!1){const t=this.getTextureScale();let r=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach(i=>{r=i.getNewDimensions(r)}),r}getCrossOrigin(){return D1.getCrossOrigin(this._options.crossOrigin||"Anonymous")}_initRenderer(){const e={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor};let t,r;if(this._renderMode!=="export"&&this._options.canvas){const{canvas:i}=this._options;t=i.width,r=i.height}else if(this._inputTexture){const i=this.getFinalDimensions();t=i.x,r=i.y}else t=1,r=1;switch(this._preferredRenderer){case I1.WEBGL:this._renderer=gn.autoDetectRenderer(t,r,e),this._renderer.on("context-restored",this._onContextRestored),this._renderer.on("context-lost",this._onContextLost);break;case I1.CANVAS:this._renderer=gn.canvasRenderer(t,r,e),this._renderer.on("context-restored",this._onContextRestored);break;default:Io.warn("PhotoEditorSDK",`PhotoEditorSDK Error: Renderer \`${this._preferredRenderer}\` not supported. Falling back to automatically detected renderer.`),this._renderer=gn.autoDetectRenderer(t,r,e)}}resizeTo(e){this._renderer.resizeTo(e,!0)}reset(){this._operationsStack.clear()}parseExif(e){if(!e)return;let{src:t}=e,r=!1,i=null;if(r=jm.isJPEG(t),i=t,r){let n=null;try{n=jm.fromBase64String(i)}catch{}return n||void 0}}_handleExifOrientation(){const e=this._exif.getTags();if(e&&e.Orientation){const t=e.Orientation!==1&&e.Orientation!==2,r=[2,4,5,7].indexOf(e.Orientation)!==-1;if(t||r){if(typeof navigator=="undefined")this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e);else{const i=window&&window.navigator&&window.navigator.userAgent||"";(!!i.match(/msie|trident/i)||i.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image"))&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e))}this._exif.setOrientation(1)}}}correctExifOrientation(e){const t=this.parseExif(e);if(!t)return e;const r=t.getTags();if(r&&r.Orientation){const i=r.Orientation!==1&&r.Orientation!==2,n=[2,4,5,7].indexOf(r.Orientation)!==-1;if(i||n){if(typeof navigator=="undefined"){const o=this.createOperation("exif-orientation",{},!1);o.setTags(r),e=o.applyTo(e)}else{const o=window&&window.navigator&&window.navigator.userAgent||"";if(!!o.match(/msie|trident/i)||o.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image")){const s=this.createOperation("exif-orientation",{},!1);s.setTags(r),e=s.applyTo(e)}}return t.setOrientation(1),r.Orientation=1,e}}return e}hasImage(){return this._image!==null&&typeof this._image!="undefined"}getImage(){return this._image}disposeTexture(e){this._texturesToDispose.push(e)}_disposeTextures(){for(let e=0;e<this._texturesToDispose.length;e++)this._texturesToDispose[e].dispose();this._texturesToDispose=[]}setImage(e,t=null,r=null){this._disposeTextures(),this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=e,this._image=e,this._exif=t||this.parseExif(e),this._exif&&this._handleExifOrientation();const i=new gn.BaseTexture(this._image),n=new t5(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);r&&(n.width=r.x,n.height=r.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new gn.Texture(i,n),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.emit("new-image"),this.setAllOperationsToDirty(!0)}setInputTexture(e){this._inputTexture=e}getCanvas(){return this._renderer.getCanvas()}setCanvas(e){this._renderer.setCanvas(e)}getSprite(){return this._sprite}getContainer(){return this._container}getOperationsStack(){return this._operationsStack}setOperationsStack(e){this._operationsStack&&this._operationsStack.off(Vm.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=e,this._operationsStack.on(Vm.OPERATION_UPDATED,this._onOperationUpdate)}getOperations(){return this._operations}getRenderer(){return this._renderer}getOffset(){return this._offset}setOffset(e,t){e instanceof Gm?this._offset.copy(e):this._offset.set(e,t)}getRenderMode(){return this._renderMode}setRenderMode(e){this._renderMode=e}getZoom(){return this._zoom}setZoom(e){this._zoom=e,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}getTextureQuality(){return this._renderMode==="export"?1:this._textureQuality}setTextureQuality(e){e!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,e),this._textureQuality===1&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}getSpriteScale(){return this._spriteScale}setSpriteScale(e){this._spriteScale=e,this._sprite.setScale(e,e),this._sprite.updateTransform()}getPixelRatio(){return this._options.pixelRatio}getExif(){return this._exif}getOptions(){return this._options}getInputTexture(){return this._inputTexture}setSmoothDownscaling(e){this._options.smoothDownscaling=e,this._sprite.setSmoothDownscaling(e),this._resizedSprite.setSmoothDownscaling(e)}setRotation(e){this._rotation=e}getRotation(){return this._rotation}hasChanges(){return this.getOperationsStack().hasChanges()}dispose(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}},ur=a5}),l5,Ht,qm=F(()=>{Do(),QB(),An(),Lm(),Gh(),Nc(),ed(),f7(),Qh(),VD(),x1(),ED(),RD(),qD(),hs(),JD(),QD(),_7(),ur.version="3.9.0",ur.Math=ot,ur.Operations=Wm,ur.Engine=_e,ur.Color=Pe,ur.LicenseChecker=h1,ur.Operation=Gr,ur.EventEmitter=oa,ur.Utils=Ce,ur.Env=AD,ur.OperationsStack=S1,ur.EXIF=jm,ur.Image=vs,ur.Configurable=rr,ur.Log=Ke,ur.Loaders=bE,ur.RenderType=Pn,ur.ImageFormat=$c,ur.OptionType=dm,ur.RendererType=pm,ur.UniformType=fm,ur.Base64=na,l5={},ur.UI=l5,Ht=ur}),ue=F(()=>{qm(),qm()}),c5,b7=F(()=>{c5=`precision highp float;

varying vec2 v_texCoord;
uniform sampler2D u_image;

uniform float u_gamma;
uniform float u_shadows;
uniform float u_highlights;
uniform float u_whites;
uniform float u_blacks;

uniform mat4 u_colorMatrix;
uniform vec4 u_colorOffset;

const float EPSILON = 0.0000001;

float calculateLuminance(vec3 rgb) {
    // This is the luminance calculation part of the RGB to HSL formular.
    vec4 p = mix(
        vec4(rgb.gb, 0.0, -1.0 / 3.0),
        vec4(rgb.bg, -1.0, 2.0 / 3.0),
        vec4(rgb.g < rgb.b)
    );

    vec4 q = mix(
        vec4(rgb.r, p.yzx),
        vec4(p.xyw, rgb.r),
        vec4(rgb.r < p.x)
    );

    float croma = q.x - min(q.w, q.y);
    float luminance = q.x - croma * 0.5;
    return luminance;
}

vec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){
  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
}

void main() {

  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);
  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha

  // Apply gamma
  if (u_gamma != 1.0) {
    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));
  }

  // Apply shadows and highlights
  float luminance = calculateLuminance(color.rgb);

  float shadow = u_shadows >= 0.0
    ? clamp(
          pow(luminance, 1.0 / (u_shadows + 1.0))
          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76
          - luminance
    , 0.0, max(u_shadows, 1.0))
    : -clamp(
          pow(luminance, 1.0 / (-u_shadows + 1.0))
          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76
          - luminance
    , 0.0, max(-u_shadows, 1.0));

  float highlight = u_highlights < 0.0
    ? clamp(
          1.0
          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))
          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8
          - luminance
     , -1.0, 0.0)
    : -clamp(
          1.0
          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))
          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8
          - luminance
     , -1.0, 0.0);

  // Bright color need more contrast and dark color need more brightness.
  // This is to keep saturatation because the color information of a dark colors is lost.
  float shadowContrast   = shadow * luminance * luminance;
  float shadowBrightness = shadow - shadowContrast;

  float offset = luminance + shadowContrast + highlight;
  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);
  
  // Apply Color Matrix
  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;
  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);
  color = clamp(color, 0.0, 1.0);
  color.rgb *= color.a; // Reset premultiplied alpha

  gl_FragColor = color;
}
`});function R1(e,t,r,i,n){return(e-t)*(n-i)/(r-t)+i}var u5,Rl,h5,F1,O1,d5=F(()=>{ue(),b7(),{ColorMatrix:u5}=ot,Rl=1e-7,h5=e=>{const t=Math.max(e.r,e.g,e.b),r=Math.min(e.r,e.g,e.b);return(t+r)/2},F1=class extends _e.Filter{constructor(){super(),this._fragmentSource=c5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),{colorMatrix:l,gamma:c,shadows:h,highlights:f,whites:d,blacks:p}=this._options,v=c!==1,g=h!==0||f!==0;let m=new Pe(0,0,0,0);for(let y=0;y<n.width*n.height;y++){const _=y*4;if(m.r=a.data[_]/255,m.g=a.data[_+1]/255,m.b=a.data[_+2]/255,v&&(m.r=Math.pow(m.r,1/Math.max(c,Rl)),m.g=Math.pow(m.g,1/Math.max(c,Rl)),m.b=Math.pow(m.b,1/Math.max(c,Rl))),g){const b=h5(m),w=h>=0?Ce.clamp(Math.pow(b,1/(h+1))+Math.pow(b,2/(h+1))*-.76-b,0,Math.max(h,1)):-Ce.clamp(Math.pow(b,1/(-h+1))+Math.pow(b,2/(-h+1))*-.76-b,0,Math.max(-h,1)),S=f<0?Ce.clamp(1-Math.pow(1-b,1/(1-f))-Math.pow(1-b,2/(1-f))*-.8-b,-1,0):-Ce.clamp(1-Math.pow(1-b,1/(1+f))-Math.pow(1-b,2/(1+f))*-.8-b,-1,0),C=w*b*b,D=w-C,E=b+C+S;m.r=Ce.clamp(E*((m.r+D)/Math.max(b,Rl)),0,1),m.g=Ce.clamp(E*((m.g+D)/Math.max(b,Rl)),0,1),m.b=Ce.clamp(E*((m.b+D)/Math.max(b,Rl)),0,1)}m=l.apply(m).clamp(0,1),m.r=R1(m.r,0,1,p/2,1+d/2),m.g=R1(m.g,0,1,p/2,1+d/2),m.b=R1(m.b,0,1,p/2,1+d/2),a.data[_]=m.r*255,a.data[_+1]=m.g*255,a.data[_+2]=m.b*255}s.putImageData(a,0,0)}},F1.prototype.availableOptions={gamma:{type:"number",default:1,uniformType:"f"},shadows:{type:"number",default:0,uniformType:"f"},highlights:{type:"number",default:1,uniformType:"f"},whites:{type:"number",default:0,uniformType:"f"},blacks:{type:"number",default:0,uniformType:"f"},colorMatrix:{type:"color-matrix",default:new u5,uniformType:"mat4"},colorOffset:{type:"array",default:[],uniformType:"4f"}},O1=F1}),f5,x7=F(()=>{f5=`precision mediump float;

// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE
uniform sampler2D u_image;

// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)
uniform vec2 u_pixelDimension;

// Range (-1.0 - 1.0)
uniform float u_clarity;

varying vec2 v_texCoord;

uniform mat4 u_colorMatrix;
uniform vec4 u_colorOffset;

const float EPSILON = 0.000001;

vec4 unpremultiply(vec4 col) {
    col.rgb /= max(col.a, EPSILON);
    return col;
}

void main() {
    vec4 color = texture2D(u_image, v_texCoord);
    color = unpremultiply(color);

    // L = Left, R = Right, C = Center, T = Top, B = Bottom
    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));
    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));
    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));

    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));
    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));
    
    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));
    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));
    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));

    vec4 mergedColor = color;
    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;
    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;
    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;

    mergedColor /= 9.0;

    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);
    // 1.0 and 0.0 result in white not black, therefore we clamp

    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,
    // and for values between 0.1 and 0.2 it will produce a gradient.
    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.
    // And values above 0.9 will be mapped to 0.
    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));

    // here we apply the high pass filter. Its strength is determined by the uniform ,
    // and the frequence factor. That means the only the mid tones are affected by this filter.
    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.
    // Therefore we see this little magic number '3.7'.
    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;

    // apply exposure but only to the mid tones.
    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);

    // apply contrast and desaturation matrix
    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;

    color.rgb *= color.a; // Premultiply alpha

    gl_FragColor = clamp(color, 0.0, 1.0);
}
`}),p5,m5,M1,g5,w7=F(()=>{ue(),x7(),{Vector2:p5,ColorMatrix:m5}=ot,M1=class extends _e.Filter{constructor(){super(),this._fragmentSource=f5}_applyCanvas(e,t,r,i=!1){const n=r.getContext(),o=t.getCanvas(),s=t.getContext(),{clarity:a}=this._options,{colorMatrix:l}=this._options,c=new Pe(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),{width:h}=o,{height:f}=o,d=s.getImageData(0,0,h,f),p=n.createImageData(h,f);this.canvasShader(d,p,a,l,c),n.putImageData(p,0,0)}canvasShader(e,t,r,i,n){const o=(m,y,_)=>Math.min(Math.max(m,y),_),s=(m,y,_)=>{const b=o((_-m)/(y-m),0,1);return b*b*(3-2*b)},a=e.width*4,{length:l}=e.data,c=l-1,h=0,f=e.data,d=t.data,p=new Pe,v=255*9,g=m=>(m=m<h?h:m,m=m>c?c:m,f[m]);for(let m=0;m<l;m+=4){let y=g(m+0),_=g(m+1),b=g(m+2),w=g(m+3);const S=(y+g(m-4-a+0)+g(m-4+0)+g(m-4+a+0)+g(m-a+0)+g(m+a+0)+g(m+4-a+0)+g(m+4+0)+g(m+4+a))/v,C=(_+g(m-4-a+1)+g(m-4+1)+g(m-4+a+1)+g(m-a+1)+g(m+a+1)+g(m+4-a+1)+g(m+4+1)+g(m+4+a+1))/v,D=(b+g(m-4-a+2)+g(m-4+2)+g(m-4+a+2)+g(m-a+2)+g(m+a+2)+g(m+4-a+2)+g(m+4+2)+g(m+4+a+2))/v,E=(w+g(m-4-a+3)+g(m-4+3)+g(m-4+a+3)+g(m-a+3)+g(m+a+3)+g(m+4-a+3)+g(m+4+3)+g(m+4+a+3))/v;y/=255,_/=255,b/=255,w/=255;const I=o(y*.3+_*.59+b*.1,.111111,.999999),M=Math.min(s(1-I,0,.11),s(I,0,.11)),k=r*3.7*M,R=Math.pow(2,r*.27*M),$=o(y+o((y-S)*k,0,10),0,1)*R,H=o(_+o((_-C)*k,0,10),0,1)*R,j=o(b+o((b-D)*k,0,10),0,1)*R,V=o(w+o((w-E)*k,0,10),0,1);p.set($,H,j,V);const J=i.apply(p).clamp(0,1);d[m+0]=J.r*255,d[m+1]=J.g*255,d[m+2]=J.b*255,d[m+3]=J.a*255}}},M1.prototype.availableOptions={clarity:{type:"number",default:0,uniformType:"f"},pixelDimension:{type:"vector2",default:new p5(100,100),uniformType:"2f"},colorMatrix:{type:"color-matrix",default:new m5,uniformType:"mat4"},colorOffset:{type:"array",default:[],uniformType:"4f"}},g5=M1}),v5,S7=F(()=>{v5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform vec2 u_pixelDimension;
uniform float u_sharpness;
 
const float EPSILON = 0.000001;
 
void main() {
    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);

    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));
    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;
 
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);
    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);
 
    color.rgb /= max(color.a, EPSILON); // unpremultiply
    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply
 
    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);
 
    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);
      
    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply
}`}),y5,P1,_5,C7=F(()=>{ue(),S7(),{Vector2:y5}=ot,P1=class extends _e.Filter{constructor(){super(),this._fragmentSource=v5}_applyCanvas(e,t,r,i=!1){const n=r.getContext(),o=t.getCanvas(),s=t.getContext(),{sharpness:a}=this._options,{width:l}=o,{height:c}=o,h=s.getImageData(0,0,l,c),f=n.createImageData(l,c);this.canvasShader(h,f,a),n.putImageData(f,0,0)}canvasShader(e,t,r){const i=(b,w,S)=>Math.min(Math.max(b,w),S),{width:o}=e,{height:s}=e,a=e.data,l=t.data,c=(b,w,S)=>b*(1-S)+w*S,h=b=>i(a[b]/255,0,1),f=(b,w)=>{const S=i(b,0,o-1),C=i(w,0,s-1);return 4*(S+o*C)},d=[],p=[],v=[-1,0,0,1],g=[0,-1,1,0],m=r>0?-1:.2,y=r>0?5:.2,_=Math.abs(r);for(let b=0;b<o;b++)for(let w=0;w<s;w++){const S=f(b,w);d[0]=h(S+0),d[1]=h(S+1),d[2]=h(S+2),d[3]=h(S+3),p[0]=y*d[0]*d[3],p[1]=y*d[1]*d[3],p[2]=y*d[2]*d[3],p[3]=y*d[3];for(let C=0;C<4;C++){const D=v[C],E=g[C],I=f(b+D,w+E),M=h(I+3);p[3]+=m*M;for(let k=0;k<3;k++)p[k]+=m*h(I+k)*M}for(let C=0;C<3;C++)p[C]/=Math.max(p[3],1e-6),p[C]=i(p[C],0,1);p[3]=i(p[3],0,1);for(let C=0;C<4;C++)d[C]=i(c(d[C],p[C],_),0,1),l[S+C]=d[C]*255}}},P1.prototype.availableOptions={sharpness:{type:"number",default:0,uniformType:"f"},pixelDimension:{type:"vector2",default:new y5(100,100),uniformType:"2f"}},_5=P1}),b5,k7=F(()=>{b5=`precision mediump float;

// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE
uniform sampler2D u_image;

// Range (-1.0 - 1.0)
uniform float u_temperature;

const lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);

const mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);
const mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);

const float EPSILON = 0.0000001;

varying vec2 v_texCoord;
void main() {
  float temperature = u_temperature;
  const float tint = 0.0;
  vec4 source = texture2D(u_image, v_texCoord);

  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha

  vec3 yiq = RGBtoYIQ * source.rgb;
  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);
  vec3 rgb = YIQtoRGB * yiq;

  vec3 processed = mix(
    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),
    (2.0 * rgb * warmFilter),
    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)
  );

  vec4 color = vec4(mix(rgb, processed, temperature), source.a);

  color.rgb *= color.a;   // Premultiply alpha again

  gl_FragColor = color;
}
`}),A1,x5,T7=F(()=>{ue(),k7(),A1=class extends _e.Filter{constructor(){super(),this._fragmentSource=b5}_applyCanvas(e,t,r,i=!1){const n=r.getContext(),o=t.getCanvas(),s=t.getContext(),{temperature:a}=this._options,{width:l}=o,{height:c}=o,h=s.getImageData(0,0,l,c),f=n.createImageData(l,c);this.canvasShader(h,f,a),n.putImageData(f,0,0)}canvasShader(e,t,r){const i=(m,y,_)=>Math.min(Math.max(m,y),_),n=(m,y,_)=>m*(1-_)+y*_,o=(m,y)=>{const _=m[0]*y[0]+m[3]*y[1]+m[6]*y[2],b=m[1]*y[0]+m[4]*y[1]+m[7]*y[2],w=m[2]*y[0]+m[5]*y[1]+m[8]*y[2];return[_,b,w]},{length:s}=e.data,a=s-1,l=0,c=e.data,h=t.data,f=m=>(m=m<l?l:m,m=m>a?a:m,c[m]),d=[.93,.54,0],p=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],v=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],g=0;for(let m=0;m<s;m+=4){const y=f(m+0)/255,_=f(m+1)/255,b=f(m+2)/255,w=f(m+3)/255,C=o(p,[y,_,b]);C.z=i(C.z+g*.5226*.1,-.5226,.5226);const D=o(v,C),E=[D[0]<.5?2*D[0]*d[0]:1-2*(1-D[0])*(1-d[0]),D[1]<.5?2*D[1]*d[1]:1-2*(1-D[1])*(1-d[1]),D[2]<.5?2*D[2]*d[2]:1-2*(1-D[2])*(1-d[2])];h[m+0]=n(D[0],E[0],r)*255,h[m+1]=n(D[1],E[1],r)*255,h[m+2]=n(D[2],E[2],r)*255,h[m+3]=w*255}}},A1.prototype.availableOptions={temperature:{type:"number",default:0,uniformType:"f"}},x5=A1}),ys,pd,w5,E7=F(()=>{ue(),d5(),w7(),C7(),T7(),{ColorMatrix:ys}=ot,pd=class extends Gr{constructor(...e){super(...e),this._clarityFilter=new g5,this._temperatureFilter=new x5,this._sharpnessFilter=new _5,this._filter=new O1,this._sprite.setFilters([this._clarityFilter,this._temperatureFilter,this._filter])}_render(e){const t=e.getDimensions();t.x=1/t.x,t.y=1/t.y;const r=new ys;r.multiply(ys.createSaturationMatrix(-.3*this._options.clarity+1)),r.multiply(ys.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:t,colorMatrix:r,colorOffset:r.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature}),this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:t});const i=new ys;i.multiply(ys.createExposureMatrix(this._options.exposure)),i.multiply(ys.createSaturationMatrix(this._options.saturation+1)),i.multiply(ys.createContrastMatrix((this._options.contrast>0?this._options.contrast*2:this._options.contrast)+1)),i.multiply(ys.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:i,colorOffset:i.getOffsets()});const n=[];return this._options.clarity!==0&&n.push(this._clarityFilter),this._options.sharpness!==0&&n.push(this._sharpnessFilter),this._options.temperature!==0&&n.push(this._temperatureFilter),n.push(this._filter),this._sprite.setFilters(n),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose(),this._sharpnessFilter.dispose()}},pd.identifier="adjustments",pd.prototype.availableOptions={brightness:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:"number",default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:"number",default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1}},Ht.Operations.AdjustmentsOperation=pd,w5=pd}),S5,D7=F(()=>{S5=`/*
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 * @license
 */

uniform sampler2D u_image;
uniform float u_blurRadius;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(gl_FragCoord.xy / u_texSize.xy);
    float radius = u_blurRadius;

    const float steps = 30.0;

    for (float t = -steps; t <= steps; t++) {
        float percent = (t + offset - 0.5) / steps;
        float weight = 1.0 - abs(percent);

        // Somehow \`sample\` is a keyword in headless-gl
        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

        color += _sample * weight;
        total += weight;
    }

    gl_FragColor = color / total;
}
`}),md,z1,Ro,gd=F(()=>{ue(),D7(),{Vector2:md}=ot,z1=class extends _e.Filter{constructor(...e){super(...e),this._fragmentSource=S5,this._lastBlurRadius=null,this._lastDimensions=new md(0,0),this._blurredRenderTarget=new _e.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,r,i=!1,n=null){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,r,i);return}const o=t.getCanvas(),s=t.getContext(),a=r.getContext();this._lastBlurRadius===this._options.blurRadius&&a.drawImage(o,0,0);const l=s.getImageData(0,0,o.width,o.height),c=a.getImageData(0,0,o.width,o.height);let h=this._options.blurRadius;const{delta:f}=this._options,d=30;for(let p=0;p<o.width;p++)for(let v=0;v<o.height;v++){const m=(p+v*o.width)*4;let y=0,_=0,b=0,w=0,S=0;n&&(h=n(p/o.width,v/o.height));const C=this._random(p,1-v/o.height);for(let D=-d;D<=d;D++){const E=(D+C-.5)/d,I=1-Math.abs(E),M=f.x*E*h,k=f.y*E*h,R=Math.max(Math.min(p+M,o.width-1),0),$=Math.max(Math.min(v+k,o.height-1),0),H=(Math.round($)*o.width+Math.round(R))*4,j=l.data[H+3],V=j*l.data[H],J=j*l.data[H+1],ae=j*l.data[H+2];y+=V*I,_+=J*I,b+=ae*I,w+=j*I,S+=I}y/=S,_/=S,b/=S,w/=S,c.data[m]=y/w,c.data[m+1]=_/w,c.data[m+2]=b/w,c.data[m+3]=w}a.putImageData(c,0,0),this._lastDimensions.copy(new md(o.width,o.height))}_renderLQBlur(e,t,r,i){const n=t.getDimensions(),o=!this._lastDimensions.equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),r.setPixelRatio(t.getPixelRatio()),r.resizeTo(t.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||o)&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),r.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(n)}_random(e,t){const n=43758.5453,o=e*12.9898+t*78.233,s=o-3.14*Math.floor(o/3.14),a=Math.sin(s)*n;return a-Math.floor(a)}},z1.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},delta:{type:"vector2",default:new md(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new md(100,100),uniformType:"2f"},blurQuality:{type:"string",default:"low"}},Ro=z1}),$1,vd,C5,I7=F(()=>{ue(),gd(),{Vector2:$1}=ot,vd=class extends Gr{constructor(...e){super(...e),this._lastBlurRadius=this._options.blurRadius;const t={blurQuality:{type:"string"}};this._horizontalFilter=new Ro({},t),this._verticalFilter=new Ro({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new $1(.5,.5)),this._verticalFilter.setDelta(new $1(-.5,.5)),this._filter=new Ro({},t)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions(),r=t.min(),{blurRadius:i}=this._options,n={blurRadius:i*r,texSize:t,blurQuality:"high"};return this._horizontalFilter.set(n),this._verticalFilter.set(n),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){const{blurRadius:t}=this._options,r=e.getDimensions();return this._filter.set({blurRadius:t,texSize:r,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}transform(e){const t=this.getBlurRadius(),r=e.applyToRelativeSize(t);this.set({blurRadius:r},!1)}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}},vd.identifier="blur",vd.prototype.availableOptions={blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:!1}},Ht.Operations.BlurOperation=vd,C5=vd}),k5,R7=F(()=>{k5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_filteredImage;
uniform float u_intensity;

void main() {
  vec4 color0 = texture2D(u_image, v_texCoord);
  vec4 color1 = texture2D(u_filteredImage, v_texCoord);
  gl_FragColor = mix(color0, color1, u_intensity);
}
`}),B1,T5,L1,F7=F(()=>{ue(),R7(),B1=class extends _e.Filter{constructor(){super(),this._fragmentSource=k5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=r.getContext(),{filteredCanvas:s}=this._options;o.save(),o.drawImage(n,0,0),o.globalAlpha=this._options.intensity,o.drawImage(s,0,0),o.restore()}},B1.prototype.availableOptions={filteredImage:{type:"number",default:1,uniformType:"i"},filteredCanvas:{type:"object",default:null},intensity:{type:"number",default:1,uniformType:"f"}},T5=class{constructor(e=1){this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new _e.Container,this._sprite=new _e.Sprite,this._container.addChild(this._sprite),this._blendFilter=new B1}push(e){this._stack.push(e)}clear(){this._stack=[]}render(e,t,r){if(this.isEmpty())return Promise.resolve();const i=e.getRenderer();this._sprite.setTexture(t);let n=this._renderTextures[i.id];if(!n){const a=e.getSprite().getTexture().getFrame();n=new _e.RenderTexture(e.getRenderer(),a.width,a.height),this._renderTextures[i.id]=n}const o=r.getDimensions();n.resizeTo(o);const s=this.isDirtyForRenderer(i);if(s){this._stack.forEach(l=>{l.update(e)});const a=this._stack.map(l=>l.getFilter());this._sprite.setFilters(a),n.render(this._container),this.setDirtyForRenderer(!1,i)}if(this._blendFilter.setIntensity(this._intensity),i.isOfType("canvas"))this._blendFilter.setFilteredCanvas(n.getRenderTarget().getCanvas());else if(i.isOfType("webgl")){const a=n.getBaseTexture();a.setGLUnit(this._blendFilter.getFilteredImage()),i.updateTexture(a,!1)}return this._sprite.setFilters([this._blendFilter]),r.clear(Pe.TRANSPARENT),r.render(this._container),s&&this.disposeRenderTextures(),Promise.resolve()}setIntensity(e){this._intensity=e}isEmpty(){return this._stack.length===0}isDirtyForRenderer(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}setDirtyForRenderer(e,t){this._dirtiness[t.id]=e}setDirty(e){for(const t in this._dirtiness)this._dirtiness[t]=e}disposeRenderTextures(){for(const e in this._renderTextures)this._renderTextures[e].dispose(),delete this._renderTextures[e]}dispose(){this.disposeRenderTextures(),this._stack.forEach(e=>e.dispose()),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}},L1=T5}),Zc,kt,It=F(()=>{ue(),F7(),Zc=class extends rr{constructor(e={},t={}){super(e,L({intensity:{type:"number",default:1,setter(r){return this._stack&&this._stack.setIntensity(r),r}},dirty:{type:"boolean",default:!0}},t)),this._stack=new L1(this._options.intensity)}render(e,t,r){return this._stack.render(e,t,r).then(i=>(this.setDirty(!1),i))}setDirtyForRenderer(e,t){this._stack.setDirtyForRenderer(e,t)}disposeRenderTextures(){this._stack.disposeRenderTextures()}dispose(){this._stack.dispose()}},Zc.identifier=null,Zc.isIdentity=!1,Zc.displayName=null,Zc.PrimitivesStack=L1,kt=Zc}),E5,O7=F(()=>{E5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_brightness;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;
}
`}),D5,Ei,ji=F(()=>{ue(),D5=class extends rr{update(){}getFilter(){return this._filter}dispose(){this._filter&&(this._filter.dispose(),this._filter=null)}},Ei=D5}),Xm,U1,yd,M7=F(()=>{ue(),O7(),ji(),Xm=class extends _e.Filter{constructor(){super(),this._fragmentSource=E5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height);let{brightness:l}=this._options;if(l===0){s.putImageData(a,0,0);return}l*=255;for(let c=0;c<n.width*n.height;c++){const h=c*4;a.data[h]+=l,a.data[h+1]+=l,a.data[h+2]+=l}s.putImageData(a,0,0)}},Xm.prototype.availableOptions={brightness:{type:"number",default:0,uniformType:"f"}},U1=class extends Ei{constructor(...e){super(...e),this._filter=new Xm}update(){this._filter.setBrightness(this._options.brightness)}},U1.prototype.availableOptions=Xm.prototype.availableOptions,yd=U1}),I5,P7=F(()=>{I5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_contrast;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);
}
`}),Ym,N1,fa,A7=F(()=>{ue(),P7(),ji(),Ym=class extends _e.Filter{constructor(){super(),this._fragmentSource=I5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),{contrast:l}=this._options;if(l!==1){for(let c=0;c<n.width*n.height;c++){const h=c*4;a.data[h]=(a.data[h]-127)*l+127,a.data[h+1]=(a.data[h+1]-127)*l+127,a.data[h+2]=(a.data[h+2]-127)*l+127}s.putImageData(a,0,0)}}},Ym.prototype.availableOptions={contrast:{type:"number",default:1,uniformType:"f"}},N1=class extends Ei{constructor(...e){super(...e),this._filter=new Ym}update(){this._filter.setContrast(this._options.contrast)}},N1.prototype.availableOptions=Ym.prototype.availableOptions,fa=N1}),R5,z7=F(()=>{R5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform mat4 u_colorMatrix;
uniform vec4 u_colorMatrixOffset;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;
}
`}),F5,Qm,j1,H1,$7=F(()=>{ue(),z7(),ji(),{ColorMatrix:F5}=ot,Qm=class extends _e.Filter{constructor(){super(),this._fragmentSource=R5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),{colorMatrix:l}=this._options;let c=new Pe(0,0,0,0);for(let h=0;h<n.width*n.height;h++){const f=h*4;c.r=a.data[f]/255,c.g=a.data[f+1]/255,c.b=a.data[f+2]/255,c=l.apply(c),a.data[f]=c.r*255,a.data[f+1]=c.g*255,a.data[f+2]=c.b*255}s.putImageData(a,0,0)}},Qm.prototype.availableOptions={colorMatrix:{type:"color-matrix",default:new F5,uniformType:"mat4"},colorMatrixOffset:{type:"array",default:[],uniformType:"4f"}},j1=class extends Ei{constructor(...e){super(...e),this._filter=new Qm}update(){this._filter.setColorMatrix(this._options.colorMatrix)}},j1.prototype.availableOptions=Qm.prototype.availableOptions,H1=j1}),O5,B7=F(()=>{O5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_desaturation;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  vec3 grayXfer = vec3(0.3, 0.59, 0.11);
  vec3 gray = vec3(dot(grayXfer, texColor.xyz));
  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);
}
`}),Km,W1,Jc,L7=F(()=>{ue(),B7(),ji(),Km=class extends _e.Filter{constructor(){super(),this._fragmentSource=O5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),l=[.3,.59,.11],{desaturation:c}=this._options;for(let h=0;h<n.width*n.height;h++){const f=h*4,d=l[0]*a.data[f]/255+l[1]*a.data[f+1]/255+l[2]*a.data[f+2]/255;a.data[f]+=(d*255-a.data[f])*c,a.data[f+1]+=(d*255-a.data[f+1])*c,a.data[f+2]+=(d*255-a.data[f+2])*c}s.putImageData(a,0,0)}},Km.prototype.availableOptions={desaturation:{type:"number",default:1,uniformType:"f"}},W1=class extends Ei{constructor(...e){super(...e),this._filter=new Km}update(){this._filter.setDesaturation(this._options.desaturation)}},W1.prototype.availableOptions=Km.prototype.availableOptions,Jc=W1}),M5,U7=F(()=>{M5=`precision highp float;

uniform sampler2D u_image;
uniform vec4 u_lightColor;
uniform vec4 u_darkColor;
uniform float u_intensity;
varying vec2 v_texCoord;

const float EPSILON = 0.0000001;
const vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);

vec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {
  vec4 color = clamp(sampledCol, 0.0, 1.0);
  color.rgb /= max(color.a, EPSILON);
  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES
 
  // Apply intensity as "symmetric gamma"
  if (intensity > 0.0) {
    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));
  } else {
    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));
  }
 
  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion
  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale
  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);
 
  // Apply DuoTone
  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));
  duotone.a *= color.a;
  
  duotone.rgb *= duotone.a;

  return duotone;
}

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);
}`}),Zm,V1,G1,N7=F(()=>{ue(),U7(),ji(),Zm=class extends _e.Filter{constructor(){super(),this._fragmentSource=M5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),{lightColor:l,darkColor:c,intensity:h}=this._options;for(let f=0;f<n.width*n.height;f++){const d=f*4,p=a.data[d]/255,v=a.data[d+1]/255,g=a.data[d+2]/255,m=a.data[d+3]/255,y=new Pe(p,v,g,m),_=this._duoToneKernel(y,l,c,h);a.data[d]=_.r*255,a.data[d+1]=_.g*255,a.data[d+2]=_.b*255,a.data[d+3]=_.a*255}s.putImageData(a,0,0)}_duoToneKernel(e,t,r,i){if(e.clone().clamp(0,1),i>0){const l=Math.max(i+1,1e-7);e.r=1-Math.pow(1-e.r,l),e.g=1-Math.pow(1-e.g,l),e.b=1-Math.pow(1-e.b,l)}else{const l=Math.max(-i+1,1e-7);e.r=Math.pow(e.r,l),e.g=Math.pow(e.g,l),e.b=Math.pow(e.b,l)}const o=.2126*e.r+.7152*e.g+.0722*e.b,s=Math.min(Math.max(o,0),1),a=r.clone().mix(t,s);return a.a*=e.a,a}},Zm.prototype.availableOptions={lightColor:{type:"color",default:Pe.RED,uniformType:"4f"},darkColor:{type:"color",default:Pe.BLACK,uniformType:"4f"},intensity:{type:"number",default:.5,uniformType:"f"}},V1=class extends Ei{constructor(...e){super(...e),this._filter=new Zm}update(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);const e=2*this._options.intensity-1;this._filter.setIntensity(e)}},V1.prototype.availableOptions=Zm.prototype.availableOptions,G1=V1}),P5,j7=F(()=>{P5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform vec3 u_gamma;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);
  rgb = pow(rgb, u_gamma);
  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;
}
`}),Jm,q1,X1,H7=F(()=>{ue(),j7(),ji(),Jm=class extends _e.Filter{constructor(){super(),this._fragmentSource=P5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),{gamma:l}=this._options,c=new Float32Array(256);for(let d=0;d<256;d++)c[d]=255*Math.pow(d/255,l.r);const h=new Float32Array(256);for(let d=0;d<256;d++)h[d]=255*Math.pow(d/255,l.g);const f=new Float32Array(256);for(let d=0;d<256;d++)f[d]=255*Math.pow(d/255,l.b);for(let d=0;d<n.width*n.height;d++){const p=d*4;a.data[p]=c[a.data[p]],a.data[p+1]=h[a.data[p+1]],a.data[p+2]=f[a.data[p+2]]}s.putImageData(a,0,0)}},Jm.prototype.availableOptions={gamma:{type:"color",default:Pe.WHITE,uniformType:"3f"}},q1=class extends Ei{constructor(...e){super(...e),this._filter=new Jm}update(){this._filter.setGamma(this._options.gamma)}},q1.prototype.availableOptions=Jm.prototype.availableOptions,X1=q1}),A5,W7=F(()=>{A5=`varying vec2 v_texCoord;
uniform sampler2D u_image;

uniform vec3 u_color;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);

  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);
  textureCoord /= 0.75;

  float d = 1.0 - dot(textureCoord, textureCoord);
  d = clamp(d, 0.2, 1.0);
  vec3 newColor = texColor.rgb * d * u_color.rgb;
  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);
}
`}),eg,Y1,tg,V7=F(()=>{ue(),W7(),ji(),eg=class extends _e.Filter{constructor(){super(),this._fragmentSource=A5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),{color:l}=this._options;let c;for(let h=0;h<n.width;h++)for(let f=0;f<n.height;f++){const d=(n.width*f+h)*4,p=h/n.width,v=f/n.height,g=(p-.5)/.75,m=(v-.5)/.75,y=g*g,_=m*m;c=1-(y+_),c=Math.min(Math.max(c,.1),1),a.data[d]*=c*l.r,a.data[d+1]=a.data[d+1]*(c*l.g),a.data[d+2]=a.data[d+2]*(c*l.b),a.data[d+3]=255}s.putImageData(a,0,0)}},eg.prototype.availableOptions={color:{type:"color",default:Pe.WHITE,uniformType:"3f"}},Y1=class extends Ei{constructor(...e){super(...e),this._filter=new eg}update(){this._filter.setColor(this._options.color)}},Y1.prototype.availableOptions=eg.prototype.availableOptions,tg=Y1}),z5,G7=F(()=>{z5=`varying vec2 v_texCoord;
uniform sampler2D u_image;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  texColor.b = texColor.g * 0.33;
  texColor.r = texColor.r * 0.6;
  texColor.b += texColor.r * 0.33;
  texColor.g = texColor.g * 0.7;
  gl_FragColor = texColor;
}
`}),$5,B5,Q1,q7=F(()=>{ue(),G7(),ji(),$5=class extends _e.Filter{constructor(){super(),this._fragmentSource=z5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height);for(let l=0;l<n.width;l++)for(let c=0;c<n.height;c++){const h=(n.width*c+l)*4;a.data[h+2]=a.data[h+1]*.33,a.data[h]*=.6,a.data[h+2]+=a.data[h]*.33,a.data[h+1]=a.data[h+1]*.7,a.data[h+3]=255}s.putImageData(a,0,0)}},B5=class extends Ei{constructor(...e){super(...e),this._filter=new $5}},Q1=B5}),L5,X7=F(()=>{L5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
vec3 W = vec3(0.2125, 0.7154, 0.0721);

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float luminance = dot(texColor.rgb, W);
  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);
}
`}),U5,N5,rg,Y7=F(()=>{ue(),X7(),ji(),U5=class extends _e.Filter{constructor(){super(),this._fragmentSource=L5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height);for(let l=0;l<n.width;l++)for(let c=0;c<n.height;c++){const h=(n.width*c+l)*4,f=a.data[h]*.2125+a.data[h+1]*.7154+a.data[h+2]*.0721;a.data[h]=f,a.data[h+1]=f,a.data[h+2]=f}s.putImageData(a,0,0)}},N5=class extends Ei{constructor(...e){super(...e),this._filter=new U5}},rg=N5}),j5,Q7=F(()=>{j5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_lookupTable;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;
  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;
  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;

  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);
}
`}),K1,H5,Z1,W5=F(()=>{ue(),Q7(),ji(),K1=class extends _e.Filter{constructor(...e){super(...e),this._fragmentSource=j5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),l=this._options.lookupTableData;for(let c=0;c<n.width*n.height;c++){const h=c*4,f=a.data[h];a.data[h]=l[f*4];const d=a.data[h+1];a.data[h+1]=l[1+d*4];const p=a.data[h+2];a.data[h+2]=l[2+p*4]}s.putImageData(a,0,0)}},K1.prototype.availableOptions={lookupTable:{type:"number",default:1,uniformType:"i"},lookupTableData:{type:"array",default:[]}},H5=class extends Ei{constructor(...e){super(...e),this._filter=new K1({lookupTable:this._options.textureGLUnit}),this._textures={},this._renderers={}}update(e){const t=e.getRenderer();t.isOfType("webgl")?this._updateWebGLTexture(e):t.isOfType("canvas")&&this._filter.setLookupTableData(this._options.data)}_updateWebGLTexture(e){if(typeof this._options.data=="undefined")throw new Error("LookupTable: No data specified.");const t=new Uint8Array(this._options.data),r=e.getRenderer(),{id:i}=r;this._renderers[i]=r,this._textures[i]||(this._textures[i]=new _e.BaseTexture);const n=this._textures[i],o=new _e.PixelArrayImage(256,1,t);n.setSource(o),n.setGLUnit(this._options.textureGLUnit),r.isOfType("webgl")&&r.updateTexture(n)}dispose(){super.dispose();for(const e in this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data}},Z1=H5}),V5,K7=F(()=>{V5=`/**
 * Based off of GPUImage's LookupFilter:
 * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m
 */

varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_lookupTable;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float blueColor = texColor.b * 63.0;

  vec2 quad1;
  quad1.y = floor(floor(blueColor) / 8.0);
  quad1.x = floor(blueColor) - (quad1.y * 8.0);

  vec2 quad2;
  quad2.y = floor(ceil(blueColor) / 8.0);
  quad2.x = ceil(blueColor) - (quad2.y * 8.0);

  vec2 texCoord1;
  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);
  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);

  vec2 texCoord2;
  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);
  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);

  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);
  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);

  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);
}
`}),J1,eb,tb,rb,ib,Z7=F(()=>{ue(),K7(),ji(),{Vector2:J1}=ot,eb=3,tb=class extends _e.Filter{constructor(){super(),this._precomputeQuads(),this._fragmentSource=V5}_precomputeQuads(){this._quads=[];for(let e=0;e<256;e++){const t=e/255*63,r=new J1;r.y=(t|0)*.125|0,r.x=(t|0)-r.y*8,this._quads.push(r)}}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=this._options.lookupTableImage,c=this._createImageCanvas(a).getContext("2d"),h=o.getImageData(0,0,n.width,n.height),f=c.getImageData(0,0,a.width,a.height),d=new J1;for(let p=0;p<n.width*n.height*4;p+=4){const v=h.data[p],g=h.data[p+1],m=h.data[p+2],y=h.data[p+3]/255,_=this._quads[m],b=64;d.x=_.x*b,d.y=_.y*b,d.x+=Math.floor(v/4),d.y+=Math.floor(g/4);const w=(a.width*d.y+d.x)*4|0;let S=f.data[w];S=v*(1-y)+S*y;let C=f.data[w+1];C=g*(1-y)+C*y;let D=f.data[w+2];D=m*(1-y)+D*y,h.data[p]=S,h.data[p+1]=C,h.data[p+2]=D}s.putImageData(h,0,0)}_createImageCanvas(e){const t=Ce.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}},tb.prototype.availableOptions={lookupTable:{type:"number",default:eb,uniformType:"i"},lookupTableImage:{type:"image",uniformType:null}},rb=class extends Ei{constructor(...e){super(...e),this._filter=new tb,this._textures={}}update(e){const t=e.getRenderer();t.isOfType("webgl")?this._updateWebGLTexture(e):t.isOfType("canvas")&&this._filter.setLookupTableImage(this._options.image)}_updateWebGLTexture(e){const t=e.getRenderer(),{id:r}=t;this._textures[r]||(this._textures[r]=new _e.BaseTexture);const i=this._textures[r];i.setSource(this._options.image),i.setGLUnit(eb),t.updateTexture(i)}dispose(){super.dispose();for(const e in this._textures)delete this._textures[e]}},rb.prototype.availableOptions={image:{type:"image"}},ib=rb}),G5,J7=F(()=>{G5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform float u_saturation;

const vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float luminance = dot(texColor.rgb, luminanceWeighting);

  vec3 greyScaleColor = vec3(luminance);

  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);
}
`}),ig,nb,pa,eU=F(()=>{ue(),J7(),ji(),ig=class extends _e.Filter{constructor(){super(),this._fragmentSource=G5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),{saturation:l}=this._options;for(let c=0;c<n.width;c++)for(let h=0;h<n.height;h++){const f=(n.width*h+c)*4,d=a.data[f]*.2125+a.data[f+1]*.7154+a.data[f+2]*.0721;a.data[f]=d*(1-l)+a.data[f]*l,a.data[f+1]=d*(1-l)+a.data[f+1]*l,a.data[f+2]=d*(1-l)+a.data[f+2]*l}s.putImageData(a,0,0)}},ig.prototype.availableOptions={saturation:{type:"number",default:0,uniformType:"f"}},nb=class extends Ei{constructor(...e){super(...e),this._filter=new ig}update(){this._filter.setSaturation(this._options.saturation)}},nb.prototype.availableOptions=ig.prototype.availableOptions,pa=nb}),q5,tU=F(()=>{q5=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform vec3 u_color;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  vec4 overlayVec4 = vec4(u_color, texColor.a);
  gl_FragColor = max(overlayVec4 * texColor.a, texColor);
}
`}),ng,ob,sb,rU=F(()=>{ue(),tU(),ji(),ng=class extends _e.Filter{constructor(){super(),this._fragmentSource=q5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height);for(let l=0;l<n.width;l++)for(let c=0;c<n.height;c++){const h=(n.width*c+l)*4;a.data[h]=Math.max(this._options.color.r*255,a.data[h]),a.data[h+1]=Math.max(this._options.color.g*255,a.data[h+1]),a.data[h+2]=Math.max(this._options.color.b*255,a.data[h+2])}s.putImageData(a,0,0)}},ng.prototype.availableOptions={color:{type:"color",default:Pe.WHITE,uniformType:"3f"}},ob=class extends Ei{constructor(...e){super(...e),this._filter=new ng}update(){this._filter.setColor(this._options.color)}},ob.prototype.availableOptions=ng.prototype.availableOptions,sb=ob}),ab,ir,iU=F(()=>{ue(),W5(),ab=class extends Z1{constructor(...e){super(...e),this._options.rgbControlPoints||(this._options.rgbControlPoints={red:this._options.controlPoints,green:this._options.controlPoints,blue:this._options.controlPoints}),this._updateLookupTable()}_updateLookupTable(){const e=this._calculateSplineCurve(this._options.rgbControlPoints.red),t=this._calculateSplineCurve(this._options.rgbControlPoints.green),r=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(e,t,r)}_buildLookupTable(e,t,r){const i=[];for(let n=0;n<256;n++)i.push(Math.min(Math.max(n+e[n],0),255)),i.push(Math.min(Math.max(n+t[n],0),255)),i.push(Math.min(Math.max(n+r[n],0),255)),i.push(255);return i}_calculateSplineCurve(e){e=e.sort(function(o,s){return o[0]>s[0]});const t=this._getSplineCurve(e),r=t[0];let i;if(r[0]>0)for(i=0;i<r[0];i++)t.unshift([0,0]);const n=[];for(i=0;i<t.length;i++){const o=t[i],s=[o[0],o[0]];let a=Math.sqrt(Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2));s[1]>o[1]&&(a=-a),n.push(a)}return n}_getSplineCurve(e){const t=this._secondDerivative(e),r=t.length,i=[];let n;for(n=0;n<r;n++)i[n]=t[n];const o=[];for(n=0;n<r-1;n++){const s=e[n],a=e[n+1];for(let l=s[0];l<a[0];l++){const c=(l-s[0])/(a[0]-s[0]),h=1-c,f=c,d=a[0]-s[0];let p=h*s[1]+f*a[1]+d*d/6*((h*h*h-h)*i[n]+(f*f*f-f)*i[n+1]);p>255?p=255:p<0&&(p=0),o.push([l,p])}}return o.length===255&&o.push(e[e.length-1]),o}_secondDerivative(e){const t=e.length;if(t<=0||t===1)return null;const r=[],i=[];let n,o;for(r[0]=[0,1,0],n=1;n<t-1;n++){const a=e[n-1],l=e[n],c=e[n+1];r[n]=r[n]||[],r[n][0]=(l[0]-a[0])/6,r[n][1]=(c[0]-a[0])/3,r[n][2]=(c[0]-l[0])/6,i[n]=(c[1]-l[1])/(c[0]-l[0])-(l[1]-a[1])/(l[0]-a[0])}for(i[0]=0,i[t-1]=0,r[t-1]=[0,1,0],n=1;n<t;n++)o=r[1][0]/r[n-1][1],r[n][1]-=o*r[n-1][2],r[n][0]=0,i[n]-=o*i[n-1];for(n=t-2;n>0;n--)o=r[n][2]/r[n+1][1],r[n][1]-=o*r[n+1][0],r[n][2]=0,i[n]-=o*i[n+1];const s=[];for(n=0;n<t;n++)s[n]=i[n]/r[n][1];return s}},ab.prototype.availableOptions={rgbControlPoints:{type:"object"},controlPoints:{type:"array",default:[]},textureGLUnit:{type:"number",default:1}},ir=ab}),X5,nU=F(()=>{X5=`varying vec2 v_texCoord;
uniform sampler2D u_image;

void main() {
  vec4 texColor = texture2D(u_image, v_texCoord);
  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;
  gray -= 0.2;
  gray = clamp(gray, 0.0, 1.0);
  gray += 0.15;
  gray *= 1.4;
  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);
}
`}),Y5,Q5,lb,oU=F(()=>{ue(),nU(),ji(),Y5=class extends _e.Filter{constructor(){super(),this._fragmentSource=X5}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height);for(let l=0;l<n.width;l++)for(let c=0;c<n.height;c++){const h=(n.width*c+l)*4;let f=a.data[h]/255*.3+a.data[h+1]/255*.3+a.data[h+2]/255*.3;f-=.2,f=Math.max(0,Math.min(1,f)),f+=.15,f*=1.4,f*=255,a.data[h]=f,a.data[h+1]=f,a.data[h+2]=f}s.putImageData(a,0,0)}},Q5=class extends Ei{constructor(...e){super(...e),this._filter=new Y5}},lb=Q5}),K5,sU=F(()=>{K5=`precision highp float;

uniform sampler2D u_image;

uniform sampler2D u_lookupTable;

uniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096
uniform float u_horizontalTileCount; // Horizontal Blue Tiles
uniform float u_verticalTileCount; // Vertical Blue Tiles

varying vec2 v_texCoord;

const float EPSILON = 0.000001;

// Try to get the exact pixel of the lut map image
vec3 lutColor(int texPosX, int texPosY) {
    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;
}

vec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {
    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);
}

void main() {
    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);

    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); 

    vec3 ranges = vec3(
        floor(u_resolution / u_horizontalTileCount - 1.0),
        floor(u_resolution / u_verticalTileCount - 1.0),
        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)
    );
    
    vec3 tmp = sourceColor * ranges;
    ivec3 floors = ivec3(tmp);
    ivec3 ceils = ivec3(ceil(tmp));
    vec3 fracts = fract(tmp);

    // Map tile index to tile pixel pos.
    ivec2 pixelsPerTile = ivec2(
        u_resolution / u_horizontalTileCount, 
        u_resolution / u_verticalTileCount
      );

    ivec2 tileFloor; // Blue tile index
    tileFloor.y = floors.z / int(u_horizontalTileCount);
    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));

    ivec2 tileCeil; // Blue tile index
    tileCeil.y = ceils.z / int(u_horizontalTileCount);
    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));
    
    tileFloor *= pixelsPerTile;
    tileCeil *= pixelsPerTile; 
    
    
    // Interpolate between red and green
    vec3 lutColorFB = bilinearInterpolate(
        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),
        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),
        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),
        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),
        fracts.x, fracts.y
    );
    vec3 lutColorCB = bilinearInterpolate(
        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),
        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),
        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),
        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),
        fracts.x, fracts.y
    );

    // Interpolate between the blue values
    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);

    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;
    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);

    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);
}
`}),_d,cb,ub,hb,db,fb,aU=F(()=>{ue(),sU(),ji(),{Vector2:_d,Vector3:cb}=ot,ub=3,hb=class extends _e.Filter{constructor(){super(),this._precomputeQuads(),this._fragmentSource=K5}_precomputeQuads(){this._quads=[];for(let e=0;e<256;e++){const t=e/255*63,r=new _d;r.y=(t|0)*.125|0,r.x=(t|0)-r.y*8,this._quads.push(r)}}_applyCanvas(e,t,r,i=!1){const{resolution:n,horizontalTileCount:o,verticalTileCount:s}=this._options,a=t.getCanvas(),l=t.getContext(),c=r.getContext(),h=this._options.lookupTableImage,d=this._createImageCanvas(h).getContext("2d");let p={width:128,height:128};n?p={width:n,height:n}:h.width&&h.height&&(p={width:h.width,height:h.height});const v=l.getImageData(0,0,a.width,a.height),g=d.getImageData(0,0,p.width,p.height),m=new cb(p.width/o-1|0,p.height/s-1|0,o*s-1|0),y=new Pe,_=new Pe,b=new Pe,w=new Pe,S=new Pe,C=new Pe,D=new Pe,E=new Pe,I=new _d,M=new _d,k=(J,ae,U,N)=>{J.r=ae.r*(1-N)+U.r*N,J.g=ae.g*(1-N)+U.g*N,J.b=ae.b*(1-N)+U.b*N},R=(J,ae,U)=>{ae=.5+ae|0,U=.5+U|0;const N=(U*p.width+ae)*4;J.r=g.data[N]/255,J.g=g.data[N+1]/255,J.b=g.data[N+2]/255,J.a=g.data[N+3]/255},$=new Pe,H=new Pe,j=(J,ae,U,N,B,W,q)=>{k($,ae,N,W),k(H,U,B,W),k(J,$,H,q)},V=new _d(p.width,p.height).divide(o,s).floor();for(let J=0;J<a.width*a.height*4;J+=4){y.set(v.data[J]/255,v.data[J+1]/255,v.data[J+2]/255,v.data[J+3]/255);const ae=new cb(y.r*m.x,y.g*m.y,y.b*m.z),U=ae.clone().floor().toInt(),N=ae.clone().ceil().toInt(),B=ae.clone().fract();I.y=U.z/o|0,I.x=U.z-I.y*o|0,M.y=N.z/o|0,M.x=N.z-M.y*o|0,I.multiply(V),M.multiply(V),R(S,I.x+U.x,I.y+U.y),R(C,I.x+U.x,I.y+N.y),R(D,I.x+N.x,I.y+U.y),R(E,I.x+N.x,I.y+N.y),j(b,S,C,D,E,B.x,B.y),R(S,M.x+U.x,M.y+U.y),R(C,M.x+U.x,M.y+N.y),R(D,M.x+N.x,M.y+U.y),R(E,M.x+N.x,M.y+N.y),j(w,S,C,D,E,B.x,B.y),k(_,b,w,B.z),v.data[J]=Math.ceil(_.r*255),v.data[J+1]=Math.ceil(_.g*255),v.data[J+2]=Math.ceil(_.b*255)}c.putImageData(v,0,0)}_createImageCanvas(e){const t=Ce.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}},hb.prototype.availableOptions={lookupTable:{type:"number",default:ub,uniformType:"i"},lookupTableImage:{type:"image",uniformType:null},resolution:{type:"number",uniformType:"f"},horizontalTileCount:{type:"number",default:5,uniformType:"f"},verticalTileCount:{type:"number",default:5,uniformType:"f"}},db=class extends Ei{constructor(...e){super(...e),this._filter=new hb,this._textures={}}update(e){const t=e.getRenderer();t.isOfType("webgl")?this._updateWebGLTexture(e):t.isOfType("canvas")&&this._filter.setLookupTableImage(this._options.image);const{resolution:r,verticalTileCount:i,horizontalTileCount:n,image:o}=this._options;this._filter.set({resolution:r||o.width,verticalTileCount:i,horizontalTileCount:n})}_updateWebGLTexture(e){const t=e.getRenderer(),{id:r}=t;this._textures[r]||(this._textures[r]=new _e.BaseTexture);const i=this._textures[r];i.setSource(this._options.image),i.setGLUnit(ub),i.setMinFilter(_e.BaseTexture.NearestFilter),t.updateTexture(i)}dispose(){super.dispose();for(const e in this._textures)delete this._textures[e]}},db.prototype.availableOptions={image:{type:"image"},resolution:{type:"number"},horizontalTileCount:{type:"number",default:5},verticalTileCount:{type:"number",default:5}},fb=db}),Z5={};_r(Z5,{Brightness:()=>yd,ColorMatrixPrimitive:()=>H1,Contrast:()=>fa,Desaturation:()=>Jc,DuoTone:()=>G1,Gamma:()=>X1,Glow:()=>tg,Gobblin:()=>Q1,Grayscale:()=>rg,LookupTable:()=>Z1,LookupTableImage:()=>ib,Saturation:()=>pa,SoftColorOverlay:()=>sb,ThreeDLookupTableImage:()=>fb,ToneCurve:()=>ir,X400:()=>lb});var Rt=F(()=>{M7(),A7(),$7(),L7(),N7(),H7(),V7(),q7(),Y7(),W5(),Z7(),eU(),rU(),iU(),oU(),aU()}),og,pb,J5=F(()=>{It(),Rt(),og=class extends kt{constructor(...e){super(...e),this._stack.push(new yd({brightness:0}))}render(e,t,r){return this._stack.isEmpty()&&this._stack.push(new yd({brightness:0})),super.render(e,t,r)}},og.isIdentity=!0,og.identifier="identity",pb=og}),mb,eI,lU=F(()=>{It(),Rt(),mb=class extends kt{constructor(...e){super(...e),this._stack.push(new fa({contrast:.63})),this._stack.push(new yd({brightness:.12})),this._stack.push(new ir({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}}))}},mb.identifier="a15",eI=mb}),gb,tI,cU=F(()=>{It(),Rt(),gb=class extends kt{constructor(...e){super(...e),this._stack.push(new Jc({desaturation:.5})),this._stack.push(new ir({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}}))}},gb.identifier="breeze",tI=gb}),vb,rI,uU=F(()=>{It(),Rt(),vb=class extends kt{constructor(...e){super(...e),this._stack.push(new rg)}},vb.identifier="bw",rI=vb}),yb,iI,hU=F(()=>{It(),Rt(),yb=class extends kt{constructor(...e){super(...e),this._stack.push(new rg),this._stack.push(new fa({contrast:1.5}))}},yb.identifier="bwhard",iI=yb}),_b,nI,dU=F(()=>{It(),Rt(),_b=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}}))}},_b.identifier="celsius",nI=_b}),bb,oI,fU=F(()=>{It(),Rt(),bb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}}))}},bb.identifier="chest",oI=bb}),sg,sI,pU=F(()=>{ue(),It(),Rt(),sg=class extends kt{constructor(...e){super(...e,{intensity:{type:"number",default:.5,required:!0,setter(t){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(t),this._stack.setIntensity(1)),this._dirty=!0,t}}}),this._filterPrimitive=new G1({lightColor:this._options.lightColor||Pe.WHITE,darkColor:this._options.darkColor||Pe.BLACK,intensity:this._options.intensity||.5}),this._stack.push(this._filterPrimitive)}},sg.prototype.availableOptions={lightColor:{type:"color",default:Pe.WHITE,required:!0,setter(e){return this._filterPrimitive&&this._filterPrimitive.setLightColor(e),this.setDirty&&this.setDirty(!0),e}},darkColor:{type:"color",default:Pe.BLACK,required:!0,setter(e){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(e),this.setDirty&&this.setDirty(!0),e}},intensity:{type:"number",default:.5,required:!0}},sg.identifier="duotone",sI=sg}),xb,aI,mU=F(()=>{It(),Rt(),xb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}}))}},xb.identifier="fixie",aI=xb}),wb,lI,gU=F(()=>{It(),Rt(),wb=class extends kt{constructor(...e){super(...e),this._stack.push(new pa({saturation:1.35})),this._stack.push(new fa({contrast:1.1}))}},wb.identifier="food",lI=wb}),Sb,cI,vU=F(()=>{It(),Rt(),Sb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}}))}},Sb.identifier="fridge",cI=Sb}),Cb,uI,yU=F(()=>{It(),Rt(),Cb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}}))}},Cb.identifier="front",uI=Cb}),kb,hI,_U=F(()=>{It(),Rt(),kb=class extends kt{constructor(...e){super(...e),this._stack.push(new fa({contrast:1.1})),this._stack.push(new ir({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}}))}},kb.identifier="glam",hI=kb}),Tb,dI,bU=F(()=>{It(),Rt(),Tb=class extends kt{constructor(...e){super(...e),this._stack.push(new Q1)}},Tb.identifier="gobblin",dI=Tb}),Eb,fI,xU=F(()=>{It(),Rt(),Eb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),this._stack.push(new pa({saturation:.9}))}},Eb.identifier="k1",fI=Eb}),Db,pI,wU=F(()=>{ue(),It(),Rt(),Db=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),this._stack.push(new sb({color:new Pe(40/255,40/255,40/255)}))}},Db.identifier="k2",pI=Db}),Ib,mI,SU=F(()=>{It(),Rt(),Ib=class extends kt{constructor(...e){super(...e),this._stack.push(new pa({saturation:.5}))}},Ib.identifier="k6",mI=Ib}),Rb,gI,CU=F(()=>{It(),Rt(),Rb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),this._stack.push(new pa({saturation:.7}))}},Rb.identifier="kdynamic",gI=Rb}),Fb,vI,kU=F(()=>{It(),Rt(),Fb=class extends kt{constructor(...e){super(...e),this._stack.push(new Jc({desaturation:.4})),this._stack.push(new ir({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}}))}},Fb.identifier="lenin",vI=Fb}),Ob,yI,TU=F(()=>{It(),Rt(),Ob=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]}))}},Ob.identifier="lomo",yI=Ob}),Mb,_I,EU=F(()=>{It(),Rt(),Mb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}}))}},Mb.identifier="mellow",_I=Mb}),bI,Pb,xI,DU=F(()=>{ue(),It(),Rt(),{ColorMatrix:bI}=ot,Pb=class extends kt{constructor(...e){super(...e);const t=new bI(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);this._stack.push(new H1({colorMatrix:t}));const r=new Pe(.8,.6,.9);this._stack.push(new X1({gamma:r}))}},Pb.identifier="metal",xI=Pb}),Ab,wI,IU=F(()=>{It(),Rt(),Ab=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),this._stack.push(new tg)}},Ab.identifier="morning",wI=Ab}),zb,SI,RU=F(()=>{It(),Rt(),zb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),this._stack.push(new ir({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),this._stack.push(new Jc({desaturation:.65}))}},zb.identifier="orchid",SI=zb}),$b,CI,FU=F(()=>{It(),Rt(),$b=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),this._stack.push(new pa({saturation:.8})),this._stack.push(new fa({contrast:1.5}))}},$b.identifier="pola",CI=$b}),Bb,kI,OU=F(()=>{It(),Rt(),Bb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),this._stack.push(new pa({saturation:.8})),this._stack.push(new fa({contrast:1.5}))}},Bb.identifier="pola669",kI=Bb}),Lb,TI,MU=F(()=>{It(),Rt(),Lb=class extends kt{constructor(...e){super(...e),this._stack.push(new Jc({desaturation:.65})),this._stack.push(new ir({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}}))}},Lb.identifier="quozi",TI=Lb}),Ub,EI,PU=F(()=>{It(),Rt(),Ub=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),this._stack.push(new tg)}},Ub.identifier="semired",EI=Ub}),Nb,DI,AU=F(()=>{It(),Rt(),Nb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),this._stack.push(new ir({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3}))}},Nb.identifier="sunny",DI=Nb}),jb,II,zU=F(()=>{It(),Rt(),jb=class extends kt{constructor(...e){super(...e),this._stack.push(new ir({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}}))}},jb.identifier="texas",II=jb}),Hb,RI,$U=F(()=>{It(),Rt(),Hb=class extends kt{constructor(...e){super(...e),this._stack.push(new lb)}},Hb.identifier="x400",RI=Hb}),ag,FI,BU=F(()=>{ue(),It(),Rt(),ag=class extends kt{constructor(...e){super(...e),this._lutPrimitive=new ib({image:this._options.image}),this._stack.push(this._lutPrimitive)}},ag.prototype.availableOptions={image:{type:"image",required:!0,setter(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}}},ag.identifier="lut",FI=ag}),lg,OI,LU=F(()=>{ue(),It(),Rt(),lg=class extends kt{constructor(...e){super(...e);const{image:t,resolution:r,verticalTileCount:i,horizontalTileCount:n}=this._options;this._lutPrimitive=new fb({image:t,resolution:r,verticalTileCount:i,horizontalTileCount:n}),this._stack.push(this._lutPrimitive)}},lg.prototype.availableOptions={image:{type:"image",required:!0,setter(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}},resolution:{type:"number"},horizontalTileCount:{type:"number",default:5},verticalTileCount:{type:"number",default:5}},lg.identifier="3d-lut",OI=lg}),MI={};_r(MI,{A15Filter:()=>eI,BWFilter:()=>rI,BWHardFilter:()=>iI,BreezeFilter:()=>tI,CelsiusFilter:()=>nI,ChestFilter:()=>oI,DuoToneFilter:()=>sI,FixieFilter:()=>aI,FoodFilter:()=>lI,FridgeFilter:()=>cI,FrontFilter:()=>uI,GlamFilter:()=>hI,GobblinFilter:()=>dI,IdentityFilter:()=>pb,K1Filter:()=>fI,K2Filter:()=>pI,K6Filter:()=>mI,KDynamicFilter:()=>gI,LUTFilter:()=>FI,LeninFilter:()=>vI,LomoFilter:()=>yI,MellowFilter:()=>_I,MetalFilter:()=>xI,MorningFilter:()=>wI,OrchidFilter:()=>SI,Pola669Filter:()=>kI,PolaFilter:()=>CI,QuoziFilter:()=>TI,SemiredFilter:()=>EI,SunnyFilter:()=>DI,TexasFilter:()=>II,ThreeDLUTFilter:()=>OI,X400Filter:()=>RI});var UU=F(()=>{J5(),lU(),cU(),uU(),hU(),dU(),fU(),pU(),mU(),gU(),vU(),yU(),_U(),bU(),xU(),wU(),SU(),CU(),kU(),TU(),EU(),DU(),IU(),RU(),FU(),OU(),MU(),PU(),AU(),zU(),$U(),BU(),LU()}),ma,PI,NU=F(()=>{ue(),UU(),It(),J5(),Rt(),ma=class extends Gr{_render(e){return this._selectedFilter.render(this._sdk,e,this._renderTexture)}render(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),this.getEnabled()?super.render(e):(this.setDirtyForRenderer(!1,this._sdk.getRenderer()),Promise.resolve(e))}setDirtyForRenderer(e,t){super.setDirtyForRenderer(e,t),this._selectedFilter.setDirtyForRenderer(e,t)}disposeRenderTextures(){super.disposeRenderTextures(),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}dispose(){super.dispose(),this._selectedFilter&&this._selectedFilter.dispose()}restoreSnapshot(e){const t=L({},e);if(delete t.filter,e.filter){const r=e.filter.constructor;r.identifier==="3d-lut"?this.setFilter(new r({image:e.filter.getImage(),resolution:e.filter.getResolution(),horizontalTileCount:e.filter.getHorizontalTileCount(),verticalTileCount:e.filter.getVerticalTileCount()})):r.identifier==="duotone"?this.setFilter(new r({lightColor:e.filter.getLightColor(),darkColor:e.filter.getDarkColor(),intensity:e.filter.getIntensity()})):this.setFilter(new r)}this.set(t)}resetToDefaultFilterIntensity(){const e=this._selectedFilter&&this._selectedFilter.availableOptions,t=e&&e.intensity.default;this.setIntensity(t||1)}},ma.identifier="filter",ma.prototype.availableOptions={identifier:{type:"string",default:"identity"},intensity:{type:"number",default:1,setter(e){return this._selectedFilter&&this._selectedFilter.setIntensity(e),e}},filter:{type:"object",default:new pb,setter(e){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=e,typeof this._options.intensity!="undefined"&&this._selectedFilter.set({intensity:this._options.intensity}),e}}},ma.FilterPrimitives=Z5,ma.Filters=MI,ma.Filter=kt,Ht.Operations.FilterOperation=ma,PI=ma}),bd,AI,jU=F(()=>{ue(),bd=class extends Gr{constructor(...e){super(...e),this._flipContainer=new _e.Container}_render(e){const{outputResolution:t,flipHorizontally:r,flipVertically:i}=this._options;if(r||i){const n=e.getDimensions();this._flipRenderTexture?this._flipRenderTexture.resizeTo(n):(this._flipRenderTexture=new _e.RenderTexture(this._sdk.getRenderer(),n.x,n.y),this._flipSprite=new _e.Sprite(this._flipRenderTexture),this._flipContainer.addChild(this._flipSprite));const o=r?-1:1,s=i?-1:1;this._flipSprite.setScale(o,s),this._flipSprite.setPivot(0,0),this._flipSprite.setPosition(n.x*(1-o)*.5,n.y*(1-s)*.5),this._flipRenderTexture.clear(),this._flipRenderTexture.render(this._container),this._renderTexture.render(this._flipContainer)}else this._renderTexture.render(this._container);return Promise.resolve()}},bd.identifier="flip",bd.prototype.availableOptions={flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1}},Ht.Operations.FlipOperation=bd,AI=bd}),Fl,eu,zI,HU=F(()=>{ue(),{Vector2:Fl}=ot,eu=class extends Gr{constructor(...e){super(...e),this._colorOverlayFilter=new _e.Filters.ColorOverlayFilter({color:this.getTintColor()}),this._frameContainer=new _e.Container,this._resetSprites(),this._options.frame&&this._createSpritesForFrame(this._options.frame)}_resetSprites(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}_createSpritesForFrame(e){if(!e)return this._disposeSprites();const{imageGroups:t,layoutMode:r}=e;this._layoutMode=r||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(i=>{typeof t[i]!="undefined"&&["start","mid","end"].forEach(n=>{if(typeof t[i][n]=="undefined")return;let o=t[i][n];"image"in o&&(o=o.image);const s=_e.Texture.fromImage(o),a=new _e.Sprite(s);this._spriteGroups[i][n]=a,this._sprites.push(a),this._frameContainer.addChild(a)})})}_render(e){const t=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(e)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(t):(this._frameRenderTexture=new _e.RenderTexture(this._sdk.getRenderer(),t.x,t.y),this._frameSprite=new _e.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),Promise.resolve()}_updateSprites(e){const t=e.getDimensions();this._frameWidth=Math.ceil(e.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(e,"top",0),this._updateHorizontalSpriteGroup(e,"bottom",t.y-this._frameWidth),this._updateVerticalSpriteGroup(e,"left",0),this._updateVerticalSpriteGroup(e,"right",t.x-this._frameWidth)}_updateHorizontalSpriteGroup(e,t,r=0){const i=e.getDimensions(),n=this._layoutMode==="vertical-inside",o=this._spriteGroups[t].start,s=this._spriteGroups[t].mid,a=this._spriteGroups[t].end;let l=0,c=0,h,f;if(o){h=o.getTexture().getDimensions(),f=h.y/h.x,l=Math.floor(this._frameWidth/f);const d=new Fl(0,r);d.x=n?this._frameWidth:0,o.setPosition(d),o.setHeight(this._frameWidth),o.setWidth(l)}if(a){h=a.getTexture().getDimensions(),f=h.y/h.x,c=Math.floor(this._frameWidth*f);const d=new Fl(i.x-c,r);d.x-=n?this._frameWidth:0,a.setPosition(d),a.setHeight(this._frameWidth),a.setWidth(c)}if(s){h=s.getTexture().getDimensions(),f=h.y/h.x;const d=new Fl(l,r);let p=i.x-l-c;if(n&&(d.x+=this._frameWidth,p-=this._frameWidth*2),s.setPosition(d),s.setWidth(p),s.setHeight(this._frameWidth),this._options.frame.imageGroups[t].mid.mode==="repeat"){const v=this._frameWidth/f,g=Math.ceil(p/v);let m=0;if(g!==-1){let y=Math.round(p/g);s.setWidth(y),m+=y,this._ensureRepeatSpritesExist(g-1,t,s);for(let _=0;_<g-1;_++){y=Math.round((p-m)/(g-_-1));const b=this._repeatSprites[t][_],w=d.clone().add(m,0).floor();b.setPosition(w),b.setWidth(y),b.setHeight(this._frameWidth),m+=y}}}}}_ensureRepeatSpritesExist(e,t,r){r.getTexture().setMaxListeners(e+1);const i=this._repeatSprites[t].length;if(e>i){const n=e-i;for(let o=0;o<n;o++){const s=new _e.Sprite(r.getTexture());this._repeatSprites[t].push(s),this._frameContainer.addChild(s),this._sprites.push(s)}}else e<i&&this._repeatSprites[t].splice(e).forEach(o=>{const s=this._sprites.indexOf(o);s!==-1&&(this._sprites.splice(s,1),this._frameContainer.removeChild(o),o.dispose())})}_updateVerticalSpriteGroup(e,t,r=0){const i=e.getDimensions(),n=this._layoutMode==="horizontal-inside",o=this._spriteGroups[t].start,s=this._spriteGroups[t].mid,a=this._spriteGroups[t].end;let l=0,c=0,h,f;if(o){h=o.getTexture().getDimensions(),f=h.y/h.x,l=Math.floor(this._frameWidth*f);const d=new Fl(r,0);d.y=n?this._frameWidth:0,o.setPosition(d),o.setWidth(this._frameWidth),o.setHeight(l)}if(a){h=a.getTexture().getDimensions(),f=h.y/h.x,c=Math.floor(this._frameWidth*f);const d=new Fl(r,i.y-c);d.y-=n?this._frameWidth:0,a.setPosition(d),a.setWidth(this._frameWidth),a.setHeight(c)}if(s){h=s.getTexture().getDimensions(),f=h.y/h.x;const d=new Fl(r,l);let p=i.y-l-c;if(n&&(d.y+=this._frameWidth,p-=this._frameWidth*2),s.setPosition(d),s.setHeight(p),s.setWidth(this._frameWidth),this._options.frame.imageGroups[t].mid.mode==="repeat"){const v=this._frameWidth*f,g=Math.ceil(p/v);let m=0;if(g!==-1){let y=Math.round(p/g);s.setHeight(y),m+=y,this._ensureRepeatSpritesExist(g-1,t,s);for(let _=0;_<g-1;_++){y=Math.round((p-m)/(g-_-1));const b=this._repeatSprites[t][_],w=d.clone().add(0,m).floor();b.setPosition(w),b.setHeight(y),b.setWidth(this._frameWidth),m+=y}}}}}_disposeSprites(){this._sprites.forEach(e=>{this._frameContainer.removeChild(e),e.getTexture().dispose(),e.dispose()}),this._resetSprites()}dispose(){super.dispose(),this._disposeSprites(),this._colorOverlayFilter&&this._colorOverlayFilter.dispose(),this._frameRenderTexture&&this._frameRenderTexture.dispose()}static validateFrame(e){if(!e)return;const{imageGroups:t,layoutMode:r}=e;if(typeof e.identifier!="string")throw new Error("Frame needs a property `identifier` of type String.");if(typeof e.imageGroups!="object")throw new Error("Frame needs a property `imageGroups` of type Object.");const i=n=>{const{start:o,end:s,mid:a}=t[n];if(typeof t[n]!="undefined"){if(typeof t[n]!="object")throw new Error(`Frame: \`imageGroups.${n}\` needs to be of type Object.`);if(typeof o!="undefined"&&!(o instanceof vs||typeof HTMLImageElement!="undefined"&&o instanceof HTMLImageElement))throw new Error(`Frame: \`imageGroups.${n}.start\` needs to be of type Image.`);if(typeof a!="undefined"&&!(o instanceof vs||typeof HTMLImageElement!="undefined"&&o instanceof HTMLImageElement)&&typeof a!="object")throw new Error(`Frame: \`imageGroups.${n}.mid\` needs to be of type Image or Object.`);if(typeof s!="undefined"&&!(s instanceof vs||typeof HTMLImageElement!="undefined"&&s instanceof HTMLImageElement))throw new Error(`Frame: \`imageGroups.${n}.end\` needs to be of type Image.`)}};if(typeof r!="undefined"&&["vertical-inside","horizontal-inside"].indexOf(r)===-1)throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if(typeof tintable!="undefined"&&typeof tintable!="boolean")throw new Error("Frame: `tintable` needs to be of type Boolean.");i("top"),i("left"),i("right"),i("bottom")}},eu.identifier="frame",eu.prototype.availableOptions={frame:{type:"object",validation:eu.validateFrame,setter(e,t){return t||this._createSpritesForFrame(e),e},default:null},alpha:{type:"number",default:1},tintColor:{type:"color",default:new Pe(1,1,1,0)},scale:{type:"number",default:.1}},Ht.Operations.FrameOperation=eu,zI=eu}),$I,WU=F(()=>{$I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAAAAADRE4smAAAsTElEQVR4Ae1d4bHjOM5ECAgBISgEZLDOwMrAysDMwMpAzkCTAUNQCAyBIfCr2ifI1DNh+c1tfTMg3b9udtZXC7tJdgMgCP8foJAUBIJx92eoEy5puAKkHH1jX0AchqoJcLwGlv1fDVAnyKtfQMoB1WLQKBBCyuCgVvQhvQGoF3RPb2Bs/AsgEDS6BqbGvwACaHsT+AV1AK/4W18AQy3gCxTAR2vAQxW4xHSD3/kC/qlI9NK7hqg6H8SLspiPv4C+kv0v6ouZQuUEEMfndUtcOQH6qJ9nR2sg1kD+FSdQ4GLS4MA82B+uZvJJRQXkFwT8uRp2VQl99xuGiOyTX4//+AuYqtj/BBGPiVITATjtEel4pdRFAJ/2uP08K9KBYXwPaT5OC9Vlg/kneQ0cUwHcQvz6F7BAXVuA/3GNsG8ofqBQmw3uUg7dCglcZQSgJHizvO1qy4OM3wPCH64BV1fnR8QfdkqAcWD86Q86KP9+o/EjGMfwrhVSpPPUWvy9YoMbsEIqAVrSgXBSCFC3FdK/sV+txc/Kv93OEpgrawiYfybsSWkIaMcK3SurB1P8Ufyk2OB2rNCoEKCV+BW2tGOFXG2N0RiUkkgZUfmumrFCfW0EgNOPKlxB6YtvQAcqRrix+BfFBjdjhVgnQL3xk+cyWwYQVG6FLjOs6PTjotaSCF5T8iUXJLSo3gqxT4kLPig6BKheB1/+/dvzEwGi/KParSDN+arAtMFTA/Gz3+8KTiF/tVZoaxx034zwwlAPvsc/7cifx+8U8tdqhfqwXxVihOMAgnp1sJA/lzu9Tv4KrRD7fFVki2VE+IuB3anvT0z/Y/x9KBRKexPkJ+77njv835YA3kvuaPm79z+6zDGtiP5Mv1sSObMv7gr8l5MfkMclCZaJf9sK0TUWd4U58N8b/NWnb5jo9+KPShM4EvzN4DGmPcL5p1ZIgVghhr8VNBZjuP4P8Rsr/fReGW72UyukIKDJeRYz/rQkoiAYHWkSTz+2QgrOVq657bG8xYAlHWBEQzcdf+OH43SAcPp7o3/N3un34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQV8iu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6P3wT5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvJT0y5+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1Wp5DfxAqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD5ZIL8gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mhfyaTOQKZl7e9RWg1ggnVO4D/TJ+q5UV8mstLX0Fjz/E1wW/Uo/EoGb9gu1O5vhWgTzqBGAwAER9C3RKj4SqlIO5sacEpPNfJ38OBstHAIdJlwD/vDXk3wNYPQLwFmHO/6wE9rKwPWilv2DkcRNWy9esng45olr9PhuYbQ+JtQ3Qq4VdTSo6S+FvZ5pXNSC/1+NL2ZdkpuNXDjTI42f9BNPj90ohMRh42UyYqhRuemUJ6GJ3MLMC5ECDlAaFAPG9MnEoN9IFMvCymaxUhQCjniXL0ZeXiTPR8Qqi449nNnL5ik8oCqURDb1l7RQCeM0kRX2jGIKBxP8lJgHk8XdpB1eO32F8ofV49H6+oKWXfVIkpRkCi0sgcP/qpOhn7ye2sfmlBLmKobK8FbB0RATbo037qCazx9dL4L4WtXtrCS/dzcLuN4yvbcy4bmzRMgHQv0hmDOoSEB044pMaYMvsh10I/nUqE4fCRjFazfaWWNwdXF7tu8JGgXbHdwkBgvK3DgowvQFq15WGstWLeFw0DaYn14DEf/zwn1ozNoZRKWm8//Bfb3i0JZYJIPHHN24BX5NxDfjqzdrhjQkGFCxvgaFIgHRTVsd01DR5tj7OX0D7M0CXeLiYrvneiwSQ0h0fzoK4Ku0AhhBfpbTno1kQtNh+7HZQCOA1hRToVUnU2Z/jK2BtpsFVSaLZ1ECsEECPP02kNgQGsj/NXxBUkxDOek+UA2NAjQABdZPkXX/qR68PSrG8BjYM+t+G+XLq+zEqrDGFRSFAcppE0jGBRWAqI6JmE3WQ9Unu8BS/SwewpADZB3p/eNdNqXtbHXOHt3Q9ssHwvJ6X9CYCWah7BDq+AK1YoUO4v7/j5Xpgg+FZB1Os4/cXyRo6RQWqVnCs4fdnr031jBoBJH6u4vfvo+bks5KPL2d9vPXfP/frE2rFkCWmBCVR36djeAQ7Qx4HbXKRi0VVg0s6RBysdLwspKjA6FKCoqrrjZ9+eE97XBUn5IdyXMcMCJ2dmn8gpSDIIUH5dz2F4zlxpobcXpU1AF6p/45mh9yyks0tqMChT6DUfynYnHCqXuCasOiEmLXUxhBNDrnFosWJXdEG/wIPapf/EEwOeew0AbdQcQ08VQb4cFh6OMNfC3XC97lUDInAcNfiB3IFCsSRrOV5BYEKTsg/uV5/MC7cn420O+mH4JAnPlCLv/BcQvQXNFbvVhiQrQFwL9YK3UPKEUa2NOFBYQDv7JF7md1EdrMPIYRlujDaerNSV+5Z0AwYXia4u370SwghzGNPxjL9Snsb7u4vY1B0sFW4N6a8nnK+99YrvDr/leaeZdf3zjXEj1d+a9bt9fsa8HJwmn6+mafCAa8L4fu++uHtlzgvMS1lHagwIORrgBUrZAXkc/EejvP3w/7A72zHL2p9KEhh9SS857ZHt0I2Nr+9cuHjCk73Le0xWo4faM7Fi8SnY8anNaBbIRObn3bFWU8JbfFGoEL8wRT/47a2VSnsn05CzoTwgRUyUvSKqPW9h+fhlz4JYJAzwaYO7PPgOk0KB/d9H8QkiGDXCtFccHmFzMY+umu+QmASX2AvfmVqcYnRw/CNAVnEnS0rpBe9WOV/950BfRJALAoHYZOxtJcqhSP2307CMd/ubVohWf7H/Hffyts3SgJYI/UmdeC91KWqMLqLiiz4VSSTN8j/k6YDI+KeLXNGgKHUCBjPNtNeuhRm9SnIWBSOHu2lfXX+T2qNBNJUEA4zGU376lLY6z0O3TOZ4mCc/4Uit1MIEOX/TG93MPTEmS6FWWOAeL7BzstmgkGb51AocisMgE3uDAr5jZX/dSmMGgN+fSuReDJ3zUsw61ZQYUA2KNIL+U3Bvy+FtUeR445Mgc3zX81suCIBpJDEOvkrkcLajLDu8YE41ML/U0kf9CUCxE04LDr565DCYh2VxC/FEcEWKCqxKEVujs8E2HIeevD1SOHiPvgL7H4Dig9Si9xdeCZADzoqk8JlBkQQVMN/vchL4YkAE+ioTAorDOgq4n8ijRsLFBgAevW3Vil8XP21rwOVMAsMAL32V6UUVh74a4v/uRkG/U3LOqWwMCPqN32sTz0LKjduz6MOQc/7ViqFV3RRz/tWy//0/DAC6KhZCstJeFz3qq0kJhiVza8RKSwMsL//6SUxhf8Cp2x+DUhhAS0D1IGT4mtf9vs6ZfNrRQofo9KSmIrWpDA0wf/3+30blMI6Ki6JKfxvUwq/j6q6IxW0I4W7tvgfj940b0wK+w5qRFAHeTtlvGGbUjgw6KjUB0VlvF2DUjg6bJD/vbL5tSeFp5r5T/pkOK9sfo1JYc/N8l/Z/JqSwvHcMP/vyubXkBRmhHpx3B3JoKANHdgAlO5IDQ1JYQUf/rcmhQUf/rcqhVsAxWb5r0hhT9AU3NGzNm1J4cAN8l/J+zYohaOD9tD/DZvfnyUe/3n+I8Ifg//jmx/58Oel8B/N+/Z/cu/hP7z54e2Pdx5STOEEfwzs/2zn3f3PHv7zX9B5ODj80zJs+pPzY/nPZ2Ju0CrEifEn/laBsc0cHLYXv/IN9E3m4Pp43WViTtAY8Ba3aWON5aBlbvuMz/ETNIJrfFxG4awdA7GJ6LNHqfL4Ox8RWgCG3ZNU960d4xKnlkpwgTIrSHhrxw/E7DaK6KD5a2PklhLQoXsUJZfYkB9Y8iepxAr5NmryMq81PMSvU14eqBf37QsI9O2emkeoFnilx0Ocp7AdgxhaqUjy7WF9fP9gADexAK4xzY8dcKAHA06///KAwSc7ZQ/E/nEO+tpvIsmUJd52QL/NXcKv+MOp+txHSml57IH/iBgaVkZ4qt/6+G0HjCgMWAi4bvLnfn/Y9sARoM+e5lu4kfhlB2S4xM0O9tRKE27ETQUC3pMwAIdm4pcdcPZJMEETkNKnJMBvMQn+qTrvG1OcSF7rcPtGvFC/9cOrT2m5kGTAut3LJUvlhz/N35+gpWz06Ii01H74c5CDLit94sP29YFrJn9MgnMW/yC2r3p0Pr90MmzZzlCr7dMf645Z/Czjh6ov+n67f71I6fMuJ38D5J8uX0d+v/I+rDtggMohNic697Xgs9LnIJaoWuD2sJ4YgCmLP3z54KpB4FehIwWvTqzQ15dT+eE/SLCS650yK3iv/hoe+Yji+0T2sjBhAqxXAIjyjbj6PiHAmFnhE9du/f4N8+H7vPwP6YJ1VP3hL/HTVgeQ+CO1cfh3m+85i+hZrdDYgvL14vtWLzjRGn/1RV8vJn/1PYPPHtzoK099bQl+3l++li9gEPdfd+pLCL8kwfbizFz34S+hFudwTQSC6lNfJymBtTSD4ZYEAfP4fWil4yskgcvvX8dx/Yula2XulNuXAF1sYgOA8fvYPfF9dK99A5D4w2nO4xcrTN5zI1f9PIv4391+7MOI9ccfHK6kn9+4/VkhJYaFt6CPbz8i16J888O9EP8vRS8PUAl4waf+t+Xw9ieHiJUo3/Acv89aoEnRyxGrSX255/dIhk0HRYdKwuxWS9F3F3+/i39hvVTsqkl9RVL6/4DTiHrCrKsj7RUH0OLHF59yWE3qy3dPfkiWd/fiU1xH3nfCkh90x58yD17KGR6pg+gJsypsYU5jhAx3PX4RhvHfT3FXw0VXh/IFvDf6xT0WAF7R8JAT9+hz9f4p/tAdTQbqvOXZGLj7nS9xeIpx1oLbbMIlJmdV+fot/q9N/Vv8+gEvNgFvpnXgJQ6yBZwK8/5C8nx0TYa9yEeTh/9Z6n1TfJr3h8W0FxLhI/5oeEjc+ovLiJv5WfTwAOVvQGSyIJ6sKt8t/jcFbf81lvUs8RuWwXSXXzyvf+BhxiSk9HVNhvRP2VK+nBf7jz8ldyS6/FNosugr7L2r87aVT8k1GfmUtS+A/I6582O0Q3c7/pQwYFTkowWcQj5imzJPc+GDTwmmVT4tIiYMYc74fpL4py9ZwMfk37eLiZiwBIyZ9esyT8OKpxHJkGOQazIiJuyAokg39om3+C9Rv+zRxfV37/u7XBTL5WNAm/Nt8RrD5mlo1j2NNMdF11+CXJRaFPloJf5/A172I45id5j56cQ5B7ONUlLs4vBlfk+Zp5mV/f9pKNgAbPCRenfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK88OKdURvy4Bb+uxIuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs2QjE60giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOloBkfkwhT10PUv8BD8BBL9/KtoEwbicF4GIsfKV5fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYC3zozWvbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgvhhge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSsxu/fo/7JfjRJDz0KSWULJB5DBLIYfzrybeElDxYjl8J7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxtwtxfk3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaCBw98KPvjggw8++OCDDz744IMPPvjggw8++OCDDz744IMP8NZD22APDeMaU9sEIN9w+4k81dAu8CpjdxqAPoqpVcgYcmyY/A01oOlz+Klh8rdLAJqTgNokv+AXtAH9AT5ul/zN3kAKSdDiDaQh5QjQHkLK0TfH/+YJsKQcAzSGLuWIrd6/EbRnhCntAO1hVAZWt4KYchBA2yqoPSMcWifAqXECzClHB82hS40ZYTzrGqiNPAjvosSUY2kh7xsIHnAt2WCpe11VFRQaKPru3W7fFAGk7hVIUUGxhaJvyq/dc8rhWql7hbOigmonvyB0xUSAa6bulW5YVEFYPfkFcg4244Kk7iUIVFJBVD/5BQs9H4FTE0VfwbWggromyJ+fg0vK4Nso+u6kUFe/ERbyP+EmR2DlBOh8KiMwANXvgygkBYFgbMEGu6ThCqAQoI0vIA6DToAm1sBCoYWGAPLqF9CIDR40CoTQhhHuQ3oDUC/ont7A2PgXQCBodA1MjX8BBND2JvCrmrwHvvsFVGqD+aJUw17DV5P3vcHvfAH/VCR66V1DVJ0P4kVZzMdfQF9R3tfrjlBHqMfxedUS106APurn2dEaiBUVPU6gwMWkwdVU9wov14iCCsgvCPhzNTxWJfTdbxgiqqjo637uCKeqir4RD4hSGQE47RHpYKVURwBfKHf+cA10NdzyEMwHaaHqbDD/JK+BYyqAW4hf/wIWqGsL8D+uEfYtxK9/AaGqez5ihXS4yghA6RuGHzYKhLou++pWSF0Drq7Oj4g/7JQA48D40x900P/9FuNHMI7hXSukSOeptfh73QY3YIV0ArSiA+GkEKBuK6R/Y79ai5/1f7uRJTBX1hAw/0zYk94Q0IgVuldWD6b4o/hJt8GNWKFRJ0AT8etsacQKudoaozHoJZECov5dtWGF+toIAKcfVbiC3hDQhg7UjXAb8S+6DW7DCrFCgKrjJ89ltgwgqNwKXWZlXK4QoNaSiEyL8SUXJLSo3gqxT4kLPig6BKhcB8u0mPMTAaL8o9qtIM35qsC0wVMD8bPf7wpOIX+1VmhrHHTfjPDCFc4AFkw5+XfxO4X8tVqhPuxXhRjhOICgXh0s5M/lTq+Qv04rxD5fFdliGRH+YmB36vsT0/8Yfx8KhdLeBPmJ+77nDv+3JYD3kjta/u79jy5zTCuiP9PvlkTO7Iu7Av/l5AfkcUmCZeLftkJ0jcVdYQ789wZ/9YXZZr8Vf1SawJHgbwaPsTje7n0rpEKsEMPfChqLMVz/h/iNlX56rww3+6kVUhDQ5DyLGX9aElEQjI40iacfWyEFZ1OzTTcs+LMX0RSMaGm87c9/OE4HCKe/fbK/hun34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQJ8uu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6I3xL5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvsXoSR+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1WZ4L8ygqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD4J+S0gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mjfyKTOQKZl7e9RWg1ggnVO4D/TJ+q5U18istLX0Fjz9EreCnP4E5qFm/YLuTOb5VII86ARgMAFHfAp3aI6Eo5WBu7CkB6fzXyZ+DwfIRwGHSJcA/bw359wBWjwC8RZjzP2uBvSpsD1rpLxh53ITV8jWrp0OOqFa/zwZm20NibQP0emFXkYrOUvjbmeZVDcjv9fhS9iWZ6fiVAw3y+Fk/wfT4vVJIDAZeNhOmKoWbXlsCqtgdzKwAOdAgpUEhQHyvTBzKjXSBDLxsJitVIcCoZ8ly9OVl4kx0vILo+OOZjVy+4hOKQmlEQ29ZO4UAXjNJUd8ohmAg8X+JSQB5/F3awZXjdxhfaD0evZ8vaOllnxRJaYbA4hII3L86KfrZ+4ltbH4pQa5iqCxvBSwdEcH2aNM+qsns8fUSuK9F7d5gwktxs7D7DeNrGzOuG1u0TAD0L5IZg7oERAeO+KQG2DL7YReCf53KxKGwUYxWs70lFncHl1f7rrBRoN3xXUKAoPytgwIMb4D6daWhbPUiHhdNg+nJNSDxHz/8p9aMjWFUShrvP/zXGx5tiWUCSPzxjVvA12RcA756tHh4Y4IBBctbYCgSIN2U1TEdNU2erY/zF9D+DNAlHi6ma773IgGkdMeHsyCuSjuAIcRXKe35aBYELbYfux0UAnhNIQV6VRJ19uf4ClibaXBVkmg2NRArBNDjTxOpDYGB7E/zFwTVJISz3hPlwBhQI0BA3SR515/60WuDUmyvgQ2D/rdhvpz6fowKa0xhUQiQnC6RNExgEZjKiKjbRA1kfZI7PMXv0gEsKUD2gd4f3nXT694mx9zhLV2PbDA8r+clvYlAFuoegY4vQCtW6BDu7+94uR7YYHjWwRTr+P1FsoZOVYGKFRxr+P3Za1M9o0YAiZ+r+P37qDj5vOTjy1kfb/33z/36hFoxZIkpQUnU9+kYHsHOkMdBm1zkYlHV4JIOEQcrHS8LKSowupSgqOp646cf3tMeV8UJ+aEc1zEDQmen5h9IKQhySFD+XU/heE6cqSG3V2UNgFfqv6PZIbesZHMLKnDoEyj1XwomJ5zqF7gmLDohZi21MUSTQ26xaHFiV7TBv8CD2uU/BJNDHjtNwC1UXANPlQE+HJYezvDXQp3wfS4VQyIw3LX4gVyBAnEka3leQaCCE/JPrtcfjAv3ZyPtTvohOOSJDyzErz2XEP0FbdW7FQbkawDci7VC95ByhJEtTXhQGMA7e+ReZjeR3exDCGGZLozW3qxUlHseNAOGlwnurh/9EkII89iTsUy/0t6Gu/vLGBQdbBXujSmvp5zvvfUKr85/pbln2fW9cw3x45XfmnV7/b4GvBycpp9v5qlwwOtC+L6vfnj7Jc5LTEtZByoMCPkaYMUKWQH5XLyH4/z9sD/wO9vxi1ofClJYPQnvue1RrJCZzW+vXPi4gtN9S3uMluMHmnPxIvHpmPFpDShWyMjmp15x1lNCW7wRqBB/MMX/uK1tVQr7p5OQMyF8YIWMFL0ian3v4Xn4pU8CGORMsKkD+zy4TpPCwX3fBzEJIti1QjQXXF4hs7GP7pqvEJjEFxiLX59aXGL0MHxjQBZxZ84KKUUvVvnffWdAnwQQi8JB2GQs7aVK4Yj9t5NwzLZ7o1ZIlv8x/9238vaNkgDWSL1JHXgvdakqjO6iIgt+FcnkDfL/pOnAiLhny5wRYCg1AsazzbSXLoVZfQoyFoWjR3tpX53/k1ojgTQVhMNMRtO+uhT2eo9D90ymOBjnf6HI7RQCRPk/09odTD1xpkth1hggnm+w87KZYNDmORSK3AoDYJM7g0J+Y+V/XQqjxoBf30oknsxd8xLMuhVUGJANivRCflPw70th7VHkuCNTYPP8VzMbrkgAKSSxQv56pLA2I6x7fCAOtfD/VNIHfYkAcRMOi0L+aqSwWEcl8UtxRLAFikosSpGb4zMBtpyHEnxVUri4D/4C5Ruw7IOUIncXngnQg4L6pHCZAREENfFfKfJSeCLABDoqk8IKA7qK+J9I48YCBQaAXv2tVQofV3/t60AlzAIDQK/9VSuF9Qf+GuF/boZBf9OyTikszIjaTR/7U8+Cyo3b86hD0PO+lUrhFV1U8r418z89P4wAOqqVwnISHte9KiyJCUZl82tECgsD7O9/eklM4b/AKZtfA1JYQMsAdeCk+NqX/b5O2fxakcIHqLckpqI1KQxN8P/9ft/mpLCOqktiCv/blMLvo6ruSAXtSOGuLf7HozfNG5PCvoMaEdRB3k4Zb9imFA4MCur1QVEZb9egFI4OG+R/r2x+7UnhqWb+kz4ZziubX2NS2HOz/Fc2v6akcDw3zP+7svk1JIUZoWocdEcyKGhABzYAvTtSQ0NSWMGH/61J4Q//Bc1J4YZAsU3+61LYEzQFd/SsTVtSOHCD/Ffyvg1K4eigPfTK5tcQuG3++9Y2P+Ur8Nwy/6ODhkExhRM0i7tsfu1icNgy/2eGD+zDMhAaByI0DPIB2kbfsgbDmxSiWwV7aURoErNy/aSxXNwErYKU6yetpeP5E3/bW4BvL+724le+gb7JQmwfr7ty3Kk99Ru7PBcdsDXlm2Z8jp+gBci77UNejnINpQSu2cukefydb8QPYNi9S3rfenIvcWqpDytQZgUJb+34gZhdSRYdNH9tjNxSF0LoHp1pS2zIDyz5u6RihXwbjZkytD88xK/Tn5+qFPftCwj0bViBR6gWeKXHa+ynsB2DGFppS+Pbw/r4/sEAbmIBXGOaHzvgQA8GnH7/+SmD77bLHoj94xz0tV9Hl1GbvO2Afhu+iV/xh1P1uY+U0vLYA/8RMTSsjPBUv/Xx2w4YURiwEHDd5M/9/rDtgSNAn73PvHAj8csOyHCJmx3sqZX204ibCgS8J2EADs3ELzvg7JNgaqv0KQnwW0yCf6rO+8YUJ5In29z+Nkao3/rh1ae0XEgyYN3u+bql8sOfZtnlJH7K5s+PSEvthz8HOeiy0ic+bF8fuGbyxyQ4Z/EP1ds+Qefzm8fDlu0MVds+QR/SAzGLn2UGZQstjxscwCKlz7uc/A2Qf7p8Hfn9yvuw7oABKofYnOjc14LPSp+DWKJqgdvrymIApiz+8OWDqwaBX4WOFLw6sUJfX07lh/8gwUqud8qs4L3668jkI4rvE9nLwoQJsF4BIMo3ovi+lQBjZoVPXLv1+zfMh+/z8j+kC9ZR9Ye/xE9bHUDij9TG4d9tvucsome1QmMLyteL71u94ERr/NUXfb2Y/NX3DD57da2vPPW1Jfh5P4FHvoChbvcvqS8h/JI2yLODc92Hv4RaHMY6EQiqT32dpATW0iCuWxIEzOP3oZWOr5AELh/CE8f1L5auleGjbl8CdLGJDQDG77OXxffRvfYNQOIPpzmPX6wwec+NXPXzLOJ/d/uxDyPWH39wuJJ+fuP2Z4WUGBbegj6+/Yhci/LND/dC/L8UvTxAJeAFn/rflsPbnxwiVqJ8w3P8PmuBJkUvR6wm9eWeH6UbNh0UHSoJs1stRd9d/P0u/oX1UrGrJvUVSen/A04j6gmzro60VxxAix9ffMphNakv3z35IVne3YtPcR153wlLftAdf8o8eClneKQOoifMqrCFOY0RMtz1+EUYxn8/xV0NF10dyhfw3ugX91gAeEXDQ07co8/V+6f4Q3c0Gajzlmdj4O53vsThKcZZC26zCZeYnFXl67f4vzb1b/HrB7zYBLyZ1oGXOMgWcCrM+wvJ89E1GfYiH00e/mep903xad4fFtNeSISP+KMoJbsTHmXEzfwseniA8jcgMlkQT1aV7xb/m4K2/5rNf5b4Dctgussvntc/8DBjElL6uiZD+qdsKV/Oi/3Hn5I7El3+KTRZ9BX23oXK9Oan5JqMfMraF0B+x9z5Mdqhux1/ShgwavLRAE4hf2eFMk9z4YNPCaZVPi0iJgxhzvh+kvinL1nAx+Tft4uJmLAEjJn16zJPw+JpFMmQY5BrMvbGRVMU6cY+8Rb/JeqXPbq4/u59f5eLYrl8DGhzvi1eY9g8Dc26p5HmuOj6S5CLUosmH43E/2/Ay37EUewOMz+dOOdgtlFKil0cvszvKfM0s7L/Pw0FG3L56DuwAXfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK29PKtURvy4Bb+vFSuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs+QjE40giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOl4BkfiwhT10PUv8BD8BBL9/KtoEwbicF4GIpfL15fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYCvzozevbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgrhlge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSMx2/co/7JfjRJDz0KSWULJB5DIeBSPzrybeElDyYjV8P7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxNwtxfm3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaC5w/+DDz744IMPPvjggw8++OCDDz744IMPDABvPbQN9tAwrjG1TQDyDdceZU53u8CrzFxoAPocjlYhM2ixXfK31H2gD2GmhsnfLgFoTgJqk/yCX9AMlNeXuF3yN9t+HpKgxfbzIeUI0B5CytE3x//mCbCkHAM0hi7liK02XwvaM8KUdoD2MCrTSltBTDkIoG0V1J4RDq0T4NQ4AeaUo4Pm0KXGjDCeFQ3UTB6Ed1FiyrG0kPcNBA+4lmyw1L2uqgoKLRR9d263b4oAUvcKpKig2ELRN+V3LjnlcK3UvcJZUUG1k18QumIiwDVT90o3LKogrJ78AjkHm3FBUvcSBCqpIKqf/IKFno/AqYmir+BaUEFdE+TPz8ElZfBtFH13Uqir3wgL+Z9wkyOwcgJ0PpURGID+qA/6P9HpZtdg1QgHAAAAAElFTkSuQmCC"}),BI,VU=F(()=>{BI=`uniform sampler2D u_image;
uniform sampler2D u_watermarkTex;

varying vec2 v_texCoord;


void main() {
  vec4 color = texture2D(u_image, v_texCoord);
  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);

  if (watermarkColor.r > 0.8) {
    gl_FragColor = mix(color, watermarkColor, 0.3);
  } else {
    gl_FragColor = color;
  }
}
`}),Wb,GU=F(()=>{ue(),VU(),Wb=class extends _e.Filter{constructor(...e){super(...e),this._fragmentSource=BI}_applyWebGL(e,t,r,i=!1){const n=e.getContext(),o=this.getShaderForRenderer(e),s=t.getFrame(),a=this._watermarkCanvas;(!a||s.width!==a.width||s.height!==a.height)&&this._createWatermarkCanvas(s.width,s.height);const l=_e.Texture.fromCanvas(this._watermarkCanvas),c=l.getBaseTexture();e.updateTexture(c),c.setGLUnit(1),e.setRenderTarget(r),i&&r.clear(),e.setShader(o);const h=e.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",h),o.syncUniforms(),n.uniform1i(n.getUniformLocation(o.getProgram(),"u_watermarkTex"),1),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,c.getGLTextureForRenderer(e)),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),l.dispose()}_createWatermarkCanvas(e,t){const r=this._options.watermarkImage,i=Ce.createCanvas();i.width=e,i.height=t;const n=i.getContext("2d"),o=n.createPattern(r,"repeat");n.fillStyle=o,n.fillRect(0,0,i.width,i.height),this._watermarkCanvas=i,this._watermarkContext=n}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext();this._options.watermarkImage,this._createWatermarkCanvas(n.width,n.height);const a=o.getImageData(0,0,n.width,n.height),l=this._watermarkContext.getImageData(0,0,n.width,n.height),c=new Pe,h=new Pe,f=new Pe;for(let d=0;d<n.width*n.height*4;d+=4)c.set(a.data[d]/255,a.data[d+1]/255,a.data[d+2]/255,a.data[d+3]/255),h.set(l.data[d]/255,l.data[d+1]/255,l.data[d+2]/255,l.data[d+3]/255),h.r>.8?f.copy(c.clone().mix(h,.3)):f.copy(c),a.data[d]=f.r*255,a.data[d+1]=f.g*255,a.data[d+2]=f.b*255,a.data[d+3]=f.a*255;s.putImageData(a,0,0)}},Wb.prototype.availableOptions={watermarkImage:{type:"object",required:!0}}}),xd,LI,qU=F(()=>{ue(),WU(),GU(),xd=class extends Gr{constructor(...e){super(...e),Ue(this,"_applyWatermarkFilter",()=>(this._watermarkFilter||(this._watermarkFilter=new Wb({watermarkImage:this._watermarkImage})),this._sprite.setFilters([this._watermarkFilter]),this._renderTexture.render(this._container),Promise.resolve())),Ue(this,"_loadWatermarkImage",()=>this._watermarkImage?Promise.resolve():new Promise((t,r)=>{this._watermarkImage=new vs,this._watermarkImage.onload=t,this._watermarkImage.src=$I})),this._watermarkFilter=null,this._watermarkImage=null}_render(e){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}dispose(){this._watermarkFilter&&this._watermarkFilter.dispose(),super.dispose()}},xd.identifier="license-watermark",xd.prototype.availableOptions={},Ht.Operations.LicenseWatermarkOperation=xd,LI=xd}),UI,XU=F(()=>{UI=`/*!
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 */

uniform sampler2D u_image;
uniform float u_blurRadius;
uniform vec2 u_controlPoint1;
uniform vec2 u_controlPoint2;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    vec2 vector = u_controlPoint2 - u_controlPoint1;
    float offset = random(gl_FragCoord.xy / u_texSize.xy);

    float radius = smoothstep(0.0, 1.0,
      abs(
        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)
      )
    ) * u_blurRadius;

    for (float t = -30.0; t <= 30.0; t++) {
      float percent = (t + offset - 0.5) / 30.0;
      float weight = 1.0 - abs(percent);
      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

      color += _sample * weight;
      total += weight;
    }

    gl_FragColor = color / total;
}
`}),Fo,Vb,cg,YU=F(()=>{ue(),gd(),XU(),{Vector2:Fo}=ot,Vb=class extends _e.Filter{constructor(...e){super(...e),this._fragmentSource=UI,this._lastBlurRadius=null,this._lastControlPoint1=new Fo,this._lastControlPoint2=new Fo,this._blurFilter=new Ro,this._blurredRenderTarget=new _e.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new _e.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,r,i=!1){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,r,i);return}const n=t.getDimensions(),o=!r.getDimensions().equals(n);if(t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o){const a=new Fo(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(a);const l={blurRadius:this._options.blurRadius,texSize:n},c=(v,g,m)=>Math.min(Math.max(v,g),m),h=(v,g,m)=>{const y=c((m-v)/(g-v),0,1);return y*y*(3-2*y)},f=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),{blurRadius:d}=this._options,p=(v,g)=>h(0,1,Math.abs(c(new Fo(v,g).subtract(this._options.controlPoint1).dot(f)/f.dot(f),0,1)))*d;this._blurFilter.set(l),this._blurFilter._applyCanvas(e,t,r,i,p),this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(e,t,r,i=!1){const n=t.getDimensions(),o=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());const s=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||o,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;s&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),a&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,r)}_renderMask(){const e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),r=new Fo(e.width,e.height),i=this._options.controlPoint1.clone().multiply(r),n=this._options.controlPoint2.clone().multiply(r),o=t.createLinearGradient(i.x,i.y,n.x,n.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),t.fillStyle=o,t.fillRect(0,0,e.width,e.height)}_applyMask(e,t){const r=t.getContext(),i=e.getCanvas(),n=e.getContext(),o=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=n.getImageData(0,0,i.width,i.height),l=a.data,c=o.getImageData(0,0,i.width,i.height).data,h=s.getImageData(0,0,i.width,i.height).data;let f;for(let d=0;d<i.width*i.height*4;d+=4)f=h[d]/255,l[d]=f*l[d]+(1-f)*c[d],l[d+1]=f*l[d+1]+(1-f)*c[d+1],l[d+2]=f*l[d+2]+(1-f)*c[d+2];r.putImageData(a,0,0)}dispose(){super.dispose(),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}},Vb.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},controlPoint1:{type:"vector2",default:new Fo(0,.5),uniformType:"2f"},controlPoint2:{type:"vector2",default:new Fo(1,.5),uniformType:"2f"},delta:{type:"vector2",default:new Fo(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new Fo(100,100),uniformType:"2f"}},cg=Vb}),wd,Sd,NI,QU=F(()=>{ue(),YU(),{Vector2:wd}=ot,Sd=class extends Gr{constructor(...e){super(...e),this._lastBlurRadius=this._options.blurRadius,this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone();const t={blurQuality:{type:"string"}};this._horizontalFilter=new cg({},t),this._verticalFilter=new cg({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new wd(.5,.5)),this._verticalFilter.setDelta(new wd(-.5,.5)),this._filter=new cg({},t)}rotate(e){const{controlPoint1:t}=this._options,{controlPoint2:r}=this._options;e===90?(t.flip(),t.x=1-t.x,r.flip(),r.x=1-r.x):e===-90&&(t.flip(),t.y=1-t.y,r.flip(),r.y=1-r.y),this.set({controlPoint1:t,controlPoint2:r})}flip(e){const{controlPoint1:t}=this._options,{controlPoint2:r}=this._options;switch(e){case"horizontal":t.x=1-t.x,r.x=1-r.x;break;case"vertical":t.y=1-t.y,r.y=1-r.y;break}this.set({controlPoint1:t,controlPoint2:r})}transform(e){const t={};["controlPoint1","controlPoint2"].forEach(r=>{const i=this.getOption(r);t[r]=e.applyToRelativePoint(i)}),["blurRadius"].forEach(r=>{const i=this.getOption(r);t[r]=e.applyToRelativeSize(i)}),this.set(t,!1)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions(),r=t.min(),{blurRadius:i,controlPoint1:n,controlPoint2:o}=this._options,s={blurRadius:i*r,controlPoint1:n.clone(),controlPoint2:o.clone(),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){const t=e.getDimensions(),{blurRadius:r,controlPoint1:i,controlPoint2:n}=this._options;return this._filter.set({blurRadius:r,controlPoint1:i.clone(),controlPoint2:n.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}},Sd.identifier="linear-focus",Sd.prototype.availableOptions={controlPoint1:{type:"vector2",default:new wd(0,.5)},controlPoint2:{type:"vector2",default:new wd(1,.5)},blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:!1}},Ht.Operations.LinearFocusOperation=Sd,NI=Sd}),jI,KU=F(()=>{jI=`/*
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 * @license
 */

uniform sampler2D u_image;
uniform float u_blurRadius;
uniform float u_gradientSize;
uniform float u_size;
uniform vec2 u_start;
uniform vec2 u_end;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(gl_FragCoord.xy / u_texSize.xy);

    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));
    float radius = smoothstep(0.0, 1.0,
      (abs(
        dot(v_texCoord * u_texSize - u_start, normal)
      ) - u_size) / u_gradientSize
    ) * u_blurRadius;

    for (float t = -30.0; t <= 30.0; t++) {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

        color += _sample * weight;
        total += weight;
    }

    gl_FragColor = color / total;
}
`}),Oo,Gb,ug,ZU=F(()=>{ue(),gd(),KU(),{Vector2:Oo}=ot,Gb=class extends _e.Filter{constructor(...e){super(...e),this._fragmentSource=jI,this._lastBlurRadius=null,this._lastGradientRadius=null,this._lastStart=new Oo,this._lastEnd=new Oo,this._blurFilter=new Ro,this._blurredRenderTarget=new _e.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new _e.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,r,i=!1){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,r,i);return}const n=t.getDimensions(),o=!r.getDimensions().equals(n);if(t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o){const a=new Oo(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(a);const l={blurRadius:this._options.blurRadius,texSize:n},c=(b,w,S)=>Math.min(Math.max(b,w),S),h=(b,w,S)=>{const C=c((S-b)/(w-b),0,1);return C*C*(3-2*C)},{blurRadius:f,gradientSize:d,size:p,start:v,end:g,texSize:m}=this._options,y=new Oo(v.y-g.y,g.x-v.x);y.divide(y.len());const _=(b,w)=>h(0,1,(Math.abs(m.clone().multiply(b,w).subtract(v).dot(y))-p)/d)*f;this._blurFilter.set(l),this._blurFilter._applyCanvas(e,t,r,i,_),this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(e,t,r,i=!1){const n=t.getDimensions(),o=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());const s=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||o,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;s&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),a&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,r)}_renderMask(){const e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),r=this._maskRenderTarget.getPixelRatio(),i=new Oo(e.width,e.height),n=this._options.size*i.min()*r,o=this._options.gradientSize*i.min()*r,s=this._options.start.clone().multiply(i),l=this._options.end.clone().multiply(i).clone().subtract(s),c=s.clone().add(l.clone().divide(2)),h=l.len(),f=l.clone().divide(h),d=c.clone().add((n+o)*f.y,-(n+o)*f.x),p=c.clone().add(-(n+o)*f.y,(n+o)*f.x),v=t.createLinearGradient(d.x,d.y,p.x,p.y),g=p.clone().subtract(d).len();v.addColorStop(0,"#000000"),v.addColorStop(o/2/g,"#FFFFFF"),v.addColorStop(1-o/2/g,"#FFFFFF"),v.addColorStop(1,"#000000"),t.fillStyle=v,t.fillRect(0,0,e.width,e.height)}_applyMask(e,t){const r=t.getContext(),i=e.getCanvas(),n=e.getContext(),o=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=n.getImageData(0,0,i.width,i.height),l=a.data,c=o.getImageData(0,0,i.width,i.height).data,h=s.getImageData(0,0,i.width,i.height).data;let f;for(let d=0;d<i.width*i.height*4;d+=4)f=h[d]/255,l[d]=f*l[d]+(1-f)*c[d],l[d+1]=f*l[d+1]+(1-f)*c[d+1],l[d+2]=f*l[d+2]+(1-f)*c[d+2];r.putImageData(a,0,0)}dispose(){super.dispose(),this._blurFilter.dispose()}},Gb.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},size:{type:"number",default:50,uniformType:"f"},gradientSize:{type:"number",default:50,uniformType:"f"},start:{type:"vector2",default:new Oo(0,.5),uniformType:"2f"},end:{type:"vector2",default:new Oo(1,.5),uniformType:"2f"},delta:{type:"vector2",default:new Oo(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new Oo(100,100),uniformType:"2f"}},ug=Gb}),Cd,kd,HI,JU=F(()=>{ue(),ZU(),{Vector2:Cd}=ot,kd=class extends Gr{constructor(...e){super(...e),this._lastBlurRadius=this._options.blurRadius,this._lastSize=this._options.size,this._lastGradientSize=this._options.gradientSize;const t={blurQuality:{type:"string"}};this._horizontalFilter=new ug({},t),this._verticalFilter=new ug({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new Cd(.5,.5)),this._verticalFilter.setDelta(new Cd(-.5,.5)),this._filter=new ug({},t),this._renderBlur.bind(this)}rotate(e){const{start:t}=this._options,{end:r}=this._options;e===90?(t.flip(),t.x=1-t.x,r.flip(),r.x=1-r.x):e===-90&&(t.flip(),t.y=1-t.y,r.flip(),r.y=1-r.y),this.set({start:t,end:r})}flip(e){const{start:t}=this._options,{end:r}=this._options;switch(e){case"horizontal":t.x=1-t.x,r.x=1-r.x;break;case"vertical":t.y=1-t.y,r.y=1-r.y;break}this.set({start:t,end:r})}transform(e){const t={};["start","end"].forEach(r=>{const i=this.getOption(r);t[r]=e.applyToRelativePoint(i)}),["blurRadius","size","gradientSize"].forEach(r=>{const i=this.getOption(r);t[r]=e.applyToRelativeSize(i)}),this.set(t,!1)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions(),r=t.min(),i=this._options.start.clone(),n=this._options.end.clone(),{blurRadius:o,size:s,gradientSize:a}=this._options,l={blurRadius:o*r,size:s*r,gradientSize:a*r,start:i.clone().multiply(t),end:n.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){const t=e.getDimensions(),{blurRadius:r,size:i,gradientSize:n,start:o,end:s}=this._options;return this._filter.set({blurRadius:r,gradientSize:n,size:i,start:o.clone(),end:s.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}},kd.identifier="mirrored-focus",kd.prototype.availableOptions={start:{type:"vector2",default:new Cd(0,.5)},end:{type:"vector2",default:new Cd(1,.5)},blurRadius:{type:"number",default:.025},size:{type:"number",default:.1},gradientSize:{type:"number",default:.1},highQualityCanvasBlur:{type:"boolean",default:!1}},Ht.Operations.MirroredFocusOperation=kd,HI=kd}),WI,Td,VI,eN=F(()=>{ue(),{Vector2:WI}=ot,Td=class extends Gr{_render(e){const t=this._options.rotation%360,r=t*(Math.PI/180),i=t===90||t===270,n=this._options.flipHorizontally!==this._options.flipVertically,o=i&&n?!this._options.flipVertically:this._options.flipVertically,s=i&&n?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(s?-1:1,o?-1:1),this._sprite.setRotation(r),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();const a=this._sprite.getBounds();return this._renderTexture.resizeTo(new WI(a.width,a.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(e){return e=e.clone(),this._options.rotation%180&&e.flip(),e}flip(e){const{rotation:t}=this._options;switch((t===90||t===270)&&(e==="vertical"?e="horizontal":e="vertical"),e){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally());break}}},Td.identifier="orientation",Td.prototype.availableOptions={rotation:{type:"number",default:0,validation(e){if(e%90!==0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:e=>(e+360)%360},flipVertically:{type:"boolean",default:!1},flipHorizontally:{type:"boolean",default:!1}},Ht.Operations.OrientationOperation=Td,VI=Td}),Ed,Dd,GI,tN=F(()=>{ue(),{Vector2:Ed}=ot,Dd=class extends Gr{constructor(...e){super(...e),this._flipContainer=new _e.Container}_render(e){const{position:t,rotation:r,scale:i,pivot:n,outputResolution:o}=this._options,s=this._sdk.getTextureScale(),a=o.clone().multiply(s).ceil();return this._renderTexture.resizeTo(a),this._sprite.setRotation(r),this._sprite.setPosition(t),this._sprite.setPivot(n),this._sprite.setScale(i),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(e){const t=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(t).ceil()}},Dd.identifier="output",Dd.prototype.availableOptions={position:{type:"vector2",default:new Ed(0,0)},rotation:{type:"number",default:0},scale:{type:"vector2",default:new Ed(1,1)},pivot:{type:"vector2",default:new Ed(0,0)},outputResolution:{type:"vector2",default:new Ed(100,100)}},Ht.Operations.OutputOperation=Dd,GI=Dd}),Id,qb,qI,tu,XI,rN=F(()=>{ue(),{OverlayFilter:Id}=_e.Filters,{Vector2:qb}=ot,qI=4,tu=class extends Gr{constructor(...e){super(...e),this._overlayTexture=_e.Texture.fromImage(this._options.image),this._overlayContainer=new _e.Container,this._overlaySprite=new _e.Sprite,this._overlaySprite.setTexture(this._overlayTexture),this._overlaySprite.setAnchor(0,0),this._overlayContainer.addChild(this._overlaySprite),this._overlayFilter=new _e.Filters.OverlayFilter({overlayImage:this._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayTexture}),this._sprite.setFilters([this._overlayFilter]),this._renderedOverlaySprite=new _e.Sprite,this._renderedOverlayContainer=new _e.Container,this._renderedOverlayContainer.addChild(this._renderedOverlaySprite),this._overlayRendered=!1,this._lastInputDimensions=new qb(0,0)}setOption(e,t){if(super.setOption(e,t),e==="image"&&t&&this._sdk){const r=this._sdk.getRenderer(),i=this._overlayTexture.getBaseTexture();i.setSource(t),r.isOfType("webgl")&&r.updateTexture(i),this._overlayRendered=!1}}_render(e){const t=e.getDimensions(),{image:r,alpha:i,blendMode:n}=this._options;return r?((!this._overlayRendered||!this._lastInputDimensions.equals(t))&&(this._renderOverlayToRenderTexture(e),this._overlayRendered=!0,this._lastInputDimensions.copy(t)),this._overlayFilter.set({blendMode:n,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:i}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),Promise.resolve()):(this._sprite.setFilters([]),this._renderTexture.render(this._container),Promise.resolve())}_renderOverlayToRenderTexture(e){const t=this._sdk.getRenderer(),r=e.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new _e.RenderTexture(t,r.x,r.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));const{width:i,height:n}=this._options.image,o=Ce.resizeVectorToFill(new qb(i,n),r),{flipHorizontally:s,flipVertically:a}=this._options,l=s?-1:1,c=a?-1:1;this._overlaySprite.setWidth(o.x*l),this._overlaySprite.setHeight(o.y*c),this._overlaySprite.setPosition(r.x*(1-l)*.5,r.y*(1-c)*.5);const h=this._overlayRenderTexture.getBaseTexture();this._overlayRenderTexture.resizeTo(r),t.isOfType("webgl")&&(h.setGLUnit(qI),t.updateTexture(h,!1)),this._overlayRenderTexture.render(this._overlayContainer)}dispose(){super.dispose(),this._overlaySprite&&this._overlaySprite.dispose(),this._overlayRenderTexture&&this._renderedOverlaySprite.dispose(),this._overlayFilter&&this._overlayFilter.dispose(),this._overlayTexture&&this._overlayTexture.dispose(),this._overlayRenderTexture&&this._overlayRenderTexture.dispose(),this._renderedOverlaySprite&&this._renderedOverlaySprite.dispose()}},tu.identifier="overlay",tu.BLEND_MODES=Id.BLEND_MODES,tu.prototype.availableOptions={identifier:{type:"string"},image:{type:"image"},blendMode:{type:"number",default:Id.BLEND_MODES.MULTIPLY,available:Object.keys(Id.BLEND_MODES).map(e=>Id.BLEND_MODES[e])},alpha:{type:"number",default:1},flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1}},Ht.Operations.OverlayOperation=tu,XI=tu}),YI,iN=F(()=>{YI=`/*
 * Based on evanw's glfx.js tilt shift shader:
 * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
 * @license
 */

uniform sampler2D u_image;
uniform float u_radius;
uniform float u_blurRadius;
uniform float u_gradientRadius;
uniform vec2 u_position;
uniform vec2 u_delta;
uniform vec2 u_texSize;
varying vec2 v_texCoord;

const float blurSteps = 30.0;
const float EPSILON = 0.000000001;

float random(vec2 co)
{
    highp float a = 12.9898;
    highp float b = 78.233;
    highp float c = 43758.5453;
    highp float dt = dot(co.xy,vec2(a,b));
    highp float sn = mod(dt, 3.14);
    return fract(sin(sn) * c);
}

void main() {
    vec4 color = vec4(0.0);
    float total = 0.0;

    vec2 coord = v_texCoord * u_texSize;
    vec2 diff = coord - u_position;
    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);

    float blurPercentage = smoothstep( 
      0.0, 1.0,
      (abs(dist) - u_radius) / u_gradientRadius
    );

    float radius = blurPercentage * u_blurRadius;
    float offset = random(gl_FragCoord.xy / u_texSize.xy);

    for (float t = -blurSteps; t <= blurSteps; t++) {
        float percent = (t + offset - 0.5) / blurSteps;
        float weight = 1.0 - abs(percent);
        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);

        color += _sample * weight;
        total += weight;
    }

    gl_FragColor = color / max(total, EPSILON);
}
`}),Ol,Xb,hg,nN=F(()=>{ue(),gd(),iN(),{Vector2:Ol}=ot,Xb=class extends _e.Filter{constructor(...e){super(...e),this._fragmentSource=YI,this._lastBlurRadius=null,this._lastGradientRadius=null,this._lastPosition=new Ol,this._blurFilter=new Ro,this._blurredRenderTarget=new _e.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new _e.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,r,i=!1){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,r,i);return}const n=t.getDimensions(),o=!r.getDimensions().equals(n),{blurRadius:s,position:a,texSize:l,gradientRadius:c}=this._options;if(t.getBaseTexture().isDirty()||this._lastBlurRadius!==s||o){const f=new Ol(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(f);const d={blurRadius:s,texSize:n},p=(m,y,_)=>Math.min(Math.max(m,y),_),v=(m,y,_)=>{const b=p((_-m)/(y-m),0,1);return b*b*(3-2*b)},g=(m,y)=>v(0,1,(Math.abs(l.clone().multiply(m,y).subtract(a).len())-this._options.radius)/(c*2))*s;this._blurFilter.set(d),this._blurFilter._applyCanvas(e,t,r,i,g),this._lastBlurRadius=s}}_renderLQBlur(e,t,r,i=!1){const n=t.getDimensions(),o=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());const s=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||o,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;s&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),a&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,r)}_renderMask(){const e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),r=new Ol(e.width,e.height),i=this._maskRenderTarget.getPixelRatio(),n=this._options.position.clone().multiply(r);let{radius:o,gradientRadius:s}=this._options;o*=e.height,s*=e.height;const a=t.createRadialGradient(n.x,n.y,0,n.x,n.y,(o+s)*i);a.addColorStop(0,"#FFFFFF"),a.addColorStop(o/(o+s),"#FFFFFF"),a.addColorStop(1,"#000000"),t.fillStyle=a,t.fillRect(0,0,r.x,r.y)}_applyMask(e,t){const r=t.getContext(),i=e.getCanvas(),n=e.getContext(),o=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=n.getImageData(0,0,i.width,i.height),l=a.data,c=o.getImageData(0,0,i.width,i.height).data,h=s.getImageData(0,0,i.width,i.height).data;let f;for(let d=0;d<i.width*i.height*4;d+=4)f=h[d]/255,l[d]=f*l[d]+(1-f)*c[d],l[d+1]=f*l[d+1]+(1-f)*c[d+1],l[d+2]=f*l[d+2]+(1-f)*c[d+2];r.putImageData(a,0,0)}dispose(){super.dispose(),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}},Xb.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},radius:{type:"number",default:50,uniformType:"f"},gradientRadius:{type:"number",default:25,uniformType:"f"},position:{type:"vector2",default:new Ol(.5,.5),uniformType:"2f"},delta:{type:"vector2",default:new Ol(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new Ol(100,100),uniformType:"2f"}},hg=Xb}),dg,Rd,QI,oN=F(()=>{ue(),nN(),{Vector2:dg}=ot,Rd=class extends Gr{constructor(...e){super(...e),this._lastBlurRadius=this._options.blurRadius,this._lastGradientRadius=this._options.gradientRadius;const t={blurQuality:{type:"string"}};this._horizontalFilter=new hg({},t),this._verticalFilter=new hg({},t),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new dg(.5,.5)),this._verticalFilter.setDelta(new dg(-.5,.5)),this._filter=new hg({},t)}rotate(e){const{position:t}=this._options;e===90?(t.flip(),t.x=1-t.x):e===-90&&(t.flip(),t.y=1-t.y),this.set({position:t})}flip(e){const{position:t}=this._options;switch(e){case"horizontal":t.x=1-t.x;break;case"vertical":t.y=1-t.y;break}this.set({position:t})}transform(e){const t={},r=this.getPosition();t.position=e.applyToRelativePoint(r),["radius","blurRadius","gradientRadius"].forEach(i=>{const n=this.getOption(i);t[i]=e.applyToRelativeSize(n)}),this.set(t,!1)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions(),r=t.min(),{position:i,blurRadius:n,radius:o,gradientRadius:s}=this._options,a={blurRadius:n*r,radius:o*r,gradientRadius:s*r,position:i.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(e){const{blurRadius:t,radius:r,gradientRadius:i,position:n}=this._options,o=e.getDimensions();return this._filter.set({blurRadius:t,radius:r,gradientRadius:i,position:n,texSize:o,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}},Rd.identifier="radial-focus",Rd.prototype.availableOptions={position:{type:"vector2",default:new dg(.5,.5)},radius:{type:"number",default:.25},gradientRadius:{type:"number",default:.125},blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:!1}},Ht.Operations.RadialFocusOperation=Rd,QI=Rd}),KI,sN=F(()=>{KI=`varying vec2 v_texCoord;
uniform sampler2D u_image;
uniform sampler2D u_filterImage;
uniform sampler2D u_maskImage;

void main() {
  vec4 color0 = texture2D(u_image, v_texCoord);
  vec4 color1 = texture2D(u_filterImage, v_texCoord);
  vec4 mask = texture2D(u_maskImage, v_texCoord);
  gl_FragColor = mix(color0, color1, mask);
}
`}),Yb,ZI,aN=F(()=>{ue(),sN(),Yb=class extends _e.Filter{constructor(){super(),this._fragmentSource=KI}_applyCanvas(e,t,r,i=!1){const n=t.getCanvas(),o=t.getContext(),s=r.getContext(),{maskCanvas:a,filterCanvas:l}=this._options,c=a.getContext("2d"),h=l.getContext("2d"),f=c.getImageData(0,0,n.width,n.height).data,d=o.getImageData(0,0,n.width,n.height),p=d.data,v=h.getImageData(0,0,n.width,n.height).data;let g;for(let m=0;m<n.width*n.height*4;m+=4)g=f[m]/255,p[m]=g*v[m]+(1-g)*p[m],p[m+1]=g*v[m+1]+(1-g)*p[m+1],p[m+2]=g*v[m+2]+(1-g)*p[m+2];s.putImageData(d,0,0)}},Yb.prototype.availableOptions={maskImage:{type:"number",default:1,uniformType:"i"},maskCanvas:{type:"object",default:null},filterImage:{type:"number",default:2,uniformType:"i"},filterCanvas:{type:"object",default:null}},ZI=Yb}),Fd,JI,ru,Od=F(()=>{ue(),{Vector2:Fd}=ot,JI=class extends rr{constructor(e,t){super(t),this._isDisposed=!1,this._operation=e,this._dirtiness={},this.id=Ce.getUUID(),this._renderTextures={},this._identitySprite=new _e.Sprite,this._sprite=new _e.Sprite,this._hitTestSprite=new _e.Sprite,this._renderers=[]}applyScale(e){}applyRotation(e){const t=this._operation.getInputDimensions();let r=this.getRotation()*180/Math.PI;r+=e,this.setRotation(r*Math.PI/180);const n=(e+360)%360*Math.PI/180,o=Math.cos(n),s=Math.sin(n),a=this._options.position.clone().subtract(.5).multiply(t),l=new Fd(a.x*o-a.y*s,a.x*s+a.y*o).divide(t.clone().flip());this.setPosition(new Fd(.5,.5).add(l))}applyFlip(e){const t=this.getPosition().clone();switch(e){case"horizontal":t.x=1-this._options.position.x;break;case"vertical":t.y=1-this._options.position.y;break}this.setPosition(t)}applyTransform(e){const t={};t.rotation=e.applyToRotation(this.getRotation()),t.position=e.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(t.dimensions=e.applyToDimensions(this.getDimensions())),this.set(t,!1)}getDisplayObject(){return this._sprite}getHitTestDisplayObject(){return this._sprite}_getTexture(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}_prepareRenderTexture(e){if(this._renderTexture)this._renderTexture.clear();else{const t=this._getTexture();this._renderTextureContainer=new _e.Container,this._renderTextureSprite=new _e.Sprite(t),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(e.getRenderer(),t.getDimensions())}}_rendersToRenderTexture(e){return e.getOptions().smoothDownscaling&&e.getRenderer().isOfType("webgl")}_optionEquals(e,t){return e==="type"?!0:super._optionEquals(e,t)}update(e,t){this._isDisposed||(this._rendersToRenderTexture(e)&&(this._prepareRenderTexture(e),this._renderToRenderTexture(e)),this._updateSprite(t))}_updateSprite(e){[this._sprite,this._hitTestSprite].forEach(r=>{if(!r.getTexture())return;r.setAnchor(this._options.anchor),r.setPosition(this._options.position.clone().multiply(e)),typeof this._options.alpha!="undefined"&&r.setAlpha(this._options.alpha);let{dimensions:i}=this._options;i&&(i=i.clone().multiply(this._operation.getSDK().getTextureScale()),r.setWidth(i.x),r.setHeight(i.y)),r.updateTransform();const n=r.getTexture().getFrame(),o=new Fd(n.width,n.height);r.setPivot(this._options.pivot.clone().multiply(o)),r.setRotation(this._options.rotation),r.updateTransform()})}_renderToRenderTexture(e){const t=this._getTexture().getDimensions(),r=this._getRenderTexture(e.getRenderer(),t),i=t.clone();if(this._options.smoothDownscaling&&(i.x=Ce.nextHighestPOT(i.x),i.y=Ce.nextHighestPOT(i.y)),this._renderTexture.resizeTo(i),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){const n=i.clone().subtract(t.x,t.y).divide(i),o=r.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-n.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-n.y}this._sprite.setTexture(r)}isDirtyForRenderer(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}setDirtyForRenderer(e,t){this._renderers[t.id]=t,this._dirtiness[t.id]=e}setDirty(e){for(const t in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[t])}_getRenderTexture(e,t=new Fd(100,100)){return this._renderTextures[e.id]||(this._renderTextures[e.id]=new _e.RenderTexture(e,t.x,t.y,1)),this._renderTextures[e.id]}dispose(){this._isDisposed=!0;for(const e in this._renderTextures)this._renderTextures[e].dispose()}canBeDuplicated(){return!0}canBeDeleted(){return!0}canMaskCanvas(){return!1}canAdjustPadding(){return!1}canBeTakenToFront(){return!0}canBeFlippedHorizontally(){return!0}},ru=JI}),e3,Md,t3=F(()=>{ue(),{Vector2:e3}=ot,Md=class extends rr{constructor(...e){super(...e),this._lastOptions={},this._lastInputDimensions=new e3(0,0),this._brush=null}getBrushImage(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;const{image:t,size:r}=this._options;t.width=t.height=Math.ceil(r*e.min());const i=Ce.createCanvas();i.width=t.width,i.height=t.height;const n=i.getContext("2d");n.drawImage(t,0,0,i.width,i.height);const o=this._tintImageData(n.getImageData(0,0,i.width,i.height),i.width,i.height);return n.putImageData(o,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=i,this._lastInputDimensions=e.clone(),i}_tintImageData(e){const{color:t}=this._options;for(let r=0;r<e.data.length;r+=4)e.data[r]+=(t.r*255-e.data[r])*t.a,e.data[r+1]+=(t.g*255-e.data[r+1])*t.a,e.data[r+2]+=(t.b*255-e.data[r+2])*t.a;return e}clone(){const e=this.constructor;return new e(this._options)}},Md.prototype.availableOptions={identifier:{type:"string"},image:{type:"image"},size:{type:"number",default:.05},color:{type:"color",default:Pe.RED}}}),Pd,lN=F(()=>{ue(),t3(),Pd=class extends Md{getBrushImage(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;let{size:t,hardness:r,color:i}=this._options;const n=Ce.createCanvas();n.width=n.height=Math.ceil(t*e.min());const o=n.getContext("2d");if(i=i.clone(),i.a=1,n.width===1)o.fillStyle=i.toRGBA(),o.fillRect(0,0,1,1);else{const s=o.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*r),n.width/2,n.height/2,n.width/2);s.addColorStop(0,i.toRGBA());const a=i.clone();a.a=0,s.addColorStop(1,a.toRGBA()),o.fillStyle=s,o.fillRect(0,0,n.width,n.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=n,this._lastInputDimensions=e.clone(),n}},Pd.identifier="imgly_brush_radial",Pd.prototype.availableOptions=ge(L({},Md.prototype.availableOptions),{hardness:{type:"number",default:1}})}),r3,i3,n3,o3,cN=F(()=>{ue(),{Vector2:r3,CubicBezierCurve:i3}=ot,n3=class{constructor(e,t,r=3){this._path=e,this._drawnCanvases=[],this._position=t,this._smooth=r}getBezierCurve(e,t,r,i){if(!t)return null;let n,o;i?(n=(i.x-t.x)/this._smooth,o=(i.y-t.y)/this._smooth):(n=(r.x-t.x)/this._smooth,o=(r.y-t.y)/this._smooth);let s,a;e?(s=(r.x-e.x)/this._smooth,a=(r.y-e.y)/this._smooth):(s=(r.x-t.x)/this._smooth,a=(r.y-t.y)/this._smooth);const l=t.clone().add(s,a),c=r.clone().subtract(n,o);return new i3(t,l,c,r)}renderToCanvas(e,t,r,i,n,o=1){if(this._drawnCanvases.indexOf(t)!==-1)return;const s=new r3(t.width,t.height),a=t.getContext("2d"),l=this._position.clone().multiply(s),c=i?i.getPosition().clone().multiply(s):null,h=r?r.getPosition().clone().multiply(s):null,f=n?n.getPosition().clone().multiply(s):null;l.clone().subtract(c).len();const d=e.width/10,p=this.getBezierCurve(h,c,l,f);let v;if(!p)v=[l];else{p.calculateSegments(20);const g=p.getLength();v=p.arcLengthApproxSample(Math.ceil(g/d))}for(let g=0;g<v.length;g++){const m=v[g];let y=e.width*.5/(d*2);y*=1-o,y=1/(1+y),a.globalAlpha=y,a.drawImage(e,m.x-e.width/2,m.y-e.height/2,e.width,e.height)}a.globalAlpha=1,this._drawnCanvases.push(t)}setPosition(e){this._position=e}getPosition(){return this._position.clone()}setDirty(){this._drawnCanvases=[]}},o3=n3}),Qb,Ad,uN=F(()=>{ue(),cN(),Qb=class extends rr{constructor(e,t,r){super(t),this._operation=e,this._canvas=r||Ce.createCanvas(),this._context=this._canvas.getContext("2d")}serializeOption(e,t=!1){return e==="controlPoints"?this._options.controlPoints.map(r=>{const i=r.getPosition();return t?i.toObject():i.clone()}):super.serializeOption(e,t)}_optionEquals(e,t){if(e==="controlPoints"){const{controlPoints:r}=this._options;for(let i=0,n=r.length;i<n;i++)if(!r[i].getPosition().equals(t[i]))return!1;return!0}return super._optionEquals(e,t)}render(e){const{controlPoints:t,size:r}=this._options;if(t.length<2)return;const i=this.getBrush(),n=i&&i.getHardness?i.getHardness():1;Ce.ensureCanvasDimensions(this._canvas,e),(!this._brush||this._lastBrushSize!==r||!e.equals(this._brushInputDimensions))&&(this._brushInputDimensions=e.clone(),this._lastBrushSize=r);let o,s,a,l;for(let c=0;c<t.length;c++)o=t[c-2],s=t[c-1],a=t[c],l=t[c+1],a.renderToCanvas(this._options.brush.getBrushImage(e),this._canvas,o,s,l,n)}_createBrush(e){let{size:t,hardness:r,color:i}=this._options;const n=Ce.createCanvas();n.width=n.height=Math.ceil(t*e.min());const o=n.getContext("2d");if(i=i.clone(),i.a=1,n.width===1)o.fillStyle=i.toRGBA(),o.fillRect(0,0,1,1);else{const s=o.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*r),n.width/2,n.height/2,n.width/2);s.addColorStop(0,i.toRGBA());const a=i.clone();a.a=0,s.addColorStop(1,a.toRGBA()),o.fillStyle=s,o.fillRect(0,0,n.width,n.height)}return n}addControlPoint(e){const t=new o3(this,e);this._options.controlPoints.push(t),this.emit("update",this)}getCanvas(){return this._canvas}setCanvas(e){this._canvas=e,this._context=e.getContext("2d")}setDirty(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(e=>{e.setDirty()})}forEachControlPoint(e){this._options.controlPoints.forEach(e)}renderToCanvas(e){const t=e.getContext("2d");t.save(),t.globalAlpha=this._options.brush.getColor().a,t.drawImage(this._canvas,0,0),t.restore()}getCanvasDimensions(){return this._canvasDimensions}},Qb.prototype.availableOptions={id:{type:"string",default:()=>Ce.getUUID()},brush:{type:"object",required:!0},controlPoints:{type:"array",default:[]},closed:{type:"boolean",default:!1}},Ad=Qb}),zd,Ml,iu,s3=F(()=>{ue(),Od(),t3(),lN(),uN(),{Vector2:zd}=ot,Ml=class extends ru{constructor(...e){super(...e),this._persistedPaths=[],this._outputCanvasDirty=!0,this._outputCanvas=Ce.createCanvas(),this._outputContext=this._outputCanvas.getContext("2d"),this._persistCanvas=Ce.createCanvas(),this._persistContext=this._persistCanvas.getContext("2d"),this._nextCanvas=Ce.createCanvas(),this._texture=_e.Texture.fromCanvas(this._outputCanvas),this._sprite.setTexture(this._texture),this._onPathUpdate=this._onPathUpdate.bind(this)}applyFlip(e){this._options.paths.forEach(t=>{t.forEachControlPoint(r=>{const i=r.getPosition().clone();switch(e){case"horizontal":i.x=1-i.x;break;case"vertical":i.y=1-i.y;break}r.setPosition(i)}),t.setDirty(!0)}),this._reset()}applyRotation(e){this._options.paths.forEach(t=>{t.forEachControlPoint(r=>{const i=r.getPosition().clone();e===90?(i.flip(),i.x=1-i.x):e===-90&&(i.flip(),i.y=1-i.y),r.setPosition(i)}),t.setDirty(!0)}),this._reset()}applyTransform(e){let t=null;this._options.paths.forEach(r=>{r.forEachControlPoint(n=>{n.setPosition(e.applyToRelativePoint(n.getPosition()))});const i=r.getBrush();i!==t&&(i.setSize(e.applyToRelativeSize(i.getSize())),t=i),r.setDirty(!0)}),this._reset()}clearCanvas(){if(!this._outputCanvas)return;this._outputCanvasDirty=!0;const{width:e,height:t}=this._outputCanvas;this._outputContext.clearRect(0,0,e,t)}clearPersistCanvas(){if(!this._persistCanvas)return;const{width:e,height:t}=this._persistCanvas;this._persistContext.clearRect(0,0,e,t)}serializeOptions(e,t=!1){const r=super.serializeOptions(e,t);return e||(r.type="brush"),r}serializeOption(e,t=!1){return e==="paths"?this._options.paths.map(r=>r.serializeOptions(void 0,t)):super.serializeOption(e,t)}createPath(e){const t=new Ad(this._operation,{brush:e},this._nextCanvas);return t.on("update",this._onPathUpdate),this._options.paths.push(t),this.setDirty(!0),t}_onPathUpdate(){this._operation.setDirty(!0),this.setDirty(!0)}_onPathPersist(e){e.renderToCanvas(this._persistCanvas),this._nextCanvas=e.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(e)}_getTexture(){return this._texture}setDirtyForRenderer(e,t,r=!1){super.setDirtyForRenderer(e,t,r),e&&r&&(this._persistedPaths=[],this.clearPersistCanvas(),this._options.paths.forEach(i=>{i.setDirty(!0)}))}setDirty(e,t=!1){for(const r in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[r],t)}render(e){const t=this._operation.getSDK().getRenderer();!this.isDirtyForRenderer(t)||(Ce.ensureCanvasDimensions(this._outputCanvas,e),Ce.ensureCanvasDimensions(this._persistCanvas,e),this._options.paths.forEach(r=>{r.render(e),r.getClosed()&&this._persistedPaths.indexOf(r)===-1&&this._onPathPersist(r)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(r=>{r.getClosed()||r.renderToCanvas(this._outputCanvas)}),this.setDirtyForRenderer(!1,t))}update(e,t){t&&(Ce.ensureCanvasDimensions(this._outputCanvas,t),Ce.ensureCanvasDimensions(this._persistCanvas,t),this._texture.getBaseTexture().update()),this.render(t);const r=e.getRenderer();r.isOfType("webgl")&&r.updateTexture(this._texture.getBaseTexture()),super.update(e,t)}_reset(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}getCanvas(){return this._outputCanvas}_createRadialBrush(){return new Pd}_getTempCanvas(){return this._nextCanvas}dispose(){super.dispose(),this._texture&&this._texture.getBaseTexture().dispose()}},Ml.prototype.availableOptions={id:{type:"string",default:()=>Ce.getUUID()},position:{type:"vector2",default:new zd(0,0)},scale:{type:"vector2",default:new zd(1,1)},anchor:{type:"vector2",default:new zd(0,0)},pivot:{type:"vector2",default:new zd(0,0)},rotation:{type:"number",default:0},paths:{type:"array",default:[],setter(e){return e=e.map(t=>{if(t instanceof Ad)return t;const{brush:r,closed:i}=t,n=new Ad(this._operation,{brush:r,closed:i},this._nextCanvas);return t.controlPoints.forEach(o=>{n.addControlPoint(o)}),n}),this._reset(),e}}},Ml.type="brush",Ml.Brush=Md,Ml.Path=Ad,Ml.Brushes={RadialBrush:Pd},iu=Ml}),Kb,$d,a3,hN=F(()=>{ue(),gd(),aN(),s3(),{Vector2:Kb}=ot,$d=class extends Gr{constructor(...e){super(...e);const t=this._sdk.getRenderer();this._lastBlurRadius=null,this._blurredRenderTexture=new _e.RenderTexture(t,100,100,1),this._maskRenderTexture=new _e.RenderTexture(t,100,100,1),this._brushSprite=new iu(this),this._brushSpriteContainer=new _e.Container;const r=this._brushSprite.getDisplayObject();if(this._brushSpriteContainer.addChild(r),this._outputSprite=new _e.Sprite,this._outputContainer=new _e.Container,this._outputContainer.addChild(this._outputSprite),this._maskFilter=new ZI,t.isOfType("webgl")){this._horizontalFilter=new Ro,this._verticalFilter=new Ro,this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new Kb(1,1)),this._verticalFilter.setDelta(new Kb(-1,1));let i=this._maskRenderTexture.getBaseTexture();i.setGLUnit(this._maskFilter.getMaskImage()),t.updateTexture(i,!1),i=this._blurredRenderTexture.getBaseTexture(),i.setGLUnit(this._maskFilter.getFilterImage()),t.updateTexture(i,!1)}else t.isOfType("canvas")&&(this._blurFilter=new Ro,this._sprite.setFilters([this._blurFilter]),this._maskFilter.setMaskCanvas(this._maskRenderTexture.getRenderTarget().getCanvas()),this._maskFilter.setFilterCanvas(this._blurredRenderTexture.getRenderTarget().getCanvas()));this._outputSprite.setFilters([this._maskFilter])}flip(e){this._brushSprite.applyFlip(e),this.setDirty(!0,!0),this._lastBlurRadius=null}rotate(e){this._brushSprite.applyRotation(e),this.setDirty(!0,!0),this._lastBlurRadius=null}transform(e,t){this._brushSprite.applyTransform(e,t),this.setDirty(!0,!0),this._lastBlurRadius=null}_render(e){return this._renderBlur(e),this._renderMask(e),this._outputSprite.setTexture(e),this._renderTexture.render(this._outputContainer),Promise.resolve()}_renderMask(e){const t=e.getDimensions();this._maskRenderTexture.getDimensions().equals(t)||this._maskRenderTexture.resizeTo(t),this._brushSprite.update(this._sdk,t),this._maskRenderTexture.clear(Pe.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);const i=this._sdk.getRenderer();i.isOfType("webgl")&&i.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}_renderBlur(e){const t=e.getDimensions(),r=this._blurredRenderTexture.getDimensions();r.equals(t)||this._blurredRenderTexture.resizeTo(t);const{blurRadius:i}=this._options;if(this._lastBlurRadius!==i||!r.equals(t)){const o=this._sdk.getRenderer();let s;if(o.isOfType("webgl")){const a=t.min();s={blurRadius:i*a,texSize:t},this._horizontalFilter.set(s),this._verticalFilter.set(s)}else o.isOfType("canvas")&&(s={blurRadius:i},this._blurFilter.set(s));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=i}const n=this._sdk.getRenderer();n.isOfType("webgl")&&n.updateTexture(this._blurredRenderTexture.getBaseTexture(),!1)}getBrush(){return this._brushSprite}createPath(e,t=1){const r=new iu.Brushes.RadialBrush({size:e,hardness:t,color:Pe.WHITE}),i=this._brushSprite.createPath(r);return this._options.paths.push(i),this.setDirty(!0),i}setDirtyForRenderer(e,t,r){super.setDirtyForRenderer(e,t,r),this._brushSprite.setDirtyForRenderer(e,t,r)}dispose(){super.dispose(),this._sdk.getRenderer().isOfType("webgl")?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}hasChanges(){return!0}},$d.identifier="selective-blur",$d.prototype.availableOptions={blurRadius:{type:"number",default:.05},paths:{type:"array",default:[],setter(e){return this._brushSprite&&this._brushSprite.setPaths(e),e}}},Ht.Operations.SelectiveBlurOperation=$d,a3=$d}),ga,Bd,fg,pg,dN=F(()=>{ue(),d5(),Od(),{Vector2:ga,ColorMatrix:Bd}=ot,fg=class extends ru{constructor(...e){super(...e);const{image:t}=this._options,r=t.src||t.filePath||t.toDataUrl&&t.toDataURL();this._isSVG=r&&(!!r.match(/\w+\.svg(?=\?|$)/i)||r.match(/data:image\/svg/i)),this._isSVG&&(this._canvas=Ce.createCanvas(),this._context=this._canvas.getContext("2d"),this._options.smoothDownscaling=!1),t&&this._onImageUpdate(),this._tintFilter=new _e.Filters.TintFilter,this._adjustmentsFilter=new O1,this._lastRenderedDimensions=ga.NULL,this._lastRenderedInputDimensions=ga.NULL,this._onOptionsChange=this._onOptionsChange.bind(this),this._options.adjustments.on("update",this._onOptionsChange)}applyScale(e){this.setDimensions(this.getDimensions().multiply(e))}serializeOptions(e,t=!1){const r=super.serializeOptions(e,t);return e||(r.type="sticker"),r}_rendersToRenderTexture(e){return this._options.smoothDownscaling&&!this._isSVG&&e.getRenderer().isOfType("webgl")||this._hasAdjustments()||this._options.tintMode!=="none"}_getTexture(){return this._inputTexture}update(e,t){const{dimensions:r,image:i}=this._options;if(r.equals(ga.NULL)&&r.set(i.width,i.height),this._sprite.setSmoothDownscaling(this._isSVG?!1:this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(t)||!this._lastRenderedDimensions.equals(r)||this._lastRenderedImage!==i)&&this._isSVG&&e.getRenderer().isOfType("webgl")){i.width=Math.round(r.x),i.height=Math.round(r.y);const s=4096,a=i.width/i.height;i.width>s&&(i.width=s,i.height=Math.round(i.width/a)),i.height>s&&(i.height=s,i.width=Math.round(i.height*a)),this._canvas.width=i.width,this._canvas.height=i.height,this._context.clearRect(0,0,i.width,i.height),this._context.drawImage(i,0,0,i.width,i.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(e)&&this._prepareRenderTexture(e);const o=[];if(this._rendersToRenderTexture(e)){if(this._hasAdjustments()){o.push(this._adjustmentsFilter);const{adjustments:s}=this._options,a=new Bd;a.multiply(Bd.createBrightnessMatrix(s.getBrightness())),a.multiply(Bd.createSaturationMatrix(s.getSaturation())),a.multiply(Bd.createContrastMatrix(s.getContrast())),this._adjustmentsFilter.set({colorMatrix:a})}this._options.tintMode&&this._options.tintMode!=="none"&&(o.push(this._tintFilter),this._tintFilter.set({mode:_e.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor}),this._sprite.getTexture()&&this._sprite.getTexture()._baseTexture&&this._sprite.getTexture()._baseTexture.setDirty(!0)),this._renderTextureSprite.setFilters(o)}this._rendersToRenderTexture(e)?this._renderToRenderTexture(e):this._sprite.setTexture(this._inputTexture),this._updateSprite(t),this._applyFlip(),this._lastRenderedDimensions.copy(r),this._lastRenderedInputDimensions.copy(t),this._lastRenderedImage=i}_applyFlip(){const e=this._sprite.getScale(),{flipHorizontally:t,flipVertically:r}=this._options;(t&&e.x>0||!t&&e.x<0)&&(e.x*=-1),(r&&e.y>0||!r&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}applyFlip(e){super.applyFlip(e);const t={rotation:this._options.rotation},i=t.rotation/Math.PI*180*-1;switch(t.rotation=i*Math.PI/180,e){case"horizontal":t.flipHorizontally=!this._options.flipHorizontally,this.set(t);break;case"vertical":t.flipVertically=!this._options.flipVertically,this.set(t);break}}_hasAdjustments(){const{adjustments:e}=this._options;return e.getBrightness()!==0||e.getSaturation()!==1||e.getContrast()!==1}_onImageUpdate(){let e=this._options.image;const t=this._operation.getSDK().getRenderer();this._isSVG&&t.isOfType("webgl")&&(e=this._canvas),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._inputTexture=_e.Texture.fromImage(e),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}scalesUniformly(){return this._options.resizeMode==="keepAspect"}setOption(e,t,r=!0){super.setOption(e,t,r),e==="image"&&this._identitySprite&&this._onImageUpdate()}_onOptionsChange(){const e=this._dirtiness;for(const t in e)e[t]=!0}dispose(){super.dispose(),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._tintFilter.dispose(),this._adjustmentsFilter.dispose(),this._options.adjustments.off("updated",this._onOptionsChange)}},fg.prototype.availableOptions={id:{type:"string",default:()=>Ce.getUUID()},identifier:{type:"string",default:""},image:{type:"image",required:!0},position:{type:"vector2",default:ga.NULL},dimensions:{type:"vector2",default:ga.NULL},anchor:{type:"vector2",default:new ga(0,0)},pivot:{type:"vector2",default:new ga(.5,.5)},rotation:{type:"number",default:0},flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1},smoothDownscaling:{type:"boolean",default:!1},tintColor:{type:"color",default:Pe.WHITE},tintMode:{type:"string",default:"none",available:["none","solid","colorized"]},resizeMode:{type:"string",default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:"number",default:1},adjustments:{type:"configurable",structure:{brightness:{type:"number",default:0},saturation:{type:"number",default:1},contrast:{type:"number",default:1}}}},fg.type="sticker",pg=fg}),Mo,Yt,Bn=F(()=>{Mo=class{constructor(e){this._seed=e===void 0?Mo.TimeSeed():e}seed(e){this._seed=e===void 0?Mo.TimeSeed():e}next(){let e=this._seed|0;const t=e/Mo.SEED_DIVIDER|0,r=e%Mo.SEED_DIVIDER|0;return e=Mo.SEED_LOW_MULTIPLY*r-Mo.SEED_HIGH_MULTIPLY*t,e<=0&&(e+=Mo.MAX),e===-1&&(e=Mo.MAX-1),this._seed=e,e}nextInRange(e,t){return t===void 0&&(t=e,e=0),e+this.next()%(t-e+1)}nextBool(e=1,t=1){return this.nextInRange(e+t-1)>=e}static TimeSeed(){return Date.now()}pickNext(e){return Array.isArray(e)?e[this.next()%e.length]:null}},Yt=Mo,Ue(Yt,"MAX",2147483647),Ue(Yt,"SEED_DIVIDER",127773),Ue(Yt,"SEED_LOW_MULTIPLY",16807),Ue(Yt,"SEED_HIGH_MULTIPLY",2836)}),l3,Di,_s=F(()=>{ue(),{Rectangle:l3}=ot,Di=class{constructor(e=0,t=0){this.width=e,this.height=t}set(e,t){this.width=e,this.height=t}aspect(){return this.width/this.height}rectangle(e,t){return new l3(e,t,this.width,this.height)}clone(){return new Di(this.width,this.height)}scale(e,t){return t===void 0&&(t=e),this.width*=e,this.height*=t,this}copy(e){return this.width=e.width,this.height=e.height,this}fitInWidthWithOther(e,t=new Di){return this.copy(Di.fitTwoInWidth(e,this,t)[0]),this}static fitTwoInWidth(e,t,r){const i=t.width*r.height+t.height*r.width,n=r.height*e/i,o=t.width*n,s=t.height*n;return[new Di(o,s),new Di(e-o,s)]}}}),c3,Zb,Tr,io=F(()=>{ue(),c3=ni(Hh()),Zb=class extends rr{async loadImages(e){return(0,c3.default)(e,async t=>this.addImage(t.path,t.fullPath,t.image))}addImage(e,t,r,i="anonymous"){const n=this.getImages();return r?(n[e]={fullPath:t,image:r},Promise.resolve({fullPath:t,image:r})):new Promise((o,s)=>{r=new vs,r.onload=()=>{n[e]={fullPath:t,image:r},o({fullPath:t,image:r})},r.crossOrigin=Ce.getCrossOriginValue(i),r.onerror=s,r.src=t})}getImage(e){const r=this.getImages()[e];return r?r.image:null}getVariation(e){return this.getFonts()[e]}addFont(e,t){const r=this.getFonts();return r[e]=t,t}},Zb.prototype.availableOptions={images:{type:"object",default:{}},fonts:{type:"object",default:{}}},Tr=new Zb}),u3,h3,Jb,d3,f3,p3,m3,g3,Po,Ld=F(()=>{ue(),_s(),io(),u3=(e,t,r,i)=>{const n=r*(i*4)+t*4;return{r:e[n],g:e[n+1],b:e[n+2],a:e[n+3]}},h3=e=>e.a<=254,Jb=(e,t,r)=>{let i=!0;for(let n=0;n<r;n++){const o=u3(e,n,t,r);if(!h3(o)){i=!1;break}}return i},d3=(e,t,r,i,n=!1)=>{let o=0;for(let s=i+1;s<r;s++)if(!Jb(e,s,t))o=s-i+1;else if(n)break;return o},f3=(e,t,r,i,n=!1)=>{let o=0;for(let s=i-1;s>=0;s--)if(!Jb(e,s,t))o=i-s;else if(n)break;return o},p3=(e,t,r,i,n)=>{e.beginPath(),e.moveTo(t,r),e.lineTo(i,n),e.stroke()},m3=(e,t,r,i,n="red")=>{e.save(),e.strokeStyle=n,p3(e,r,t,i,t),e.restore()},g3=(e,t,r,i,n,o="blue")=>{e.save(),e.strokeStyle=o,e.strokeRect(t,r,i,n),e.restore()},Po=class extends rr{constructor(e){super(e);const t=Tr.getVariation(this.getFontIdentifier());t||Ke.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.set({fontVariation:t}),this._metrics=null,this._canvas=Ce.createCanvas(),this._context=this._canvas.getContext("2d"),this._isDirty=!0}_onOptionsChange(){this._isDirty=!0}setOption(e,t,r=!0,i=!1){super.setOption(e,t,r,i),e==="fontIdentifier"&&!i&&this.updateFontVariation()}updateFontVariation(){const e=Tr.getVariation(this.getFontIdentifier());return e||Ke.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.setFontVariation(e),e}setOptions(e={}){this._options=L(L({},this._options),e),this._isDirty=!0}_applyTextOptions(e=this._context,t={}){const{fontSize:r,fontVariation:i,lineHeight:n,textColor:o,alignment:s}=L(L({},this._options),t),{fontStyle:a,fontWeight:l,fontFamily:c}=i.serializeOptions();e.font=`${a} ${l} ${r}px / ${n} ${c}`,e.fillStyle=o,e.textBaseline="alphabetic",e.textAlign=s||"left"}getTextMetrics(){return(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),L({},this._metrics)}getSizeValue(){return(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),new Di(this._metrics.width,this._metrics.height)}fitWidth(e){if(!this.getFontVariation()){Ke.warn("TextDesignFont#fitText: missing font variation");return}this._applyTextOptions(this._context,{fontSize:50});const r=this._context.measureText(this.getText()).width,i=e/r,n=Math.floor(i*50);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}fitHeight(e){if(!this.getFontVariation()){Ke.warn("TextDesignFont#fitText: missing font variation");return}const r=this._calculateTextMetrics({fontSize:50}).height,i=e/r,n=Math.floor(i*50);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}_calculateTextMetrics(e={}){const t=this._canvas,r=this._context,i=L(L({},this._options),e),n=this.getText();this._applyTextOptions(r,i);const o=Math.ceil(r.measureText(n).width),s=Math.floor(o+i.fontSize*2),a=Math.floor(i.fontSize*3);t.width=s,t.height=a;const l=Math.floor(i.fontSize),c=Math.floor(a*(3/5));this._applyTextOptions(r,i),r.fillText(n,l,c);const h=r.getImageData(0,0,t.width,t.height).data,f=f3(h,s,a,c,this._options.excludeAccents),d=d3(h,s,a,c,this._options.excludeAccents),p=o,v=f+d;return this._metrics={width:p,height:v,ascender:f,descender:d},this._isDirty=!1,L({},this._metrics)}draw(e=this._context,t=0,r=0,i,n=!1){e.save(),(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),this._applyTextOptions(e,i),e.fillText(this.getText(),t,r+this._metrics.ascender),n&&(g3(e,t,r,this._metrics.width,this._metrics.height),m3(e,r+this._metrics.ascender,t,t+this._metrics.width)),e.restore()}},Po.prototype.availableOptions={text:{type:"string",default:""},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},fontVariation:{type:"object",default:null},lineHeight:{type:"number",default:1},fontSize:{type:"number",default:22},textColor:{type:"string",default:"black"},strokeStyle:{type:"string",default:"black"},outlineWidth:{type:"number",default:0},textBaseline:{type:"string",default:"alphabetic"},excludeAccents:{type:"boolean",default:!1}}}),bs,nu=F(()=>{ue(),bs=class extends rr{},bs.prototype.availableOptions={text:{type:"string",default:""},frame:{type:"object",default:null},font:{type:"object",default:null}}}),Pl,Ud=F(()=>{ue(),Pl=class extends rr{},Pl.prototype.availableOptions={tintColor:{type:"color",default:Pe.BLACK},textColor:{type:"color",default:Pe.BLACK},alignment:{type:"string",default:"left",available:["left","center","right"]},lineSpacing:{type:"number",default:1},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"}}}),v3,Ao,mg=F(()=>{ue(),_s(),Ud(),{Rectangle:v3}=ot,Ao=class extends rr{constructor(e){super(e),this.setSize(new Di(this.getWidth(),0)),this.serverImageSmoothingFix=!1}_getFrame(){const e=this.getSize();return new v3(0,0,e.width,e.height)}_getTextFrame(){return this._getFrame()}_getTextFrameForElement(e){return e.getFrame().clone()}_calculateLayoutElements(){Ke.warn("TextDesignRow is an abstract class.")}_getLayoutElements(){return this._options.elements.length<=0&&this.layout(),this.getElements()}_fontSize(e){return Ke.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}layout(){return this.setElements(this._calculateLayoutElements()),this}textFrame(e,t){return e.getFrame().clone()}willRender(e){}didRender(e){}render(e){e.save(),this._getLayoutElements().forEach(t=>{const{text:r,frame:i,font:n}=t.serializeOptions(),o=this.getAttributes();n.draw(e,i.x,i.y,{textColor:o.getTextColor().toRGBA(),alignment:o.getAlignment()})}),e.restore()}},Ao.prototype.availableOptions={words:{type:"object",default:null},width:{type:"number",default:100},attributes:{type:"configurable",default:new Pl},shearingAngle:{type:"number",default:0},elements:{type:"array",default:[]},size:{type:"object",default:null}}}),y3,Nd,zo,fN=F(()=>{ue(),Ld(),nu(),mg(),{Rectangle:y3}=ot,Nd=class extends Ao{_calculateLayoutElements(){if(this.getWords().size()<=0)return[];const{orientation:e,width:t,size:r,relativeRowOffset:i,attributes:n}=this.serializeOptions(),{fontIdentifier:o}=n,s=this.getWords().joined(3),a=e===Nd.Orientations.Left?[s[0],s[1],s[2]]:[s[1],s[2],s[0]],l=Ce.Array.range(0,2).map(k=>new Po({text:a[k],fontIdentifier:o,fontSize:60})),c=l.map(k=>k.getSizeValue()),h=c[0].width>c[1].width?0:1,f=(h+1)%2;l[f].fitWidth(c[h].width),c[f]=l[f].getSizeValue();const d=(c[f].height+c[h].height)/(1-i),p=new Po({text:a[2],fontIdentifier:o});p.fitHeight(d);const v=p.getSizeValue().width,g=c[h].width,m=t/(v+g),y=m*v,_=m*g,b=m*d,w=i*b;r.set(t,b);const S=Ce.Array.range(0,3).map(k=>new Po({text:a[k],fontIdentifier:o}));S[0].fitWidth(_),S[1].fitWidth(_),S[2].fitWidth(y);const C=e===Nd.Orientations.Left?0:y,D=e===Nd.Orientations.Left?_:0,E=[C,C,D],I=[0,S[0].getSizeValue().height+w,0],M=S.map((k,R)=>new y3(E[R],I[R],k.getSizeValue().width,k.getSizeValue().height));return S.map((k,R)=>new bs({text:a[R],font:S[R],frame:M[R]}))}},zo=Nd,Ue(zo,"Orientations",{Right:"RIGHT",Left:"LEFT"}),zo.prototype.availableOptions=ge(L({},Ao.prototype.availableOptions),{orientation:{type:"string",default:zo.Orientations.Left,available:[zo.Orientations.Right,zo.Orientations.Left]},relativeRowOffset:{type:"number",default:.05}})}),_3,xt,Ln=F(()=>{ue(),{Rectangle:_3}=ot,xt=class{constructor(e=0,t=0,r=0,i=0){this.top=e,this.left=t,this.bottom=r,this.right=i}multiply(e){this.top*=e,this.left*=e,this.bottom*=e,this.right*=e}toObject(){return L({},this)}equals(e,t=0){return Math.abs(e.top-this.top)<=t&&Math.abs(e.left-this.left)<=t&&Math.abs(e.bottom-this.bottom)<=t&&Math.abs(e.right-this.right)<=t}scale(e=1,t){return t===void 0&&(t=e),this.top*=t,this.bottom*=t,this.left*=e,this.right*=e,this}clone(){return new xt(this.top,this.left,this.bottom,this.right)}applyToRectangle(e){return new _3(e.x+this.left,e.y+this.top,e.width-this.left-this.right,e.height-this.top-this.bottom)}static get ZERO(){return new xt(0,0,0,0)}}}),Hi,no=F(()=>{ue(),Ld(),Ln(),nu(),mg(),Hi=class extends Ao{_calculateLayoutElements(){const{attributes:e,imageInsets:t,size:r,width:i}=this.serializeOptions(),n=this.getWords().joined(1)[0]||"",{fontIdentifier:o}=e,s=new Po({text:n,fontIdentifier:o});s.fitWidth(this._getTextFrame().width);const a=s.getTextMetrics().height+t.top+t.bottom;r.height=a;const l=this._getTextFrame();return[new bs({text:n,frame:l,font:s})]}},Hi.prototype.availableOptions=ge(L({},Ao.prototype.availableOptions),{imageInsets:{type:"object",default:new xt}})}),$o,pi,gg,Bo,vg,ou,ex,tx,b3,Al,zl=F(()=>{ue(),{Rectangle:$o,Vector2:pi}=ot,gg=(e,t,r,i)=>{e.drawImage(t,r.x,r.y,r.width,r.height,i.x,i.y,i.width,i.height)},Bo=(e,t,r,i="source-over",n=!1)=>{e.save(),e.fillStyle=r.toRGBA(),e.globalCompositeOperation=i,e.fillRect(t.x,t.y,t.width,t.height),n&&(e.strokeStyle=r.toRGBA(),e.strokeWith=1,e.strokeRect(t.x,t.y,t.width,t.height)),e.restore()},vg=(e,t,r,i,n="source-over",o=!1)=>{e.save(),e.fillStyle=i.toRGBA(),e.globalCompositeOperation=n,r=Math.min(Math.max(r,0),Math.min(t.height,t.width)*.5);const s=t.x,a=t.x+t.width,l=t.y,c=t.y+t.height;e.beginPath(),e.moveTo(s+r,l),e.arcTo(a,l,a,c,r),e.arcTo(a,c,s,c,r),e.arcTo(s,c,s,l,r),e.arcTo(s,l,a,l,r),e.closePath(),e.fill(),o&&e.stroke(),e.restore()},ou=(e,t,r,i=4)=>{e.save(),e.strokeStyle=r.toRGBA(),e.lineWidth=i,e.strokeRect(t.x,t.y,t.width,t.height),e.restore()},ex=(e,t,r,i="source-over")=>{e.save();const n=t.height/2,o=t.y+n;let s=t.x+n;const a=t.x+t.width;for(e.fillStyle=r.toRGBA(),e.globalCompositeOperation=i;s<a;)e.beginPath(),e.arc(s,o,n,0,2*Math.PI),e.fill(),s+=n*4;e.restore()},tx=(e,t)=>{const r=t.applyToRectangle(e),{x:i,y:n,width:o,height:s}=e,a=[$o.FromDiagonalPoints(new pi(0,0),new pi(r.x,r.y)),$o.FromDiagonalPoints(new pi(0,r.y+r.height),new pi(r.x,s)),$o.FromDiagonalPoints(new pi(r.x+r.width,r.y+r.height),new pi(o,s)),$o.FromDiagonalPoints(new pi(r.x+r.width,0),new pi(o,r.y))].map(c=>c.translate(i,n)),l=[$o.FromDiagonalPoints(new pi(r.x,0),new pi(r.x+r.width,r.y)),$o.FromDiagonalPoints(new pi(0,r.y),new pi(r.x,r.y+r.height)),$o.FromDiagonalPoints(new pi(r.x,r.y+r.height),new pi(r.x+r.width,s)),$o.FromDiagonalPoints(new pi(r.x+r.width,r.y),new pi(o,r.y+r.height))].map(c=>c.translate(i,n));return{corners:a,bars:l,center:r}},b3=(e,t,r,i)=>{const n=t.naturalWidth||t.width,o=t.naturalHeight||t.height,s=tx(new $o(0,0,n,o),i),a=tx(r,i);gg(e,t,s.center,a.center),Ce.Array.zip(s.corners,a.corners).forEach(([l,c])=>gg(e,t,l,c)),Ce.Array.zip(s.bars,a.bars).forEach(([l,c])=>gg(e,t,l,c))},Al=(e,t,r,i,n="source-atop")=>{if(e.save(),i&&(e.globalAlpha=i.a),e.drawImage(t,r.x,r.y,r.width,r.height),i&&(e.globalAlpha=1),i){const o=i.clone();o.a=1,Bo(e,r,o,n)}e.restore()}}),su,rx=F(()=>{ue(),zl(),Ln(),no(),su=class extends Hi{_getTextColor(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(Pe.WHITE)?Pe.BLACK:Pe.WHITE:this.getAttributes().getTextColor().clone()}_getTextFrame(){return this.getImageInsets().applyToRectangle(this._getFrame())}_getTextFrameForElement(e){const t=super._getTextFrameForElement(e),r=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(t.y-=r.top),t}willRender(e){this.getAttributes().setTextColor(this._getTextColor());const r=this.getImage();if(r){const i=this.getCapInsets(),n=this._getFrame();i&&!i.equals(xt.ZERO)?b3(e,r,n,i):e.drawImage(r,n.x,n.y,n.width,n.height),Bo(e,n,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&r&&(e.save(),e.globalCompositeOperation="destination-out")}didRender(e){super.didRender(e),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e.restore()}},su.prototype.availableOptions=ge(L({},Hi.prototype.availableOptions),{image:{type:"image",default:null},capInsets:{type:"object",default:new xt},backgroundColor:{type:"color",default:Pe.WHITE},autoAdjustTextColor:{type:"boolean",default:!0},isMasked:{type:"boolean",default:!0},isUsedInInvertedLayout:{type:"boolean",default:!1}})}),Lo,ix=F(()=>{ue(),Ln(),Lo=class extends rr{insetsForWidth(e){return this.getRelativeInsets().clone().scale(e)}static get Small(){return new Lo({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new xt(.05,.2,.05,.2)})}static get Rectangle(){return new Lo({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new xt(.05,.05,.05,.05),needsImageSmoothingFix:!0})}static get Celebrate1(){return new Lo({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new xt(.05,.2,.05,.2)})}static get Celebrate2(){return new Lo({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new xt(.05,.2,.05,.2)})}},Lo.prototype.availableOptions={image:{type:"image",default:null},imagePath:{type:"string",default:null},relativeInsets:{type:"object",default:new xt},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:"boolean",default:!1}}}),nx,pN=F(()=>{ue(),Ln(),_s(),nx=class extends rr{getSize(){const e=this.getRows(),t=this.getWidth(),r=e.length-1;let i=e.reduce((o,s)=>o+s.getSize().height,0);i+=(r+1)*this.getRelativeLineSpacing()*t;const n=this.getRelativeInsets().clone().scale(t);return i+=n.top+n.bottom,new Di(t,i)}},nx.prototype.availableOptions={text:{type:"string",default:""},lines:{type:"array",default:[]},relativeInsets:{type:"object",default:new xt},relativeLineSpacing:{type:"number",default:0},rows:{type:"object",default:[]},background:{type:"object",default:null},width:{type:"number",default:0}}}),Uo,$l=F(()=>{ue(),Uo=class{constructor(e){this.words=[],e&&this.splitIntoWords(e)}splitIntoWords(e){return this.words=e.match(/\S+/g)||[],[...this.words]}get(){return[...this.words]}getWord(e){return this.words[e]}set(e){return this.words=[...e],this}slice(e,t){return Uo.fromWords(this.words.slice(e,t))}getLowerCase(){return this.words.map(e=>e.toLowerCase())}getUpperCase(){return this.words.map(e=>e.toUpperCase())}size(){return this.words.length}countNumberOfCharacters(){return this.words.reduce((e,t)=>e+t.length,0)}joined(e){const t=this.size(),r=Math.floor(t/e),i=t%e;let n=0,o=0;return Ce.Array.range(0,e).map(s=>{n=o;const a=r+(s<i?1:0);return o=Math.min(n+a,t),Ce.Array.range(n,o).reduce((l,c)=>l+(c===n?"":" ")+this.words[c],"")})}static fromWords(e){const t=new Uo;return t.words=[...e],t}}}),x3,w3,S3,rn,jd=F(()=>{ue(),Bn(),Ln(),no(),Ud(),pN(),$l(),x3=10,w3=4,S3=.4,rn=class extends rr{constructor(e){super(e),this._relativeInsets=new xt,this._background=null,this._fontRandomizer=new Yt(0),this._lineNumberRandomizer=new Yt(0),this._wordsPerLineRandomizer=new Yt(0),this._seedPool=[this._fontRandomizer,this._lineNumberRandomizer,this._wordsPerLineRandomizer]}seed(e){this._seedPool.forEach(t=>t.seed(e))}getImagePaths(){return[]}onImagesLoaded(){}getMaximumNumberOfTries(){return x3}getMinLineCountOfRandom(){return w3}getRandomAdditionalLinePercentage(){return S3}_fontForRow(e,t){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}_modifiedText(e){return e.replace(`
`," ").replace("	"," ")}_minimumNumberOfLines(e){return Math.ceil(Math.sqrt(e.size()))}_maximumNumberOfLines(e){return e.size()}_calculatedNumberOfLines(e){let t=this._minimumNumberOfLines(e);if(e.size()>=this.getMinLineCountOfRandom()){const r=Math.floor(Math.max(1,t*this.getRandomAdditionalLinePercentage()));t+=this._lineNumberRandomizer.nextInRange(0,r)}return Math.min(t,this._maximumNumberOfLines(e))}_randomizedNumberOfWordsPerLine(e,t){if(e>t)return Ke.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),t;const r=Ce.Array.repeat(1,e);return Ce.Array.range(e,t).forEach(i=>{const n=this._wordsPerLineRandomizer.nextInRange(0,e-1);r[n]+=1}),r}_textLines(e){const t=new Uo(e),r=this._calculatedNumberOfLines(t);return this._randomizedNumberOfWordsPerLine(r,t.size()).reduce((n,o)=>({index:n.index+o,lines:[...n.lines,t.slice(n.index,Math.min(n.index+o,t.size()))]}),{index:0,lines:[]}).lines}_validTextLines(e){let t=this._textLines(e),r=0;do if(r=Ce.Array.findIndex(t,i=>i.countNumberOfCharacters()<3),r>=0){const i=t[r-1],n=t[r+1],o=i?i.countNumberOfCharacters():Number.MAX_SAFE_INTEGER,s=n?n.countNumberOfCharacters():Number.MAX_SAFE_INTEGER;o<s&&i?(i.words=[...i.words,...t[r].words],t=[...t.slice(0,r),...t.slice(r+1)]):n&&(n.words=[...t[r].words,...n.words],t=[...t.slice(0,r),...t.slice(r+1)])}while(r>-1&&t.length>1);return t}_modifiedLines(e){return e}_getBackground(){return this._background}generateLayoutData(e,t){const r=this._modifiedText(e),i=this._modifiedLines(this._validTextLines(r)),n=t*(1-this._relativeInsets.left-this._relativeInsets.right),o=this._layoutRows(i,n);return new nx({text:r,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:i,rows:o,width:t})}_layoutRows(e,t){return e.map((r,i)=>this._randomLayoutRow(r,i,t,new Pl({fontIdentifier:this._fontForRow(i,r)})).layout())}_randomLayoutRow(e,t,r,i){return new Hi({words:e,width:r,attributes:i})}},Ue(rn,"defaultFontIdentifiers",[]),Ue(rn,"identifier","textdesign"),rn.prototype.availableOptions={fontIdentifiers:{type:"array",default:[]},relativeLineSpacing:{type:"number",default:0}}}),nn,Hd=F(()=>{ue(),Bn(),fN(),no(),rx(),Ud(),ix(),io(),jd(),nn=class extends rn{constructor(...e){super(...e),Ue(this,"getImagePaths",()=>{const t=this.getBanderoles();return t&&t.map(r=>r.getImagePath())||[]}),Ue(this,"onImagesLoaded",()=>{const t=this.getBanderoles();t&&t.forEach(r=>{const i=Tr.getImage(r.getImagePath());if(!i){Ke.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${r.getImagePath()}'`);return}r.setImage(i)})}),this._rowTypeLessThan3WordsRandomizer=new Yt(0),this._rowTypeMoreThan3WordsRandomizer=new Yt(0),this._banderolesRandomizer=new Yt(0),this._seedPool=[...this._seedPool,this._rowTypeLessThan3WordsRandomizer,this._rowTypeMoreThan3WordsRandomizer,this._banderolesRandomizer]}_modifiedText(e){return super._modifiedText(e).toUpperCase()}generateLayoutData(e,t){return this._options.hasMaskedText=!1,super.generateLayoutData(e,t)}_randomLayoutRow(e,t,r,i){if(e.size()<3){const o=this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2)===0;return this._layoutRow(e,r,i,o)}const n=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(n){case 0:return new zo({words:e,width:r,attributes:i,orientation:zo.Orientations.Left});case 1:return new zo({words:e,width:r,attributes:i,orientation:zo.Orientations.Right});case 2:return this._layoutRow(e,r,i,!0);case 3:return new Hi({words:e,width:r,attributes:i});default:throw new Error(`TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: ${n}.`)}}_layoutRow(e,t,r,i){if(this.getHasMaskedText()&&(i=!1),i){this.setHasMaskedText(!0);const n=this._banderolesRandomizer.pickNext(this.getBanderoles()),o=new su({words:e,width:t,attributes:new Pl({alignment:"left",fontIdentifier:n.getFontIdentifier()}),image:n.getImage(),imageInsets:n.insetsForWidth(t),capInsets:null,backgroundColor:Pe.WHITE});return n.getNeedsImageSmoothingFix()&&(o.serverImageSmoothingFix=!0),o}return new Hi({words:e,width:t,attributes:r})}},Ue(nn,"defaultFontIdentifiers",["imgly_font_campton_bold"]),Ue(nn,"identifier","imgly_text_design_blocks"),Ue(nn,"defaultBanderoles",[Lo.Rectangle,Lo.Small]),nn.prototype.availableOptions=ge(L({},rn.prototype.availableOptions),{fontIdentifiers:{type:"array",default:nn.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3},hasMaskedText:{type:"boolean",default:!1},banderoles:{type:"array",default:nn.defaultBanderoles}})}),au,mN=F(()=>{ue(),no(),Hd(),au=class extends nn{constructor(...e){super(...e),this._exclusiveFont=null}generateLayoutData(e,t){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),super.generateLayoutData(e,t)}_fontForRow(e,t){return this._exclusiveFont||super._fontForRow(e,t)}_layoutRow(e,t,r,i){return new Hi({words:e,width:t,attributes:r})}},Ue(au,"defaultFontIdentifiers",["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"]),Ue(au,"identifier","imgly_text_design_blocks_condensed"),au.prototype.availableOptions=ge(L({},nn.prototype.availableOptions),{fontIdentifiers:{type:"array",default:au.defaultFontIdentifiers}})}),lu,va,Un,C3=F(()=>{ue(),zl(),_s(),nu(),mg(),{Rectangle:lu}=ot,va=class extends Ao{constructor(...e){super(...e),this.setSize(new Di(this.getWidth(),this.getHeight()))}_calculateLayoutElements(){return[new bs({frame:this._getTextFrame()})]}render(e){const t=this._getFrame(),r=this.getType(),n=this.getAttributes().getTextColor(),o=t.height/3;let s=new lu(t.x,t.y,t.width,o),a=new lu(t.x,t.y+o*2,t.width,o);switch(r){case va.FormType.Rect:Bo(e,t,n);break;case va.FormType.DoubleRect:Bo(e,s,n),Bo(e,a,n);break;case va.FormType.DoubleRectFirstPunctuated:ex(e,s,n),Bo(e,a,n);break;case va.FormType.DoubleRectSecondPunctuated:Bo(e,s,n),ex(e,a,n);break;case va.FormType.LongLine:{const l=t.height/2,c=new lu(t.x,t.y,t.width,l);vg(e,c,c.height*.5,n);break}case va.FormType.LongAndShortLine:{const l=t.height*.2,c=l*.75;s=new lu(t.x,t.y+l,t.width,l);const h=t.x+t.width*.25,f=t.y+t.height-c;a=new lu(h,f,t.width*.5,c),vg(e,s,s.height*.5,n),vg(e,a,a.height*.5,n);break}}}},Un=va,Ue(Un,"FormType",{Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"}),Un.prototype.availableOptions=ge(L({},Ao.prototype.availableOptions),{height:{type:"number",default:100},type:{type:"string",default:Un.FormType.Rect,available:Ce.values(Un.FormType)}})}),ya,k3=F(()=>{ue(),no(),C3(),Hd(),ya=class extends nn{_layoutRow(e,t,r,i){return new Hi({words:e,width:t,attributes:r})}_layoutRows(e,t){const r=super._layoutRows(e,t),i=.032*t,n=.08*t,o=new Un({width:t,height:i,type:Un.FormType.LongLine,shearingAngle:0}).layout(),s=new Un({width:t,height:n,type:Un.FormType.LongAndShortLine,shearingAngle:0}).layout();return[o,...r,s]}},Ue(ya,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),Ue(ya,"identifier","imgly_text_design_blocks_light"),ya.prototype.availableOptions=ge(L({},nn.prototype.availableOptions),{fontIdentifiers:{type:"array",default:ya.defaultFontIdentifiers}})}),cu,gN=F(()=>{ue(),no(),Ud(),k3(),cu=class extends ya{_layoutRows(e,t){return e.map((r,i)=>this._randomLayoutRow(r,i,t,new Pl({fontIdentifier:this._fontForRow(i,r)})).layout())}_layoutRow(e,t,r,i){return new Hi({words:e,width:t,attributes:r})}},Ue(cu,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),Ue(cu,"identifier","imgly_text_design_blocks_light-v3_1_0"),cu.prototype.availableOptions=ge(L({},ya.prototype.availableOptions),{fontIdentifiers:{type:"array",default:cu.defaultFontIdentifiers}})}),T3,yg,_a,ox=F(()=>{ue(),Ld(),zl(),_s(),nu(),no(),{Rectangle:T3}=ot,yg=class extends Hi{getImageSize(){const e=this.getLeftImage(),t=this.getRightImage(),r=this.getWords(),n=this.getAttributes().getFontIdentifier(),o=e?new Di(e.width,e.height):new Di,s=r.joined(1)[0];if(!s)return o;const l=new Po({text:s,fontIdentifier:n,fontSize:50}).getSizeValue(),c=t?2:1;o.scale(c,1);const h=o.clone().fitInWidthWithOther(this._getFrame().width,l);return h.scale(1/c,1),h}_getTextFrame(){const e=super._getTextFrame().clone(),t=this.getImageSize(),r=this.getRightImage(),i=this.getImagePosition();return r?(e.x+=t.width,e.width-=2*t.width):i===yg.ImagePosition.Left&&(e.x+=t.width),e}_calculateLayoutElements(){const e=super._calculateLayoutElements(),t=this._getFrame(),r=this.getRightImage(),i=this.getImageSize(),n=this.getImagePosition(),o=this._getTextFrame(),a=this.getAttributes().getFontIdentifier(),l=new Po({text:"stickerClock",fontIdentifier:a});l.fitWidth(this._getTextFrame().width);const c=new T3().set(t.x,t.y,i.width,i.height);if(!r&&n===yg.ImagePosition.Right&&(c.x+=o.width),e.push(new bs({text:"stickerClock",frame:c,font:l})),r){const h=e[0];if(h){const f=c.clone();f.translate(h.getFrame().width+f.width,0),e.push(new bs({text:"stickerClock",frame:f,font:l}))}}return e}render(e){const t=this._getLayoutElements(),r=this.getAttributes(),i=r.getTextColor(),n=this.getLeftImage(),o=this.getRightImage(),s=t[0],a=t[1],{font:l}=s.serializeOptions(),c=this._getTextFrameForElement(s);if(l.draw(e,c.x,c.y,{textColor:r.getTextColor().toRGBA(),alignment:r.getAlignment()}),n){const h=a.getFrame();e.drawImage(n,h.x,h.y,h.width,h.height),Bo(e,h,i,"source-atop")}if(t.length>2){const f=t[2].getFrame().clone();e.drawImage(o,f.x,f.y,f.width,f.height),Bo(e,f,i,"source-atop")}}},_a=yg,Ue(_a,"ImagePosition",{Left:"LEFT",right:"RIGHT"}),_a.prototype.availableOptions=ge(L({},Hi.prototype.availableOptions),{leftImage:{type:"image",default:null},rightImage:{type:"image",default:null},imagePosition:{type:"string",default:_a.ImagePosition.Left,available:[_a.ImagePosition.Left,_a.ImagePosition.Right]}})}),Wd,oo,E3=F(()=>{ue(),no(),ox(),ix(),$l(),Hd(),Wd=class extends nn{_fontForRow(e,t){const r=this.getFontIdentifiers();return r[e%r.length]}_minimumNumberOfLines(e){return Math.max(Math.floor(super._minimumNumberOfLines(e)*.7),1)}_maximumNumberOfLines(e){return Math.max(Math.floor(e.countNumberOfCharacters()/5),1)}_randomLayoutRow(e,t,r,i){return this._createSingleRow(Wd.RowType.Single,e,r,i)}_createSingleRow(e,t,r,i){const n=i.getFontIdentifier(),o=n==="imgly_font_amberlight"||n==="imgly_font_handycheera_regular"?new Uo().set(t.getLowerCase()):t;switch(e){case Wd.RowType.Single:return new Hi({words:o,width:r,attributes:i});case Wd.RowType.SingleImage:return new _a({words:o,width:r,attributes:i});default:return Ke.warn(`TextDesignCelebrate#_createSingleRow: Invalid row type '${e}'`),null}}},oo=Wd,Ue(oo,"defaultFontIdentifiers",["imgly_font_handycheera_regular","imgly_font_rasa_regular"]),Ue(oo,"defaultBanderoles",[Lo.Celebrate1,Lo.Celebrate2]),Ue(oo,"identifier","imgly_text_design_celebrate"),Ue(oo,"RowType",{Single:"SINGLE",SingleImage:"SINGLE_IMAGE"}),oo.prototype.availableOptions=ge(L({},nn.prototype.availableOptions),{relativeLineSpacing:{type:"number",default:.01875},fontIdentifiers:{type:"array",default:oo.defaultFontIdentifiers},banderoles:{type:"array",default:oo.defaultBanderoles}})}),Ii,sx=F(()=>{ue(),Ld(),$l(),zl(),_s(),Ud(),nu(),mg(),Ii=class extends Ao{constructor(...e){super(...e),this.setSize(new Di(this.getWidth(),this.getHeight()))}_getImageFrame(){const e=this._getTextFrame().clone(),t=this.getImage();if(this.getDrawingModeAspectFit()&&t){const r=Math.min(e.width/t.width,e.height/t.height),i=t.width*r,n=t.height*r;e.x+=(e.width-i)/2,e.y+=(e.height-n)/2,e.width=i,e.height=n}return e}_calculateLayoutElements(){return[new bs({text:"",frame:this._getImageFrame(),font:new Po})]}render(e){const t=this.getImage(),r=this._getImageFrame(),n=this.getAttributes().getTextColor();Al(e,t,r,n)}},Ue(Ii,"RowImages",{decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"}),Ii.prototype.availableOptions=ge(L({},Ao.prototype.availableOptions),{words:{type:"object",default:new Uo},height:{type:"number",default:0},image:{type:"image",default:null},imagePath:{type:"string",default:Ii.RowImages.decorative1},drawingModeAspectFit:{type:"boolean",default:!1},attributes:{type:"configurable",default:new Pl}})}),uu,vN=F(()=>{ue(),Bn(),no(),ox(),sx(),ix(),io(),$l(),Hd(),E3(),uu=class extends oo{constructor(...e){super(...e),Ue(this,"getImagePaths",()=>{const t=this.getBanderoles();return[...t&&t.map(r=>r.getImagePath())||[],...this._celebrateTypes]}),Ue(this,"onImagesLoaded",()=>{const t=this.getBanderoles();t&&t.forEach(r=>{const i=Tr.getImage(r.getImagePath());if(!i){Ke.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${r.getImagePath()}'`);return}r.setImage(i)})}),this._celebrateTypes=[Ii.RowImages.celebrate1,Ii.RowImages.celebrate2,Ii.RowImages.celebrate3],this._exclusiveFont=null,this._typeRandomizer=new Yt(0),this._useMaskedRandomizer=new Yt(0),this._seedPool.push(this._typeRandomizer),this._seedPool.push(this._useMaskedRandomizer)}_fontForRow(e,t){const r=this.getFontIdentifiers();return r[e%(r.length-1)]}_layoutRows(e,t){const r=this._typeRandomizer.pickNext(this._celebrateTypes),i=Tr.getImage(r);i||Ke.warn(`TextDesignCelebrateSimple#_layoutRows: Image not fount '${r}'`);const n=new Ii({width:t,height:t*.5,drawingModeAspectFit:!0,image:i}).layout(),o=super._layoutRows(e,t);return[n,...o]}_randomLayoutRow(e,t,r,i){const n=e.countNumberOfCharacters(),o=13;n<4&&i.setFontIdentifier("imgly_font_rasa_regular");const a=this._useMaskedRandomizer.nextBool(2,1);return n<o&&a&&!this.getHasMaskedText()?this._layoutRow(e,r,i,!0):super._randomLayoutRow(e,t,r,i)}},Ue(uu,"identifier","imgly_text_design_celebrate_simple"),Ue(uu,"defaultFontIdentifiers",["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"]),uu.prototype.availableOptions=ge(L({},oo.prototype.availableOptions),{fontIdentifiers:{type:"array",default:uu.defaultFontIdentifiers}})}),Vd,D3=F(()=>{ue(),Vd=class extends rr{render(e,t,r,i,n){Ke.warn("TextDesignBackground#render: Abstract class")}},Vd.prototype.availableOptions={}}),Gd,xs,yN=F(()=>{ue(),io(),zl(),D3(),{Rectangle:Gd}=ot,xs=class extends Vd{getImagePaths(){const{topImagePath:e,bottomImagePath:t,leftImagePath:r,rightImagePath:i}=this._options;return[e,t,r,i].filter(n=>n!=="")}render(e,t,r,i,n){const o=r.clone().scale(t.width),s=t.rectangle(0,0),a=Tr.getImage(this.getTopImagePath()),l=Tr.getImage(this.getLeftImagePath()),c=Tr.getImage(this.getRightImagePath()),h=Tr.getImage(this.getBottomImagePath());if(a){const f=a.width/a.height,d=o.top*this.getTopImageFillRate(),p=d*f,g=s.width/2-p/2,m=new Gd(g,0,p,d);Al(e,a,m,i)}if(h){const f=h.width/h.height,d=o.bottom*this.getBottomImageFillRate(),p=d*f,g=s.width/2-p/2,m=new Gd(g,s.height-d,p,d);Al(e,h,m,i)}if(l){const f=l.width/l.height,d=o.left*this.getLeftImageFillRate(),p=d/f,g=s.height/2-p/2,m=new Gd(0,g,d,p);Al(e,l,m,i)}if(c){const f=c.width/c.height,d=o.right*this.getRightImageFillRate(),p=d/f,g=s.height/2-p/2,m=new Gd(s.width-d,g,d,p);Al(e,c,m,i)}}},xs.prototype.availableOptions={topImagePath:{type:"string",default:""},leftImagePath:{type:"string",default:""},bottomImagePath:{type:"string",default:""},rightImagePath:{type:"string",default:""},topImageFillRate:{type:"number",default:1},leftImageFillRate:{type:"number",default:1},bottomImageFillRate:{type:"number",default:1},rightImageFillRate:{type:"number",default:1}},xs.Backgrounds=[new xs({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new xs({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new xs({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new xs({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})]}),ba,I3=F(()=>{ue(),yN(),Bn(),Ln(),no(),$l(),jd(),ba=class extends rn{constructor(...e){super(...e),this._relativeInsets=new xt(.1,.1,.1,.1),this._alreadyContainsARowWithScriptFont=!1,this._backgroundsRandomizer=new Yt(0),this._seedPool.push(this._backgroundsRandomizer)}getImagePaths(){return Ce.Array.flatten(xs.Backgrounds.map(e=>e.getImagePaths()))}_getBackground(){return this._backgroundsRandomizer.pickNext(xs.Backgrounds)}generateLayoutData(e,t){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),super.generateLayoutData(e,t)}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_fontForRow(e,t){let r=super._fontForRow(e,t);return r==="imgly_font_petit_formal_script"&&(this._alreadyContainsARowWithScriptFont&&(r="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),r}_randomLayoutRow(e,t,r,i){const n=i.getFontIdentifier()==="imgly_font_petit_formal_script";return new Hi({words:n?new Uo().set(e.getLowerCase()):e,width:r,attributes:i})}},Ue(ba,"identifier","imgly_text_design_equal_width"),Ue(ba,"defaultFontIdentifiers",["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"]),ba.prototype.availableOptions=ge(L({},rn.prototype.availableOptions),{fontIdentifiers:{type:"array",default:ba.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025}})}),hu,_N=F(()=>{ue(),Ln(),I3(),hu=class extends ba{constructor(...e){super(...e),this._relativeInsets=new xt}_getBackground(){return null}},Ue(hu,"defaultFontIdentifiers",["imgly_font_ultra"]),Ue(hu,"identifier","imgly_text_design_equal_width_fat"),hu.prototype.availableOptions=ge(L({},ba.prototype.availableOptions),{fontIdentifiers:{type:"array",default:hu.defaultFontIdentifiers}})}),lt,qd=F(()=>{ue(),Ln(),lt=class extends rr{insetsForWidth(e){return this.getRelativeInsets().clone().scale(e)}},lt.prototype.availableOptions={imagePath:{type:"string",default:""},minimumHeightRatio:{type:"number",default:0},sizeToFitContent:{type:"boolean",default:!0},capInsets:{type:"object",default:new xt},relativeInsets:{type:"object",default:new xt}},lt.Box=new lt({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new xt(.1,.1,.1,.1)}),lt.Badge1=new lt({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new xt(.3,.18,.2,.18)}),lt.Badge2=new lt({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new xt(.3,.18,.2,.18)}),lt.Badge3=new lt({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new xt(.3,.18,.2,.18)}),lt.Badge4=new lt({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new xt(.3,.18,.2,.18)}),lt.SpeechBubble1=new lt({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new xt(.04,.07,.12,.07),capInsets:new xt(19*3,57*3,41*3,17*3)}),lt.SpeechBubble2=new lt({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new xt(.04,.07,.12,.07),capInsets:new xt(2*3,35*3,29*3,5*3)}),lt.SpeechBubble3=new lt({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new xt(.165664675,.2,.165664675,.2),minimumHeightRatio:.7}),lt.SpeechBubble4=new lt({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new xt(.124800224,.2,.291200523,.2),minimumHeightRatio:.7}),lt.SpeechBubble5=new lt({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new xt(.114892823,.27,.15984926,.27)}),lt.Watercolor1=new lt({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new xt(.2,.25,.2,.25)}),lt.Watercolor2=new lt({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new xt(.08,.25,.3,.25)}),lt.Watercolor3=new lt({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new xt(.1,.2,.15,.2)})}),bN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.arabic=void 0;var t="\u0620-\u064A\u066E-\u066F\u0671-\u06D5\u06EE-\u06EF\u06FA-\u06FF",r="\u0750-\u077F",i="[".concat(t).concat(r,"]"),n="[\u064B-\u065F\u0670]",o="".concat(i).concat(n,"*");e.arabic=o}),xN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bengali=void 0;var t="[\\u{0980}-\\u{09FF}]",r="[\\u{0980}-\\u{0983}\\u{09BC}-\\u{09D7}\\u{09E2}\\u{09E3}\\u{09FE}]",i="\\u{09CD}",n="".concat(t,"(").concat(i).concat(t,"|").concat(r,")*");e.bengali=n}),wN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.devanagari=void 0;var t="[\\u{0900}-\\u{097F}]",r="[\\u{0900}-\\u{0903}\\u{093A}-\\u{0957}\\u{0962}\\u{0963}]",i="\\u{094D}",n="".concat(t,"(").concat(i).concat(t,"|").concat(r,")*");e.devanagari=n}),SN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.gujarati=void 0;var t="[\\u{0A80}-\\u{0AFF}]",r="[\\u{0A81}-\\u{0A83}\\u{0ABC}\\u{0ABE}-\\u{0ACD}\\u{0AE2}\\u{0AE3}\\u{0AFA}-\\u{0AFF}]",i="\\u{0ACD}",n="".concat(t,"(").concat(i).concat(t,"|").concat(r,")*");e.gujarati=n}),CN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hebrew=void 0;var t="[\u05D0-\u05EA]",r="[\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7]",i="".concat(t).concat(r,"*");e.hebrew=i}),kN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.japaneseKana=void 0;var t="[\\u{3041}-\\u{3096}\\u{309D}-\\u{309F}]",r="[\\u{30A0}-\\u{30FF}]",i="[\\u{3099}-\\u{309A}]",n="[\\u{309B}-\\u{309C}]",o="((".concat(r,"|").concat(t,")").concat(i,"?|").concat(n,")");e.japaneseKana=o}),TN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.kannada=void 0;var t="[\\u{0C80}-\\u{0CFF}]",r="[\\u{0C81}-\\u{0C83}\\u{0CBC}\\u{0CBE}-\\u{0CCD}\\u{0CD5}\\u{0CD6}\\u{0CE2}\\u{0CE3}]",i="\\u{0CCD}",n="".concat(t,"(").concat(i).concat(t,"|").concat(r,")*");e.kannada=n}),EN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.khmer=void 0;var t="[\\u{1780}-\\u{17FF}]",r="[\\u{17B6}-\\u{17D1}\\u{17D3}\\u{17DD}]",i="\\u{17D2}",n="".concat(t,"(").concat(i).concat(t,"|").concat(r,")*");e.khmer=n}),DN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.lao=void 0;var t="[\\u{0E80}-\\u{0EFF}]",r="[\\u{0EB1}\\u{0EB4}-\\u{0EBC}\\u{0EC8}-\\u{0ECD}]",i="".concat(t).concat(r,"*");e.lao=i}),IN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.malayalam=void 0;var t="[\\u{0D00}-\\u{0D7F}]",r="[\\u{0D00}-\\u{0D03}\\u{0D3B}\\u{0D3C}\\u{0D3E}-\\u{0D4D}\\u{0D57}\\u{0D62}-\\u{0D63}]",i="\\u{0D4D}",n="".concat(t,"(").concat(i).concat(t,"|").concat(r,")*");e.malayalam=n}),RN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.myanmar=void 0;var t="[\\u{1000}-\\u{109F}]",r=["\\u{102B}-\\u{1038}","\\u{103A}-\\u{103E}","\\u{1056}-\\u{1059}","\\u{105E}-\\u{1060}","\\u{1062}-\\u{1064}","\\u{1067}-\\u{106D}","\\u{1071}-\\u{1074}","\\u{1082}-\\u{108D}","\\u{108F}","\\u{109A}-\\u{109D}"],i="[".concat(r.join(""),"]"),n="\\u{1039}",o="".concat(t,"(").concat(n).concat(t,"|").concat(i,")*");e.myanmar=o}),FN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tamil=void 0;var t="[\\u{0B80}-\\u{0BFF}]",r="[\\u{0B82}-\\u{0B83}\\u{0BBE}-\\u{0BD7}\\u{0962}\\u{0963}]",i="".concat(t).concat(r,"*");e.tamil=i}),ON=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.telugu=void 0;var t="[\\u{0C00}-\\u{0C7F}]",r="[\\u{0C00}-\\u{0C04}\\u{0C3E}-\\u{0C56}\\u{0C62}\\u{0C63}]",i="\\u{0C4D}",n="".concat(t,"(").concat(i).concat(t,"|").concat(r,")*");e.telugu=n}),MN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.thai=void 0;var t="[\\u0E00-\\u0E7F]",r="[\\u0E31\\u0E33-\\u0E3A\\u0E47-\\u0E4E]",i="".concat(t).concat(r,"*");e.thai=i}),PN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tibetan=void 0;var t="[\\u{0F00}-\\u{0FFF}]",r="[\\0F18\\0F19\\0F35\\0F37\\0F39\\0F3E\\0F3F\\u{0F71}-\\u{0F87}\\u{0F8D}-\\u{0FBC}\\u{0FC6}]",i="".concat(t).concat(r,"*");e.tibetan=i}),AN=T(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.emojiVariation=e.keyCap=e.countryFlag=void 0;var t="[\\u{1F1E6}-\\u{1F1FF}]{2}";e.countryFlag=t;var r="[0-9#\\*][\\u{FE0F}]?\\u{20E3}";e.keyCap=r;var i=["[\\u{2600}-\\u{26FF}]","[\\u{2700}-\\u{27BF}]","[\\u{1F300}-\\u{1F5FF}]","[\\u{1F600}-\\u{1F64F}]","[\\u{1F680}-\\u{1F6FF}]","[\\u{1F700}-\\u{1F77F}]","[\\u{1F900}-\\u{1F9FF}]"],n="(".concat(i.join("|"),")"),o="\\u{200D}",s="[\\u{FE0E}\\u{FE0F}]",a="[\\u{1F3FB}-\\u{1F3FF}]",l="".concat(n,"(").concat(o).concat(n,"|").concat(a,"|").concat(s,")*");e.emojiVariation=l}),zN=T((e,t)=>{var r=bN(),i=xN(),n=wN(),o=SN(),s=CN(),a=kN(),l=TN(),c=EN(),h=DN(),f=IN(),d=RN(),p=FN(),v=ON(),g=MN(),m=PN(),y=AN(),_=[y.countryFlag,y.keyCap,y.emojiVariation,r.arabic,i.bengali,n.devanagari,o.gujarati,s.hebrew,a.japaneseKana,l.kannada,c.khmer,h.lao,f.malayalam,d.myanmar,p.tamil,v.telugu,g.thai,m.tibetan,"."],b=new RegExp("(".concat(_.join("|"),")"),"gu");function w(S){return S.match(b)||[]}t.exports={splitGraphemes:w}}),R3,F3,ax,O3=F(()=>{R3=ni(zN()),F3=class{constructor(e){this._context=e,this._lastFontStyle={}}getLines(){let e=[],t=[];const r=this._lines.length;for(let i=0;i<r;i++){const n=this._lines[i],o=this._buildWords(n),s=o.length;for(let a=0;a<s;a++){const l=o[a],c=t.concat(l).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){t.length>0&&(e.push(t.join("")),t=[l]);const f=l.replace(/\s+$/i,"");if(this._getWidth(f)>this._maxWidth){const d=this._splitWord(l);e=e.concat(d.lines),d.rest&&(t=[d.rest])}}else t.push(l)}e.push(t.join("")),t=[]}return e.map(i=>this._trimLine(i,this._context.textAlign))}_trimLine(e,t){return e}_buildWords(e){const t=[];let r="";const i=e.length;for(let n=0;n<i;n++){const o=e[n];r+=o,(o===" "||o==="-"||n===i-1)&&(t.push(r),r="")}return t}_splitWord(e){const t={lines:[],rest:null},r=(0,R3.splitGraphemes)(e),i=r.length;let n=[];for(let o=0;o<i;o++){const s=r[o];this._getWidth(n.concat(s).join(""))>this._maxWidth?(n.length>0&&t.lines.push(n.join("")),n=[s]):n.push(s),o===i-1&&n.length>0&&(t.rest=n.join(""))}return t}_fontStyleChanged(){return this._context.font!==this._lastFontStyle?(this._lastFontStyle=this._context.font,!0):!1}_getWidth(e){return this._context.measureText(e).width}setText(e){this._text=e,this._lines=e.split(`
`)}setMaxWidth(e){this._maxWidth=e}},ax=F3}),_g,M3,P3,A3=F(()=>{ue(),O3(),{Vector2:_g}=ot,M3=class{constructor(e,t){this._text=e,this._operation=t,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}_createCanvas(){this._canvas=Ce.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new ax(this._context),this._finalCanvas=Ce.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}_createTexture(){this._texture=_e.Texture.fromCanvas(this._canvas),this._finalTexture=_e.Texture.fromCanvas(this._finalCanvas)}_applyTextOptions(e,t){t.font=`${this._text.getFontStyle()} ${this._text.getFontWeight()} ${e.fontSize}px "${this._text.getFontFamily()}"`,this._text.getTextMetrics()?t.textBaseline="alphabetic":t.textBaseline="top",t.textAlign=this._text.getAlignment(),t.fillStyle=this._text.getColor().toRGBA(),t.strokeStyle=this._text.getOutlineColor().toRGBA();const r=this._text.getOutlineWidth();r>0&&(t.lineWidth=r)}_buildOutputLines(e){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines().map(t=>t.replace(/\s+$/i,""))}_renderTextLine(e,t,r){const i=this._text.getAlignment(),n=new _g(0,t);switch(i){case"left":n.x=r;break;case"center":n.x=this._canvas.width/2;break;case"right":n.x=this._canvas.width-r;break}this._context.save(),this._context.translate(n.x,n.y),this._context.fillText(e,0,0),this._context.restore(),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(e,n.x,n.y))}update(e,t){const r=this.calculateFontStyles(e,t);if(r){const{dimensions:i,lines:n}=this._calculateText(e,r,t);this._renderText(e,i,n,r,t),this._updateFinalTexture()}}_updateFinalTexture(){const{width:e,height:t}=this._canvas,{rotation:r}=this,i=Math.cos(r),n=Math.sin(r),o=new _g(Math.abs(e*i)+Math.abs(t*n),Math.abs(e*n)+Math.abs(t*i));this._finalCanvas.width=o.x,this._finalCanvas.height=o.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(r),this._finalContext.drawImage(this._canvas,-e/2,-t/2),this._finalContext.restore()}_renderText(e,t,r,i,n){this._canvas.width=t.x,this._canvas.height=t.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*n.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,t.x,t.y),this._applyTextOptions(i,this._context);const o=this._padding(n),s=this._text.getTextMetrics(),a=this._text.getFontSize()*n.y,l=1/s.unitsPerEm*a,c=s.ascender*l;for(let h=0;h<r.length;h++){const f=r[h];this._renderTextLine(f,i.topPadding+i.lineHeight*h+o+c,o)}}calculateFontStyles(e,t){const r=this._text.getFontFamily(),i=this._text.getFontSize()*t.y,n=this._text.getAbsoluteTextHeight(t),o=n*this._text.getLineHeight(),s=n*(this._text.getLineHeight()-1)/2,a={fontFamily:r,fontSize:i,lineHeight:o,topPadding:s};return(this._textOptions.fontFamily!==r||this._textOptions.fontSize!==i||this._textOptions.lineHeight!==o)&&(this._textOptions=a),a}_calculateText(e,t,r){const i=this._text.getMaxWidth()*r.x;this._applyTextOptions(t,this._context);const n=new _g;let o=this._text.getText().split(`
`);typeof i!="undefined"&&(n.x=i,o=this._buildOutputLines(i));for(let l=0;l<o.length;l++){const c=o[l];n.x=Math.max(n.x,this._context.measureText(c).width)}const{lineHeight:s}=t;n.y=o.length*s;const a=this._padding(r);return n.y+=a*2,n.x+=a*2,{dimensions:n,lines:o}}_padding(e){return this._text.getAbsoluteTextHeight(e)*.2}getTexture(){return this._texture}getFinalTexture(){return this._finalTexture}getDimensions(e,t){const r=this.calculateFontStyles(e,t),{dimensions:i}=this._calculateText(e,r,t);return i}dispose(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.dispose(),this._finalTexture=null)}},P3=M3}),lx,bg,$N=F(()=>{ue(),O3(),_s(),io(),{Vector2:lx}=ot,bg=class extends rr{constructor(e){super(e),this._textOptions={},this._createCanvas()}_createCanvas(){this._canvas=Ce.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new ax(this._context),this._finalCanvas=Ce.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}setOption(e,t,r=!0,i=!1){super.setOption(e,t,r,i),e==="fontIdentifier"&&!i&&this.updateFontVariation()}updateFontVariation(){const e=Tr.getVariation(this.getFontIdentifier());return e||Ke.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.setFontVariation(e),e}_applyTextOptions(e={},t=this._context){const{fontSize:r,fontVariation:i,lineHeight:n,textColor:o,alignment:s}=L(L({},this._options),e),{fontStyle:a,fontWeight:l,fontFamily:c}=i.serializeOptions();t.font=`${a} ${l} ${r}px "${c}"`,t.fillStyle=o,t.textBaseline="top",t.textAlign=s||"left"}_buildOutputLines(e){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines()}_renderTextLine(e,t){const r=this.getAlignment(),i=new lx(0,t);switch(r){case"center":i.x=this._canvas.width/2;break;case"right":i.x=this._canvas.width;break}this._context.fillText(e,i.x,i.y)}update(){const e=this.calculateFontStyles();if(e){const{dimensions:t,lines:r}=this._calculateText(e);this._dimensions=t,this._renderText(t,r,e)}}draw(e,t=0,r=0){this.update(),e.drawImage(this._canvas,t,r,this._dimensions.x,this._dimensions.y)}_renderText(e,t,r){this._canvas.width=e.x,this._canvas.height=e.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(r,this._context);for(let i=0;i<t.length;i++){const n=t[i];this._renderTextLine(n,r.topPadding+r.lineHeight*i)}}getFontFamily(){return this.getFontVariation().getFontFamily()}calculateFontStyles(){const e=this.getFontFamily(),t=this.getFontSize(),r=this.getAbsoluteTextHeight(),i=r*this.getLineHeight(),n=r*(this.getLineHeight()-1)/2,o={fontFamily:e,fontSize:t,textHeight:r,lineHeight:i,topPadding:n};return this._textOptions=L({},o),o}getTextMetrics(){return this.getFontVariation().getTextMetrics()}getAbsoluteTextHeight(){const e=this.getFontSize(),t=this.getTextMetrics();if(t){const r=1/t.unitsPerEm*e,i=t.ascender*r,n=t.descender*r;return i+Math.abs(n)}return e*this.getLineHeight()*1.1}_calculateText(e){this._applyTextOptions(e,this._context);const t=new lx;let r=this.getText().split(`
`);for(let n=0;n<r.length;n++){const o=r[n];t.x=Math.max(t.x,this._context.measureText(o).width)}const{lineHeight:i}=e;return t.y=r.length*i,{dimensions:t,lines:r}}getDimensions(){const e=this.calculateFontStyles(),{dimensions:t}=this._calculateText(e);return t}fitMaxHeight(){this.update();const e=this.getDimensions();this.getText().split(`
`),this.getMaxHeight()/e.y}fitMaxWidth(){const e=this.getDimensions().x,t=this.getMaxWidth()/e;this.setFontSize(this.getFontSize()*t),this._textOptions.fontSize=this.getFontSize()}fitInFrame(e){this.setMaxWidth(e.width),this.setMaxHeight(e.height),this.fitMaxWidth(),this.fitMaxHeight()}getSize(){const e=this.getDimensions();return new Di(e.x,e.y)}},bg.prototype.availableOptions={text:{type:"string",default:""},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},fontVariation:{type:"object",default:null},lineHeight:{type:"number",default:1},fontSize:{type:"number",default:22},textColor:{type:"string",default:"black"},strokeStyle:{type:"string",default:"black"},outlineWidth:{type:"number",default:0},textBaseline:{type:"string",default:"alphabetic"},excludeAccents:{type:"boolean",default:!0},maxWidth:{type:"number",default:100},maxHeight:{type:"number",default:0},alignment:{type:"string",default:"left",available:["left","center","right"]}}}),Xd,cx=F(()=>{ue(),A3(),Ld(),$N(),nu(),rx(),Xd=class extends su{_calculateLayoutElements(){const e=this.getWords(),t=this._getTextFrame(),i=this.getAttributes().getFontIdentifier(),n=this.getImageInsets(),o=new Po({text:e.getWord(0),fontIdentifier:i});o.fitWidth(t.width);const s=new bs({text:e.getWord(0),frame:t,font:o});s.setFrame(this._getTextFrameForElement(s));const a=this.getSize();return(this.getSizeToFitContent()||a.height<=1)&&(a.height=n.top+s.getFrame().height+n.bottom),a.height=Math.max(a.height,this.getMinimumHeight()),[s]}_getTextFrameForElement(e){const r=this.getWords().getWord(0),i=this.getAttributes(),n=i.getFontIdentifier(),o=this.getImageInsets(),s=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),a=new bg({text:r,fontIdentifier:n,alignment:i.getAlignment(),lineHeight:1});a.fitInFrame(s);const l=a.getSize();s.height=l.height;let c=l.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(c+=o.top+o.bottom);const h=this._getFrame(),f=i.getAlignment();if(this.getCenteredVertically())s.y=h.height/2-c/2+o.top;else switch(f){case"left":s.y=h.height-c-o.bottom;break;case"center":s.y=h.height/2-c/2+c*this.getCenterOffset(),s.x=(h.width-s.width)/2;break;case"right":s.x=h.width-s.width-o.right;break}return s}render(e){e.save(),this._getLayoutElements().forEach(t=>{let{text:r,frame:i}=t.serializeOptions();const n=this.getAttributes(),o=n.getFontIdentifier(),s=new bg({text:r,fontIdentifier:o,alignment:n.getAlignment(),lineHeight:1,textColor:n.getTextColor().toRGBA()});i=this._getTextFrameForElement(t),s.fitInFrame(i),s.draw(e,i.x,i.y)}),e.restore()}},Xd.prototype.availableOptions=ge(L({},su.prototype.availableOptions),{centerOffset:{type:"number",default:0},sizeToFitContent:{type:"boolean",default:!1},textScaleFactor:{type:"number",default:.95},rowScaleFactor:{type:"number",default:1},minimumHeight:{type:"number",default:0},centeredVertically:{type:"boolean",default:!1}})}),du,qr,fu=F(()=>{ue(),qd(),Bn(),cx(),io(),$l(),jd(),du=class extends rn{constructor(...e){super(...e),this._rowType=lt.Box,this._alignmentRandomizer=new Yt(0),this._isMaskedRandomizer=new Yt(0),this._seedPool.push(this._alignmentRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return[lt.Box.getImagePath()]}_modifiedText(e){return super._modifiedText(e).toLowerCase()}_modifiedLines(e){const t=new Uo;return t.set([e.reduce((r,i)=>`${r}${r===""?"":`
`}${i.joined(1)[0]}`,"")]),[t]}_layoutRows(e,t){const r=super._layoutRows(e,t),i=r[0];if(i&&this.getSquareLayout()){const n=i.getSize();n.height=n.width}return r}getAlignment(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||du.ValidAlignments)}_randomLayoutRow(e,t,r,i){const n=this.getAlignment(),o=this._rowType,s=Tr.getImage(o.getImagePath());i.setAlignment(n);const a=new Xd({words:e,width:r,attributes:i,image:s,imageInsets:o.insetsForWidth(r),capInsets:o.getCapInsets(),backgroundColor:Pe.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===lt.Box&&(a.serverImageSmoothingFix=!0);const l=a.getSize();return this.getSquareLayout()?l.height=l.width:l.height=Math.max(l.height,l.width*o.getMinimumHeightRatio()),a}},qr=du,Ue(qr,"defaultFontIdentifiers",["imgly_font_galano_grotesque_bold"]),Ue(qr,"Alignment",{Left:"left",Center:"center",Right:"right"}),Ue(qr,"ValidAlignments",[du.Alignment.Left,du.Alignment.Center,du.Alignment.Right]),Ue(qr,"identifier","imgly_text_design_masked"),qr.prototype.availableOptions=ge(L({},rn.prototype.availableOptions),{fontIdentifiers:{type:"array",default:qr.defaultFontIdentifiers},squareLayout:{type:"boolean",default:!0}})}),Bl,BN=F(()=>{ue(),qd(),Bn(),fu(),Bl=class extends qr{constructor(...e){super(...e),this._possibleRowTypes=[lt.Badge1,lt.Badge2,lt.Badge3,lt.Badge4],this._rowTypesRandomizer=new Yt(0),this._isMaskedRandomizer=new Yt(0),this._seedPool.push(this._rowTypesRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(e=>e.getImagePath())}_randomLayoutRow(e,t,r,i){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),i.setLineSpacing(.9);const n=super._randomLayoutRow(e,t,r,i);return n.set({textScaleFactor:.9}),n}},Ue(Bl,"defaultFontIdentifiers",["imgly_font_campton_bold"]),Ue(Bl,"identifier","imgly_text_design_masked_badge"),Ue(Bl,"ValidAlignments",[qr.Alignment.Center]),Bl.prototype.availableOptions=ge(L({},qr.prototype.availableOptions),{fontIdentifiers:{type:"array",default:Bl.defaultFontIdentifiers}})}),No,ux=F(()=>{ue(),qd(),Bn(),fu(),No=class extends qr{constructor(...e){super(...e),this._possibleRowTypes=[lt.SpeechBubble1,lt.SpeechBubble3],this._rowTypesRandomizer=new Yt(0),this._isMaskedRandomizer=new Yt(0),this._seedPool.push(this._rowTypesRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(e=>e.getImagePath())}_rowTypes(e){return this._possibleRowTypes}_randomLayoutRow(e,t,r,i){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(e)),i.setLineSpacing(.9);const n=super._randomLayoutRow(e,t,r,i);return n.set({textScaleFactor:1,minimumHeight:r*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),n}},Ue(No,"defaultFontIdentifiers",["imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_roboto_black","imgly_font_roboto_light"]),Ue(No,"identifier","imgly_text_design_masked_speech_bubble"),No.prototype.availableOptions=ge(L({},qr.prototype.availableOptions),{fontIdentifiers:{type:"array",default:No.defaultFontIdentifiers},squareLayout:{type:"boolean",default:!1},alignment:{type:"string",default:"left",available:qr.ValidAlignments}})}),pu,LN=F(()=>{ue(),qd(),fu(),ux(),pu=class extends No{constructor(...e){super(...e),this._possibleRowTypes=[lt.SpeechBubble2,lt.SpeechBubble4,lt.SpeechBubble2,lt.SpeechBubble4,lt.SpeechBubble5],this._possibleRowTypesForMin15=this._possibleRowTypes.slice(0,2),this._possibleRowTypesForMax14=this._possibleRowTypes.slice(2)}_rowTypes(e){return e.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}},Ue(pu,"defaultFontIdentifiers",["imgly_font_permanent_marker"]),Ue(pu,"identifier","imgly_text_design_masked_speech_bubble_comic"),pu.prototype.availableOptions=ge(L({},No.prototype.availableOptions),{fontIdentifiers:{type:"array",default:pu.defaultFontIdentifiers}})}),mu,UN=F(()=>{ue(),cx(),fu(),mu=class extends qr{_modifiedText(e){return super._modifiedText(e).toUpperCase()}_randomLayoutRow(e,t,r,i){const n=this._alignmentRandomizer.pickNext(qr.ValidAlignments);return i.setAlignment(n),new Xd({words:e,width:r,attributes:i,image:null,backgroundColor:Pe.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}},Ue(mu,"defaultFontIdentifiers",["imgly_font_abril_fatface_regular"]),Ue(mu,"identifier","imgly_text_design_multiline"),mu.prototype.availableOptions=ge(L({},qr.prototype.availableOptions),{fontIdentifiers:{type:"array",default:mu.defaultFontIdentifiers}})}),z3,hx,NN=F(()=>{ue(),{Rectangle:z3}=ot,hx=class extends rr{getContentFrame(){const e=this.getFrame().clone(),t=e.width*.1;return e.insetBy(t,t)}intersects(e){return this.getFrame().intersects(e.getFrame())}},hx.prototype.availableOptions={frame:{type:"object",default:new z3}}}),dx,xa,fx=F(()=>{ue(),io(),zl(),D3(),NN(),{Rectangle:dx}=ot,xa=class extends Vd{constructor(...e){super(...e),this._MAX_TRIES=1e3,this._PRECISION=1e3}render(e,t,r,i,n){const{imagePaths:o,relativeParticleSize:s}=this._options;if(o.length<=0)return;const a=t.width/t.height,l=new dx(Math.round(r.left*this._PRECISION),Math.round(r.top*this._PRECISION*a),this._PRECISION,this._PRECISION);l.width-=l.x+Math.round(r.right*this._PRECISION),l.height-=l.y+Math.round(r.bottom*this._PRECISION*a);const c=[];let h=0,f=0;for(;h<this.getParticleCount()&&f<this._MAX_TRIES;){const d=s/2,p=Math.round(d*this._PRECISION),v=Math.round(d*this._PRECISION*a),g=Math.floor(this._PRECISION)-p,m=Math.floor(this._PRECISION)-v,y=n.nextInRange(p,g),_=n.nextInRange(v,m),b=new dx(y-p,_-v,2*p,2*v);!b.intersects(l)&&!this.hasCollision(c,b)&&(c.push(new hx({frame:b})),h+=1),f+=1}for(let d=0;d<c.length;d++){const p=c[d],v=n.pickNext(o),g=Tr.getImage(v),m=n.nextInRange(140,230)/255,y=t.width/this._PRECISION,_=t.height/this._PRECISION,b=p.getContentFrame();b.x*=y,b.y*=_,b.width*=y,b.height*=_;const w=i.clone();w.a=m,Al(e,g,b,w,"source-atop")}}hasCollision(e,t){for(let r=0;r<e.length;r++)if(t.intersects(e[r].getFrame()))return!0;return!1}},xa.prototype.availableOptions=ge(L({},Vd.prototype.availableOptions),{particleCount:{type:"number",default:50},relativeParticleSize:{type:"number",default:.08},imagePaths:{type:"array",default:[]}})}),Yd,jN=F(()=>{ue(),fx(),Yd=class extends xa{},Ue(Yd,"Images",["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"]),Yd.prototype.availableOptions=ge(L({},xa.prototype.availableOptions),{imagePaths:{type:"array",default:[...Yd.Images]},relativeParticleSize:{type:"number",default:.12}})}),Qd,HN=F(()=>{ue(),fx(),Qd=class extends xa{},Ue(Qd,"Images",["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"]),Qd.prototype.availableOptions=ge(L({},xa.prototype.availableOptions),{imagePaths:{type:"array",default:[...Qd.Images]},relativeParticleSize:{type:"number",default:.12}})}),Kd,WN=F(()=>{ue(),fx(),Kd=class extends xa{},Ue(Kd,"Images",["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"]),Kd.prototype.availableOptions=ge(L({},xa.prototype.availableOptions),{imagePaths:{type:"array",default:[...Kd.Images]}})}),wa,on,px=F(()=>{ue(),Bn(),Ln(),no(),ox(),sx(),io(),$l(),jd(),wa=class extends rn{constructor(...e){super(...e),this._relativeInsets=new xt(0,0,0,0),this._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],this._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],this._lineCount=0,this._decorativeRowCreated=!1,this._useImageRowRandomizer=new Yt(0),this._rowTypeRandomizer=new Yt(0),this._lineDecorativeTypeRandomizer=new Yt(0),this._seedPool.push(this._useImageRowRandomizer),this._seedPool.push(this._rowTypeRandomizer),this._seedPool.push(this._lineDecorativeTypeRandomizer)}getImagePaths(){return[...wa.DecoratorImages,...wa.RowImages]}_fontForRow(e,t){const r=t.countNumberOfCharacters();let i=this.getFontIdentifiers();return r<4?i=i.filter(n=>this._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(n)<0):r<5&&(i=i.filter(n=>this._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(n)<0)),i[e%i.length]}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_modifiedLines(e){return this._lineCount=e.length,e}generateLayoutData(e,t){return this._decorativeRowCreated=!1,super.generateLayoutData(e,t)}_randomLayoutRow(e,t,r,i){const n=i.getFontIdentifier();let o=e;switch(n){case"imgly_font_wolesbro":o=new Uo().set(e.getLowerCase());break;case"imgly_font_permanent_marker":o=new Uo().set(e.getUpperCase());break}const s=this.getDecorativeRowsInTheMiddleOnly()&&(t===0||t===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||s)return new Hi({words:o,width:r,attributes:i});this._decorativeRowCreated=!0;const[a,l]=this._randomDecoratorImages();return new _a({words:e,width:r,attributes:i,leftImage:a,rightImage:l})}_layoutRows(e,t){const r=super._layoutRows(e,t);if(!this.getDecorationsVisible())return r;const i=.0625*t,n=new Ii({width:t,height:i,image:Tr.getImage(this._rowTypeRandomizer.pickNext(wa.RowImages))}).layout(),o=new Ii({width:t,height:i,image:Tr.getImage(this._rowTypeRandomizer.pickNext(wa.RowImages))}).layout();return[n,...r,o]}_randomDecoratorImages(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?wa.DecoratorImages.slice(0,2).map(e=>Tr.getImage(e)):wa.DecoratorImages.slice(2).map(e=>Tr.getImage(e))}},on=wa,Ue(on,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),Ue(on,"identifier","imgly_text_design_sunshine"),Ue(on,"RowImages",[Ii.RowImages.decorative1,Ii.RowImages.decorative2,Ii.RowImages.decorative3,Ii.RowImages.decorative4]),Ue(on,"DecoratorImages",["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"]),on.prototype.availableOptions=ge(L({},rn.prototype.availableOptions),{fontIdentifiers:{type:"array",default:on.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3*4},decorationsVisible:{type:"boolean",default:!0},decorativeRowsInTheMiddleOnly:{type:"boolean",default:!1}})}),Sa,Ca,VN=F(()=>{ue(),jN(),HN(),WN(),Bn(),Ln(),io(),px(),Sa=class extends on{constructor(...e){super(...e),this._relativeInsets=new xt(.3,.3,.3,.3),this._backgroundRandomizer=new Yt(0),this._decoTypeRandomizer=new Yt(0),this._seedPool.push(this._backgroundRandomizer),this._seedPool.push(this._decoTypeRandomizer)}getImagePaths(){return[...on.RowImages,...Ce.Array.flatten(Sa.Backgrounds.map(e=>e.getImagePaths())),...Sa.DecoratorImages]}_getBackground(){return this._backgroundRandomizer.pickNext(Sa.Backgrounds)}_randomDecoratorImages(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return Sa.DecoratorImages.slice(0,2).map(e=>Tr.getImage(e));case 1:case 2:return Sa.DecoratorImages.slice(2).map(e=>Tr.getImage(e));default:return Ke.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),Sa.DecoratorImages.slice(2).map(e=>Tr.getImage(e))}}},Ca=Sa,Ue(Ca,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),Ue(Ca,"identifier","imgly_text_design_particles"),Ue(Ca,"Backgrounds",[new Yd,new Qd,new Kd]),Ue(Ca,"DecoratorImages",["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"]),Ca.prototype.availableOptions=ge(L({},on.prototype.availableOptions),{fontIdentifiers:{type:"array",default:Ca.defaultFontIdentifiers},decorationsVisible:{type:"boolean",default:!1},decorativeRowsInTheMiddleOnly:{type:"boolean",default:!0}})}),gu,GN=F(()=>{ue(),Bn(),Ln(),C3(),jd(),gu=class extends rn{constructor(...e){super(...e),this._relativeInsets=new xt(.1,0,0,0),this._rowTypeRandomizer=new Yt(0),this._seedPool.push(this._rowTypeRandomizer)}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_randomLayoutRow(e,t,r,i){const n=super._randomLayoutRow(e,t,r,i);return n.setShearingAngle(this.getShearingAngle()),n}_layoutRows(e,t){const r=super._layoutRows(e,t),i=Ce.values(Un.FormType),n=30,o=new Un({width:t,height:n,type:this._rowTypeRandomizer.pickNext(i),shearingAngle:this.getShearingAngle()}).layout(),s=new Un({width:t,height:n,type:this._rowTypeRandomizer.pickNext(i),shearingAngle:this.getShearingAngle()}).layout();return[o,...r,s]}},Ue(gu,"defaultFontIdentifiers",["imgly_font_campton_bold"]),Ue(gu,"identifier","imgly_text_design_rotated"),gu.prototype.availableOptions=ge(L({},rn.prototype.availableOptions),{fontIdentifiers:{type:"array",default:gu.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3},shearingAngle:{type:"number",default:-.1}})}),mx,qN=F(()=>{Ln(),sx(),io(),px(),mx=class extends on{constructor(...e){super(...e),this._relativeInsets=new xt(0,.3,0,.3)}_layoutRows(e,t){const r=super._layoutRows(e,t);if(!this.getDecorationsVisible())return r;const i=25,n=new Ii({width:t,height:i,image:Tr.getImage(this._rowTypeRandomizer.pickNext(on.RowImages))}).layout(),o=new Ii({width:t,height:i,image:Tr.getImage(this._rowTypeRandomizer.pickNext(on.RowImages))}).layout();return[n,...r,o]}},Ue(mx,"identifier","imgly_text_design_sunshine-v3_1_0")}),vu,XN=F(()=>{ue(),qd(),fu(),ux(),vu=class extends No{constructor(...e){super(...e),this._possibleRowTypes=[lt.Watercolor1,lt.Watercolor2,lt.Watercolor3]}},Ue(vu,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"]),Ue(vu,"identifier","imgly_text_design_watercolor"),vu.prototype.availableOptions=ge(L({},No.prototype.availableOptions),{fontIdentifiers:{type:"array",default:vu.defaultFontIdentifiers},alignment:{type:"string",default:qr.Alignment.Center,available:qr.ValidAlignments}})}),$3,Zd,B3,YN=F(()=>{ue(),Bn(),rx(),cx(),_s(),zl(),{Rectangle:$3}=ot,Zd=1e3,B3=class{constructor(){this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new Yt}createLayout(e,t,r){this._layout=e,this._text=t,this._seed=r,e.seed(r),this._layoutData=e.generateLayoutData(t,Zd)}calculateAspect(){return this._layoutData?this._layoutData.getSize().aspect():(Ke.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}draw(e,t,r,i){const n=this._layoutData;if(this._layoutData){const o=new Di(Zd,Zd/t.aspect()),s=t.width/Zd,a=n.getRelativeInsets().clone().scale(o.width),l=n.getRelativeLineSpacing()*o.width;let c=a.top;e.save(),this.randomizer.seed(this._seed);const h=n.getBackground();h&&h.render(e,t,n.getRelativeInsets(),i?Pe.WHITE:r,this.randomizer),e.scale(s,s),n.getRows().forEach(f=>{e.save();const d=f.getAttributes();if(e.transform(1,f.getShearingAngle(),0,1,a.left,c),d.setTextColor(i?Pe.WHITE:r.clone()),d.setTintColor(i?Pe.WHITE:r.clone()),(f instanceof su||f instanceof Xd)&&(f.setBackgroundColor(i?Pe.WHITE:r.clone()),f.setIsUsedInInvertedLayout(i)),this._debugMode&&(f._debugMode=!0),f.willRender(e),f.render(e),f.didRender(e),this._debugMode){const p=f._getFrame(),v=f._getTextFrame();ou(e,p,Pe.GREEN),ou(e,v,Pe.BLUE),f._getLayoutElements().forEach(g=>{const m=g.getFrame(),y=f._getTextFrameForElement(g);ou(e,m,new Pe(1,1,0)),ou(e,y,new Pe(0,1,1))})}c+=f.getSize().height+l,e.restore()}),this._debugMode&&ou(e,new $3(0,0,o.width,o.height),Pe.RED),e.restore()}}}}),ws,yu,xg,QN=F(()=>{ue(),Od(),Hd(),mN(),k3(),gN(),E3(),vN(),I3(),_N(),fu(),BN(),ux(),LN(),UN(),VN(),GN(),px(),qN(),XN(),Bn(),_s(),io(),YN(),{Vector2:ws}=ot,yu=class extends ru{constructor(e,t){super(e,t),this._isDisposed=!1,this._renderer=new B3,this._canvas=Ce.createCanvas(),this._context=this._canvas.getContext("2d"),this._texture=_e.Texture.fromCanvas(this._canvas),this._sprite.setTexture(this._texture),this._aspect=1,this._isLayoutDirty=!0,this.getSeed()<0&&this.setSeed(Yt.TimeSeed())}seed(e){this.setSeed(e||Yt.TimeSeed()),this._isLayoutDirty=!0}_updateLayout(){const e=this.getLayout();return e?(this._renderer.createLayout(e,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}applyTransform(e){super.applyTransform(e);const t={};this._options.dimensions&&(t.width=e.applyToRelativeSize(this.getWidth())),this.set(t,!1)}applyFlip(e){super.applyFlip(e);let{rotation:t}=this._options;switch(e){case"horizontal":t+=(Math.PI-t)*2,this.setRotation(t);break;case"vertical":t+=(Math.PI/2-t)*2,this.setRotation(t);break}}update(e,t){const r=this._isLayoutDirty;if(this._isDisposed||r&&!this._updateLayout())return;const i=this.getWidth()*t.min()/e.getTextureScale(),n=i/this._aspect,o=new ws(i,n),s=new ws(Math.round(i*2),Math.round(n*2)).clamp(new ws(1,1),new ws(1/0,1/0)),a=e.getRenderer(),l=a.getMaxDimensions()||1/0;s.x>l&&(s.x=l,s.y=Math.round(s.x/this._aspect)),s.y>l&&(s.y=l,s.x=Math.round(s.y*this._aspect));const c=Ce.ensureCanvasDimensions(this._canvas,s);(r||c)&&(this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new Di(s.x,s.y),this.getColor(),this.getInverted()),this.setDimensions(o),this._texture.getBaseTexture().update(),a.isOfType("webgl")&&a.updateTexture(this._texture.getBaseTexture())),super.update(e,t),this._applyFlip()}_applyFlip(){const e=this._sprite.getScale(),{flipHorizontally:t,flipVertically:r}=this._options;(t&&e.x>0||!t&&e.x<0)&&(e.x*=-1),(r&&e.y>0||!r&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}_optionEquals(e,t){if(e==="layout"){const{layout:r}=this._options;return!(!r&&t||!t&&r||!t.constructor||!r.constructor||r.constructor.identifier!==t.constructor.identifier)}return super._optionEquals(e,t)}serializeOptions(e,t=!1){if(e&&this.getPadding()<0){const i=e.indexOf("padding");i>-1&&e.splice(i,1)}const r=super.serializeOptions(e,t);return e||(r.type="textdesign"),r}_getTexture(){return this._texture}canBeFlippedHorizontally(){return!1}canBeDuplicated(){return!0}canMaskCanvas(){return!0}canAdjustPadding(){return!0}dispose(){this._isDisposed=!0,this._texture.dispose(),this._sprite.dispose()}},yu.Layouts={TextDesignBlocks:nn,TextDesignBlocksCondensed:au,TextDesignBlocksLight:ya,TextDesignCelebrate:oo,TextDesignCelebrateSimple:uu,TextDesignEqualWidth:ba,TextDesignEqualWidthFat:hu,TextDesignMasked:qr,TextDesignMaskedBadge:Bl,TextDesignMaskedSpeechBubble:No,TextDesignMaskedSpeechBubbleComic:pu,TextDesignMultiline:mu,TextDesignWatercolor:vu,TextDesignSunshine:on,TextDesignParticles:Ca,TextDesignRotated:gu},yu.LegacyLayouts={TextDesignBlocksLightV310:cu,TextDesignSunshineV310:mx},yu.AssetManager=Tr,yu.prototype.availableOptions={id:{type:"string",default:()=>Ce.getUUID()},position:{type:"vector2",default:new ws(.5,.5)},dimensions:{type:"vector2",default:ws.NULL},anchor:{type:"vector2",default:new ws(0,0)},pivot:{type:"vector2",default:new ws(.5,.5)},rotation:{type:"number",default:0},flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1},layout:{type:"object",default:null,setter(e){return this._isLayoutDirty=!0,e}},text:{type:"string",default:"",setter(e){return this._isLayoutDirty=!0,e}},color:{type:"color",default:Pe.BLACK,setter(e){return this._isLayoutDirty=!0,e}},padding:{type:"number",default:.01,minValue:.01},width:{type:"number",default:.8},inverted:{type:"boolean",default:!1,setter(e){return this._isLayoutDirty=!0,e}},seed:{type:"number",default:-1}},xg=yu}),wg,Sg,Cg,KN=F(()=>{ue(),Od(),A3(),{Vector2:wg}=ot,Sg=class extends ru{constructor(...e){super(...e),this._textRenderer=new P3(this,this._operation),this._textRenderer.rotation=this.getRotation(),this._sprite.setTexture(this._textRenderer.getFinalTexture()),this._hitTestSprite.setTexture(this._textRenderer.getTexture())}serializeOptions(e,t=!1){const r=super.serializeOptions(e,t);return e||(r.type="text"),r}getDOMStyle(e,t){const r=this.getFontSize()*t.y;return{fontWeight:this._options.fontWeight,fontSize:`${r}px`,fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:`${this.getAbsoluteTextHeight(t)*this.getLineHeight()}px`,color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}getAbsoluteTextHeight(e){const t=this.getFontSize()*e.y,r=this.getTextMetrics();if(r){const i=1/r.unitsPerEm*t,n=r.ascender*i,o=r.descender*i;return n+Math.abs(o)}return t*this.getLineHeight()*1.1}getDimensions(e,t){return this._textRenderer.getDimensions(e,t)}applyFlip(e){super.applyFlip(e);let{rotation:t}=this._options;switch(e){case"horizontal":t+=(Math.PI-t)*2,this.setRotation(t);break;case"vertical":t+=(Math.PI/2-t)*2,this.setRotation(t);break}}applyTransform(e){super.applyTransform(e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)}applyRotation(e){super.applyRotation(e);const t=(e+360)%360,r=this._operation.getInputDimensions();(t===90||t===270)&&(this.setMaxWidth(this.getMaxWidth()/r.x*r.y),this.setFontSize(this.getFontSize()/r.y*r.x))}setOption(e,t){const{flipHorizontally:r,flipVertically:i}=this._options;if(e==="rotation"){let n=t;r&&(n=Math.PI*2-n),i&&(n=Math.PI*2-n),this._options.rotation=n,this._textRenderer&&(this._textRenderer.rotation=n),this._rotation=n,this.emit("update");return}super.setOption(e,t)}getOption(e){return e==="rotation"?this._rotation:super.getOption(e)}getHitTestDisplayObject(){return this._hitTestSprite}update(e,t){if(this._sprite.setVisible(this._options.visible),!this._options.visible)return;this._textRenderer.update(e,t);const r=this._textRenderer.getFinalTexture();r.getBaseTexture().update();const n=e.getRenderer();n.isOfType("webgl")&&n.updateTexture(r.getBaseTexture()),super.update(e,t),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform(),this._applyFlip()}_applyFlip(){const e=this._sprite.getScale(),{flipHorizontally:t,flipVertically:r}=this._options;(t&&e.x>0||!t&&e.x<0)&&(e.x*=-1,this.setRotation(this._rotation)),(r&&e.y>0||!r&&e.y<0)&&(e.y*=-1,this.setRotation(this._rotation)),this._sprite.setScale(e)}_getTexture(){return this._textRenderer.getFinalTexture()}dispose(){super.dispose(),this._textRenderer.dispose(),this._hitTestSprite.dispose(),this._sprite.dispose()}canBeFlippedHorizontally(){return!1}canAdjustPadding(){return!1}},Sg.prototype.availableOptions={id:{type:"string",default:()=>Ce.getUUID()},fontSize:{type:"number",default:.1},characterSpacing:{type:"number",default:0},lineHeight:{type:"number",default:1.1},fontIdentifier:{type:"string"},fontFamily:{type:"string",default:"Times New Roman"},fontWeight:{type:"*",default:"normal"},fontStyle:{type:"string",default:"normal"},textMetrics:{type:"object",default:null},outlineWidth:{type:"number",default:0},outlineColor:{type:"color",default:Pe.BLACK},alignment:{type:"string",default:"left",available:["left","center","right"]},verticalAlignment:{type:"string",default:"top",available:["top","center","bottom"]},color:{type:"color",default:new Pe(1,0,0,1)},backgroundColor:{type:"color",default:Pe.TRANSPARENT},position:{type:"vector2",default:new wg(.5,.5)},anchor:{type:"vector2",default:new wg(0,0)},pivot:{type:"vector2",default:new wg(.5,.5)},rotation:{type:"number",default:0},text:{type:"string",required:!0},maxWidth:{type:"number",default:.5},maxHeight:{type:"number",default:0},visible:{type:"boolean",default:!0},flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1}},Sg.type="text",Cg=Sg}),kg,Ss,L3,ZN=F(()=>{ue(),Od(),s3(),dN(),QN(),KN(),{Vector2:kg}=ot,Ss=class extends Gr{constructor(...e){super(...e),this.setSmoothDownscaling(this._sdk.getOptions().smoothDownscaling),this._onSpriteUpdate=this._onSpriteUpdate.bind(this),this._maskCanvas=Ce.createCanvas(),this._options.sprites.slice().forEach(r=>{this.removeSprite(r),this.addSprite(r)})}getSpritesOfType(e){return this._options.sprites.filter(t=>t instanceof e)}rotate(e){this._options.sprites.forEach(t=>{t.applyRotation(e)})}flip(e){this._options.sprites.forEach(t=>{t.applyFlip(e)})}_onSpriteUpdate(e,t){this.emit("update",this),this.setDirty(!0)}_applyRotation(e,t){this._options.sprites.forEach(r=>r.applyRotation(e,t))}transform(e){this._options.sprites.forEach(t=>t.applyTransform(e))}scale(e){this._options.sprites.forEach(t=>t.applyScale(e))}serializeOption(e,t=!1){return e==="sprites"?this._options.sprites.map(r=>r.serializeOptions(void 0,t)):super.serializeOption(e,t)}createSticker(e){return new pg(this,e)}createText(e){return new Cg(this,e)}createBrush(e){return new iu(this,e)}createTextDesign(e){return new xg(this,e)}addSprite(e){this._options.sprites.push(e);const t=this.getSmoothDownscaling();e.setSmoothDownscaling&&e.setSmoothDownscaling(t),this._container.addChild(e.getDisplayObject()),this.setDirty(!0),e.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}removeSprite(e){const{sprites:t}=this._options,r=t.indexOf(e);return r!==-1?(e.off("update",this._onSpriteUpdate),this._container.removeChild(e.getDisplayObject()),t.splice(r,1),this.setDirty(!0),!0):!1}_getOrientatedStageSize(){const e=this._sdk.getSprite().getTexture().getFrame(),t=this._sdk.getOperationsStack().getByIdentifier("orientation");if(t){const i=t?t.getRotation():0;return i===270||i===90?new kg(e.height,e.width):new kg(e.width,e.height)}const r=this._sdk.getOperationsStack().getByIdentifier("output");return r?r.getOutputResolution():new kg(e.width,e.height)}_render(e){const t=this._container,{sprites:r}=this._options,i=e.getDimensions().clone().floor();let n=new _e.Container;return n.addChild(this._sprite),Promise.all(r.map(o=>o.validateSettings())).then(()=>{r.forEach(o=>o.update(this._sdk,i))}).then(()=>{this._renderTexture.clear(),r.forEach(o=>{o.getInverted&&o.getInverted()?(this._renderTexture.render(n),this._renderTexture.render(this._renderMaskedSprite(o.getDisplayObject(),o.getColor?o.getColor():Pe.WHITE,o.getPadding?o.getPadding():-1)),n=new _e.Container):n.addChild(o.getDisplayObject())}),this._renderTexture.render(n),t.addChild(this._sprite),r.forEach(o=>t.addChild(o.getDisplayObject()))})}_renderMaskedSprite(e,t,r){const i=this._maskCanvas,n=e.getWorldTransform(),o=this._getOrientatedStageSize();Ce.ensureCanvasDimensions(i,o);const s=i.getContext("2d");if(s.clearRect(0,0,i.width,i.height),s.save(),s.fillStyle=t.toRGBA(),r<0)s.fillRect(0,0,o.x,o.y);else{const c=Math.abs(e.getWidth()/e.getScale().x),h=Math.abs(e.getHeight()/e.getScale().y),f=c*r;s.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),s.fillRect(-f,-f,c+f*2,h+f*2)}s.restore(),s.save(),s.globalCompositeOperation="destination-out",e._renderCanvas({getCurrentRenderTarget:()=>({getPixelRatio:()=>1}),beforeDraw:c=>{const h=e.getWidth(),f=e.getHeight(),d=e.getScale(),p=d.x<0,v=d.y<0;c.translate(h,f),c.scale(p?-1:1,v?-1:1),c.translate(-h,-f)},getContext:()=>s}),s.restore();const a=new _e.Container,l=new _e.Sprite(_e.Texture.fromCanvas(i));return a.addChild(l),a}takeSpriteToFront(e){const{sprites:t}=this._options,r=t.indexOf(e);if(r===-1)return;Ce.moveArrayItem(t,r,t.length-1);const i=e.getDisplayObject();this._container.removeChild(i),this._container.addChild(i),this.setDirty(!0)}getSpritesAtPosition(e,t){const r=[];this._options.sprites.forEach(c=>c.update(this._sdk,t));const i=this._sdk.getSprite(),n=i.getWorldTransform().applyInverseToVector(e),{width:o,height:s}=i.getTexture().getFrame(),a=i.getAnchor().clone().multiply(-o,-s);n.subtract(a);const l=this._options.sprites.slice(0).reverse();for(let c=0,h=l.length;c<h;c++){const f=l[c];f.getHitTestDisplayObject().isAtPosition(n)&&r.push(f)}return r}setDirtyForRenderer(e,t,r){super.setDirtyForRenderer(e,t,r),this._options.sprites.forEach(i=>{i.setDirtyForRenderer(e,t,r)})}dispose(){super.dispose(),this._options.sprites.forEach(e=>{e.dispose()})}},Ss.StickerSprite=pg,Ss.TextSprite=Cg,Ss.BrushSprite=iu,Ss.TextDesignSprite=xg,Ss.identifier="sprite",Ss.prototype.availableOptions={sprites:{type:"array",default:[],setter(e,t){return e=e.map((r,i)=>{if(r instanceof ru)return r;const n=L({},r);switch(delete n.type,r.type){case"text":return new Cg(this,n);case"sticker":return new pg(this,n);case"brush":return new iu(this,n);case"textdesign":return new xg(this,n);default:return Ke.error(this.constructor.name,`Invalid sprite type: ${r.type}`),null}}),t||(this._options.sprites&&this._options.sprites.slice().forEach(i=>{i.dispose(),this.removeSprite(i)}),e.forEach(r=>{this.addSprite(r)})),e}},smoothDownscaling:{type:"boolean",default:!1}},Ht.Operations.SpriteOperation=Ss,L3=Ss}),gx,U3,N3,JN=F(()=>{ue(),{Vector2:gx}=ot,U3=class{constructor(e,t){this._options=t,this._oldOptions={start:e.getStart().clone(),end:e.getEnd().clone(),rotation:e.getRotation(),textureScale:e.getTextureScale()},this._inputDimensions=e.getInputDimensions(!1),this._rotationDelta=t.rotation-e.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=t.end.clone().subtract(t.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(t.start).multiply(this._inputDimensions),this._scaleRatio=e.calculateScale(t.rotation)/e.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/e.getTextureScale()}applyToRelativePoint(e){const t=this._oldOptions.start,r=this._oldOptions.end,n=t.clone().add(r.clone().subtract(t).divide(2)).multiply(this._inputDimensions),o=e.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),a=n.clone().add(o).clone().subtract(this._inputDimensions.clone().divide(2)),l=new gx(a.x*this._deltaCos-a.y*this._deltaSin,a.x*this._deltaSin+a.y*this._deltaCos),c=this._inputDimensions.clone().divide(2).add(l),h=this._options.start.clone().multiply(this._inputDimensions);return c.clone().subtract(h).divide(this._newAbsoluteSize)}applyToRelativeSize(e){return e*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}applyToDimensions(e){return e=e.clone().multiply(this._scaleRatio),this._options.textureScale&&e.multiply(this._textureScaleFactor),e}scaleSize(e,t="y"){return e/this._sizeFactor[t]}applyToRotation(e){return(e+this._rotationDelta)%(Math.PI*2)}invert(){const e=this._options.start.clone(),t=this._options.end.clone(),r=this._inputDimensions,i=-this._rotationDelta,n=Math.cos(i),o=Math.sin(i),s=this._oldAbsoluteSize,a=this._newAbsoluteSize,l=e.clone().subtract(t).multiply(r),c=1/this._scaleRatio,h=new gx(1/this._sizeFactor.x,1/this._sizeFactor.y),f=1/this._textureScaleFactor,d=this._oldOptions;return this._oldOptions=this._options,this._options=d,this._inputDimensions=r,this._rotationDelta=i,this._deltaCos=n,this._deltaSin=o,this._oldAbsoluteSize=a,this._newAbsoluteSize=s,this._absoluteStartDiff=l,this._scaleRatio=c,this._sizeFactor=h,this._textureScaleFactor=f,this}},N3=U3}),Tg,_u,j3,ej=F(()=>{ue(),JN(),{Vector2:Tg}=ot,_u=class extends Gr{_render(e){this._sprite.setRotation(0);const t=e.getDimensions(),{start:r,end:i,rotation:n,textureScale:o}=this._options,a=i.clone().subtract(r).clone().divide(2),l=r.clone().add(a),h=this.calculateScale()*o,f=t.clone().multiply(h).multiply(a);return this._sprite.setAnchor(l),this._sprite.setRotation(n),this._sprite.setScale(h,h),this._sprite.setPosition(f),this._renderTexture.render(this._container),Promise.resolve()}calculateScale(e=this._options.rotation){const t=this.getInputDimensions(!1),r=new Tg(Math.abs(t.x*Math.cos(e))+Math.abs(t.y*Math.sin(e)),Math.abs(t.x*Math.sin(e))+Math.abs(t.y*Math.cos(e))),i=t.clone().subtract(r.clone()).divide(2).abs();let n=1;return i.y>i.x?n=i.y*2/t.y+1:n=i.x*2/t.x+1,n}getNewDimensions(e){const{start:t,end:r,textureScale:i}=this._options,n=this.calculateScale();return e.clone().multiply(i*n).multiply(r.clone().subtract(t)).round()}flip(e){const{start:t,end:r}=this._options,i=t.clone();e==="horizontal"?(t.set(1-r.x,t.y),r.set(1-i.x,r.y)):e==="vertical"&&(t.set(t.x,1-r.y),r.set(r.x,1-i.y))}rotate(e){const{start:t,end:r}=this._options,i=(e+360)%360,n=Math.floor(i/90);for(let o=0;o<n;o++){const s=t.clone();t.set(1-r.y,s.x),r.set(1-s.y,r.x)}}_onBeforeExport(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}_onAfterExport(){this.setEnabled(this._wasEnabledBeforeExport,!0)}},_u.identifier="transform",_u.prototype.availableOptions={start:{type:"vector2",default:new Tg(0,0)},end:{type:"vector2",default:new Tg(1,1)},textureScale:{type:"number",default:1},rotation:{type:"number",default:0}},_u.TransformChange=N3,Ht.Operations.TransformOperation=_u,j3=_u}),Jd,H3,tj=F(()=>{Jt(),ue(),Qc(),Jd=class extends Gr{constructor(...e){super(...e),this._watermarkImage=null,this._watermarkTexture=null,this._loadWatermarkImage=()=>{if(!this._watermarkImage){if(!(this._options.watermarkURI instanceof window.Image)){const t={value:this._options.crossOrigin,cors:!0};return ds.loadImage(this._options.watermarkURI,t).then(r=>{this._watermarkImage=r})}this._watermarkImage=this._options.watermarkURI}return Promise.resolve()},this._setWatermarkalignment=(t,r)=>{const i=Math.min(r.x,r.y)*Ce.clamp(this._options.inset,0,1);switch(this._options.alignment){case"center":this._watermarkSprite.setPosition(new Qe(r.x-t.x,r.y-t.y).divide(2));break;case"top-left":this._watermarkSprite.setPosition(new Qe(i,i));break;case"top-right":this._watermarkSprite.setPosition(new Qe(r.x-t.x-i,i));break;case"bottom-left":this._watermarkSprite.setPosition(new Qe(i,r.y-t.y-i));break;case"bottom-right":this._watermarkSprite.setPosition(new Qe(r.x-t.x-i,r.y-t.y-i));break;default:this._watermarkSprite.setPosition(new Qe(0,0));break}},this._watermarkSprite=new _e.Sprite,this._watermarkSprite.setAnchor(0,0),this._container.addChild(this._watermarkSprite)}_render(e){const{alpha:t,size:r}=this._options;return this._loadWatermarkImage().then(()=>{if(this._watermarkImage){this._watermarkTexture||(this._watermarkTexture=_e.Texture.fromImage(this._watermarkImage),this._watermarkSprite.setTexture(this._watermarkTexture));const i=e.getDimensions(),{width:n,height:o}=this._watermarkImage,s=Ce.resizeVectorToFit(new Qe(n,o),i.clone().multiply(Ce.clamp(r,0,1)));this._setWatermarkalignment(s,i),this._watermarkSprite.setWidth(s.x),this._watermarkSprite.setHeight(s.y),this._watermarkSprite.setAlpha(t),this._renderTexture&&this._renderTexture.render(this._container)}return Promise.resolve()})}dispose(){super.dispose(),this._watermarkSprite.dispose()}},Jd.identifier="watermark",Jd.prototype.availableOptions={watermarkURI:{type:"string",required:!0},alignment:{type:"string",default:"top-right"},inset:{type:"number",default:"0.05"},size:{type:"number",default:"0.2"},alpha:{type:"number",default:1},crossOrigin:{type:"string",default:"anonymous"}},Ht.Operations.WatermarkOperation=Jd,H3=Jd}),W3,rj=F(()=>{ue(),E7(),I7(),NU(),jU(),HU(),qU(),QU(),JU(),eN(),tN(),rN(),oN(),hN(),ZN(),ej(),tj(),W3=[w5,C5,PI,zI,LI,NI,HI,VI,XI,QI,a3,L3,j3,H3,GI,AI],Ht.AllOperations=W3}),Cs=F(()=>{rj(),qm(),qm()}),V3,ij=F(()=>{V3=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}}]},{fontFamily:"Archivo",variations:[{identifier:"imgly_font_archivo_black",fontWeight:"normal",filePath:"fonts/imgly_font_archivo_black.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_bungee_inline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_campton_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Carter",variations:[{identifier:"imgly_font_carter_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_carter_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}}]},{fontFamily:"Codystar",variations:[{identifier:"imgly_font_codystar",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_codystar.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}}]},{fontFamily:"Fira Sans",variations:[{identifier:"imgly_font_fira_sans_regular",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_fira_sans_regular.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Krona One",variations:[{identifier:"imgly_font_krona_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_krona_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}}]},{fontFamily:"Kumar One Outline",variations:[{identifier:"imgly_font_kumar_one_outline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_kumar_one_outline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Molle",variations:[{identifier:"imgly_font_molle",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_molle.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}}]},{fontFamily:"Monoton",variations:[{identifier:"imgly_font_monoton",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_monoton.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}}]},{fontFamily:"Nixie One",variations:[{identifier:"imgly_font_nixie_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_nixie_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}}]},{fontFamily:"Notable",variations:[{identifier:"imgly_font_notable",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_notable.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}}]},{fontFamily:"Oswald SemiBold",variations:[{identifier:"imgly_font_oswald_semi_bold",fontWeight:600,fontStyle:"normal",filePath:"fonts/imgly_font_oswald_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}}]},{fontFamily:"Palanquin Dark SemiBold",variations:[{identifier:"imgly_font_palanquin_dark_semi_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_palanquin_dark_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}}]},{fontFamily:"Poppins",variations:[{identifier:"imgly_font_poppins",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_poppins.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_permanent_marker.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sancreek",variations:[{identifier:"imgly_font_sancreek",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sancreek.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}}]},{fontFamily:"Stint Ultra Expanded",variations:[{identifier:"imgly_font_stint_ultra_expanded",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_stint_ultra_expanded.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}}]},{fontFamily:"VT323",variations:[{identifier:"imgly_font_vt323",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_vt323.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Yeseva One",variations:[{identifier:"imgly_font_yeseva_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_yeseva_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}}]}]}),G3,nj=F(()=>{G3=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_black.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_light.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sue Ellen Francisco",variations:[{identifier:"imgly_font_sue_ellen_francisco",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sue_ellen_francisco.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}]}]}),q3,oj=F(()=>{q3=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:!1,lockDimensions:!0},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}]}),vx,X3,sj=F(()=>{Cs(),ij(),nj(),oj(),vx=[],typeof Ht.Operations.SpriteOperation!="undefined"&&vx.push(Ht.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush),X3={TRANSFORM_RATIO_CATEGORIES:q3,FONTS:V3,TEXT_DESIGN_FONTS:G3,BRUSHES:vx}}),Y3,Q3,aj=F(()=>{Om(),Y3=ge(L({},Fm),{LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"}),Q3=Y3}),ai,lj=F(()=>{sj(),aj(),ai={EVENTS:Q3,DEFAULTS:X3}});function cj(){const{userAgent:e,appVersion:t}=navigator;return t.indexOf("MSIE")!==-1?t.match(/MSIE\s+?([0-9]+)/i)[1]:e.indexOf("Trident")!==-1?e.match(/rv:([0-9]+)/i)[1]:!1}var K3,uj=F(()=>{K3={getIEVersion:cj}}),Z3,ef,J3,jo,hj=F(()=>{Cs(),Yh(),Do(),Eo(),uj(),Z3=Ht.Utils,{Vector2:ef}=Ht.Math,J3={getInnerDimensionsForElement(e){const t=new ef(e.offsetWidth,e.offsetHeight),r=window.getComputedStyle(e,null);return t.x-=parseInt(r.getPropertyValue("padding-left"),10),t.x-=parseInt(r.getPropertyValue("padding-right"),10),t.y-=parseInt(r.getPropertyValue("padding-top"),10),t.y-=parseInt(r.getPropertyValue("padding-bottom"),10),t},getEventPosition(e){let t=e.clientX,r=e.clientY;if(e.type.indexOf("touch")!==-1){if(!e.touches.length)return;t=e.touches[0].clientX,r=e.touches[0].clientY}return new ef(t,r)},createTransparentPatternCanvas(){const e=document.createElement("canvas"),t=e.getContext("2d");return e.width=10,e.height=10,t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.fillStyle="#cccccc",t.fillRect(0,0,e.width/2,e.height/2),t.fillRect(e.width/2,e.height/2,e.width,e.height),e},supportsMSBlob(){const e=document.createElement("canvas"),t=typeof e.msToBlob!="undefined";return Nr(e),t},translate(e,t,r={}){let i=this.fetch(e,t);if(!i)return Ke.info("Utils#translate",`Unable to translate \`${t}\``),null;for(const n in r)i=i.replace(`\${${n}}`,r[n]);return i},fetch(e,t,r){t=t.replace(/\[(\w+)]/g,".$1"),t=t.replace(/^\./,"");const i=t.split(".");for(let n=0;n<i.length;n++){const o=i[n];if(e=e[o],!e)break}return typeof e=="undefined"?!1:e},isMobile(){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},select(e,t,r=null){r||(r=n=>n);const i=[];return t.forEach(n=>{e.forEach(o=>{r(o)===n&&i.push(o)})}),i},getJSONP(e){return new Uc(e).load()},cloneCategories(e,t){return e.map(r=>(r=Z3.clone(r),r[t]=r[t].slice(0),r))},mergeCategories(e,t,r){e=this.cloneCategories(e,r);let i=null;return t.forEach(n=>{e.forEach(o=>{n.identifier===o.identifier&&(i=o)}),i?i[r]=i[r].concat(n[r]):e.push(n)}),e},wrapFiltersInCategories(e,t){return e.map(r=>{let i=r;return t in i||(i={identifier:`imgly_filters_wrapped-${r.identifier}`,displayFlat:!0,[t]:[r]}),i})},getStyleObject(e){const t=window.getComputedStyle(e),r={};for(const i in t){const n=t.getPropertyValue(i),o=i.replace(/-([a-z])/g,(s,a)=>a.toUpperCase());n!==""&&(r[o]=n)}return r},styleElement(e,t){for(const r in t)e.style[r]=t[r]},debounce(e,t,r){let i;return function(...n){const o=()=>{i=null,r||e.apply(this,n)},s=r&&!i;clearTimeout(i),i=setTimeout(o,t),s&&e.apply(this,n)}},getScrollbarWidth(){const e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const t=e.offsetWidth;e.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",e.appendChild(r);const i=r.offsetWidth;return e.parentNode.removeChild(e),t-i},findIntegerFraction(e,t=100){let r=Number.MAX_VALUE,i=0,n=0,o=1,s=1;for(let a=0;a<t;a++){const l=o/s-e;if(l<0)o++;else if(l>0)s++;else return new ef(o,s);const c=Math.abs(o/s-e);c<r&&(r=c,i=o,n=s)}return new ef(i,n)},toFixed(e,t=2){const r=e.toFixed(t);return parseFloat(r)},capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},flipObject(e){const t={};for(const r in e)t[e[r]]=r;return t},Browser:K3},jo=J3}),eR,hr,Eg,Er,Ll,yx,et,Tt,Jt=F(()=>{Cs(),Om(),qh(),Do(),lj(),hj(),{Base64:eR}=Ht,{Color:hr}=Ht,{EventEmitter:Eg}=Ht,Er=Ht.Utils,{RenderType:Ll}=Ht,{ImageFormat:yx}=Ht,et=Ht,{Vector2:Tt}=Ht.Math,typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Im()}),bu,Dg,tR=F(()=>{Jt(),bu=class{constructor(e,t,r=!1){this._ui=e,this._options=t,this._categoriesById={},this._filtersByIdentifier={identity:et.Operations.FilterOperation.Filters.IdentityFilter},this._categories=jo.wrapFiltersInCategories(ld.DEFAULTS.FILTERS.slice(0),bu.CATEGORY_ITEMS_PROPERTY),this._customAssetsAllowed=r||e.getEditor().getSDK()._l.areCustomAssetsAllowed(),this._customAssetsAllowed&&this._options.categories&&(this._options.categories=jo.wrapFiltersInCategories(this._options.categories,bu.CATEGORY_ITEMS_PROPERTY)),this._initCategories()}instantiateFilterWithIdentifier(e){const t={value:this._ui._options.crossOrigin,cors:!0},r=this.getFilterByIdentifier(e);if(!r)return Promise.reject(new Error(`Unknown filter with identifier \`${e}\`!`));if(!(r.prototype instanceof et.Operations.FilterOperation.Filter)){const{lutImage:i,resolution:n,horizontalTileCount:o,verticalTileCount:s}=r;let{lightColor:a,darkColor:l}=r;if(a&&l)return a=hr.fromHex(a),l=hr.fromHex(l),Promise.resolve(new et.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:a,darkColor:l}));let c;this._ui.getPreloader&&(c=this._ui.getPreloader().getAsset(i));let h;return c?h=Promise.resolve(c):h=ds.loadImage(this._ui.getAssetPath(i),t),h.then(()=>ds.loadImage(this._ui.getAssetPath(i),t).then(f=>new et.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:f,resolution:n,horizontalTileCount:o,verticalTileCount:s})))}return Promise.resolve(new r)}_initCategories(){if(this._customAssetsAllowed&&this._options.categories&&(this._options.replaceCategories?this._categories=jo.wrapFiltersInCategories(this._options.categories,bu.CATEGORY_ITEMS_PROPERTY):this._categories=jo.mergeCategories(this._categories,this._options.categories,bu.CATEGORY_ITEMS_PROPERTY)),this._customAssetsAllowed&&this._options.availableFilters){const t=[];this._categories.forEach(r=>{const i=r.filters.filter(n=>this._options.availableFilters.indexOf(n.identifier)!==-1);i.length>0&&t.push({identifier:r.identifier,defaultName:r.defaultName,filters:i})}),this._categories=t}const e={identifier:"all",defaultName:"All",visible:!1,filters:this._categories.length<=0?[]:this._categories.map(t=>t.filters).reduce((t,r)=>t.concat(r))};this._categories.unshift(e),this._categoriesById.all=e,this._categories.forEach(t=>{this._categoriesById[t.identifier]=t}),e.filters.forEach(t=>{this._filtersByIdentifier[t.identifier]=t})}getFiltersForCategory(e){if(!this._categoriesById[e])throw new Error(`Unknown filter category '${e}'`);return this._categoriesById[e].filters}getItemsByCategory(e){return this.getFiltersForCategory(e)}getFilterByIdentifier(e){return this._filtersByIdentifier[e]}getCategories(){return this._categories}getCategoryByIdentifier(e){return this._categoriesById[e]}},Dg=bu,Ue(Dg,"CATEGORY_ITEMS_PROPERTY","filters")}),_x,dj=F(()=>{Cs(),_x=class extends rr{},_x.prototype.availableOptions={fontFamily:{type:"string",required:!0},variations:{type:"array",required:!0}}}),rR,Ig,iR=F(()=>{Cs(),rR={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},Ig=class extends rr{getLabel(){let e=rR[this._options.fontWeight];switch(this._options.fontStyle){case"italic":e+=" Italic";break}return e}},Ig.prototype.availableOptions={identifier:{type:"string",required:!0},fontFamily:{type:"string",required:!0},fontWeight:{type:"*",default:400},fontStyle:{type:"string",default:"normal"},textMetrics:{type:"object",default:null},provider:{type:"string",available:["google","file"]},filePath:{type:"string"},default:{type:"boolean",default:!1},font:{type:"object"}}}),ka,Ul=F(()=>{Jt(),dj(),iR(),Do(),YT(),ka=class{constructor(e,t){this._ui=e,this._options=t,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}_initFonts(){const{fonts:e,replaceFonts:t,availableVariations:r,isTextDesign:i}=this._options;let n=!0;n=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed(),e&&n&&e.forEach(({variations:a},l)=>{a&&a.forEach((c,h)=>{if(wl[c.identifier]){const f=zc(c.identifier,!0);e[l].variations[h].identifier=f;const{fontFamily:d}=ai.DEFAULTS.FONTS.find(p=>p.variations.some(v=>v.identifier===f));e[l].fontFamily=d}})});let o=i?ai.DEFAULTS.TEXT_DESIGN_FONTS:ai.DEFAULTS.FONTS;n&&(t?o=e:o=o.concat(e||[]));let s;o=o.map(a=>{const{fontFamily:l}=a;let{variations:c}=a;if(n&&r&&(c=c.filter(f=>r.indexOf(f.identifier)!==-1)),c.length===0)return null;const h=new _x({fontFamily:l});return c=c.map(f=>{const d=new Ig(f);return d.setFontFamily(l),d.setFont(h),f.default&&!s&&(s=d),d.getTextMetrics()==null&&Ke.warn(`Missing font metrics for ${d.getIdentifier()}. The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.`),this._variationsByIdentifier[d.getIdentifier()]=d,d}),h.setVariations(c),this._fontsByFontFamily[l]=h,h}).filter(a=>a),s||([s]=o[0].getVariations()),this._defaultVariation=s,this._fonts=o}getFonts(){return this._fonts}getFontByFontFamily(e){return this._fontsByFontFamily[e]}getVariationByIdentifier(e){return this._variationsByIdentifier[zc(e)]}getVariationsByIdentifier(){return L({},this._variationsByIdentifier)}getDefaultVariation(){return this._defaultVariation}}}),xu,tf=F(()=>{Jt(),xu=class{constructor(e,t={}){this._ui=e,this._options=t,this._defaultLayouts=et.Operations.SpriteOperation.TextDesignSprite.Layouts,this._legacyLayouts=et.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts,this._layouts=[],this._init()}_init(){const{availableLayouts:e}=this._options,t=L(L({},this._defaultLayouts),this._legacyLayouts);this._layouts=Object.keys(t).map(r=>({identifier:t[r].identifier,layout:t[r]})),e&&(e.push(...Object.values(this._legacyLayouts).map(r=>r.identifier)),this._layouts=this._layouts.filter(r=>e.indexOf(r.identifier)>=0))}getLayoutByIdentifier(e){const t=Er.Array.find(this._layouts,r=>r.identifier===e);return t&&t.layout}getLayouts(){return[...this._layouts]}getDefaultLayout(){return this.getLayouts()[0]}}}),nR,oR,bx,fj=F(()=>{iR(),nR=30,oR="abcdefghijklmnopqrstuvwxzy",bx=class{constructor(e){this._fontVariation=e||new Ig({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}_createRuler(){this._ruler=document.createElement("div"),this._ruler.innerText=oR,document.body.appendChild(this._ruler),this._setRulerStyle()}_setRulerStyle(){this._ruler.style.cssText=`
      position: absolute;
      top: -9999px;
      left: -9999px;
      opacity: 0;
      display: inline-block;
      font: ${this._fontVariation.getFontStyle()} ${this._fontVariation.getFontWeight()} ${nR}px ${this._fontVariation.getFontFamily()};
    `}setFontVariation(e){this._fontVariation=e,this._setRulerStyle()}getWidth(){return this._ruler?this._ruler.offsetWidth:-1}dispose(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)}}}),xx,sR,aR,lR,pj=F(()=>{fj(),xx=typeof window!="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Im(),sR=50,aR=5e3,lR=class{constructor(e){this._fontVariation=e,this._defaultFontRuler=new bx,this._customFontRuler=new bx(this._fontVariation)}observe(){const e=xx();return new Promise((t,r)=>{const i=window.setInterval(()=>{if(this._defaultFontRuler.getWidth()!==this._customFontRuler.getWidth())return window.clearInterval(i),t();if(xx()-e>=aR){const o=new Error(`Failed to load font ${this._fontVariation.getFontFamily()}.`);return o.font=this._fontVariation,r(o)}},sR)})}dispose(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}}),wx,cR=F(()=>{Cs(),pj(),wx=class{constructor(e){this._ui=e,this._fonts=[],this._observers=[]}add(e){this._fonts.push(e)}load(){return this._fonts.length===0?Promise.resolve():(this._observers=[],this._fonts.forEach(e=>{this._observers.push(new lR(e))}),Ce.executePromises(this._observers.map(e=>e.observe())))}dispose(){this._observers.forEach(e=>e.dispose())}}}),uR,mj=F(()=>{cR(),uR=class extends wx{load(){return Promise.resolve()}}}),hR,dR,gj=F(()=>{cR(),hR={italic:"i"},dR=class extends wx{load(){return this._fonts.length&&this._addStylesheetTag(),super.load()}_addStylesheetTag(){const e=this._getFamiliesString(),t=document.createElement("link");t.rel="stylesheet",t.href=`https://fonts.googleapis.com/css?family=${e}`,document.getElementsByTagName("head")[0].appendChild(t)}_getFamiliesString(){const e={};this._fonts.forEach(r=>{const i=r.getFontFamily(),n=r.getFontStyle(),o=r.getFontWeight();e[i]=e[i]||[],typeof o!="undefined"?e[i].push(`${o}${hR[n]||""}`):e[i].push(400)});const t=[];for(const r in e){const i=e[r],n=i.length?`:${i.join(",")}`:"",o=r.replace(" ","+")+n;t.push(o)}return t.join("|")}}}),Rg,Sx=F(()=>{mj(),gj(),Rg=class{constructor(e,t){this._ui=e,this._fonts=t,this._loadedFonts=[]}setFonts(e){this._fonts=e}needsToLoad(){for(let e=0;e<this._fonts.length;e++){let t;if(this._fonts[e].getVariations().forEach(r=>{t=t||r.getProvider()}),!!t)return!0}}fontLoaded(e){const t=e.getFontFamily();return this._loadedFonts.indexOf(t)!==-1}setFontLoaded(e){if(!this.fontLoaded(e)){const t=e.getFontFamily();this._loadedFonts.push(t)}}load(){const e=this._fonts,t={google:new dR(this._ui),file:new uR(this._ui)},r=()=>{for(const n in t)t[n].dispose()};e.filter(n=>!this.fontLoaded(n)).forEach(n=>{n.getVariations().forEach(o=>{const s=o.getProvider();if(!s)return;t[s].add(o)})});const i=[];for(const n in t)i.push(t[n].load());return Promise.all(i).then(()=>{r(),e.forEach(n=>{this.setFontLoaded(n)})}).catch(n=>{throw r(),n})}}}),fR,vj=F(()=>{Jt(),fR=class{constructor(e,t){this._ui=e,this._options=t,this._brushes=[],this._brushesById={},this._addBrushes(ai.DEFAULTS.BRUSHES);const{brushes:r,replaceBrushes:i,availableBrushes:n}=this._options;this._options.brushes&&this._addBrushes(r,i),n&&(this._brushes=this._brushes.filter(o=>n.indexOf(o.identifier)!==-1))}_addBrushes(e,t){t&&(this._brushes=[],this._brushesById={}),e.forEach(r=>{this._brushes.push(r),this._brushesById[r.identifier]=r})}getBrushByIdentifier(e){return this._brushesById[e]}getBrushes(){return this._brushes}getFirstBrush(){return this._brushes[0]}}}),pR,mR,yj=F(()=>{pR=class{constructor(){this._assetsByGroupId={}}addAsset(e,t,r=!1){this._assetsByGroupId[e]?r?this._assetsByGroupId[e].unshift(t):this._assetsByGroupId[e].push(t):this._assetsByGroupId[e]=[t]}setAssets(e,t){this._assetsByGroupId[e]=t}getAssets(e){return this._assetsByGroupId[e]=this._assetsByGroupId[e]||[],this._assetsByGroupId[e]}},mR=pR}),Fg,Og,Cx=F(()=>{Jt(),Cs(),yj(),Om(),Yh(),Fg="imgly_sticker_custom",Og=class{constructor(e,t,r){this._ui=e,this._options=t,this._dynamicAssetsLibrary=r||this._ui.getEditor().getDynamicAssetsLibrary()||new mR,this._categoriesById={},this._categories=[],this._stickersById={},this._customStickerCanvas=Ce.createCanvas(),this.reload()}reload(){this._categoriesById={},this._categories=[],this._stickersById={};const e=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(ld.DEFAULTS.STICKER_CATEGORIES);const{categories:t,replaceCategories:r}=this._options;if(e&&this._options.categories?this._addCategories(t,r):(this._updateCategoriesMap(),this._updateAllCategory()),e){const i=this._dynamicAssetsLibrary.getAssets("sticker");if(i.length>0){const n=this._createCustomStickerCategory(i);this._addCategories([n],!1,!0)}}}loadExternal(e){return new Uc(e).load().then(r=>{this._addCategories(r.categories,this._options.replaceCategories)})}_addCategories(e,t=!1,r=!1){t?this._categories=e.slice(0):r?this._categories=this._mergeCategories(e,this._categories):this._categories=this._mergeCategories(this._categories,e),this._updateCategoriesMap(),this._updateAllCategory()}_mergeCategories(e,t){e=jo.cloneCategories(e,"stickers");for(const r of t){let i=!1;for(const n of e)if(r.identifier===n.identifier){for(const o of r.stickers){let s=!1;for(const a of n.stickers)if(o.identifier===a.identifier){Object.assign(a,o),s=!0;break}s||n.stickers.push(o)}i=!0;break}i||e.push(r)}return e}_updateCategoriesMap(){this._categoriesById={},this._categories.forEach(e=>{this._categoriesById[e.identifier]=e}),this._categories.forEach(e=>{e.stickers.forEach(t=>{this._stickersById[t.identifier]=t})}),typeof this._options.availableStickers!="undefined"&&this._options.availableStickers!==null&&(this._categories.forEach(e=>{e.identifier!==Fg&&(e.stickers=e.stickers.filter(t=>this._options.availableStickers.indexOf(t.identifier)!==-1))}),this._categories=this._categories.filter(e=>e.stickers.length>0)),this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(e=>e.stickers).reduce((e,t)=>e.concat(t),[])},this._categoriesById.all=this._allCategory}renderStickerThumbnailFromImage(e){const t=this._customStickerCanvas,r=t.getContext("2d");r.save();const i=62,n=i/e.width,o=n*e.height;t.width=i,t.height=i,r.clearRect(0,0,e.width,e.height),r.translate(0,.5*(t.height-o)),r.scale(n,n),r.drawImage(e,0,0);const s=t.toDataURL("image/png");return r.restore(),{data:s,width:i,height:o}}addCustomStickerFromImage(e,t,r="none"){const i=m=>{const _=this._ui.getEditor().getSDK().getRenderer(),b=new Tt(m.width,m.height),w=this._ui.getEditor().getMaxMegapixels()*1e6;let S=_.getMaxDimensions();const C=b.x*b.y>w,D=S!==null&&(b.x>S||b.y>S);if(C){const I=m.width/m.height,M=m.height/m.width;S=new Tt(Math.sqrt(w*I),Math.sqrt(w*M)).floor().max()}const E=b.clone();return(C||D)&&(b.x/b.y>1?(E.x=S,E.y=S/b.x*b.y):(E.x=S/b.y*b.x,E.y=S)),E},n=(m,y)=>{const _=m.x/m.y;return _>1?new Tt(y,y/_):new Tt(y*_,y)},o=e.src.substring(0,14)==="data:image/svg";e=this._ui.getEditor().getSDK().correctExifOrientation(e);const a=n(new Tt(e.width,e.height),2048),l=o?a:i(e),c=this._customStickerCanvas,h=c.getContext("2d");h.save();const f=this.renderStickerThumbnailFromImage(e);o?(e.width>e.height?(c.width=2048,c.height=2048/e.width*e.height):(c.height=2048,c.width=2048/e.height*e.width),e.width=c.width,e.height=c.height):(c.width=l.x,c.height=l.y,h.scale(l.x/e.width,l.y/e.height)),h.drawImage(e,0,0,e.width,e.height);const d=c.toDataURL();h.restore();const p={identifier:Ce.generateUUID(),defaultName:t||"",tintMode:r,images:{mediaThumb:{uris:[f.data],rawData:!0,width:f.width,height:f.height},mediaBase:{uris:o?[d,e.src]:[d],rawData:!0,isSVG:o,width:l.x,height:l.y}}},v=this._dynamicAssetsLibrary;v.addAsset("sticker",p,!0);const g=v.getAssets("sticker");if(g.length===1){const m=this._createCustomStickerCategory(g);this._addCategories([m],!1,!0)}else this.getCategory(Fg).stickers=g,this._updateAllCategory();this._updateCategoriesMap()}_createCustomStickerCategory(e){return{identifier:Fg,defaultName:"Custom",metaData:{backgroundImage:e[e.length-1].images.mediaBase.uris[0],rawData:!0},stickers:e}}getStickersForCategory(e){if(!this._categoriesById[e])throw new Error(`Unknown sticker category '${e}'`);return this._categoriesById[e].stickers}getStickerByIdentifier(e){return this._stickersById[e]}getCategories(e=!1){return e?[this._allCategory].concat(this._categories):this._categories}getCategory(e){return this._categoriesById[e]}static getURLForSticker(e,t="base"){const{images:r}=e,i=t==="base"&&r.mediaBase||r.mediaThumb,n=i.uris||[i.uri];if(!jo.Browser.getIEVersion()){const s=n.filter(a=>/\.svg$/i.test(a));return s.length?s[0]:n[0]}const o=n.filter(s=>!/\.svg$/i.test(s));return o.length?o[0]:n[0]}}}),gR,kx,Mg,vR=F(()=>{Jt(),Sx(),vj(),tR(),Ul(),Cx(),gR=ni(Hh()),typeof et.Operations.SpriteOperation!="undefined"&&(kx=et.Operations.SpriteOperation.BrushSprite),Mg=class{constructor(e,t){this._editor=e,this._ui=this._editor.getUI(),this._data=t,this._filterManager=new Dg(this._ui,this._getOptions("filter")),this._stickerManager=new Og(this._ui,this._getOptions("sticker")),this._brushManager=new fR(this._ui,this._getOptions("brush")),this._fontManager=new ka(this._ui,this._getOptions("text"))}_getOptions(e){const{controls:t}=this._editor;let r={};t&&t.get(e)&&(r=t.get(e).defaultOptions);const i=this._editor.getOptions();return Er.deepDefaults({},i.editor.controlsOptions[e]||{},r)}deserialize(){return this._validateVersion().then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_validateVersion(){return this._data.version!==this.constructor.version?Promise.reject(new Error(`Invalid version ${this._data.version}, expected ${this.constructor.version}`)):Promise.resolve()}_deserializeInputImage(){return new Promise((e,t)=>{const{data:r,type:i}=this._data.inputImage;if(r&&i){const n=new window.Image;n.addEventListener("load",()=>{this._editor.setImage(n),e()}),n.src=`data:${i};base64,${r}`}else e()})}async _deserializeOperations(){const{operations:e}=this._data;return(0,gR.default)(e,async t=>this._deserializeOperation(t))}_deserializeOperation(e){switch(e.type){case"crop":return this._deserializeCropOperation(e);case"orientation":return this._deserializeOrientationOperation(e);case"filter":return this._deserializeFilterOperation(e);case"adjustments":return this._deserializeAdjustmentsOperation(e);case"sprite":return this._deserializeSpriteOperation(e);case"focus":return this._deserializeFocusOperation(e)}}_deserializeCropOperation(e){const{options:t}=e;let{rotation:r}=t;const i=Tt.fromObject(t.start),n=Tt.fromObject(t.end);r>Math.PI&&(r-=Math.PI*2);const o={start:i,end:n};typeof r!="undefined"&&(o.rotation=r);const s=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(s,o),s.set(o),Promise.resolve(s)}_deserializeOrientationOperation(e){const{options:t}=e,r=this._editor.operations.getOrCreate("orientation");return r?(r.set(t),Promise.resolve(r)):Promise.resolve()}_deserializeFilterOperation(e){const{options:t}=e;return this._filterManager.getFilterByIdentifier(t.name)?this._filterManager.instantiateFilterWithIdentifier(t.name).then(r=>{const i=this._editor.operations.getOrCreate("filter");return i.set({identifier:t.name,filter:r,intensity:t.intensity}),i}):(Ke.warn("Deserializer",`Unknown filter \`${t.name}\``),Promise.resolve())}_deserializeAdjustmentsOperation(e){const{AdjustmentsOperation:t}=et.Operations,{options:r}=e,i=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],n={};return i.forEach(o=>{if(typeof r[o]=="undefined")return;const{minValue:s,midValue:a,maxValue:l}=t.prototype.availableOptions[o];let c=r[o];c=c<0?a+(a-s)*c:a+(l-a)*c,n[o]=c}),Promise.resolve(this._editor.operations.getOrCreate("adjustments",n))}_deserializeSpriteOperation(e){const{options:t}=e,r=this._editor.operations.getOrCreate("sprite");if(!r)return Promise.resolve();const i=t.sprites.map(n=>this._deserializeSprite(r,n)).filter(n=>n);return Promise.all(i).then(n=>(r.setSprites(n.filter(o=>o)),r))}_deserializeSprite(e,t){switch(t.type){case"sticker":return this._deserializeSticker(e,t);case"text":return this._deserializeText(e,t);case"brush":return this._deserializeBrush(e,t);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(e,t)}}_deserializeSticker(e,t){const{SpriteOperation:r}=et.Operations,{options:i}=t,n=this._stickerManager.getStickerByIdentifier(i.name),o=this._stickerManager.getURLForSticker(n);return n?new Promise((s,a)=>{const l=new window.Image;l.addEventListener("load",()=>{const c=r.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:h,flipHorizontally:f,flipVertically:d}=i,p={identifier:i.name,image:l,position:Tt.fromObject(i.position),dimensions:Tt.fromObject(i.dimensions),rotation:h,flipHorizontally:f,flipVertically:d,adjustments:{}};typeof i.adjustments!="undefined"&&["brightness","contrast","saturation"].forEach(v=>{typeof i.adjustments[v]!="undefined"&&(p.adjustments[v]=i.adjustments[v]+c[v].default)}),s(e.createSticker(p))}),l.crossOrigin=this._editor.getCrossOrigin(),l.src=this._editor.getUI().getAssetPath(o)}):(Ke.warn("Deserializer",`Unknown sticker '${i.name}'. Skipping sprite.`),Promise.resolve())}_deserializeText(e,t){const{options:r}=t,{fontSize:i,lineHeight:n,fontFamily:o,fontWeight:s,alignment:a,rotation:l,maxWidth:c,color:h,backgroundColor:f}=r,d=new Rg(this._ui);let p=this._fontManager.getFontByFontFamily(o);return p||(p=this._fontManager.getDefaultFont()),d.setFonts([p]),d.load().then(()=>{const v=e.createText({fontSize:i,lineHeight:n,fontFamily:o,fontWeight:s,alignment:a,rotation:l,maxWidth:c,text:r.text,color:hr.fromArray(h),backgroundColor:hr.fromArray(f),position:Tt.fromObject(r.position)});return v._edited=!0,v})}_deserializeBrush(e,t){const{options:r}=t,{paths:i}=r,n=e.createBrush();return i.forEach(o=>{this._deserializeBrushPath(n,o)}),Promise.resolve(n)}_deserializeBrushPath(e,t){const{points:r}=t,i=this._createBrushForPath(t),n=e.createPath(i);n.setClosed(!0),r.forEach(o=>{n.addControlPoint(Tt.fromObject(o))})}_createBrushForPath(e){const{color:t,size:r}=e,n={color:hr.fromArray(t),size:r},o=this._brushManager.getFirstBrush();if(o.prototype&&o.prototype instanceof kx){const l=o;return new l(n)}const s=L({},o);delete s.image;class a extends kx{}return a.identifier=o.identifier,new a(L(L({},s),n))}_deserializeFocusOperation(e){const{options:t}=e.options;switch(e.options.type){case"radial":{const{position:r,radius:i,gradientRadius:n,blurRadius:o}=t;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:Tt.fromObject(r),radius:i,gradientRadius:n,blurRadius:o}))}case"linear":{const{start:r,end:i,size:n,gradientSize:o,blurRadius:s}=t;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:Tt.fromObject(r),end:Tt.fromObject(i),size:n,gradientSize:o,blurRadius:s}))}}}_getInputDimensionsForOperation(e){let t=!1,r=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(i=>{i===e&&(t=!0),!t&&(r=i.getNewDimensions(r))}),r}},Mg.version="1.0.0"}),Nl,Pg,yR=F(()=>{Jt(),Nl=Math.PI*2,Pg=class{constructor(e){this._editor=e,this._serializeOperations=this._serializeOperations.bind(this)}serialize(e={}){this._options=ge(L({},e),{image:!0});const t={version:this.constructor.version};return this._serializeInputImage(t).then(this._serializeOperations)}_serializeInputImage(e){const t=this._editor.getImage(),{width:r,height:i}=t;if(!this._options.image)return e.inputImage={width:r,height:i},Promise.resolve(e);const n=Er.createCanvas();n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0);const s=n.toDataURL(yx.PNG);return e.inputImage={type:yx.PNG,data:s.replace(/^data:image\/(.*?);base64,/,""),width:r,height:i},Promise.resolve(e)}_serializeOperations(e){const t=[];return this._editor.operations.getStack().forEach(i=>{const n=this._serializeOperation(i,t);n&&t.push(n)}),e.operations=t.filter(i=>i),Promise.resolve(e)}_serializeOperation(e,t){switch(e.constructor.identifier){case"transform":return this._serializeTransformOperation(e);case"orientation":return this._serializeOrientationOperation(e);case"filter":return this._serializeFilterOperation(e);case"adjustments":return this._serializeAdjustmentsOperation(e);case"sprite":return this._serializeSpriteOperation(e,t);case"radial-focus":return this._serializeRadialFocusOperation(e);case"mirrored-focus":return this._serializeLinearFocusOperation(e);default:Ke.warn(`Unable to serialize operation of type ${e.constructor.identifier}`)}}_serializeTransformOperation(e){const t=e.serializeOptions(["start","end","rotation"],!0);return t.rotation=(t.rotation+Nl)%Nl,{type:"crop",options:t}}_serializeOrientationOperation(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}_serializeFilterOperation(e){return e.getIdentifier()==="identity"?null:{type:"filter",options:{intensity:e.getIntensity(),name:e.getIdentifier()}}}_serializeAdjustmentsOperation(e){const{availableOptions:t}=e,r=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],i={};return r.forEach(n=>{const o=t[n],s=e.getOption(n),{minValue:a,midValue:l,maxValue:c}=o;i[n]=s<=l?(s-a)/(l-a)-1:(s-l)/(c-l)}),{type:"adjustments",options:i}}_serializeSpriteOperation(e,t){const r=t.filter(o=>o.type==="sprite");let i,n=!0;if(r.length?(i=r.pop(),n=!1):i={type:"sprite",options:{sprites:[]}},e.getSprites().forEach(o=>{let s=null;o instanceof e.constructor.StickerSprite?s=this._serializeSticker(e,o):o instanceof e.constructor.TextSprite?s=this._serializeText(e,o):o instanceof e.constructor.BrushSprite?s=this._serializeBrush(e,o):o instanceof e.constructor.TextDesignSprite&&(s=this._serializeTextDesign&&this._serializeTextDesign(e,o)),s&&i.options.sprites.push(s)}),n)return i}_serializeSticker(e,t){const r=t.getAdjustments(),i=t.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);i.name=i.identifier,delete i.identifier,i.rotation=(i.rotation+Nl)%Nl;const n=r.availableOptions;return i.adjustments={brightness:r.getBrightness()-n.brightness.default,saturation:r.getSaturation()-n.saturation.default,contrast:r.getContrast()-n.contrast.default},{type:"sticker",options:i}}_serializeText(e,t){const r=t.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return r.rotation=(r.rotation+Nl)%Nl,{type:"text",options:r}}_serializeBrush(e,t){return{type:"brush",options:{paths:t.getPaths().map(r=>this._serializePath(r))}}}_serializePath(e){const t=e.getBrush().serializeOptions(["color","size"],!0);return t.points=e.getControlPoints().map(r=>r.getPosition().toObject()),t}_serializeRadialFocusOperation(e){return{type:"focus",options:{type:"radial",options:e.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}_serializeLinearFocusOperation(e){return{type:"focus",options:{type:"linear",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}_getInputDimensionsForOperation(e){let t=!1,r=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(i=>{i===e&&(t=!0),!t&&(r=i.getNewDimensions(r))}),r}},Pg.version="1.0.0"}),_R={};_r(_R,{default:()=>Tx});var Tx,_j=F(()=>{vR(),yR(),Tx=class{constructor(e){this._editor=e}serialize(...e){return new Pg(this._editor).serialize(...e)}deserialize(e){return new Mg(this._editor,e).deserialize()}},Tx.version="1.0.0"}),Ag,bR=F(()=>{Jt(),vR(),Ag=class extends Mg{_deserializeOperation(e){return e.type==="selective-blur"?this._deserializeSelectiveBlurOperation(e):super._deserializeOperation(e)}_deserializeCropOperation(e){const{options:t}=e;let{rotation:r}=t;const i=Tt.fromObject(t.start),n=Tt.fromObject(t.end),o=t.dimensions?Tt.fromObject(t.dimensions):null;if(n.x-i.x<=0||n.y-i.y<=0)throw new Error(`A crop should not result in negative or zero dimensions - start: ${i} - end: ${n}`);r>Math.PI&&(r-=Math.PI*2);const s={start:i,end:n};typeof r!="undefined"&&(s.rotation=r);const a=this._editor.operations.getOrCreate("transform");if(!a)return Promise.resolve();if(this._editor.broadcastTransform(a,s),a.set(s),o){const l=n.clone().subtract(i),c=a.getInputDimensions(!1).multiply(l);a.setTextureScale(o.x/c.x)}return Promise.resolve(a)}},Ag.version="1.0.1"}),Ex,zg,xR=F(()=>{yR(),Ex=Math.PI*2,zg=class extends Pg{_serializeTransformOperation(e){const t=e.serializeOptions(["start","end","rotation","textureScale"],!0);return t.rotation=(t.rotation+Ex)%Ex,t.textureScale!==1&&(t.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete t.textureScale,{type:"crop",options:t}}},zg.version="1.0.1"}),wR={};_r(wR,{default:()=>Dx});var Dx,bj=F(()=>{bR(),xR(),Dx=class{constructor(e){this._editor=e}serialize(...e){return new zg(this._editor).serialize(...e)}deserialize(e){return new Ag(this._editor,e).deserialize()}},Dx.version="1.0.1"}),jl,Ix,xj=F(()=>{qh(),Jt(),{OptionType:jl}=et,Ix=class extends et.Configurable{constructor(e,t={}){super(t),this._loaded=!1,this._loading=!1,this._ui=e,this._frame=et.Utils.deepClone(this._options)}load(){if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;const{imageGroups:e}=this._frame,t=[];return["top","left","right","bottom"].forEach(r=>{if(!(r in e))return;const i=e[r];["start","mid","end"].forEach(n=>{n in i&&t.push(this._loadPart(r,n))})}),Promise.all(t).then(()=>{this._loaded=!0,this._loading=!1}).catch(r=>{this._loaded=!1,this._loading=!1})}_loadPart(e,t){const{imageGroups:r}=this._frame,i=r[e][t];let n=i;return typeof i!="string"&&"image"in i&&(n=i.image),ds.load(this._ui.getAssetPath(n)).then(o=>(typeof i!="string"?this._frame.imageGroups[e][t].image=o:this._frame.imageGroups[e][t]=o,o))}getFrame(){return this._frame}},Ix.prototype.availableOptions={identifier:{type:jl.STRING,required:!0},defaultName:{type:jl.STRING},thumbnail:{type:jl.STRING},tintable:{type:jl.BOOLEAN,default:!1},layoutMode:{type:jl.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:jl.OBJECT,required:!0}}}),SR,wj=F(()=>{Jt(),SR=class{constructor(e,t){this._ui=e,this._options=t,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(ld.DEFAULTS.FRAME_CATEGORIES),this._customAssetsAllowed=e.getEditor().getSDK()._l.areCustomAssetsAllowed();const{categories:r,replaceCategories:i}=this._options;this._customAssetsAllowed&&this._options.categories?this._addCategories(r,i):this._updateAllCategory()}_addCategories(e,t=!1){t?this._categories=e.slice(0):this._categories=jo.mergeCategories(this._categories,e,"frames"),this._categoriesById={},this._categories.forEach(i=>{this._categoriesById[i.identifier]=i});const{availableFrames:r}=this._options;this._customAssetsAllowed&&r&&this._categories.forEach(i=>{i.frames=i.frames.filter(n=>r.indexOf(n.identifier)!==-1)}),this._categories.forEach(i=>{i.frames.forEach(n=>{this._framesById[n.identifier]=n})}),this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(e=>e.frames).reduce((e,t)=>e.concat(t),[])},this._categoriesById.all=this._allCategory}getFramesForCategory(e){if(!this._categoriesById[e])throw new Error(`Unknown frame category '${e}'`);return this._categoriesById[e].frames}getFrameByIdentifier(e){return this._framesById[e]}getCategories(){return this._categories}getCategory(e){return this._categoriesById[e]}}}),CR,Sj=F(()=>{Jt(),CR=class{constructor(e,t){this._ui=e,this._options=t,this._overlays=ld.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={};const r=e.getEditor().getSDK()._l.areCustomAssetsAllowed();r&&t.overlays&&(t.replaceOverlays?this._overlays=t.overlays:this._overlays=this._overlays.concat(t.overlays)),r&&t.availableOverlays&&(this._overlays=this._overlays.filter(i=>t.availableOverlays.indexOf(i.identifier)!==-1)),this._overlays.forEach(i=>{this._overlaysByIdentifier[i.identifier]=i})}getOverlays(){return this._overlays}getOverlayByIdentifier(e){return this._overlaysByIdentifier[e]}}}),Ho,$g,Rx=F(()=>{Jt(),{OverlayFilter:Ho}=et.Engine.Filters,$g={[Ho.BLEND_MODES.NORMAL]:"normal",[Ho.BLEND_MODES.OVERLAY]:"overlay",[Ho.BLEND_MODES.HARD_LIGHT]:"hard light",[Ho.BLEND_MODES.SOFT_LIGHT]:"soft light",[Ho.BLEND_MODES.MULTIPLY]:"multiply",[Ho.BLEND_MODES.DARKEN]:"darken",[Ho.BLEND_MODES.LIGHTEN]:"lighten",[Ho.BLEND_MODES.SCREEN]:"screen",[Ho.BLEND_MODES.COLOR_BURN]:"color burn"}}),kR,Bg,TR=F(()=>{Jt(),Sx(),xj(),qh(),wj(),Sj(),Cx(),bR(),Rx(),kR=Er.flipObject($g),Bg=class extends Ag{constructor(...e){super(...e),this._frameManager=new SR(this._ui,this._getOptions("frame"));const t=this._getOptions("overlay");t&&(this._overlayManager=new CR(this._ui,t))}_deserializeSprite(e,t){return t.type==="frame"?this._deserializeFrame(e,t):t.type==="overlay"?this._deserializeOverlay(e,t):super._deserializeSprite(e,t)}_deserializeOperation(e){return e.type==="transform"?this._deserializeTransformOperation(e):super._deserializeOperation(e)}_deserializeOrientationOperation(e){if(this._data.meta&&this._data.meta.platform!=="html5")return super._deserializeOrientationOperation(e);const{rotation:t,flipHorizontally:r,flipVertically:i}=e.options;let n=t===90&&!r&&!i;return n|=t===90&&r&&i,n|=t===270&&!r&&!i,n|=t===270&&r&&i,n&&(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),super._deserializeOrientationOperation(e)}_deserializeTransformOperation(e){return super._deserializeCropOperation(e).then(t=>{if(!t)return;const r=Er.Array.find(this._data.operations,i=>i.type==="orientation");if(r){const{options:i}=r;let{rotation:n,flipHorizontally:o,flipVertically:s}=i;(n===90||n===270)&&(!o&&s||o&&!s)&&(o=!o,s=!s),t.rotate(i.rotation),o&&(t.flip("horizontal"),t.setRotation(t.getRotation()*-1)),s&&(t.flip("vertical"),t.setRotation(t.getRotation()*-1))}return t})}_deserializeFrame(e,t){const{identifier:r}=t.options,i=this._frameManager.getFrameByIdentifier(r);if(!i)return Ke.warn("Deserializer",`Unknown frame \`${r}\`. Skipping frame.`),Promise.resolve();const n=new Ix(this._ui,i);return n.load().then(()=>{this._editor.operations.getOrCreate("frame",{frame:n.getFrame()})})}_deserializeOverlay(e,t){const{blendMode:r,intensity:i,identifier:n}=t.options,o=this._overlayManager.getOverlayByIdentifier(n);if(!o)return Ke.warn("Deserializer",`Unknown overlay \`${n}\`. Skipping overlay.`),Promise.resolve();const s=this._editor.getUI().getAssetPath(o.image);return ds.load(s).then(a=>{this._editor.operations.getOrCreate("overlay",{alpha:i,identifier:n,blendMode:parseInt(kR[r||o.blendMode],10),image:a})})}_createBrushForPath(e){const t=super._createBrushForPath(e);return typeof e.hardness!="undefined"&&t.hasOption("hardness")&&t.setHardness(e.hardness),t}_deserializeSticker(e,t){const{SpriteOperation:r}=et.Operations,{options:i}=t,n=this._stickerManager.getStickerByIdentifier(i.identifier),o=Og.getURLForSticker(n,"base");if(!n)return Ke.warn("Deserializer",`Unknown sticker \`${i.identifier}\`. Skipping sprite.`),Promise.resolve();const s=e.getInputDimensions(!1);return new Promise((a,l)=>{const c=new window.Image;c.addEventListener("load",()=>{const h=r.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:f,flipHorizontally:d,flipVertically:p}=i,v={identifier:i.identifier,image:c,position:Tt.fromObject(i.position),dimensions:Tt.fromObject(i.dimensions).multiply(s.min()),rotation:f,flipHorizontally:d,flipVertically:p,adjustments:{}};typeof i.adjustments!="undefined"&&["brightness","contrast","saturation"].forEach(g=>{typeof i.adjustments[g]!="undefined"&&(v.adjustments[g]=i.adjustments[g]+h[g].default)}),typeof i.tintColor!="undefined"&&typeof n.tintMode!="undefined"&&(v.tintColor=hr.fromArray(i.tintColor),v.tintMode=n.tintMode),a(e.createSticker(v))}),c.crossOrigin=this._editor.getCrossOrigin(),c.src=this._editor.getUI().getAssetPath(o)})}_deserializeFilterOperation(e){const{options:t}=e;return this._filterManager.getFilterByIdentifier(t.identifier)?this._filterManager.instantiateFilterWithIdentifier(t.identifier).then(r=>{const i=this._editor.operations.getOrCreate("filter");if(!!i)return i.set({identifier:t.identifier,filter:r,intensity:t.intensity}),i}):(Ke.warn("Deserializer",`Unknown filter \`${t.identifier}\``),Promise.resolve())}_deserializeFocusOperation(e){const{options:t,type:r}=e.options;if(r!=="radial")return super._deserializeFocusOperation(e);const i=this._editor.getImage(),n=i.width/i.height,{start:o,end:s,gradientRadius:a,blurRadius:l}=t,c=Tt.fromObject(s).subtract(Tt.fromObject(o)).multiply(n,1).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:Tt.fromObject(o),radius:c,gradientRadius:a,blurRadius:l}))}_deserializeText(e,t){const{options:r}=t,{fontSize:i,lineHeight:n,fontIdentifier:o,alignment:s,rotation:a,maxWidth:l,color:c,backgroundColor:h}=r,f=new Rg(this._ui);let d=this._fontManager.getVariationByIdentifier(o);return d?f.setFonts([d.getFont()]):d=this._fontManager.getDefaultFont(),f.load().then(()=>{const p=e.getInputDimensions(!1),v=l*p.min()/p.x,g=e.createText({fontSize:i,lineHeight:n,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),alignment:s,rotation:a,maxWidth:v,text:r.text,color:hr.fromArray(c),backgroundColor:hr.fromArray(h),position:Tt.fromObject(r.position)});return g._edited=!0,g})}},Bg.version="2.0.0"}),Lg,ER=F(()=>{xR(),Rx(),Lg=class extends zg{_serializeSticker(e,t){const r=e.getInputDimensions(!1),i=super._serializeSticker(e,t);return t.getTintMode()!=="none"&&(i.options.tintColor=t.serializeOption("tintColor",!0)),i.options.dimensions=t.getDimensions().clone().divide(r.min()).toObject(),i.options.identifier=i.options.name,delete i.options.name,i}_serializePath(e){const t=super._serializePath(e),r=e.getBrush();return r.hasOption("hardness")&&(t.hardness=r.getOption("hardness")),t}_serializeOperation(e,t){return e.constructor.identifier==="frame"?(this._serializeFrameOperation(e,t),null):e.constructor.identifier==="overlay"?(this._serializeOverlayOperation(e,t),null):super._serializeOperation(e,t)}_serializeFrameOperation(e,t){const r=t.filter(n=>n.type==="sprite");let i;r.length?i=r.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"frame",options:this._getFrameOptions(e)})}_serializeOverlayOperation(e,t){if(!e.getIdentifier())return;const r=t.filter(n=>n.type==="sprite");let i;r.length?i=r.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"overlay",options:{identifier:e.getIdentifier(),intensity:e.getAlpha(),blendMode:$g[e.getBlendMode()]}})}_getFrameOptions(e){return{identifier:e.getFrame().identifier}}_serializeOrientationOperation(e){const t=super._serializeOrientationOperation(e);return(t.options.rotation===90||t.options.rotation===270)&&(t.options.flipHorizontally=!t.options.flipHorizontally,t.options.flipVertically=!t.options.flipVertically),t}_serializeTransformOperation(e){const{operations:t}=this._editor;if(t.exists("orientation")){e=e.clone();const i=t.get("orientation");e.rotate(-i.getRotation()),i.getFlipVertically()&&(e.flip("vertical"),e.setRotation(e.getRotation()*-1)),i.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(e.getRotation()*-1))}const r=super._serializeTransformOperation(e);return r.type="transform",r}_serializeText(e,t){const r=super._serializeText(e,t),i=e.getInputDimensions(!1);return r.options.fontIdentifier=t.getFontIdentifier(),r.options.maxWidth=r.options.maxWidth*i.x/i.min(),delete r.options.fontFamily,r}_serializeFilterOperation(e){const t=super._serializeFilterOperation(e);return t?(t.options.identifier=t.options.name,delete t.options.name,t):null}_serializeRadialFocusOperation(e){const t=super._serializeRadialFocusOperation(e),r=t.options.options;return r.start=r.position,delete r.position,r.end={x:r.start.x+r.radius,y:r.start.y},delete r.radius,t}},Lg.version="2.0.0"}),DR={};_r(DR,{default:()=>Fx});var Fx,Cj=F(()=>{TR(),ER(),Fx=class{constructor(e){this._editor=e}serialize(...e){return new Lg(this._editor).serialize(...e)}deserialize(e){return new Bg(this._editor,e).deserialize()}},Fx.version="2.0.0"}),Ox,Ug,IR=F(()=>{Jt(),qh(),Ul(),Cx(),tf(),TR(),typeof et.Operations.SpriteOperation!="undefined"&&(Ox=et.Operations.SpriteOperation.BrushSprite.Brush),Ug=class extends Bg{_deserializeSticker(e,t){const{SpriteOperation:r}=et.Operations,{options:i}=t,n=this._stickerManager.getStickerByIdentifier(i.identifier);if(!n)return Ke.warn("Deserializer",`Unknown sticker \`${i.identifier}\`. Skipping sprite.`),Promise.resolve();const{mediaBase:o}=n.images,s=Og.getURLForSticker(n,"base"),a=o.rawData?o.uris[0]:this._editor.getUI().getAssetPath(s),l=e.getInputDimensions(!1);return ds.load(a).then(c=>{const h=r.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:f,flipHorizontally:d,flipVertically:p}=i,v={identifier:i.identifier,image:c,position:Tt.fromObject(i.position),dimensions:Tt.fromObject(i.dimensions).multiply(l.min()),rotation:f||0,flipHorizontally:d,flipVertically:p,resizeMode:n.resizeMode||"keepAspect",adjustments:{}};return typeof i.adjustments!="undefined"&&["brightness","contrast","saturation"].forEach(g=>{typeof i.adjustments[g]!="undefined"&&(v.adjustments[g]=i.adjustments[g]+h[g].default)}),typeof i.tintMode!="undefined"&&typeof i.tintColor!="undefined"?(v.tintColor=hr.fromArray(i.tintColor.rgba),v.tintMode=i.tintMode):typeof i.tintColor!="undefined"&&typeof n.tintMode!="undefined"&&(v.tintColor=hr.fromArray(i.tintColor.rgba),v.tintMode=n.tintMode),typeof i.alpha!="undefined"&&(v.alpha=i.alpha),e.createSticker(v)})}_deserializeTransformOperation(e){return super._deserializeTransformOperation(e).then(t=>{if(!!t)return t._ratio=null,t})}_deserializeInputImage(){let{data:e,type:t,uri:r}=this._data.image;return e&&t&&(r=`data:${t};base64,${e}`),r?ds.load(r).then(i=>{this._editor.setImage(i)}):Promise.resolve()}_deserializeAdjustmentsOperation(e){const{AdjustmentsOperation:t}=et.Operations;return super._deserializeAdjustmentsOperation(e).then(r=>{if(!r)return null;const{options:i}=e,n=["gamma","whites","blacks","temperature"],o={};return n.forEach(s=>{if(typeof i[s]=="undefined")return;const{minValue:a,midValue:l,maxValue:c}=t.prototype.availableOptions[s];let h=i[s];h=h<0?l+(l-a)*h:l+(c-l)*h,o[s]=h}),r.set(o),r})}_deserializeFocusOperation(e){const{options:t}=e.options;switch(e.options.type){case"radial":return super._deserializeFocusOperation(e);case"linear":{const{start:r,end:i,blurRadius:n}=t;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:Tt.fromObject(r),controlPoint2:Tt.fromObject(i),blurRadius:n}))}case"mirrored":{const{start:r,end:i,size:n,gradientSize:o,blurRadius:s}=t;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:Tt.fromObject(r),end:Tt.fromObject(i),size:n,gradientSize:o,blurRadius:s}))}case"gaussian":{const{blurRadius:r}=t;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:r}))}}}_deserializeText(e,t){const{options:r}=t,{fontSize:i,lineHeight:n,fontIdentifier:o,alignment:s,rotation:a,maxWidth:l,color:c,backgroundColor:h}=r,f=this._ui.getFontLoader();let d=this._fontManager.getVariationByIdentifier(o);return d?f.setFonts([d.getFont()]):d=this._fontManager.getDefaultVariation(),f.load().then(()=>{const p=e.getInputDimensions(!1),v=l*p.min()/p.x,g=e.createText({fontSize:i,lineHeight:n,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),textMetrics:d.getTextMetrics(),alignment:s,rotation:a,maxWidth:v,text:r.text,color:hr.fromArray(c.rgba),backgroundColor:hr.fromArray(h.rgba),position:Tt.fromObject(r.position)});return g._edited=!0,g})}_createBrushForPath(e){const{identifier:t,color:r,size:i,hardness:n}=e.brush,s={color:hr.fromArray(r.rgba),size:i};typeof n!="undefined"&&(s.hardness=n);let a=this._brushManager.getBrushByIdentifier(t);if(a||(a=this._brushManager.getFirstBrush()),a.prototype&&a.prototype instanceof Ox){const h=a;return new h(s)}const l=L({},a);delete l.image;class c extends Ox{}return c.identifier=a.identifier,new c(L(L({},l),s))}_deserializeFrame(e,t){return super._deserializeFrame(e,t).then(()=>{const r=this._editor.operations.get("frame"),{size:i,alpha:n,tintColor:o}=t.options,s={};typeof i!="undefined"&&(s.scale=i),typeof n!="undefined"&&(s.alpha=n),typeof o!="undefined"&&(s.tintColor=hr.fromArray(o.rgba)),r.set(s)})}_deserializeTextDesign(e,t){const{options:r}=t,{position:i,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:l,width:c,seed:h,inverted:f}=r;let{identifier:d}=r;d===et.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=et.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===et.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=et.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);const p=new xu(this._ui,this._getOptions("textdesign")),v=new ka(this._ui,{fonts:ai.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:g}=e.constructor.TextDesignSprite,m=this._ui.getFontLoader(),y=p.getLayoutByIdentifier(d),_=new y;return m.setFonts(v.getFonts()),g.setFonts(L(L({},g.getFonts()),v.getVariationsByIdentifier())),m.load().then(()=>{const b=_.getImagePaths().map(w=>({path:w,fullPath:this._ui.getAssetPath(w),image:null}));return g.loadImages(b).then(()=>(_.onImagesLoaded(),e.createTextDesign({position:i,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:hr.fromArray(l.rgba),width:c,seed:h,inverted:f,layout:_})))})}},Ug.version="3.0.0"}),Ng,RR=F(()=>{Cs(),Ng=class extends rr{},Ng.prototype.availableOptions={identifier:{type:"string",required:!0},defaultName:{type:"string",required:!0},ratio:{type:"*",required:!1,default:null},selected:{type:"boolean",required:!1},dimensions:{type:"vector2",required:!1},lockDimensions:{type:"boolean",required:!1,default:null},forceDimensions:{type:"boolean",required:!1,default:null}}}),jg,FR=F(()=>{Jt(),RR(),ER(),jg=class extends Lg{serialize(e={}){return super.serialize(e).then(t=>(t.meta={platform:"html5",version:this._editor.getSDK().version,createdAt:Er.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t))}_serializeSticker(e,t){const r=super._serializeSticker(e,t);return r.options.alpha=t.getAlpha(),r.options.tintColor&&(r.options.tintColor={rgba:r.options.tintColor}),r}_serializeText(e,t){const r=super._serializeText(e,t);return r.options.color={rgba:r.options.color},r.options.backgroundColor={rgba:r.options.backgroundColor},r.options.flipHorizontally=!1,r.options.flipVertically=!1,delete r.options.fontWeight,r}_serializePath(e){const t=super._serializePath(e);delete t.hardness,delete t.size,delete t.color;const r=e.getBrush();t.brush=r.serializeOptions(["identifier","size","color"],!0),typeof t.brush.identifier=="undefined"&&delete t.brush.identifier,t.brush.color={rgba:t.brush.color};const i=r.getOption("hardness");return i!=="undefined"&&(t.brush.hardness=i),t}_serializeFrameOperation(e,t){super._serializeFrameOperation(e,t);const r=t.filter(n=>n.type==="sprite");let i;if(r.length){i=r.pop();const n=i.options.sprites.filter(a=>a.type==="frame")[0];e.getTintColor().equals(new hr(1,1,1,0))||(n.options.tintColor={rgba:e.serializeOption("tintColor",!0)});const s=e.serializeOptions(["scale","alpha"],!0);n.options=L(L({},n.options),s),n.options.size=n.options.scale,delete n.options.scale}}_serializeTransformOperation(e){const t=super._serializeTransformOperation(e);if(e._ratio){let r;e._ratio instanceof Ng?r=e._ratio.getIdentifier():r=e._ratio.identifier,t.options.meta={identifier:r}}return delete t.options.scale,t}_serializeAdjustmentsOperation(e){const t=super._serializeAdjustmentsOperation(e),r=["gamma","whites","blacks","temperature"],{availableOptions:i}=e,n={};return r.forEach(o=>{const s=i[o],a=e.getOption(o),{minValue:l,midValue:c,maxValue:h}=s;n[o]=a<=c?(a-l)/(c-l)-1:(a-c)/(h-c)}),t.options=L(L({},t.options),n),t}_serializeOperation(e,t){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return super._serializeOperation(e,t)}}_serializeMirroredFocusOperation(e){return{type:"focus",options:{type:"mirrored",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}_serializeLinearFocusOperation(e){const t=e.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return t.start=t.controlPoint1,delete t.controlPoint1,t.end=t.controlPoint2,delete t.controlPoint2,{type:"focus",options:{type:"linear",options:t}}}_serializeBlurOperation(e){return{type:"focus",options:{type:"gaussian",options:e.serializeOptions(["blurRadius"],!0)}}}},jg.version="3.0.0"}),OR={};_r(OR,{default:()=>Mx});var Mx,kj=F(()=>{IR(),FR(),Mx=class{constructor(e){this._editor=e}serialize(...e){return new jg(this._editor).serialize(...e)}deserialize(e){return new Ug(this._editor,e).deserialize()}},Mx.version="3.0.0"}),Hg,MR=F(()=>{Jt(),Ul(),tf(),IR(),Hg=class extends Ug{_deserializeTextDesign(e,t){const{options:r}=t,{position:i,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:l,width:c,seed:h,inverted:f}=r;let{identifier:d}=r;d===et.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=et.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===et.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=et.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);const p=new xu(this._ui,this._getOptions("textdesign")),v=new ka(this._ui,{fonts:ai.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:g}=e.constructor.TextDesignSprite,m=this._ui.getFontLoader(),y=p.getLayoutByIdentifier(d),_=new y;return m.setFonts(v.getFonts()),g.setFonts(L(L({},g.getFonts()),v.getVariationsByIdentifier())),m.load().then(()=>{const b=_.getImagePaths().map(w=>({path:w,fullPath:this._ui.getAssetPath(w),image:null}));return g.loadImages(b).then(()=>(_.onImagesLoaded(),e.createTextDesign({position:i,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:hr.fromArray(l.rgba),width:c,seed:h,inverted:f,layout:_})))})}},Hg.version="3.1.0"}),Wg,PR=F(()=>{Jt(),FR(),Wg=class extends jg{_serializeTextDesign(e,t){const r=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);r.color={rgba:r.color};const i=t.getLayout();return i&&(r.identifier=i.constructor.identifier),{type:"textdesign",options:r}}},Wg.version="3.1.0"}),AR={};_r(AR,{default:()=>Px});var Px,Tj=F(()=>{MR(),PR(),Px=class{constructor(e){this._editor=e}serialize(...e){return new Wg(this._editor).serialize(...e)}deserialize(e){return new Hg(this._editor,e).deserialize()}},Px.version="3.1.0"}),Vg,zR=F(()=>{Jt(),Ul(),tf(),MR(),Vg=class extends Hg{_deserializeTextDesign(e,t){const{options:r}=t,{position:i,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:l,width:c,seed:h,inverted:f}=r;let{identifier:d}=r;d===et.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=et.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===et.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=et.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);const p="padding"in r?r.padding/c:-1,v=new xu(this._ui,this._getOptions("textdesign")),g=new ka(this._ui,{fonts:ai.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:m}=e.constructor.TextDesignSprite,y=this._ui.getFontLoader(),_=v.getLayoutByIdentifier(d),b=new _;return y.setFonts(g.getFonts()),m.setFonts(L(L({},m.getFonts()),g.getVariationsByIdentifier())),y.load().then(()=>{const w=b.getImagePaths().map(S=>({path:S,fullPath:this._ui.getAssetPath(S),image:null}));return m.loadImages(w).then(()=>(b.onImagesLoaded(),e.createTextDesign({position:i,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:hr.fromArray(l.rgba),width:c,seed:h,inverted:f,layout:b,padding:p})))})}},Vg.version="3.2.0"}),Gg,$R=F(()=>{PR(),Gg=class extends Wg{_serializeTextDesign(e,t){const r=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);r.color={rgba:r.color};const i=t.getLayout();return i&&(r.identifier=i.constructor.identifier),r.padding*=r.width,{type:"textdesign",options:r}}},Gg.version="3.2.0"}),BR={};_r(BR,{default:()=>Ax});var Ax,Ej=F(()=>{zR(),$R(),Ax=class{constructor(e){this._editor=e}serialize(...e){return new Gg(this._editor).serialize(...e)}deserialize(e){return new Vg(this._editor,e).deserialize()}},Ax.version="3.2.0"}),qg,LR=F(()=>{zR(),qg=class extends Vg{_deserializeOperation(e){return super._deserializeOperation(e)}_deserializeOrientationOperation(e){const{options:t}=e,r=this._editor.operations.getOrCreate("orientation");return r?(r.set(t),Promise.resolve(r)):Promise.resolve()}},qg.version="3.4.0"}),Xg,UR=F(()=>{Rx(),$R(),Xg=class extends Gg{_serializeOperation(e,t){switch(e.constructor.identifier){case"artfilter":return this._serializeStyle(e);default:return super._serializeOperation(e,t)}}_serializeOrientationOperation(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}_serializeStyle(e){const{identifier:t,intensity:r,blendMode:i}=e.getOptions(),{tileEdgeLength:n,overlappingFactor:o}=e.getStyleTransferModel().getOptions();return{type:"artFilter",options:{identifier:t,intensity:r,blendMode:$g[i],tileEdgeLength:n,overlappingFactor:o}}}},Xg.version="3.4.0"}),NR={};_r(NR,{default:()=>zx});var zx,Dj=F(()=>{LR(),UR(),zx=class{constructor(e){this._editor=e}serialize(...e){return new Xg(this._editor).serialize(...e)}deserialize(e){return new qg(this._editor,e).deserialize()}},zx.version="3.4.0"}),Yg,jR=F(()=>{Jt(),Ul(),tf(),LR(),Yg=class extends qg{_deserializeTextDesign(e,t){const{options:r}=t,{position:i,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:l,width:c,seed:h,inverted:f,identifier:d}=r,p="padding"in r?r.padding/c:-1,v=new xu(this._ui,this._getOptions("textdesign")),g=new ka(this._ui,{fonts:ai.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:m}=e.constructor.TextDesignSprite,y=this._ui.getFontLoader(),_=v.getLayoutByIdentifier(d),b=new _;return y.setFonts(g.getFonts()),m.setFonts(L(L({},m.getFonts()),g.getVariationsByIdentifier())),y.load().then(()=>{const w=b.getImagePaths().map(S=>({path:S,fullPath:this._ui.getAssetPath(S),image:null}));return m.loadImages(w).then(()=>(b.onImagesLoaded(),e.createTextDesign({position:i,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:hr.fromArray(l.rgba),width:c,seed:h,inverted:f,layout:b,padding:p})))})}},Yg.version="3.5.0"}),Qg,HR=F(()=>{UR(),Qg=class extends Xg{},Qg.version="3.5.0"}),WR={};_r(WR,{default:()=>$x});var $x,Ij=F(()=>{jR(),HR(),$x=class{constructor(e){this._editor=e}serialize(...e){return new Qg(this._editor).serialize(...e)}deserialize(e){return new Yg(this._editor,e).deserialize()}},$x.version="3.5.0"}),Kg,VR=F(()=>{Jt(),jR(),Kg=class extends Yg{_deserializeAdjustmentsOperation(e){const{AdjustmentsOperation:t}=et.Operations;return super._deserializeAdjustmentsOperation(e).then(r=>{if(!r)return null;const{options:i}=e,n="sharpness",o={};if(typeof i[n]=="undefined")return;const{minValue:s,midValue:a,maxValue:l}=t.prototype.availableOptions[n];let c=i[n];return c=c<0?a+(a-s)*c:a+(l-a)*c,o[n]=c,r.set(o),r})}},Kg.version="3.6.0"}),Zg,GR=F(()=>{HR(),Zg=class extends Qg{_serializeAdjustmentsOperation(e){const t=super._serializeAdjustmentsOperation(e),r="sharpness",{availableOptions:i}=e,n={},o=i[r],s=e.getOption(r),{minValue:a,midValue:l,maxValue:c}=o;return n[r]=s<=l?(s-a)/(l-a)-1:(s-l)/(c-l),t.options=L(L({},t.options),n),t}},Zg.version="3.6.0"}),qR={};_r(qR,{default:()=>Bx});var Bx,Rj=F(()=>{VR(),GR(),Bx=class{constructor(e){this._editor=e}serialize(...e){return new Zg(this._editor).serialize(...e)}deserialize(e){return new Kg(this._editor,e).deserialize()}},Bx.version="3.6.0"}),Jg,XR=F(()=>{Cs(),VR(),Jg=class extends Kg{deserialize(){return this._validateVersion().then(()=>this._deserializeAssetLibrary()).then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_deserializeAssetLibrary(){return new Promise((e,t)=>{const r=this._data;if(!r.assetLibrary){e();return}const{assets:i}=r.assetLibrary,n=[];for(const o in i)n.push(this._deserializeCustomAssets(o,i[o]));return Promise.all(n).then(()=>{e()}).catch(o=>{console.error(o),t(o)})})}_deserializeCustomAssets(e,t){switch(e){case"stickers":return this._deserializeCustomStickerAssets(t);default:return Promise.reject(new Error(`Unknown asset type: ${e}`))}}_deserializeCustomStickerAssets(e){let t="none";const r=this._editor.getOptions().editor;r&&r.controlsOptions&&r.controlsOptions.sticker&&(t=r.controlsOptions.sticker.customStickerTintMode||"none");const i=e.map(n=>new Promise((o,s)=>{const{identifier:a,raster:l}=n,c=n.svg!==void 0;let h=`data:${l.type};base64,${l.data}`,f=new vs;f.onload=()=>{f=this._editor.getSDK().correctExifOrientation(f),f.toDataURL&&(h=f.toDataURL());let p={data:"",width:1,height:1};p=this._stickerManager.renderStickerThumbnailFromImage(f);const v={identifier:a,defaultName:n.name||"",tintMode:t,images:{mediaBase:{uris:[h],rawData:!0,isSVG:c,width:f.width,height:f.height},mediaThumb:{uris:[p.data],rawData:!0,width:p.width,height:p.height}}};if(c){const g=`data:image/svg+xml;base64,${n.svg.data}`;v.images.mediaBase.uris.push(g)}o(v)},f.onerror=()=>{s(new Error(`Invalid base64 data: ${h}`))},f.src=h}));return Promise.all(i).then(n=>{this._editor.getDynamicAssetsLibrary().setAssets("sticker",n),this._stickerManager.reload()})}},Jg.version="3.7.0"}),ev,YR=F(()=>{GR(),ev=class extends Zg{serialize(e={}){return super.serialize(e).then(t=>this._serializeAssetLibrary(t).then(r=>r))}_serializeAssetLibrary(e){if(!this._editor.getDynamicAssetsLibrary)return Promise.resolve(e);const t=this._editor.getDynamicAssetsLibrary(),r=this._serializeCustomStickerAssets(e,t);return r.length===0||(e.assetLibrary={assets:{stickers:r}}),Promise.resolve(e)}_serializeCustomStickerAssets(e,t){const r=t.getAssets("sticker");if(r.length===0)return[];const i=e.operations.filter(s=>s.type==="sprite").flatMap(s=>s.options.sprites).filter(s=>s.type==="sticker").map(s=>s.options.identifier),n={};return i.forEach(s=>{n[s]=!0}),r.filter(s=>n[s.identifier]).map(s=>{const{identifier:a,defaultName:l,images:c}=s,h=c.mediaBase.uris[0],{isSVG:f}=c.mediaBase,p=/^data:(image\/(jpeg|png));base64,(.*)$/g.exec(h),v=p[1],g=p[3],m={identifier:a,name:l,raster:{type:v,data:g}};return l&&(m.name=l),f&&(m.svg={data:c.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),m})}},ev.version="3.7.0"}),QR={};_r(QR,{default:()=>Lx});var Lx,Fj=F(()=>{XR(),YR(),Lx=class{constructor(e){this._editor=e}serialize(...e){return new ev(this._editor).serialize(...e)}deserialize(e){return new Jg(this._editor,e).deserialize()}},Lx.version="3.7.0"}),tv,KR=F(()=>{XR(),tv=class extends Jg{},tv.version="3.8.0"}),rv,ZR=F(()=>{YR(),rv=class extends ev{_serializeSticker(e,t){const r=super._serializeSticker(e,t);return r.options.tintMode=t.getTintMode(),r}},rv.version="3.8.0"}),JR={};_r(JR,{default:()=>Ux});var Ux,Oj=F(()=>{KR(),ZR(),Ux=class{constructor(e){this._editor=e}serialize(...e){return new rv(this._editor).serialize(...e)}deserialize(e){return new tv(this._editor,e).deserialize()}},Ux.version="3.8.0"}),iv,e4=F(()=>{Jt(),KR(),iv=class extends tv{_deserializeTransformOperation(e){return super._deserializeCropOperation(e).then(t=>{if(!t)return;const r=Er.Array.find(this._data.operations,i=>i.type==="orientation");if(r){const{options:i}=r;t.rotate(i.rotation),i.flipHorizontally&&(t.flip("horizontal"),t.setRotation(t.getRotation()*-1)),i.flipVertically&&(t.flip("vertical"),t.setRotation(t.getRotation()*-1))}return t._ratio=null,t})}_deserializeText(e,t){const{options:r}=t,{fontSize:i,lineHeight:n,fontIdentifier:o,alignment:s,rotation:a,maxWidth:l,color:c,backgroundColor:h}=r,f=this._ui.getFontLoader();let d=this._fontManager.getVariationByIdentifier(o);return d?f.setFonts([d.getFont()]):d=this._fontManager.getDefaultVariation(),f.load().then(()=>{const p=e.getInputDimensions(!1),v=p.min(),g=p.x,m=p.y,y=l*v/g,_=i*v/m,b=e.createText({fontSize:_,lineHeight:n,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),textMetrics:d.getTextMetrics(),alignment:s,rotation:a,maxWidth:y,text:r.text,color:hr.fromArray(c.rgba),backgroundColor:hr.fromArray(h.rgba),position:Tt.fromObject(r.position)});return b._edited=!0,b})}},iv.version="3.9.0"}),Nx,nv,t4=F(()=>{RR(),ZR(),Nx=Math.PI*2,nv=class extends rv{_serializeTransformOperation(e){const{operations:t}=this._editor;if(t.exists("orientation")){e=e.clone();const n=t.get("orientation");n.getFlipVertically()&&(e.flip("vertical"),e.setRotation(e.getRotation()*-1)),n.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(e.getRotation()*-1)),e.rotate(-n.getRotation())}const r=e.serializeOptions(["start","end","rotation","textureScale"],!0);r.rotation=(r.rotation+Nx)%Nx,r.textureScale!==1&&(r.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete r.textureScale;const i={type:"transform",options:r};if(e._ratio){let n;e._ratio instanceof Ng?n=e._ratio.getIdentifier():n=e._ratio.identifier,i.options.meta={identifier:n}}return delete i.options.scale,i}_serializeText(e,t){const r=e.getInputDimensions(!1),i=super._serializeText(e,t);return i.options.fontSize=i.options.fontSize*r.y/r.min(),i}},nv.version="3.9.0"}),r4={};_r(r4,{default:()=>jx});var jx,Mj=F(()=>{e4(),t4(),jx=class{constructor(e){this._editor=e}serialize(...e){return new nv(this._editor).serialize(...e)}deserialize(e){return new iv(this._editor,e).deserialize()}},jx.version="3.9.0"}),Hx,Pj=F(()=>{e4(),Hx=class extends iv{},Hx.version="3.12.0"}),Wx,Aj=F(()=>{t4(),Wx=class extends nv{_serializeCustomStickerAssets(e,t){const r=t.getAssets("sticker");if(r.length===0)return[];const i=e.operations.filter(s=>s.type==="sprite").flatMap(s=>s.options.sprites).filter(s=>s.type==="sticker").map(s=>s.options.identifier),n={};return i.forEach(s=>{n[s]=!0}),r.filter(s=>n[s.identifier]).map(s=>{const{identifier:a,defaultName:l,images:c}=s,h=c.mediaBase.uris[0],{isSVG:f}=c.mediaBase,p=/^data:(image\/(jpeg|png|gif));base64,(.*)$/g.exec(h),v=p[1],g=p[3],m={identifier:a,name:l,raster:{type:v,data:g}};return l&&(m.name=l),f&&(m.svg={data:c.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),m})}},Wx.version="3.12.0"}),i4={};_r(i4,{default:()=>Vx});var Vx,zj=F(()=>{Pj(),Aj(),Vx=class{constructor(e){this._editor=e}serialize(...e){return new Wx(this._editor).serialize(...e)}deserialize(e){return new Hx(this._editor,e).deserialize()}},Vx.version="3.12.0"}),$j="An invariant failed, however the error is obfuscated because this is an production build.",ov=[];Object.freeze(ov);var n4={};Object.freeze(n4);var Bj={};function rf(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:Bj}function vn(){return++Ne.mobxGuid}function nr(e){throw Ta(!1,e),"X"}function Ta(e,t){if(!e)throw new Error("[mobx] "+(t||$j))}function Gx(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var o4=function(){};function Lj(e){var t=[];return e.forEach(function(r){t.indexOf(r)===-1&&t.push(r)}),t}function qx(e){return e!==null&&typeof e=="object"}function wu(e){if(e===null||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}function Uj(e){if(Su(e)||Fs(e))return e;if(Array.isArray(e))return new Map(e);if(wu(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return nr("Cannot convert to map from '"+e+"'")}function Nj(e,t){for(var r=0;r<t.length;r++)ks(e,t[r],e[t[r]])}function ks(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function nf(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function Ea(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(i){return qx(i)&&i[r]===!0}}function jj(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)}function Su(e){return rf().Map!==void 0&&e instanceof rf().Map}function of(e){return e instanceof Set}function Ts(e){for(var t=[];;){var r=e.next();if(r.done)break;t.push(r.value)}return t}function s4(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function a4(e){return e===null?null:typeof e=="object"?""+e:e}function l4(e,t){for(var r=e.next();!r.done;)t(r.value),r=e.next()}function c4(){return typeof Symbol=="function"&&Symbol.iterator||"@@iterator"}function Xx(e,t){nf(e,c4(),t)}function sf(e){return e[c4()]=Hj,e}function Yx(){return typeof Symbol=="function"&&Symbol.toStringTag||"@@toStringTag"}function Hj(){return this}var sv=function(){function e(t){t===void 0&&(t="Atom@"+vn()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Lt.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return C4(this)},e.prototype.reportChanged=function(){Ds(),dH(this),Is()},e.prototype.toString=function(){return this.name},e}(),Qx=Ea("Atom",sv);function Kx(e,t,r){t===void 0&&(t=o4),r===void 0&&(r=o4);var i=new sv(e);return CH(i,t),F4(i,r),i}function u4(e,t){return e===t}function Wj(e,t){return uw(e,t)}function Vj(e,t){return uw(e,t,1)}function Gj(e,t){return jj(e,t)||u4(e,t)}var av={identity:u4,structural:Wj,default:Gj,shallow:Vj},Zx=function(e,t){return Zx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Zx(e,t)};function h4(e,t){Zx(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var br=function(){return br=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},br.apply(this,arguments)};function Jx(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o}function ew(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Jx(arguments[t]));return e}var qj={},Xj={};function Yj(e,t){var r=t?qj:Xj;return r[e]||(r[e]={configurable:!0,enumerable:t,get:function(){return Hl(this),this[e]},set:function(i){Hl(this),this[e]=i}})}function Hl(e){if(e.__mobxDidRunLazyInitializers!==!0){var t=e.__mobxDecorators;if(t){ks(e,"__mobxDidRunLazyInitializers",!0);for(var r in t){var i=t[r];i.propertyCreator(e,i.prop,i.descriptor,i.decoratorTarget,i.decoratorArguments)}}}}function d4(e,t){return function(){var i,n=function(s,a,l,c){if(c===!0)return t(s,a,l,s,i),null;if(!Object.prototype.hasOwnProperty.call(s,"__mobxDecorators")){var h=s.__mobxDecorators;ks(s,"__mobxDecorators",br({},h))}return s.__mobxDecorators[a]={prop:a,propertyCreator:t,descriptor:l,decoratorTarget:s,decoratorArguments:i},Yj(a,e)};return Qj(arguments)?(i=ov,n.apply(null,arguments)):(i=Array.prototype.slice.call(arguments),n)}}function Qj(e){return(e.length===2||e.length===3)&&typeof e[1]=="string"||e.length===4&&e[3]===!0}function af(e,t,r){return yv(e)?e:Array.isArray(e)?Ye.array(e,{name:r}):wu(e)?Ye.object(e,void 0,{name:r}):Su(e)?Ye.map(e,{name:r}):of(e)?Ye.set(e,{name:r}):e}function Kj(e,t,r){return e==null||Fu(e)||Ru(e)||Fs(e)||Ma(e)?e:Array.isArray(e)?Ye.array(e,{name:r,deep:!1}):wu(e)?Ye.object(e,void 0,{name:r,deep:!1}):Su(e)?Ye.map(e,{name:r,deep:!1}):of(e)?Ye.set(e,{name:r,deep:!1}):nr(!1)}function lv(e){return e}function Zj(e,t,r){return uw(e,t)?t:e}function cv(e){Ta(e);var t=d4(!0,function(i,n,o,s,a){var l=o?o.initializer?o.initializer.call(i):o.value:void 0;LH(i,n,l,e)}),r=(typeof process!="undefined"&&process.env,t);return r.enhancer=e,r}var f4={deep:!0,name:void 0,defaultDecorator:void 0},Jj={deep:!1,name:void 0,defaultDecorator:void 0};Object.freeze(f4),Object.freeze(Jj);function Cu(e){return e==null?f4:typeof e=="string"?{name:e,deep:!0}:e}function uv(e){return e.defaultDecorator?e.defaultDecorator.enhancer:e.deep===!1?lv:af}var tw=cv(af),eH=cv(Kj),p4=cv(lv),tH=cv(Zj);function rH(e,t,r){if(typeof arguments[1]=="string")return tw.apply(null,arguments);if(yv(e))return e;var i=wu(e)?Ye.object(e,t,r):Array.isArray(e)?Ye.array(e,t):Su(e)?Ye.map(e,t):of(e)?Ye.set(e,t):e;if(i!==e)return i;nr(!1)}var m4={box:function(e,t){arguments.length>2&&Es("box");var r=Cu(t);return new Ra(e,uv(r),r.name,!0,r.equals)},shallowBox:function(e,t){return arguments.length>2&&Es("shallowBox"),Ye.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&Es("array");var r=Cu(t);return new Xo(e,uv(r),r.name)},shallowArray:function(e,t){return arguments.length>2&&Es("shallowArray"),Ye.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&Es("map");var r=Cu(t);return new _v(e,uv(r),r.name)},shallowMap:function(e,t){return arguments.length>2&&Es("shallowMap"),Ye.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&Es("set");var r=Cu(t);return new xv(e,uv(r),r.name)},object:function(e,t,r){typeof arguments[1]=="string"&&Es("object");var i=Cu(r);return kH({},e,t,i)},shallowObject:function(e,t){return typeof arguments[1]=="string"&&Es("shallowObject"),Ye.object(e,{},{name:t,deep:!1})},ref:p4,shallow:eH,deep:tw,struct:tH},Ye=rH;Object.keys(m4).forEach(function(e){return Ye[e]=m4[e]});function Es(e){nr("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}var hv=d4(!1,function(e,t,r,i,n){var o=r.get,s=r.set,a=n[0]||{};UH(e,t,br({get:o,set:s},a))}),iH=hv({equals:av.structural}),O=function(t,r,i){if(typeof r=="string"||t!==null&&typeof t=="object"&&arguments.length===1)return hv.apply(null,arguments);var n=typeof r=="object"?r:{};return n.get=t,n.set=typeof r=="function"?r:n.set,n.name=n.name||t.name||"",new Fa(n)};O.struct=iH;var Lt;(function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"})(Lt||(Lt={}));var Wo;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(Wo||(Wo={}));var dv=function(){function e(t){this.cause=t}return e}();function lf(e){return e instanceof dv}function rw(e){switch(e.dependenciesState){case Lt.UP_TO_DATE:return!1;case Lt.NOT_TRACKING:case Lt.STALE:return!0;case Lt.POSSIBLY_STALE:{for(var t=Eu(!0),r=Tu(),i=e.observing,n=i.length,o=0;o<n;o++){var s=i[o];if(pv(s)){if(Ne.disableErrorBoundaries)s.get();else try{s.get()}catch{return Da(r),Ia(t),!0}if(e.dependenciesState===Lt.STALE)return Da(r),Ia(t),!0}}return y4(e),Da(r),Ia(t),!1}}}function ku(e){var t=e.observers.length>0;Ne.computationDepth>0&&t&&nr(!1),!Ne.allowStateChanges&&(t||Ne.enforceActions==="strict")&&nr(!1)}function g4(e,t,r){var i=Eu(!0);y4(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Ne.runId;var n=Ne.trackingDerivation;Ne.trackingDerivation=e;var o;if(Ne.disableErrorBoundaries===!0)o=t.call(r);else try{o=t.call(r)}catch(s){o=new dv(s)}return Ne.trackingDerivation=n,nH(e),e.observing.length,Ia(i),o}function nH(e){for(var t=e.observing,r=e.observing=e.newObserving,i=Lt.UP_TO_DATE,n=0,o=e.unboundDepsCount,s=0;s<o;s++){var a=r[s];a.diffValue===0&&(a.diffValue=1,n!==s&&(r[n]=a),n++),a.dependenciesState>i&&(i=a.dependenciesState)}for(r.length=n,e.newObserving=null,o=t.length;o--;){var a=t[o];a.diffValue===0&&w4(a,e),a.diffValue=0}for(;n--;){var a=r[n];a.diffValue===1&&(a.diffValue=0,hH(a,e))}i!==Lt.UP_TO_DATE&&(e.dependenciesState=i,e.onBecomeStale())}function iw(e){var t=e.observing;e.observing=[];for(var r=t.length;r--;)w4(t[r],e);e.dependenciesState=Lt.NOT_TRACKING}function v4(e){var t=Tu(),r=e();return Da(t),r}function Tu(){var e=Ne.trackingDerivation;return Ne.trackingDerivation=null,e}function Da(e){Ne.trackingDerivation=e}function Eu(e){var t=Ne.allowStateReads;return Ne.allowStateReads=e,t}function Ia(e){Ne.allowStateReads=e}function y4(e){if(e.dependenciesState!==Lt.UP_TO_DATE){e.dependenciesState=Lt.UP_TO_DATE;for(var t=e.observing,r=t.length;r--;)t[r].lowestObserverState=Lt.UP_TO_DATE}}var fv=0,oH=1,_4=Object.getOwnPropertyDescriptor(function(){},"name");_4&&_4.configurable;function Wl(e,t){var r=function(){return b4(e,t,this,arguments)};return r.isMobxAction=!0,r}function b4(e,t,r,i){var n=sH(e,r,i);try{return t.apply(r,i)}catch(o){throw n.error=o,o}finally{aH(n)}}function sH(e,t,r){var i=mi()&&!!e,n=0;if(i){n=Date.now();var o=r&&r.length||0,s=new Array(o);if(o>0)for(var a=0;a<o;a++)s[a]=r[a];so({type:"action",name:e,object:t,arguments:s})}var l=Tu();Ds();var c=cf(!0),h=Eu(!0),f={prevDerivation:l,prevAllowStateChanges:c,prevAllowStateReads:h,notifySpy:i,startTime:n,actionId:oH++,parentActionId:fv};return fv=f.actionId,f}function aH(e){fv!==e.actionId&&nr("invalid action stack. did you forget to finish an action?"),fv=e.parentActionId,e.error!==void 0&&(Ne.suppressReactionErrors=!0),uf(e.prevAllowStateChanges),Ia(e.prevAllowStateReads),Is(),Da(e.prevDerivation),e.notifySpy&&ao({time:Date.now()-e.startTime}),Ne.suppressReactionErrors=!1}function lH(e,t){var r=cf(e),i;try{i=t()}finally{uf(r)}return i}function cf(e){var t=Ne.allowStateChanges;return Ne.allowStateChanges=e,t}function uf(e){Ne.allowStateChanges=e}var Ra=function(e){h4(t,e);function t(r,i,n,o,s){n===void 0&&(n="ObservableValue@"+vn()),o===void 0&&(o=!0),s===void 0&&(s=av.default);var a=e.call(this,n)||this;return a.enhancer=i,a.name=n,a.equals=s,a.hasUnreportedChange=!1,a.value=i(r,void 0,n),o&&mi()&&Vl({type:"create",name:a.name,newValue:""+a.value}),a}return t.prototype.dehanceValue=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.prototype.set=function(r){var i=this.value;if(r=this.prepareNewValue(r),r!==Ne.UNCHANGED){var n=mi();n&&so({type:"update",name:this.name,newValue:r,oldValue:i}),this.setNewValue(r),n&&ao()}},t.prototype.prepareNewValue=function(r){if(ku(this),Go(this)){var i=qo(this,{object:this,type:"update",newValue:r});if(!i)return Ne.UNCHANGED;r=i.newValue}return r=this.enhancer(r,this.value,this.name),this.equals(this.value,r)?Ne.UNCHANGED:r},t.prototype.setNewValue=function(r){var i=this.value;this.value=r,this.reportChanged(),lo(this)&&co(this,{type:"update",object:this,newValue:r,oldValue:i})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(r){return hf(this,r)},t.prototype.observe=function(r,i){return i&&r({object:this,type:"update",newValue:this.value,oldValue:void 0}),df(this,r)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return a4(this.get())},t}(sv);Ra.prototype[s4()]=Ra.prototype.valueOf;var cH=Ea("ObservableValue",Ra),Fa=function(){function e(t){this.dependenciesState=Lt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Lt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+vn(),this.value=new dv(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Wo.NONE,Ta(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+vn(),t.set&&(this.setter=Wl(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?av.structural:av.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return e.prototype.onBecomeStale=function(){pH(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&nr("Cycle detected in computation "+this.name+": "+this.derivation),Ne.inBatch===0&&this.observers.length===0&&!this.keepAlive?rw(this)&&(this.warnAboutUntrackedRead(),Ds(),this.value=this.computeValue(!1),Is()):(C4(this),rw(this)&&this.trackAndCompute()&&fH(this));var t=this.value;if(lf(t))throw t.cause;return t},e.prototype.peek=function(){var t=this.computeValue(!1);if(lf(t))throw t.cause;return t},e.prototype.set=function(t){if(this.setter){Ta(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else Ta(!1,!1)},e.prototype.trackAndCompute=function(){mi()&&Vl({object:this.scope,type:"compute",name:this.name});var t=this.value,r=this.dependenciesState===Lt.NOT_TRACKING,i=this.computeValue(!0),n=r||lf(t)||lf(i)||!this.equals(t,i);return n&&(this.value=i),n},e.prototype.computeValue=function(t){this.isComputing=!0,Ne.computationDepth++;var r;if(t)r=g4(this,this.derivation,this.scope);else if(Ne.disableErrorBoundaries===!0)r=this.derivation.call(this.scope);else try{r=this.derivation.call(this.scope)}catch(i){r=new dv(i)}return Ne.computationDepth--,this.isComputing=!1,r},e.prototype.suspend=function(){this.keepAlive||(iw(this),this.value=void 0)},e.prototype.observe=function(t,r){var i=this,n=!0,o=void 0;return xH(function(){var s=i.get();if(!n||r){var a=Tu();t({type:"update",object:i,newValue:s,oldValue:o}),Da(a)}n=!1,o=s})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return a4(this.get())},e}();Fa.prototype[s4()]=Fa.prototype.valueOf;var pv=Ea("ComputedValue",Fa),mv=function(){function e(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return e}(),gv=!0,x4=!1,Ne=function(){var e=rf();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(gv=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new mv().version&&(gv=!1),gv?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new mv):(setTimeout(function(){x4||nr("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new mv)}();function uH(){(Ne.pendingReactions.length||Ne.inBatch||Ne.isRunningReactions)&&nr("isolateGlobalState should be called before MobX is running any reactions"),x4=!0,gv&&(--rf().__mobxInstanceCount===0&&(rf().__mobxGlobals=void 0),Ne=new mv)}function hH(e,t){var r=e.observers.length;r&&(e.observersIndexes[t.__mapid]=r),e.observers[r]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function w4(e,t){if(e.observers.length===1)e.observers.length=0,S4(e);else{var r=e.observers,i=e.observersIndexes,n=r.pop();if(n!==t){var o=i[t.__mapid]||0;o?i[n.__mapid]=o:delete i[n.__mapid],r[o]=n}delete i[t.__mapid]}}function S4(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,Ne.pendingUnobservations.push(e))}function Ds(){Ne.inBatch++}function Is(){if(--Ne.inBatch===0){D4();for(var e=Ne.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,r.observers.length===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof Fa&&r.suspend())}Ne.pendingUnobservations=[]}}function C4(e){var t=Ne.trackingDerivation;return t!==null?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(e.observers.length===0&&Ne.inBatch>0&&S4(e),!1)}function dH(e){if(e.lowestObserverState!==Lt.STALE){e.lowestObserverState=Lt.STALE;for(var t=e.observers,r=t.length;r--;){var i=t[r];i.dependenciesState===Lt.UP_TO_DATE&&(i.isTracing!==Wo.NONE&&k4(i,e),i.onBecomeStale()),i.dependenciesState=Lt.STALE}}}function fH(e){if(e.lowestObserverState!==Lt.STALE){e.lowestObserverState=Lt.STALE;for(var t=e.observers,r=t.length;r--;){var i=t[r];i.dependenciesState===Lt.POSSIBLY_STALE?i.dependenciesState=Lt.STALE:i.dependenciesState===Lt.UP_TO_DATE&&(e.lowestObserverState=Lt.UP_TO_DATE)}}}function pH(e){if(e.lowestObserverState===Lt.UP_TO_DATE){e.lowestObserverState=Lt.POSSIBLY_STALE;for(var t=e.observers,r=t.length;r--;){var i=t[r];i.dependenciesState===Lt.UP_TO_DATE&&(i.dependenciesState=Lt.POSSIBLY_STALE,i.isTracing!==Wo.NONE&&k4(i,e),i.onBecomeStale())}}}function k4(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===Wo.BREAK){var r=[];T4(P4(e),r,1),new Function(`debugger;
/*
Tracing '`+e.name+`'

You are entering this break point because derivation '`+e.name+"' is being traced and '"+t.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(e instanceof Fa?e.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+r.join(`
`)+`
*/
    `)()}}function T4(e,t,r){if(t.length>=1e3){t.push("(and many more)");return}t.push(""+new Array(r).join("	")+e.name),e.dependencies&&e.dependencies.forEach(function(i){return T4(i,t,r+1)})}var Du=function(){function e(t,r,i,n){t===void 0&&(t="Reaction@"+vn()),n===void 0&&(n=!1),this.name=t,this.onInvalidate=r,this.errorHandler=i,this.requiresObservable=n,this.observing=[],this.newObserving=[],this.dependenciesState=Lt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+vn(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Wo.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Ne.pendingReactions.push(this),D4())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Ds(),this._isScheduled=!1,rw(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&mi()&&Vl({name:this.name,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation(t)}}Is()}},e.prototype.track=function(t){Ds();var r=mi(),i;r&&(i=Date.now(),so({name:this.name,type:"reaction"})),this._isRunning=!0;var n=g4(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&iw(this),lf(n)&&this.reportExceptionInDerivation(n.cause),r&&ao({time:Date.now()-i}),Is()},e.prototype.reportExceptionInDerivation=function(t){var r=this;if(this.errorHandler){this.errorHandler(t,this);return}if(Ne.disableErrorBoundaries)throw t;var i="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Ne.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(i,t),mi()&&Vl({type:"error",name:this.name,message:i,error:""+t}),Ne.globalReactionErrorHandlers.forEach(function(n){return n(t,r)})},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ds(),iw(this),Is()))},e.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(t){t===void 0&&(t=!1),IH(this,t)},e}(),E4=100,nw=function(e){return e()};function D4(){Ne.inBatch>0||Ne.isRunningReactions||nw(mH)}function mH(){Ne.isRunningReactions=!0;for(var e=Ne.pendingReactions,t=0;e.length>0;){++t===E4&&(console.error("Reaction doesn't converge to a stable state after "+E4+" iterations."+(" Probably there is a cycle in the reactive function: "+e[0])),e.splice(0));for(var r=e.splice(0),i=0,n=r.length;i<n;i++)r[i].runReaction()}Ne.isRunningReactions=!1}var vv=Ea("Reaction",Du);function gH(e){var t=nw;nw=function(r){return e(function(){return t(r)})}}function mi(){return!!Ne.spyListeners.length}function Vl(e){if(!!Ne.spyListeners.length)for(var t=Ne.spyListeners,r=0,i=t.length;r<i;r++)t[r](e)}function so(e){var t=br(br({},e),{spyReportStart:!0});Vl(t)}var vH={spyReportEnd:!0};function ao(e){Vl(e?br(br({},e),{spyReportEnd:!0}):vH)}function I4(e){return Ne.spyListeners.push(e),Gx(function(){Ne.spyListeners=Ne.spyListeners.filter(function(t){return t!==e})})}function yH(){nr(!1)}function R4(e){return function(t,r,i){if(i){if(i.value)return{value:Wl(e,i.value),enumerable:!1,configurable:!0,writable:!0};var n=i.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Wl(e,n.call(this))}}}return _H(e).apply(this,arguments)}}function _H(e){return function(t,r,i){Object.defineProperty(t,r,{configurable:!0,enumerable:!1,get:function(){},set:function(n){ks(this,r,P(e,n))}})}}function bH(e,t,r,i){return i===!0?(ow(e,t,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return ow(this,t,r.value||r.initializer.call(this)),this[t]},set:yH}:{enumerable:!1,configurable:!0,set:function(n){ow(this,t,n)},get:function(){}}}var P=function(t,r,i,n){if(arguments.length===1&&typeof t=="function")return Wl(t.name||"<unnamed action>",t);if(arguments.length===2&&typeof r=="function")return Wl(t,r);if(arguments.length===1&&typeof t=="string")return R4(t);if(n===!0)t[r]=Wl(t.name||r,i.value);else return R4(r).apply(null,arguments)};P.bound=bH;function Vo(e,t){var r=typeof e=="string"?e:e.name||"<unnamed action>",i=typeof e=="function"?e:t;return b4(r,i,this,void 0)}function ow(e,t,r){ks(e,t,Wl(t,r.bind(e)))}function xH(e,t){t===void 0&&(t=n4);var r=t&&t.name||e.name||"Autorun@"+vn(),i=!t.scheduler&&!t.delay,n;if(i)n=new Du(r,function(){this.track(a)},t.onError,t.requiresObservable);else{var o=SH(t),s=!1;n=new Du(r,function(){s||(s=!0,o(function(){s=!1,n.isDisposed||n.track(a)}))},t.onError,t.requiresObservable)}function a(){e(n)}return n.schedule(),n.getDisposer()}var wH=function(e){return e()};function SH(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:wH}function CH(e,t,r){return O4("onBecomeObserved",e,t,r)}function F4(e,t,r){return O4("onBecomeUnobserved",e,t,r)}function O4(e,t,r,i){var n=typeof i=="function"?Pa(t,r):Pa(t),o=typeof i=="function"?i:r,s=n[e];return typeof s!="function"?nr(!1):(n[e]=function(){s.call(this),o.call(this)},function(){n[e]=s})}function M4(e){var t=e.enforceActions,r=e.computedRequiresReaction,i=e.computedConfigurable,n=e.disableErrorBoundaries,o=e.arrayBuffer,s=e.reactionScheduler,a=e.reactionRequiresObservable,l=e.observableRequiresReaction;if(e.isolateGlobalState===!0&&uH(),t!==void 0){var c=void 0;switch(t){case!0:case"observed":c=!0;break;case!1:case"never":c=!1;break;case"strict":case"always":c="strict";break;default:nr("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}Ne.enforceActions=c,Ne.allowStateChanges=!(c===!0||c==="strict")}r!==void 0&&(Ne.computedRequiresReaction=!!r),a!==void 0&&(Ne.reactionRequiresObservable=!!a),l!==void 0&&(Ne.observableRequiresReaction=!!l,Ne.allowStateReads=!Ne.observableRequiresReaction),i!==void 0&&(Ne.computedConfigurable=!!i),n!==void 0&&(n===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),Ne.disableErrorBoundaries=!!n),typeof o=="number"&&lw(o),s&&gH(s)}function kH(e,t,r,i){var n;i=Cu(i);var o=i.defaultDecorator||(i.deep===!1?p4:tw);Hl(e),cw(e,i.name,o.enhancer),Ds();try{for(var s=Object.getOwnPropertyNames(t),a=0,l=s.length;a<l;a++){var n=s[a],c=Object.getOwnPropertyDescriptor(t,n),h=r&&n in r?r[n]:c.get?hv:o,f=h(e,n,c,!0);f&&Object.defineProperty(e,n,f)}}finally{Is()}return e}function P4(e,t){return A4(Pa(e,t))}function A4(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=Lj(e.observing).map(A4)),t}function TH(e,t){if(e==null)return!1;if(t!==void 0){if(Fu(e)){var r=e.$mobx;return r.values&&!!r.values[t]}return!1}return Fu(e)||!!e.$mobx||Qx(e)||vv(e)||pv(e)}function yv(e){return arguments.length!==1&&nr(!1),TH(e)}function EH(e){return Fu(e)?e.$mobx.getKeys():Fs(e)||Ma(e)?Ts(e.keys()):Ru(e)?e.map(function(t,r){return r}):nr(!1)}var DH={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Iu(e,t,r,i){return i.detectCycles&&e.set(t,r),r}function Oa(e,t,r){if(!t.recurseEverything&&!yv(e)||typeof e!="object")return e;if(e===null)return null;if(e instanceof Date)return e;if(cH(e))return Oa(e.get(),t,r);yv(e)&&EH(e);var i=t.detectCycles===!0;if(i&&e!==null&&r.has(e))return r.get(e);if(Ru(e)||Array.isArray(e)){var n=Iu(r,e,[],t),o=e.map(function(v){return Oa(v,t,r)});n.length=o.length;for(var s=0,a=o.length;s<a;s++)n[s]=o[s];return n}if(Ma(e)||Object.getPrototypeOf(e)===Set.prototype)if(t.exportMapsAsObjects===!1){var l=Iu(r,e,new Set,t);return e.forEach(function(v){l.add(Oa(v,t,r))}),l}else{var c=Iu(r,e,[],t);return e.forEach(function(v){c.push(Oa(v,t,r))}),c}if(Fs(e)||Object.getPrototypeOf(e)===Map.prototype)if(t.exportMapsAsObjects===!1){var h=Iu(r,e,new Map,t);return e.forEach(function(v,g){h.set(g,Oa(v,t,r))}),h}else{var f=Iu(r,e,{},t);return e.forEach(function(v,g){f[g]=Oa(v,t,r)}),f}var d=Iu(r,e,{},t);for(var p in e)d[p]=Oa(e[p],t,r);return d}function it(e,t){typeof t=="boolean"&&(t={detectCycles:t}),t||(t=DH),t.detectCycles=t.detectCycles===void 0?t.recurseEverything===!0:t.detectCycles===!0;var r;return t.detectCycles&&(r=new Map),Oa(e,t,r)}function IH(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=!1;typeof e[e.length-1]=="boolean"&&(r=e.pop());var i=RH(e);if(!i)return nr(!1);i.isTracing===Wo.NONE&&console.log("[mobx.trace] '"+i.name+"' tracing enabled"),i.isTracing=r?Wo.BREAK:Wo.LOG}function RH(e){switch(e.length){case 0:return Ne.trackingDerivation;case 1:return Pa(e[0]);case 2:return Pa(e[0],e[1])}}function Rs(e,t){t===void 0&&(t=void 0),Ds();try{return e.apply(t)}finally{Is()}}function Go(e){return e.interceptors!==void 0&&e.interceptors.length>0}function hf(e,t){var r=e.interceptors||(e.interceptors=[]);return r.push(t),Gx(function(){var i=r.indexOf(t);i!==-1&&r.splice(i,1)})}function qo(e,t){var r=Tu();try{var i=e.interceptors;if(i)for(var n=0,o=i.length;n<o&&(t=i[n](t),Ta(!t||t.type,"Intercept handlers should return nothing or a change object"),!!t);n++);return t}finally{Da(r)}}function lo(e){return e.changeListeners!==void 0&&e.changeListeners.length>0}function df(e,t){var r=e.changeListeners||(e.changeListeners=[]);return r.push(t),Gx(function(){var i=r.indexOf(t);i!==-1&&r.splice(i,1)})}function co(e,t){var r=Tu(),i=e.changeListeners;if(!!i){i=i.slice();for(var n=0,o=i.length;n<o;n++)i[n](t);Da(r)}}var FH=1e4,OH=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)["0"]=1,e===!1}(),sw=0,aw=function(){function e(){}return e}();function MH(e,t){typeof Object.setPrototypeOf!="undefined"?Object.setPrototypeOf(e.prototype,t):typeof e.prototype.__proto__!="undefined"?e.prototype.__proto__=t:e.prototype=t}MH(aw,Array.prototype),Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(e){Object.defineProperty(aw.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})});var z4=function(){function e(t,r,i,n){this.array=i,this.owned=n,this.values=[],this.lastKnownLength=0,this.atom=new sv(t||"ObservableArray@"+vn()),this.enhancer=function(o,s){return r(o,s,t+"[..]")}}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.dehanceValues=function(t){return this.dehancer!==void 0&&t.length>0?t.map(this.dehancer):t},e.prototype.intercept=function(t){return hf(this,t)},e.prototype.observe=function(t,r){return r===void 0&&(r=!1),r&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),df(this,t)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(t){if(typeof t!="number"||t<0)throw new Error("[mobx.array] Out of range: "+t);var r=this.values.length;if(t!==r)if(t>r){for(var i=new Array(t-r),n=0;n<t-r;n++)i[n]=void 0;this.spliceWithArray(r,0,i)}else this.spliceWithArray(t,r-t)},e.prototype.updateArrayLength=function(t,r){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=r,r>0&&t+r+1>sw&&lw(t+r+1)},e.prototype.spliceWithArray=function(t,r,i){var n=this;ku(this.atom);var o=this.values.length;if(t===void 0?t=0:t>o?t=o:t<0&&(t=Math.max(0,o+t)),arguments.length===1?r=o-t:r==null?r=0:r=Math.max(0,Math.min(r,o-t)),i===void 0&&(i=ov),Go(this)){var s=qo(this,{object:this.array,type:"splice",index:t,removedCount:r,added:i});if(!s)return ov;r=s.removedCount,i=s.added}i=i.length===0?i:i.map(function(c){return n.enhancer(c,void 0)});var a=i.length-r;this.updateArrayLength(o,a);var l=this.spliceItemsIntoValues(t,r,i);return(r!==0||i.length!==0)&&this.notifyArraySplice(t,i,l),this.dehanceValues(l)},e.prototype.spliceItemsIntoValues=function(t,r,i){var n;if(i.length<FH)return(n=this.values).splice.apply(n,ew([t,r],i));var o=this.values.slice(t,t+r);return this.values=this.values.slice(0,t).concat(i,this.values.slice(t+r)),o},e.prototype.notifyArrayChildUpdate=function(t,r,i){var n=!this.owned&&mi(),o=lo(this),s=o||n?{object:this.array,type:"update",index:t,newValue:r,oldValue:i}:null;n&&so(br(br({},s),{name:this.atom.name})),this.atom.reportChanged(),o&&co(this,s),n&&ao()},e.prototype.notifyArraySplice=function(t,r,i){var n=!this.owned&&mi(),o=lo(this),s=o||n?{object:this.array,type:"splice",index:t,removed:i,added:r,removedCount:i.length,addedCount:r.length}:null;n&&so(br(br({},s),{name:this.atom.name})),this.atom.reportChanged(),o&&co(this,s),n&&ao()},e}(),Xo=function(e){h4(t,e);function t(r,i,n,o){n===void 0&&(n="ObservableArray@"+vn()),o===void 0&&(o=!1);var s=e.call(this)||this,a=new z4(n,i,s,o);if(nf(s,"$mobx",a),r&&r.length){var l=cf(!0);s.spliceWithArray(0,0,r),uf(l)}return OH&&Object.defineProperty(a.array,"0",PH),s}return t.prototype.intercept=function(r){return this.$mobx.intercept(r)},t.prototype.observe=function(r,i){return i===void 0&&(i=!1),this.$mobx.observe(r,i)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),r.map(function(n){return Ru(n)?n.peek():n}))},t.prototype.replace=function(r){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,r)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(r,i,n){n===void 0&&(n=0);var o=this.findIndex.apply(this,arguments);return o===-1?void 0:this.get(o)},t.prototype.findIndex=function(r,i,n){n===void 0&&(n=0);for(var o=this.peek(),s=o.length,a=n;a<s;a++)if(r.call(i,o[a],a,this))return a;return-1},t.prototype.splice=function(r,i){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(r);case 2:return this.$mobx.spliceWithArray(r,i)}return this.$mobx.spliceWithArray(r,i,n)},t.prototype.spliceWithArray=function(r,i,n){return this.$mobx.spliceWithArray(r,i,n)},t.prototype.push=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,r),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var n=this.$mobx;return n.spliceWithArray(0,0,r),n.values.length},t.prototype.reverse=function(){var r=this.slice();return r.reverse.apply(r,arguments)},t.prototype.sort=function(r){var i=this.slice();return i.sort.apply(i,arguments)},t.prototype.remove=function(r){var i=this.$mobx.dehanceValues(this.$mobx.values).indexOf(r);return i>-1?(this.splice(i,1),!0):!1},t.prototype.move=function(r,i){function n(a){if(a<0)throw new Error("[mobx.array] Index out of bounds: "+a+" is negative");var l=this.$mobx.values.length;if(a>=l)throw new Error("[mobx.array] Index out of bounds: "+a+" is not smaller than "+l)}if(n.call(this,r),n.call(this,i),r!==i){var o=this.$mobx.values,s;r<i?s=ew(o.slice(0,r),o.slice(r+1,i+1),[o[r]],o.slice(i+1)):s=ew(o.slice(0,i),[o[r]],o.slice(i,r),o.slice(r+1)),this.replace(s)}},t.prototype.get=function(r){var i=this.$mobx;if(i){if(r<i.values.length)return i.atom.reportObserved(),i.dehanceValue(i.values[r]);console.warn("[mobx.array] Attempt to read an array index ("+r+") that is out of bounds ("+i.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},t.prototype.set=function(r,i){var n=this.$mobx,o=n.values;if(r<o.length){ku(n.atom);var s=o[r];if(Go(n)){var a=qo(n,{type:"update",object:this,index:r,newValue:i});if(!a)return;i=a.newValue}i=n.enhancer(i,s);var l=i!==s;l&&(o[r]=i,n.notifyArrayChildUpdate(r,i,s))}else if(r===o.length)n.spliceWithArray(r,0,[i]);else throw new Error("[mobx.array] Index out of bounds, "+r+" is larger than "+o.length)},t}(aw);Xx(Xo.prototype,function(){this.$mobx.atom.reportObserved();var e=this,t=0;return sf({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})}),Object.defineProperty(Xo.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),ks(Xo.prototype,Yx(),"Array"),["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(e){var t=Array.prototype[e];Ta(typeof t=="function","Base function not defined on Array prototype: '"+e+"'"),ks(Xo.prototype,e,function(){return t.apply(this.peek(),arguments)})}),["every","filter","forEach","map","some"].forEach(function(e){var t=Array.prototype[e];Ta(typeof t=="function","Base function not defined on Array prototype: '"+e+"'"),ks(Xo.prototype,e,function(r,i){var n=this,o=this.$mobx;o.atom.reportObserved();var s=o.dehanceValues(o.values);return s[e](function(a,l){return r.call(i,a,l,n)},i)})}),["reduce","reduceRight"].forEach(function(e){ks(Xo.prototype,e,function(){var t=this,r=this.$mobx;r.atom.reportObserved();var i=arguments[0];return arguments[0]=function(n,o,s){return o=r.dehanceValue(o),i(n,o,s,t)},r.values[e].apply(r.values,arguments)})}),Nj(Xo.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var PH=$4(0);function $4(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function AH(e){Object.defineProperty(Xo.prototype,""+e,$4(e))}function lw(e){for(var t=sw;t<e;t++)AH(t);sw=e}lw(1e3);var zH=Ea("ObservableArrayAdministration",z4);function Ru(e){return qx(e)&&zH(e.$mobx)}var $H={},_v=function(){function e(t,r,i){if(r===void 0&&(r=af),i===void 0&&(i="ObservableMap@"+vn()),this.enhancer=r,this.name=i,this.$mobx=$H,this._keysAtom=Kx(this.name+".keys()"),typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return e.prototype._has=function(t){return this._data.has(t)},e.prototype.has=function(t){var r=this;if(!Ne.trackingDerivation)return this._has(t);var i=this._hasMap.get(t);if(!i){var n=i=new Ra(this._has(t),lv,this.name+"."+bv(t)+"?",!1);this._hasMap.set(t,n),F4(n,function(){return r._hasMap.delete(t)})}return i.get()},e.prototype.set=function(t,r){var i=this._has(t);if(Go(this)){var n=qo(this,{type:i?"update":"add",object:this,newValue:r,name:t});if(!n)return this;r=n.newValue}return i?this._updateValue(t,r):this._addValue(t,r),this},e.prototype.delete=function(t){var r=this;if(ku(this._keysAtom),Go(this)){var i=qo(this,{type:"delete",object:this,name:t});if(!i)return!1}if(this._has(t)){var n=mi(),o=lo(this),i=o||n?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return n&&so(br(br({},i),{name:this.name,key:t})),Rs(function(){r._keysAtom.reportChanged(),r._updateHasMapEntry(t,!1);var a=r._data.get(t);a.setNewValue(void 0),r._data.delete(t)}),o&&co(this,i),n&&ao(),!0}return!1},e.prototype._updateHasMapEntry=function(t,r){var i=this._hasMap.get(t);i&&i.setNewValue(r)},e.prototype._updateValue=function(t,r){var i=this._data.get(t);if(r=i.prepareNewValue(r),r!==Ne.UNCHANGED){var n=mi(),o=lo(this),s=o||n?{type:"update",object:this,oldValue:i.value,name:t,newValue:r}:null;n&&so(br(br({},s),{name:this.name,key:t})),i.setNewValue(r),o&&co(this,s),n&&ao()}},e.prototype._addValue=function(t,r){var i=this;ku(this._keysAtom),Rs(function(){var a=new Ra(r,i.enhancer,i.name+"."+bv(t),!1);i._data.set(t,a),r=a.value,i._updateHasMapEntry(t,!0),i._keysAtom.reportChanged()});var n=mi(),o=lo(this),s=o||n?{type:"add",object:this,name:t,newValue:r}:null;n&&so(br(br({},s),{name:this.name,key:t})),o&&co(this,s),n&&ao()},e.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var t=this,r=this.keys();return sf({next:function(){var i=r.next(),n=i.done,o=i.value;return{done:n,value:n?void 0:t.get(o)}}})},e.prototype.entries=function(){var t=this,r=this.keys();return sf({next:function(){var i=r.next(),n=i.done,o=i.value;return{done:n,value:n?void 0:[o,t.get(o)]}}})},e.prototype.forEach=function(t,r){var i=this;this._keysAtom.reportObserved(),this._data.forEach(function(n,o){return t.call(r,i.get(o),o,i)})},e.prototype.merge=function(t){var r=this;return Fs(t)&&(t=t.toJS()),Rs(function(){var i=cf(!0);try{wu(t)?Object.keys(t).forEach(function(n){return r.set(n,t[n])}):Array.isArray(t)?t.forEach(function(n){var o=Jx(n,2),s=o[0],a=o[1];return r.set(s,a)}):Su(t)?t.constructor!==Map?nr("Cannot initialize from classes that inherit from Map: "+t.constructor.name):t.forEach(function(n,o){return r.set(o,n)}):t!=null&&nr("Cannot initialize map from "+t)}finally{uf(i)}}),this},e.prototype.clear=function(){var t=this;Rs(function(){v4(function(){t._data.forEach(function(r,i){return t.delete(i)})})})},e.prototype.replace=function(t){var r=this;return Rs(function(){var i=Uj(t),n=new Map,o=!1;if(l4(r._data.keys(),function(h){if(!i.has(h)){var f=r.delete(h);if(f)o=!0;else{var d=r._data.get(h);n.set(h,d)}}}),l4(i.entries(),function(h){var f=Jx(h,2),d=f[0],p=f[1],v=r._data.has(d);if(r.set(d,p),r._data.has(d)){var g=r._data.get(d);n.set(d,g),v||(o=!0)}}),!o)if(r._data.size!==n.size)r._keysAtom.reportChanged();else for(var s=r._data.keys(),a=n.keys(),l=s.next(),c=a.next();!l.done;){if(l.value!==c.value){r._keysAtom.reportChanged();break}l=s.next(),c=a.next()}r._data=n}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var t=this,r={};return this.forEach(function(i,n){return r[typeof n=="symbol"?n:bv(n)]=t.get(n)}),r},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var t=this;return this.name+"[{ "+Ts(this.keys()).map(function(r){return bv(r)+": "+(""+t.get(r))}).join(", ")+" }]"},e.prototype.observe=function(t,r){return df(this,t)},e.prototype.intercept=function(t){return hf(this,t)},e}();function bv(e){return e&&e.toString?e.toString():new String(e).toString()}Xx(_v.prototype,function(){return this.entries()}),nf(_v.prototype,Yx(),"Map");var Fs=Ea("ObservableMap",_v),BH={},xv=function(){function e(t,r,i){if(r===void 0&&(r=af),i===void 0&&(i="ObservableSet@"+vn()),this.name=i,this.$mobx=BH,this._data=new Set,this._atom=Kx(this.name),typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(n,o){return r(n,o,i)},t&&this.replace(t)}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.clear=function(){var t=this;Rs(function(){v4(function(){t._data.forEach(function(r){t.delete(r)})})})},e.prototype.forEach=function(t,r){var i=this;this._atom.reportObserved(),this._data.forEach(function(n){t.call(r,n,n,i)})},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(t){var r=this;if(ku(this._atom),Go(this)){var i=qo(this,{type:"add",object:this,newValue:t});if(!i)return this}if(!this.has(t)){Rs(function(){r._data.add(r.enhancer(t,void 0)),r._atom.reportChanged()});var n=mi(),o=lo(this),i=o||n?{type:"add",object:this,newValue:t}:null;o&&co(this,i)}return this},e.prototype.delete=function(t){var r=this;if(Go(this)){var i=qo(this,{type:"delete",object:this,oldValue:t});if(!i)return!1}if(this.has(t)){var n=mi(),o=lo(this),i=o||n?{type:"delete",object:this,oldValue:t}:null;return Rs(function(){r._atom.reportChanged(),r._data.delete(t)}),o&&co(this,i),!0}return!1},e.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},e.prototype.entries=function(){var t=0,r=Ts(this.keys()),i=Ts(this.values());return sf({next:function(){var n=t;return t+=1,n<i.length?{value:[r[n],i[n]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var t=this,r=0,i;return this._data.values!==void 0?i=Ts(this._data.values()):(i=[],this._data.forEach(function(n){return i.push(n)})),sf({next:function(){return r<i.length?{value:t.dehanceValue(i[r++]),done:!1}:{done:!0}}})},e.prototype.replace=function(t){var r=this;return Ma(t)&&(t=t.toJS()),Rs(function(){var i=cf(!0);try{Array.isArray(t)?(r.clear(),t.forEach(function(n){return r.add(n)})):of(t)?(r.clear(),t.forEach(function(n){return r.add(n)})):t!=null&&nr("Cannot initialize set from "+t)}finally{uf(i)}}),this},e.prototype.observe=function(t,r){return df(this,t)},e.prototype.intercept=function(t){return hf(this,t)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Ts(this.keys()).join(", ")+" ]"},e}();Xx(xv.prototype,function(){return this.values()}),nf(xv.prototype,Yx(),"Set");var Ma=Ea("ObservableSet",xv),B4=function(){function e(t,r,i){this.target=t,this.name=r,this.defaultEnhancer=i,this.values={}}return e.prototype.read=function(t,r){if(!(this.target!==t&&(this.illegalAccess(t,r),!this.values[r])))return this.values[r].get()},e.prototype.write=function(t,r,i){var n=this.target;n!==t&&this.illegalAccess(t,r);var o=this.values[r];if(o instanceof Fa){o.set(i);return}if(Go(this)){var s=qo(this,{type:"update",object:n,name:r,newValue:i});if(!s)return;i=s.newValue}if(i=o.prepareNewValue(i),i!==Ne.UNCHANGED){var a=lo(this),l=mi(),s=a||l?{type:"update",object:n,oldValue:o.value,name:r,newValue:i}:null;l&&so(br(br({},s),{name:this.name,key:r})),o.setNewValue(i),a&&co(this,s),l&&ao()}},e.prototype.remove=function(t){if(!!this.values[t]){var r=this.target;if(Go(this)){var i=qo(this,{object:r,name:t,type:"remove"});if(!i)return}try{Ds();var n=lo(this),o=mi(),s=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var i=n||o?{type:"remove",object:r,oldValue:s,name:t}:null;o&&so(br(br({},i),{name:this.name,key:t})),n&&co(this,i),o&&ao()}finally{Is()}}},e.prototype.illegalAccess=function(t,r){console.warn("Property '"+r+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(t,r){return df(this,t)},e.prototype.intercept=function(t){return hf(this,t)},e.prototype.getKeys=function(){var t=this;return this.keys===void 0&&(this.keys=new Xo(Object.keys(this.values).filter(function(r){return t.values[r]instanceof Ra}),lv,"keys("+this.name+")",!0)),this.keys.slice()},e}();function cw(e,t,r){t===void 0&&(t=""),r===void 0&&(r=af);var i=e.$mobx;return i||(wu(e)||(t=(e.constructor.name||"ObservableObject")+"@"+vn()),t||(t="ObservableObject@"+vn()),i=new B4(e,t,r),nf(e,"$mobx",i),i)}function LH(e,t,r,i){var n=cw(e);if(Go(n)){var o=qo(n,{object:e,name:t,type:"add",newValue:r});if(!o)return;r=o.newValue}var s=n.values[t]=new Ra(r,i,n.name+"."+t,!1);r=s.value,Object.defineProperty(e,t,NH(t)),n.keys&&n.keys.push(t),HH(n,e,t,r)}function UH(e,t,r){var i=cw(e);r.name=i.name+"."+t,r.context=e,i.values[t]=new Fa(r),Object.defineProperty(e,t,jH(t))}var L4=Object.create(null),U4=Object.create(null);function NH(e){return L4[e]||(L4[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}function N4(e){var t=e.$mobx;return t||(Hl(e),e.$mobx)}function jH(e){return U4[e]||(U4[e]={configurable:Ne.computedConfigurable,enumerable:!1,get:function(){return N4(this).read(this,e)},set:function(t){N4(this).write(this,e,t)}})}function HH(e,t,r,i){var n=lo(e),o=mi(),s=n||o?{type:"add",object:t,name:r,newValue:i}:null;o&&so(br(br({},s),{name:e.name,key:r})),n&&co(e,s),o&&ao()}var WH=Ea("ObservableObjectAdministration",B4);function Fu(e){return qx(e)?(Hl(e),WH(e.$mobx)):!1}function Pa(e,t){if(typeof e=="object"&&e!==null){if(Ru(e))return t!==void 0&&nr(!1),e.$mobx.atom;if(Ma(e))return e.$mobx;if(Fs(e)){var r=e;if(t===void 0)return r._keysAtom;var i=r._data.get(t)||r._hasMap.get(t);return i||nr(!1),i}if(Hl(e),t&&!e.$mobx&&e[t],Fu(e)){if(!t)return nr(!1);var i=e.$mobx.values[t];return i||nr(!1),i}if(Qx(e)||pv(e)||vv(e))return e}else if(typeof e=="function"&&vv(e.$mobx))return e.$mobx;return nr(!1)}function j4(e,t){if(e||nr("Expecting some object"),t!==void 0)return j4(Pa(e,t));if(Qx(e)||pv(e)||vv(e)||Fs(e)||Ma(e))return e;if(Hl(e),e.$mobx)return e.$mobx;nr(!1)}function VH(e,t){var r;return t!==void 0?r=Pa(e,t):Fu(e)||Fs(e)||Ma(e)?r=j4(e):r=Pa(e),r.name}var H4=Object.prototype.toString;function uw(e,t,r){return r===void 0&&(r=-1),hw(e,t,r)}function hw(e,t,r,i,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;if(o!=="function"&&o!=="object"&&typeof t!="object")return!1;e=W4(e),t=W4(t);var s=H4.call(e);if(s!==H4.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t)}var a=s==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(typeof l=="function"&&l instanceof l&&typeof c=="function"&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),i=i||[],n=n||[];for(var h=i.length;h--;)if(i[h]===e)return n[h]===t;if(i.push(e),n.push(t),a){if(h=e.length,h!==t.length)return!1;for(;h--;)if(!hw(e[h],t[h],r-1,i,n))return!1}else{var f=Object.keys(e),d=void 0;if(h=f.length,Object.keys(t).length!==h)return!1;for(;h--;)if(d=f[h],!(GH(t,d)&&hw(e[d],t[d],r-1,i,n)))return!1}return i.pop(),n.pop(),!0}function W4(e){return Ru(e)?e.peek():Su(e)||Fs(e)||of(e)||Ma(e)?Ts(e.entries()):e}function GH(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(function(){function e(){}if(e.name!=="testCodeMinification"&&!1)var t})();var V4="$mobx";typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:I4,extras:{getDebugName:VH},$mobx:V4});var qH=(e=>(e.UNDO="undo",e.REDO="redo",e.DELETE="delete",e.BRING_TO_FRONT="bringtofront",e.EDIT="edit",e.DUPLICATE="duplicate",e.ADD="add",e.FLIP="flip",e.INVERT="invert",e.CLOSE="close",e.EXPORT="export",e))(qH||{}),Aa=(e=>(e.LIBRARY="library",e.TRANSFORM="transform",e.FILTER="filter",e.ADJUSTMENT="adjustment",e.FOCUS="focus",e.STICKER="sticker",e.TEXT="text",e.TEXT_DESIGN="textdesign",e.OVERLAY="overlay",e.FRAME="frame",e.BRUSH="brush",e.CUSTOM="customTool",e))(Aa||{}),XH=(e=>(e.TEXT="text",e.CARD="card",e))(XH||{}),G4=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e))(G4||{}),YH=(e=>(e.ERROR="error",e.WARNING="warning",e.INFO="info",e.TEXT_EDIT="textEdit",e))(YH||{}),QH=class{constructor(){this.enabled=!0,this.threshold=20,this.snapToHorizontalCenter=!0,this.snapToVerticalCenter=!0,this.snapToLeft=.1,this.snapToRight=.1,this.snapToTop=.1,this.snapToBottom=.1}},KH=class{constructor(){this.enabled=!0,this.threshold=20,this.angles=[0,45,90,135,180,225,270,315]}},ZH=class{constructor(){this.position=new QH,this.rotation=new KH}},JH=(e=>(e.CENTER="center",e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e))(JH||{}),eW=class{constructor(){this.watermarkURI="",this.alignment="top-right",this.inset=.05,this.size=.2}},tW=(e=>(e.OBJECT="object",e))(tW||{}),q4=(e=>(e.IMAGE="image",e.DATA_URL="data-url",e.BLOB="blob",e.MSBLOB="ms-blob",e))(q4||{}),rW=(e=>(e.PNG="image/png",e.JPEG="image/jpeg",e))(rW||{}),iW=(e=>(e.BMP="image/bmp",e.GIF="image/gif",e.ICO="image/x-icon",e.JPEG="image/jpeg",e.PNG="image/png",e.SVG="image/svg+xml",e.TIFF="image/tiff",e.WEBP="image/webp",e))(iW||{}),X4=(e=>(e.BRIGHTNESS="brightness",e.CONTRAST="contrast",e.SATURATION="saturation",e.CLARITY="clarity",e.SHADOWS="shadows",e.HIGHLIGHTS="highlights",e.EXPOSURE="exposure",e.GAMMA="gamma",e.BLACKS="blacks",e.WHITES="whites",e.TEMPERATURE="temperature",e.SHARPNESS="sharpness",e))(X4||{}),nW=Object.values(X4).reduce((e,t)=>(e[t]=!0,e),{}),oW=(e=>(e.RemoveAdjustmentButton="removeAdjustmentButton",e.Expandable="expandable",e.Separator="separator",e.Items="items",e))(oW||{}),sW=class{constructor(){this.categories=[],this.flattenCategories=!1,this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeAdjustmentButton","separator"]},"items"]}},aW=(e=>(e.RemoveFilterButton="removeFilterButton",e.FilterIntensitySlider="filterIntensitySlider",e.Expandable="expandable",e.Separator="separator",e.Items="items",e))(aW||{}),lW=(e=>(e.FilterIntensity="filterIntensity",e))(lW||{}),cW=class{constructor(){this.categories=[],this.flattenCategories=!1,this.categoryHeaderType="card",this.enablePreviewThumbnails=!1,this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFilterButton","filterIntensitySlider","separator"]},"items"],this.basicUIToolControlBarTabsOrder=["filterIntensity"]}};function dw(e){return e.lightColor!==void 0}function uW(e){return e.lutURI!==void 0}var hW=(e=>(e.Desert="imgly_duotone_desert",e.Peach="imgly_duotone_peach",e.Clash="imgly_duotone_clash",e.Plum="imgly_duotone_plum",e.Breezy="imgly_duotone_breezy",e.DeepBlue="imgly_duotone_deepblue",e.Frog="imgly_duotone_frog",e.Sunset="imgly_duotone_sunset",e.AD1920="imgly_lut_ad1920",e.Greyed="imgly_lut_bw",e.Dusty="imgly_lut_x400",e.Litho="imgly_lut_litho",e.Sepia="imgly_lut_sepiahigh",e.Weathered="imgly_lut_plate",e.HardStuff="imgly_lut_sin",e.Polaroid="imgly_lut_blues",e.Sunny70s="imgly_lut_front",e.Oldtimer="imgly_lut_texas",e.Inferno="imgly_lut_celsius",e.Snappy="imgly_lut_cool",e.Chestnut="imgly_lut_chest",e.Softy="imgly_lut_winter",e.Pebble="imgly_lut_kdynamic",e.Moss="imgly_lut_fall",e.Lemon="imgly_lut_lenin",e.GreenGap="imgly_lut_pola669",e.Colla="imgly_lut_elder",e.Solanus="imgly_lut_orchid",e.Kalmen="imgly_lut_bleached",e.Joran="imgly_lut_bleachedblue",e.Levante="imgly_lut_breeze",e.Zephyr="imgly_lut_blueshadows",e.Golden="imgly_lut_sunset",e.LowFire="imgly_lut_eighties",e.Sunrise="imgly_lut_evening",e.FlatBlack="imgly_lut_k2",e.Pumpkin="imgly_lut_nogreen",e.Ancient="imgly_lut_ancient",e.Candy="imgly_lut_cottoncandy",e.Classic="imgly_lut_classic",e.Colorful="imgly_lut_colorful",e.Creamy="imgly_lut_creamy",e.Fixie="imgly_lut_fixie",e.Food="imgly_lut_food",e.Fridge="imgly_lut_fridge",e.Glam="imgly_lut_glam",e.Gobblin="imgly_lut_gobblin",e.Hicon="imgly_lut_highcontrast",e.HighCarb="imgly_lut_highcarb",e.K1="imgly_lut_k1",e.K6="imgly_lut_k6",e.Keen="imgly_lut_keen",e.Lomo="imgly_lut_lomo",e.Lomo100="imgly_lut_lomo100",e.Lucid="imgly_lut_lucid",e.Mellow="imgly_lut_mellow",e.Neat="imgly_lut_neat",e.Pale="imgly_lut_pale",e.Pitched="imgly_lut_pitched",e.PolaSX="imgly_lut_polasx",e.Pro400="imgly_lut_pro400",e.Quozi="imgly_lut_quozi",e.Settled="imgly_lut_settled",e.Seventies="imgly_lut_seventies",e.Soft="imgly_lut_soft",e.Steel="imgly_lut_steel",e.Summer="imgly_lut_summer",e.Tender="imgly_lut_tender",e.Twilight="imgly_lut_twilight",e))(hW||{}),dW=(e=>(e.DuoTone="imgly_filter_category_duotone",e.BW="imgly_filter_category_bw",e.Vintage="imgly_filter_category_vintage",e.Smooth="imgly_filter_category_smooth",e.Cold="imgly_filter_category_cold",e.Warm="imgly_filter_category_warm",e.Legacy="imgly_filter_category_legacy",e))(dW||{}),fW=(e=>(e.RemoveFocusButton="removeFocusButton",e.FocusIntensitySlider="focusIntensitySlider",e.Expandable="expandable",e.Separator="separator",e.Items="items",e))(fW||{}),pW=(e=>(e.FocusIntensity="focusIntensity",e))(pW||{}),mW=class{constructor(){this.items=[],this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFocusButton","focusIntensitySlider","separator"]},"items"],this.basicUIToolControlBarTabsOrder=["focusIntensity"]}},fw=(e=>(e.RADIAL="radial",e.LINEAR="linear",e.MIRRORED="mirrored",e.GAUSSIAN="gaussian",e))(fw||{}),gW=(e=>(e.RemoveFrameButton="removeFrameButton",e.FrameOpacitySlider="frameOpacitySlider",e.FrameSizeSlider="frameSizeSlider",e.FrameColorList="frameColorList",e.Separator="separator",e.Items="items",e.Expandable="expandable",e))(gW||{}),vW=(e=>(e.FrameSize="frameSize",e.FrameOpacity="frameOpacity",e.FrameColor="frameColor",e))(vW||{}),yW=class{constructor(){this.items=[],this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFrameButton","frameOpacitySlider","frameSizeSlider","frameColorList","separator"]},"items"],this.basicUIToolControlBarTabsOrder=["frameOpacity","frameSize","frameColor"]}},_W=class{constructor(e){this.name=e.name,this.coverImageUrl=e.coverImageUrl}loadCoverImage(e="anonymous"){return new Promise((t,r)=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",()=>{r(new Error(`Failed to load image at ${this.coverImage}`))}),i.crossOrigin=e,i.src=this.coverImageUrl,this.coverImage=i})}},bW=class{constructor(e){this.title=e.title,this.category=e.category||e.title,this.thumbUrl=e.thumbUrl,this.rawUrl=e.rawUrl,this.authorName=e.authorName,this.authorAvatar=e.authorAvatar}loadThumbImage(e="anonymous"){return new Promise((t,r)=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",()=>{r(new Error(`Failed to load image at ${this.thumbUrl}`))}),i.crossOrigin=e,i.src=this.thumbUrl,this.thumbImage=i})}getThumbImage(){return this.thumbUrl}},xW=class{getData(e){return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="json",i.onload=()=>{const{status:n}=i;n===200?t(i.response):r(new Error(`HTTP Status ${n}`))},i.send()})}},wW=class{loadJSON(e){return new xW().getData(e)}getCategories(){return Promise.resolve([])}searchImages(e){return Promise.resolve([])}},SW=class extends wW{loadData(){return this.data?Promise.resolve(this.data):this.loadJSON("https://img.ly/static/libraries/unsplash/metadata.json").then(e=>(typeof e=="string"&&(e=JSON.parse(e)),this.data=e,e))}getCategories(){return this.loadData().then(e=>e.categories.map(t=>new _W({name:t.name,coverImageUrl:t.coverImage})))}searchImages(e){return this.loadData().then(t=>t.images.filter(r=>{const i=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(/\s+/);for(let n=0;n<i.length;n+=1){const o=i[n];if(!new RegExp(o,"i").test(r.title))return!1}return!0}).map(r=>new bW(r)))}},CW=(e=>(e.UploadImageButton="uploadImageButton",e.OpenWebcamButton="openWebcamButton",e.SearchFieldInput="searchFieldInput",e.Separator="separator",e.Items="items",e))(CW||{}),kW=class{constructor(){this.enableWebcam=!1,this.enableUpload=!1,this.provider=SW,this.flattenCategories=!1,this.categoryHeaderType="card",this.advancedUIToolControlBarOrder=["searchFieldInput","uploadImageButton","openWebcamButton","separator","items"]}},TW=(e=>(e.RemoveOverlayButton="removeOverlayButton",e.OverlayOpacitySlider="overlayOpacitySlider",e.OverlayBlendModeCarousel="overlayBlendModeCarousel",e.Expandable="expandable",e.Separator="separator",e.Items="items",e))(TW||{}),EW=(e=>(e.OverlayOpacity="overlayOpacity",e.OverlayBlendMode="overlayBlendMode",e))(EW||{}),DW=class{constructor(){this.items=[],this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeOverlayButton","overlayBlendModeCarousel","overlayOpacitySlider","separator"]},"items"],this.basicUIToolControlBarTabsOrder=["overlayBlendMode","overlayOpacity"]}},pw=(e=>(e.NORMAL="normal",e.OVERLAY="overlay",e.SOFT_LIGHT="softLight",e.HARD_LIGHT="hardLight",e.MULTIPLY="multiply",e.DARKEN="darken",e.COLOR_BURN="colorBurn",e.SCREEN="screen",e.LIGHTEN="lighten",e))(pw||{}),IW=(e=>(e.Bokeh="imgly_overlay_bokeh",e.Chop="imgly_overlay_chop",e.Clouds="imgly_overlay_clouds",e.Golden="imgly_overlay_golden",e.Grain="imgly_overlay_grain",e.Hearts="imgly_overlay_hearts",e.LightLeak1="imgly_overlay_lightleak1",e.LightLeak2="imgly_overlay_lightleak2",e.Metal="imgly_overlay_metal",e.Mosaic="imgly_overlay_mosaic",e.Painting="imgly_overlay_painting",e.Paper="imgly_overlay_paper",e.Rain="imgly_overlay_rain",e.Vintage="imgly_overlay_vintage",e.Wall1="imgly_overlay_wall1",e.Wall2="imgly_overlay_wall2",e.Wood="imgly_overlay_wood",e))(IW||{}),RW=(e=>(e.UploadStickerButton="uploadStickerButton",e.StickerOpacitySlider="stickerOpacitySlider",e.StickerColorList="stickerColorList",e.Separator="separator",e.Items="items",e))(RW||{}),FW=(e=>(e.StickerColor="stickerColor",e.StickerOpacity="stickerOpacity",e))(FW||{}),OW=class{constructor(){this.categories=[],this.canvasActions=["bringtofront","flip","duplicate","delete"],this.flattenCategories=!1,this.categoryHeaderType="card",this.enableCustomUpload=!0,this.customStickerResizeMode="keepAspect",this.customStickerTintMode="none",this.advancedUIToolControlBarOrder=["uploadStickerButton","stickerOpacitySlider","stickerColorList","separator","items"],this.basicUIToolControlBarTabsOrder=["stickerColor","stickerOpacity"]}},MW=(e=>(e.NewTextButton="newTextButton",e.FontFamilyDropdown="fontFamilyDropdown",e.FontSizeInput="fontSizeInput",e.TextAligmentList="textAlignmentList",e.Separator="separator",e.Inline="inline",e.TextColorList="textColorList",e.BackgroundColorList="backgroundColorList",e.LineSpacingSlider="lineSpacingSlider",e))(MW||{}),PW=(e=>(e.FontSize="fontSize",e.TextAligment="textAlignment",e.TextColor="textColor",e.BackgroundColor="backgroundColor",e.LineSpacing="lineSpacing",e))(PW||{}),AW=class{constructor(){this.fonts=[],this.canvasActions=["edit","bringtofront","duplicate","delete"],this.allowEmojis=!1,this.disableAutoScaling=!1,this.addDefaultTextOnEnter=!0,this.advancedUIToolControlBarOrder=["newTextButton","fontFamilyDropdown",{type:"inline",children:["fontSizeInput","textAlignmentList"]},"separator","textColorList","backgroundColorList","separator","lineSpacingSlider"],this.basicUIToolControlBarTabsOrder=["fontSize","textAlignment","textColor","backgroundColor","lineSpacing"]}};function zW(e){return e.provider===void 0||e.provider==="file"}function $W(e){return e.provider==="google"}var BW=(e=>(e.RemoveBrushButton="removeBrushButton",e.BrushColorList="brushColorList",e.BrushSizeSlider="brushSizeSlider",e.BrushHardnessSlider="brushHardnessSlider",e.Expandable="expandable",e.Separator="separator",e))(BW||{}),LW=(e=>(e.BrushSize="brushSize",e.BrushHardness="brushHardness",e.BrushColor="brushColor",e))(LW||{}),UW=class{constructor(){this.defaultSize=.05,this.defaultHardness=.5,this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeBrushButton","separator"]},"brushHardnessSlider","brushSizeSlider","brushColorList"],this.basicUIToolControlBarTabsOrder=["brushColor","brushSize","brushHardness"]}},NW=(e=>(e.NewTextDesignButton="newTextDesignButton",e.ShuffleLayoutButton="shuffleLayoutButton",e.TextDesignColorList="textDesignColorList",e.Separator="separator",e.Items="items",e))(NW||{}),jW=class{constructor(){this.items=[],this.canvasActions=["edit","bringtofront","invert","duplicate","delete"],this.allowEmojis=!1,this.addDefaultTextOnEnter=!0,this.advancedUIToolControlBarOrder=["newTextDesignButton","shuffleLayoutButton","textDesignColorList","separator","items"]}},wv=(e=>(e.ResetTransformButton="resetTransformButton",e.KeepResolutionCheckbox="keepResolutionCheckbox",e.CropSizeInput="cropSizeInput",e.Separator="separator",e.Items="items",e))(wv||{}),HW=(e=>(e.CropSize="cropSize",e.FlipRotate="flipRotate",e.Resolution="resolution",e))(HW||{}),WW=class{constructor(){this.categories=[],this.enableRotation=!0,this.enableFlip=!0,this.flattenCategories=!1,this.categoryHeaderType="text",this.advancedUIToolControlBarOrder=["resetTransformButton","keepResolutionCheckbox","cropSizeInput","separator","items"],this.basicUIToolControlBarTabsOrder=["cropSize","flipRotate","resolution"]}},VW=(e=>(e.CommonCategory="imgly_transforms_common",e.FacebookCategory="imgly_transforms_facebook",e.TwitterCategory="imgly_transforms_twitter",e.InstagramCategory="imgly_transforms_instagram",e.Custom="imgly_transform_common_custom",e.Square="imgly_transform_common_square",e.ThreeByFour="imgly_transform_common_3",e.FourByThree="imgly_transform_common_4",e.NineBySixteen="imgly_transform_common_9",e.SixteenByNine="imgly_transform_common_16",e.FacebookPost="imgly_transform_facebook_post",e.FacebookProfile="imgly_transform_facebook_profile",e.FacebookTitle="imgly_transform_facebook_title",e.InstagramLandscape="imgly_transform_instagram_landscape",e.InstagramPortrait="imgly_transform_instagram_portrait",e.InstagramSquare="imgly_transform_instagram_square",e.InstagramStory="imgly_transform_instagram_story",e.TwitterPost="imgly_transform_twitter_post",e.TwitterProfile="imgly_transform_twitter_profile",e.TwitterTitle="imgly_transform_twitter_title",e))(VW||{}),GW=(e=>(e.EXPORT="export",e.CLOSE="close",e.HISTORY_UNDO="historyUndo",e.HISTORY_REDO="historyRedo",e.HISTORY_CHANGE="historyChange",e.EDITOR_READY="editorReady",e.ERROR_IMAGE_LOADING="errorImageLoading",e.IMAGE_LOAD="imageLoad",e.TOOL_ENTER="toolEnter",e.STICKER_UPLOAD_ADD="stickerUploadAdd",e.ERROR_WEBGL_CONTEXT_LOST="errorWebGLContextLost",e.CROP_DIMENSIONS_CHANGE="cropDimensionsChange",e))(GW||{}),ff=class{constructor(){this.events={}}addListener(e,t){return(this.events[e]||(this.events[e]=[])).push(t),this}removeListener(e,t){const r=this.events[e];if(!r)return this;const i=r.lastIndexOf(t);return i===-1?this:(r.splice(i,1),this)}removeAllListeners(e){return this.events[e]=void 0,this}on(e,t){return this.addListener(e,t)}off(e,t){return this.removeListener(e,t)}emit(e,...t){const r=this.events[e];return!r||!r.length?!1:(r.slice(0).forEach(i=>i.apply(null,t)),!0)}};Eo();var pf=()=>typeof window!="undefined"&&window.navigator&&window.navigator.userAgent||"",Gl=(e=pf())=>e.indexOf("Edge")!==-1,yn=(e=pf())=>!!e.match(/msie|trident/i),qW=(e=pf())=>!!e.match(/windows/i),XW=(e=pf())=>e.indexOf("Safari")!==-1&&e.indexOf("Chrome")===-1,YW=(e=pf())=>!!e.match(/iP(hone|od|ad)|AppleWebKit/),QW=()=>{if(typeof document=="undefined")return!1;const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl"),r=t&&t instanceof WebGLRenderingContext;return Nr(e),r};function gi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var dr=class{static fromSize(e){return new dr(e.width,e.height)}static distance(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}static dot(e,t){return e.x*t.x+e.y*t.y}static lerp(e,t,r){const i=Math.min(Math.max(r,0),1);return new dr(e.x*i+t.x*(1-i),e.y*i+t.y*(1-i))}static lerpUnclamped(e,t,r){return new dr(e.x*r+t.x*(1-r),e.y*r+t.y*(1-r))}static proportionalFit(e,t){const r=e.x/e.y,i=t.x/t.y;return r>i?t.multiply(e.y/t.y):t.multiply(e.x/t.x)}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){const e=this.magnitude;return new dr(this.x/e,this.y/e)}get floored(){return new dr(Math.floor(this.x),Math.floor(this.y))}get rounded(){return new dr(Math.round(this.x),Math.round(this.y))}get min(){return Math.min(this.x,this.y)}get max(){return Math.max(this.x,this.y)}get abs(){return new dr(Math.abs(this.x),Math.abs(this.y))}get swapped(){return new dr(this.y,this.x)}constructor(e,t){typeof e=="number"?(this.x=e,this.y=t):(this.x=e.x,this.y=e.y)}clone(){return new dr(this.x,this.y)}add(e,t){return typeof e=="number"?new dr(this.x+e,this.y+t):new dr(this.x+e.x,this.y+e.y)}subtract(e,t){return typeof e=="number"?new dr(this.x-e,this.y-t):new dr(this.x-e.x,this.y-e.y)}multiply(e,t){return typeof e=="number"?new dr(this.x*e,this.y*(t===void 0?e:t)):new dr(this.x*e.x,this.y*e.y)}divide(e,t){return typeof e=="number"?new dr(this.x/e,this.y/(t===void 0?e:t)):new dr(this.x/e.x,this.y/e.y)}equals(e){return this.x===e.x&&this.y===e.y}clamp(e,t){const r=Math.max(e.x,Math.min(t.x,this.x)),i=Math.max(e.y,Math.min(t.y,this.y));return new dr(r,i)}},G=dr;G.ZERO=new dr(0,0),G.ONE=new dr(1,1),G.UP=new dr(0,1),G.DOWN=new dr(0,-1),G.RIGHT=new dr(1,0),G.LEFT=new dr(-1,0);var mw=(e=>(e[e.EditorContainer=0]="EditorContainer",e[e.ToolControlBar=1]="ToolControlBar",e[e.ToolControlBarExpandableControls=2]="ToolControlBarExpandableControls",e[e.CanvasContainer=3]="CanvasContainer",e[e.Canvas=4]="Canvas",e[e.MainBarButtonClose=5]="MainBarButtonClose",e[e.MainBarButtonExport=6]="MainBarButtonExport",e[e.MainBarButtonUndo=7]="MainBarButtonUndo",e[e.MainBarButtonRedo=8]="MainBarButtonRedo",e[e.MainBarButtonZoom=9]="MainBarButtonZoom",e[e.Tooltip=10]="Tooltip",e[e.Cursor=11]="Cursor",e[e.CursorContainer=12]="CursorContainer",e[e.NummericInput=13]="NummericInput",e[e.BrushSize=14]="BrushSize",e[e.BrushHardness=15]="BrushHardness",e[e.Dialog=16]="Dialog",e[e.DialogBody=17]="DialogBody",e[e.CardContainer=18]="CardContainer",e[e.CategoryItemsContainer=19]="CategoryItemsContainer",e[e.ToolbarItem=20]="ToolbarItem",e[e.ColorList=21]="ColorList",e[e.NoResult=22]="NoResult",e[e.CardLabel=23]="CardLabel",e[e.CardAvatar=24]="CardAvatar",e[e.Dropdown=25]="Dropdown",e[e.DropdownList=26]="DropdownList",e[e.TextAlignment=27]="TextAlignment",e[e.Sprite=28]="Sprite",e[e.SpriteTopLeft=29]="SpriteTopLeft",e[e.SpriteTopRight=30]="SpriteTopRight",e[e.SpriteBottomLeft=31]="SpriteBottomLeft",e[e.SpriteBottomRight=32]="SpriteBottomRight",e[e.Knob=33]="Knob",e[e.TextWidth=34]="TextWidth",e[e.ToolbarWrapper=35]="ToolbarWrapper",e[e.MainCanvasActionBar=36]="MainCanvasActionBar",e[e.SpriteActions=37]="SpriteActions",e[e.CarouselSlider=38]="CarouselSlider",e[e.CropMask=39]="CropMask",e[e.FlipRotateControls=40]="FlipRotateControls",e[e.RotateSlider=41]="RotateSlider",e[e.CropTopRight=42]="CropTopRight",e[e.CropTopLeft=43]="CropTopLeft",e[e.CropBottomRight=44]="CropBottomRight",e[e.CropBottomLeft=45]="CropBottomLeft",e[e.Watermark=46]="Watermark",e[e.Toolbar=47]="Toolbar",e[e.CanvasBar=48]="CanvasBar",e[e.Checkbox=49]="Checkbox",e[e.Focus=50]="Focus",e[e.SnappingLine=51]="SnappingLine",e[e.LibraryUploadButton=52]="LibraryUploadButton",e[e.LibraryWebcamButton=53]="LibraryWebcamButton",e[e.ZoomLevel=54]="ZoomLevel",e[e.BasicToolControlBar=55]="BasicToolControlBar",e))(mw||{}),Y4={};for(const e in mw){const t=mw[e];typeof t=="string"&&(Y4[t]=t)}var Le=Y4,Q4;Boolean(typeof window!="undefined"&&((Q4=window.Cypress)==null?void 0:Q4.env("pesdk"))),YT();var K4={};_r(K4,{isMobile:()=>Z4});function Z4(){if(typeof navigator=="undefined")return!1;const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}var KW=e=>{e.preventDefault(),e.stopPropagation()},ZW=(...e)=>{};typeof window!="undefined"?window.performance.now.bind(window.performance):ZW();var gw=class{constructor(e){this.text=e,this.lastOffsetWidth=-1;const t="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(e)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.collapsible.style.cssText=t,this.expandable.style.cssText=t,this.expandableInner.style.cssText=t,this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}getElement(){return this.element}setFont(e){this.element.style.cssText=`max-width:none;
      min-width:20px;
      min-height:20px;
      display:inline-block;
      overflow:hidden;
      position:absolute;
      width:auto;
      margin:0;
      padding:0;
      top:-999px;
      white-space:nowrap;
      font-synthesis:none;
      font:${e};`}getWidth(){return this.element.offsetWidth}setWidth(e){this.element.style.width=`${e}px`}onResize(e){const t=()=>{this.onScroll(e)};this.collapsible.addEventListener("scroll",t),this.expandable.addEventListener("scroll",t),this.reset()}reset(){const e=this.getWidth(),t=e+100;return this.expandableInner.style.width=`${t}px`,this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e?(this.lastOffsetWidth=e,!0):!1}onScroll(e){this.reset()&&this.element.parentNode!==null&&e(this.lastOffsetWidth)}},xr=class{static getUserAgent(){return window.navigator.userAgent}static getNavigatorVendor(){return window.navigator.vendor}static hasWebKitFallbackBug(){if(xr.HAS_WEBKIT_FALLBACK_BUG===null){const e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(xr.getUserAgent());xr.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||parseInt(e[1],10)===536&&parseInt(e[2],10)<=11)}return xr.HAS_WEBKIT_FALLBACK_BUG}static hasSafari10Bug(){if(xr.HAS_SAFARI_10_BUG===null)if(xr.supportsNativeFontLoading()&&/Apple/.test(xr.getNavigatorVendor())){const e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(xr.getUserAgent());xr.HAS_SAFARI_10_BUG=!!e&&parseInt(e[1],10)<603}else xr.HAS_SAFARI_10_BUG=!1;return xr.HAS_SAFARI_10_BUG}static supportsNativeFontLoading(){return xr.SUPPORTS_NATIVE_FONT_LOADING===null&&(xr.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),xr.SUPPORTS_NATIVE_FONT_LOADING}static supportsStretch(){if(xr.SUPPORTS_STRETCH===null){const e=document.createElement("div");try{e.style.font="condensend 100px sans-serif"}catch{xr.SUPPORTS_STRETCH=!1}xr.SUPPORTS_STRETCH=e.style.font!==""}return xr.SUPPORTS_STRETCH}constructor(e){this.font=L({fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal"},e)}load(e,t){const r="BESbswy";let i=null;const n=t||xr.DEFAULT_TIMEOUT,o=this.getTime();return new Promise((s,a)=>{if(xr.supportsNativeFontLoading()&&!xr.hasSafari10Bug()){const l=new Promise((h,f)=>{const d=()=>{this.getTime()-o>=n?f(new Error(""+n+"ms timeout exceeded")):document.fonts.load(this.getStyle(`"${this.font.fontFamily}"`),r).then(v=>{v.length>=1?h():setTimeout(d,25)},a)};d()}),c=new Promise((h,f)=>{i=setTimeout(()=>{f(new Error(`${n} ms timeout exceeded`))},n)});Promise.race([c,l]).then(()=>{clearTimeout(i),s(this)},a)}else{const l=new gw(r),c=new gw(r),h=new gw(r);let f=-1,d=-1,p=-1,v=-1,g=-1,m=-1;const y=document.createElement("div"),_=()=>{y.parentNode!==null&&y.parentNode.removeChild(y)},b=()=>{if((f!==-1&&d!==-1||f!==-1&&p!==-1||d!==-1&&p!==-1)&&(f===d||f===p||d===p)){if(xr.hasWebKitFallbackBug()&&(f===v&&d===v&&p===v||f===g&&d===g&&p===g||f===m&&d===m&&p===m))return;_(),clearTimeout(i),s(this)}};y.dir="ltr",l.setFont(this.getStyle("sans-serif")),c.setFont(this.getStyle("serif")),h.setFont(this.getStyle("monospace")),y.appendChild(l.getElement()),y.appendChild(c.getElement()),y.appendChild(h.getElement()),document.body.appendChild(y),v=l.getWidth(),g=c.getWidth(),m=h.getWidth();const w=()=>{if(this.getTime()-o>=n)_(),a(new Error(`${n} ms timeout exceeded`));else{const C=document.hidden;(C===!0||C===void 0)&&(f=l.getWidth(),d=c.getWidth(),p=h.getWidth(),b()),i=setTimeout(w,50)}};w(),l.onResize(S=>{f=S,b()}),l.setFont(this.getStyle(`"${this.font.fontFamily}",sans-serif`)),c.onResize(S=>{d=S,b()}),c.setFont(this.getStyle(`"${this.font.fontFamily}",serif`)),h.onResize(S=>{p=S,b()}),h.setFont(this.getStyle(`"${this.font.fontFamily}",monospace`))}})}getStyle(e){return[this.font.fontStyle,this.font.fontWeight,xr.supportsStretch()?this.font.fontStretch:"","100px",e].join(" ")}getTime(){return new Date().getTime()}},Ou=xr;Ou.HAS_WEBKIT_FALLBACK_BUG=null,Ou.HAS_SAFARI_10_BUG=null,Ou.SUPPORTS_STRETCH=null,Ou.SUPPORTS_NATIVE_FONT_LOADING=null,Ou.DEFAULT_TIMEOUT=6e4;var J4=class extends ff{constructor(e,t){super(),this.image=e,this.options=t}needsResize(){const e=this.resizedDimensions();return e.x<this.image.width||e.y<this.image.height}resizedDimensions(){const{options:e}=this,t={width:this.image.width,height:this.image.height};let r=G.fromSize(t),i=G.fromSize(t);const{maxMegaPixels:n}=e;if(n){const a=(Z4()?n.mobile:n.desktop)*1e6,l=t.width/t.height,c=t.height/t.width,h=new G(Math.floor(Math.sqrt(a*l)),Math.floor(Math.sqrt(a*c)));h.x<=t.width&&h.y<=t.height&&(r=h)}const o=e.maxDimensions;o&&(o.height<t.height||o.width<t.width)&&(i=new G(o.width,o.height));const s=new G(Math.min(r.x,i.x),Math.min(r.y,i.y));return G.proportionalFit(s,G.fromSize(t)).floored}downscaleIfNecessary(){const e=this.resizedDimensions();if(!(e.x<this.image.width||e.y<this.image.height))return this.image;this.emit("beganImageDownscaling",this.image);const r=document.createElement("canvas");r.width=e.x,r.height=e.y;const i=r.getContext("2d"),{image:n}=this;return i.imageSmoothingQuality="high",i.drawImage(n,0,0,n.width,n.height,0,0,e.x,e.y),this.emit("imageDownscaled",{width:e.x,height:e.y}),r}downscaleImageIfNecessary(){const e=this.image,t=this.resizedDimensions();if(!(t.x<this.image.width||t.y<this.image.height))return e;this.emit("beganImageDownscaling",e);const i=new Image;return i.width=t.x,i.height=t.y,i.src=e.src,this.emit("imageDownscaled",{width:t.x,height:t.y}),i}},JW=e=>e.key==="Enter",eV=e=>e.key==="Escape",tV=e=>t=>{JW(t)&&e(t)},rV=e=>t=>{eV(t)&&e(t)};function iV(e,t){let r=0;for(let i=e.length-1;i>=0;i--){const n=e[i];n==="."?e.splice(i,1):n===".."?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function nV(e){return e.charAt(0)==="/"}function oV(e){const t=nV(e),r=e.substr(-1)==="/";return e=iV(e.split("/").filter(Boolean),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e}var Sv=(...e)=>oV(e.join("/")),Nn=ni(BB()),eF=(e,t,[r,i],n=0)=>{const o=e[t];if(o){if(o<r)return console.error(`${t} must be greater than or equal to ${r}`),r;if(o>i)return console.error(`${t} must be less than or equal to ${i}`),i}return o||n},Mu=(e,t,r=[1,1,1,1])=>{const i=e[t];let n=!0;return i&&i.forEach(o=>{o<0&&(console.error(`${o} in ${t} must be greater than or equal to 0`),n=!1),o>1&&(console.error(`${o} in ${t} must be less than or equal to 1`),n=!1)}),n&&i||r},wr=e=>e*.08,tF=e=>e*.03,sV=(e,t)=>{const r=e.indexOf(t);if(!(r===-1||!e.length))return r===e.length-1?e[0]:e[r+1]},aV=(e,t)=>{const r=e.indexOf(t);if(!(r===-1||!e.length))return r===0?e[e.length-1]:e[r-1]},mf={},rF=({src:e,crossOrigin:t,key:r,resolve:i,reject:n})=>{mf[r]=e;const o=new Image;o.onload=()=>{mf[r]===e&&(i(o),delete mf[r])},o.onerror=s=>{mf[r]===e&&(n(s),delete mf[r])},o.crossOrigin=t,o.src=e},Pu=class extends Error{constructor(e){super(e),this.name="AssetNotFoundError"}},ql=()=>Math.max(window.devicePixelRatio||1,1),lV=new RegExp(/\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69(?:\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83D[\uDC68\uDC69])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270C\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9\u23EA\u23ED-\u23EF\u23F1-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2753\u2757\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|[\u23E9-\u23F3\u23F8-\u23FA\u25FB-\u25FE\u2614\u2615\u267F\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g),cV=e=>e.replace(lV,""),Au=e=>{try{return new URL(e),!0}catch{return!1}},uV=e=>e instanceof HTMLImageElement,hV=[{identifier:"basics",name:"Basics",items:[{identifier:"brightness"},{identifier:"contrast"},{identifier:"saturation"},{identifier:"gamma"}]},{identifier:"refinements",name:"Refinements",items:[{identifier:"clarity"},{identifier:"shadows"},{identifier:"highlights"},{identifier:"exposure"},{identifier:"blacks"},{identifier:"whites"},{identifier:"temperature"},{identifier:"sharpness"}]}],vw=hV,dV=[{identifier:"imgly_filter_category_duotone",name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:"imgly_duotone_desert",name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:"imgly_duotone_peach",name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:"imgly_duotone_clash",name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_plum",name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_breezy",name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:"imgly_duotone_deepblue",name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:"imgly_duotone_frog",name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:"imgly_duotone_sunset",name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:"imgly_filter_category_bw",name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:"imgly_lut_ad1920",name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bw",name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_x400",name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_litho",name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sepiahigh",name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_plate",name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sin",name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filter_category_vintage",name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:"imgly_lut_blues",name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_front",name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_smooth",name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:"imgly_lut_chest",name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_kdynamic",name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fall",name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lenin",name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pola669",name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_cold",name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:"imgly_lut_elder",name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_orchid",name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleached",name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleachedblue",name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_breeze",name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_blueshadows",name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_warm",name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:"imgly_lut_sunset",name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_eighties",name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_evening",name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k2",name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_legacy",name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:"imgly_lut_ancient",name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_cottoncandy",name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_classic",name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_colorful",name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_creamy",name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fixie",name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fridge",name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_gobblin",name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcontrast",name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcarb",name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k1",name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k6",name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_keen",name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lomo",name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lucid",name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_mellow",name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pale",name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pitched",name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_polasx",name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pro400",name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_quozi",name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_settled",name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_seventies",name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_soft",name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_steel",name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_summer",name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_tender",name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_twilight",name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}],yw=dV,fV=[{identifier:"radial",thumbnailURI:"./items/radial.png"},{identifier:"mirrored",thumbnailURI:"./items/mirrored.png"},{identifier:"linear",thumbnailURI:"./items/linear.png"},{identifier:"gaussian",thumbnailURI:"./items/gaussian.png"}],iF=fV,pV=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}},{identifier:"imgly_font_amaticsc",fontFamily:"Amatic SC",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}},{identifier:"imgly_font_archivo_black",fontFamily:"Archivo",fontWeight:"normal",fontURI:"./fonts/imgly_font_archivo_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_fira_sans_regular",fontFamily:"Fira Sans",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}},{identifier:"imgly_font_campton_bold",fontFamily:"Campton Book",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_campton_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}},{identifier:"imgly_font_carter_one",fontFamily:"Carter One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_carter_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}},{identifier:"imgly_font_codystar",fontFamily:"Codystar",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_codystar.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}},{identifier:"imgly_font_galano_grotesque_bold",fontFamily:"Galano Grotesque",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_galano_grotesque_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_krona_one",fontFamily:"Krona One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_krona_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}},{identifier:"imgly_font_kumar_one_outline",fontFamily:"Kumar One Outline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_kumar_one_outline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}},{identifier:"imgly_font_molle",fontFamily:"Molle",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_molle.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}},{identifier:"imgly_font_monoton",fontFamily:"Monoton",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_monoton.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}},{identifier:"imgly_font_nixie_one",fontFamily:"Nixie One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_nixie_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}},{identifier:"imgly_font_notable",fontFamily:"Notable",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_notable.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_oswald_semi_bold",fontFamily:"Oswald SemiBold",googleFamily:"Oswald",fontWeight:600,fontStyle:"normal",fontURI:"./fonts/imgly_font_oswald_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}},{identifier:"imgly_font_palanquin_dark_semi_bold",fontFamily:"Palanquin Dark SemiBold",googleFamily:"Palanquin Dark",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_palanquin_dark_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}},{identifier:"imgly_font_poppins",fontFamily:"Poppins",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_poppins.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}},{identifier:"imgly_font_roboto_black_italic",fontFamily:"Roboto Black",fontWeight:"bold",fontStyle:"italic",googleFamily:"Roboto",fontURI:"./fonts/imgly_font_roboto_black_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontFamily:"Roboto Light",googleFamily:"Roboto",fontWeight:300,fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_light_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sancreek",fontFamily:"Sancreek",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sancreek.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}},{identifier:"imgly_font_stint_ultra_expanded",fontFamily:"Stint Ultra Expanded",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_stint_ultra_expanded.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}},{identifier:"imgly_font_vt323",fontFamily:"VT323",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_vt323.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_yeseva_one",fontFamily:"Yeseva One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_yeseva_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_amberlight",fontFamily:"Amberlight",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_amberlight.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",googleFamily:"Montserrat",fontWeight:300,fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_roboto_black",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sue_ellen_francisco",fontFamily:"Sue Ellen Francisco",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sue_ellen_francisco.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_wolesbro",fontFamily:"Wolesbro",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_wolesbro.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}],_w=pV,mV=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_archivo_black","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_carter_one","imgly_font_codystar","imgly_font_fira_sans_regular","imgly_font_galano_grotesque_bold","imgly_font_krona_one","imgly_font_kumar_one_outline","imgly_font_lobster","imgly_font_molle","imgly_font_monoton","imgly_font_nixie_one","imgly_font_notable","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_oswald_semi_bold","imgly_font_palanquin_dark_semi_bold","imgly_font_poppins","imgly_font_permanent_marker","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sancreek","imgly_font_stint_ultra_expanded","imgly_font_trash_hand","imgly_font_vt323","imgly_font_yeseva_one"],gV=["imgly_font_abril_fatface_regular","imgly_font_amberlight","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_galano_grotesque_bold","imgly_font_handycheera_regular","imgly_font_montserrat_light","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy","imgly_font_permanent_marker","imgly_font_petit_formal_script","imgly_font_rasa_500","imgly_font_rasa_regular","imgly_font_roboto_black","imgly_font_roboto_light","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sue_ellen_francisco","imgly_font_ultra","imgly_font_wolesbro"],vV=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}],bw=vV,yV=[{identifier:"imgly_overlay_golden",name:"Golden",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:"imgly_overlay_lightleak1",name:"Lightleak",defaultBlendMode:"screen",overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:"imgly_overlay_rain",name:"Rain",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:"imgly_overlay_mosaic",name:"Mosaic",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:"imgly_overlay_vintage",name:"Vintage",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:"imgly_overlay_paper",name:"Paper",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:"imgly_overlay_bokeh",name:"Bokeh",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:"imgly_overlay_hearts",name:"Hearts",defaultBlendMode:"screen",overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:"imgly_overlay_lightleak2",name:"Lightleak 2",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:"imgly_overlay_wood",name:"Wood",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:"imgly_overlay_chop",name:"Chop",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:"imgly_overlay_metal",name:"Metal",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:"imgly_overlay_painting",name:"Painting",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:"imgly_overlay_grain",name:"Grain",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:"imgly_overlay_clouds",name:"Clouds",defaultBlendMode:"softLight",overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:"imgly_overlay_wall1",name:"Wall",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:"imgly_overlay_wall2",name:"Wall 2",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}],xw=yV,_V=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}],ww=_V,bV=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],xV=bV,wV=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],SV=wV,CV=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:4/3},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:16/9},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:3/4},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:9/16}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:!0,lockDimensions:!0}]}],Sw=CV,kV=ni(Hh()),TV={italic:"i"},nF=class{constructor(e){this.assetManager=e,this.injectedFonts={},this.loadedFonts={},this.isFontLoaded=t=>this.loadedFonts[t]!==void 0,this.getGoogleFamiliesString=t=>{const r=t.reduce((i,n)=>{const{fontFamily:o,fontStyle:s,fontWeight:a=400}=n;return i[o]=(i[o]||[]).concat(`${a}${TV[s]||""}`),i},{});return Object.keys(r).map(i=>{const n=r[i].length?`:${r[i].join(",")}`:"";return i.replace(" ","+")+n}).join("|")}}static createFontFacesCSS(e,t){return e.map(r=>{const i=t(r.fontURI);return`@font-face {
        font-family: "${r.fontFamily}";
        src: url('${i}') format('${r.format||"woff"}');
        font-weight: ${r.fontWeight||"normal"};
        font-style: ${r.fontStyle||"normal"};
      }`})}getFontWithId(e){const t=this.assetManager.getFontAsset(e);if(!t)throw new Error("The requested font does not exist as an asset.");return t}injectAllFonts(){const e=this.assetManager.getFontAssets();this.injectFonts(e)}async loadAllFonts(){const e=this.assetManager.getFontAssets();return this.loadFonts(e)}async loadFontsWithIdentifiers(e){const t=e.map(r=>this.getFontWithId(r));return this.loadFonts(t)}async loadFonts(e){return this.injectFonts(e),(0,kV.default)(e,t=>this.loadFont(t,!1),{stopOnError:!1}).then(()=>{})}async loadFont(e,t=!0){return new Promise((r,i)=>{this.isFontLoaded(e.identifier)&&r(),t&&this.injectFonts([e]),new Ou(e).load().then(()=>{this.loadedFonts[e.identifier]=e,r()}).catch(o=>{i(e.identifier)})})}async loadFontWithIdentifier(e,t=!0){const r=this.assetManager.getFontAsset(e);if(!r)throw new Error(`The requested font asset with identifier ${e} does not exist!`);return this.loadFont(r,t)}injectFonts(e,t=this.assetManager.getPathForCategory("font")){const r=e.filter($W),i=e.filter(zW);r.length>0&&this.addGoogleFontLinks(r),i.length>0&&this.addWebFontCSS(i,t)}addGoogleFontLinks(e){const t=e.filter(o=>!this.injectedFonts[o.identifier]);if(t.length===0)return;const r=this.getGoogleFamiliesString(t),i=document.createElement("link");i.rel="stylesheet",i.href=`https://fonts.googleapis.com/css?family=${r}`,document.getElementsByTagName("head")[0].appendChild(i),e.forEach(o=>{this.injectedFonts[o.identifier]=o})}addWebFontCSS(e,t){const r=e.filter(s=>!this.injectedFonts[s.identifier]);if(r.length===0)return;const n=`
      /* Injected by PhotoEditorSDK */
      ${nF.createFontFacesCSS(r,t).join(`
`)}
    `,o=document.createElement("style");o.innerHTML=n,document.head.appendChild(o),e.forEach(s=>{this.injectedFonts[s.identifier]=s})}},oF=class{constructor(e,t=!1,r){this.assetResolver=r,this.basePath="assets/",this.areCustomAssetsAllowed=!1,this.getAssets=d=>{switch(d){case"overlay":return this.overlayAssets;case"filter":return this.filterCategories;case"font":return this.fontAssets;case"focus":return this.focusAssets;case"adjustment":return this.adjustmentCategories;case"sticker":return this.stickerCategories;case"textdesign":return this.textDesignAssets;case"frame":return this.frameAssets;case"transform":return this.transformCategories;default:return[]}},this.getPath=(d,p)=>{const{assetResolver:v={}}=this,g=p&&v.item?v.item(p,d):p;if(g!=null&&g.match(/data:image/g)||(g==null?void 0:g.match(/(ftp|http|https):\/\//))&&Au(g))return g;if(!g&&Au(d))return d;const m=g?Sv(d,g):Sv(d);let y;if(this.basePath.match(/(ftp|http|https):\/\//)){const{length:_}=this.basePath;this.basePath[_-1]!=="/"&&(this.basePath=`${this.basePath}/`),y=this.basePath+m}else y=Sv(this.basePath,m);return v.path?v.path(y,d,g):y},this.getPathForCategory=d=>(...p)=>this.getPath(d,...p),this.addCustomStickerAsset=(d,p,v)=>{d.forEach(g=>{const{thumbnailURI:m,name:y,stickerURI:_,identifier:b,tintMode:w,resizeMode:S}=g,C=this.stickerCategories.find(E=>E.identifier===p),D={identifier:b,name:y,thumbnailURI:m,stickerURI:_,tintMode:w,resizeMode:S};if(C)C.items.push(D),C.thumbnailURI=m;else{const E={identifier:p,name:v,thumbnailURI:m,items:[D]};this.stickerCategories=[E,...this.stickerCategories]}}),this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[])},this.getItemPath=(d,p,v)=>{const g=d.find(m=>m.identifier===p);return g&&(g[v]||g.path)||""},this.isNonExistingFont=d=>!_w.find(p=>p.identifier===d.identifier)&&!wl[d.identifier],this.replaceDeprecatedFont=d=>wl[d.identifier]?_w.find(p=>p.identifier===zc(d.identifier,!0)):d;var i,n;e!=null&&e.basePath&&(this.basePath=e.basePath),this.areCustomAssetsAllowed=t;const o=yw.reduce(this.allOptions,[]);e&&e.filter?this.filterCategories=this.configuredCategory(yw,e.filter,o):this.filterCategories=yw,this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(d=>uW(d)),this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(d=>dw(d));const s=vw.reduce(this.allOptions,[]);e&&e.adjustment?this.adjustmentCategories=this.configuredCategory(vw,e.adjustment,s):this.adjustmentCategories=vw,this.fontAssets=_w.reduce(this.allOptions,[]);let a=mV.map(d=>this.getFontAsset(d));if(((n=(i=e==null?void 0:e.text)==null?void 0:i.fonts)==null?void 0:n.length)>0){a=e.text.fonts.map(p=>{if(this.isNonExistingFont(p))return p;const v=this.replaceDeprecatedFont(p);return this.getFontAsset(v.identifier)});const d=e.text.fonts.filter(this.isNonExistingFont);this.fontAssets=e.text.fonts?[...this.fontAssets,...d]:this.fontAssets}this.textToolFontAssets=a;const l=e&&e.focus&&e.focus.items&&e.focus.items.length?e.focus.items.map(d=>iF.find(p=>p.identifier===d.identifier)):iF;this.focusAssets=l,e&&e.overlay&&e.overlay.items?this.overlayAssets=this.configuredItem(e.overlay.items,xw,xw):this.overlayAssets=xw,e&&e.frame&&e.frame.items?this.frameAssets=this.configuredItem(e.frame.items,bw,bw):this.frameAssets=bw;const c=ww.reduce(this.allOptions,[]);e&&e.sticker?this.stickerCategories=this.configuredCategory(ww,e.sticker,c):this.stickerCategories=ww,this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);let h=xV;e&&e.theme==="light"&&(h=SV),this.textDesignAssets=e&&e.textdesign&&e.textdesign.items&&e.textdesign.items.length?e.textdesign.items.map(d=>h.find(p=>p.identifier===d.identifier)):h,this.textDesignToolFontAssets=gV.map(d=>this.getFontAsset(d));const f=Sw.reduce(this.allOptions,[]);e&&e.transform?this.transformCategories=this.configuredCategory(Sw,e.transform,f,"transform"):this.transformCategories=Sw,this.transformAssets=this.transformCategories.reduce(this.allOptions,[]),this.fontManager=new nF(this)}getFontManager(){return this.fontManager}getAssetSource(e,t){switch(e){case"filter":if(this.getLUTFilterAsset(t))return this.getPath(e,this.getItemPath(this.lutFilterAssets,t,"lutURI"));break;case"overlay":return this.getPath(e,this.getItemPath(this.overlayAssets,t,"overlayURI"));case"font":return this.getPath(e,this.getItemPath(this.fontAssets,t,"fontURI"));case"sticker":const i=this.stickerAssets.find(n=>n.identifier===t);if(i){if(i.stickerURI.substr(0,10)==="data:image")return i.stickerURI;if(t.includes("imgly_sticker")&&i.stickerURI.includes(".svg")&&yn()){const o=this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI")).split("/");return o.splice(o.length-1,0,"base"),o[o.length-1]=o[o.length-1].replace(".svg",".png"),o.join("/")}return this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI"))}throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getPath(Sv(e,"engine"),t);case"frame":return this.getPath(e,t)}throw new Error("Cannot resolve this type of asset yet")}getDuotoneFilterAsset(e){return this.duoToneFilterAssets.filter(t=>t.identifier===e)[0]}getLUTFilterAsset(e){return this.lutFilterAssets.filter(t=>t.identifier===e)[0]}getOverlayAsset(e){return this.overlayAssets.filter(t=>t.identifier===e)[0]}getStickerAsset(e){return this.stickerAssets.filter(t=>t.identifier===e)[0]}getFontAsset(e){return this.fontAssets.filter(t=>t.identifier===e)[0]}getTextDesignAssets(e){return this.textDesignAssets.filter(t=>t.identifier===e)[0]}getFrameAsset(e){return this.frameAssets.filter(t=>t.identifier===e)[0]}getFontAssets(){return this.fontAssets}getFontAssetsForText(){return this.textToolFontAssets}getFontAssetsForTextDesign(){return this.textDesignToolFontAssets}getFrameAssets(){return this.frameAssets}allOptions(e,t){return Object.prototype.hasOwnProperty.call(t,"items")?[...e,...t.items]:[...e,t]}configuredCategory(e,t,r,i){return t.categories&&t.categories.length?t.categories.reduce((n,o)=>{const s=e.find(a=>a.identifier===o.identifier);return s?n.push(ge(L(L({},s),o),{items:this.configuredItem(o.items,r,s.items,i).filter(Boolean)})):(this.areCustomAssetsAllowed||i==="transform")&&n.push(ge(L({},o),{items:this.configuredItem(o.items,r,o.items,i).filter(Boolean)})),n},[]):e}configuredItem(e,t,r,i){return e&&e.length?e.reduce((n,o)=>{const s=t.find(a=>a.identifier===o.identifier);return s?n.push(L(L({},s),o)):(this.areCustomAssetsAllowed||i==="transform")&&n.push(o),n},[]).filter(Boolean):r}},sF=class{static contains(e,t){return t.x>=e.minX&&t.x<=e.maxX&&t.y>=e.minY&&t.y<=e.maxY}constructor(e,t,r,i){if(typeof e=="number")if(typeof t=="number"&&r!==void 0&&i!==void 0)this.origin={x:e,y:t},this.size={width:r||0,height:i||0};else throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)");else{if(this.origin=e,typeof t=="number")throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)");this.size=t}}get minX(){return this.origin.x}get minY(){return this.origin.y}get midX(){return this.origin.x+.5*this.size.width}get midY(){return this.origin.y+.5*this.size.height}get maxX(){return this.origin.x+this.size.width}get maxY(){return this.origin.y+this.size.height}get width(){return this.size.width}get height(){return this.size.height}},uo=sF;uo.ZERO=new sF({x:0,y:0},{width:0,height:0});var za=class{constructor(e,t,r,i,n,o){this.a=e,this.b=t,this.c=r,this.d=i,this.tx=n,this.ty=o}static fromScale(e,t){return new za(e,0,0,t,0,0)}static fromRotation(e){const t=Math.cos(e),r=Math.sin(e);return new za(t,-r,r,t,0,0)}static fromRotationDeg(e){const t=Math.PI*e/180;return this.fromRotation(t)}static fromTranslation(e,t){return new za(1,0,0,1,e,t)}static fromTRS(e,t,r,i,n){const o=Math.cos(r),s=Math.sin(r);return new za(i*o,-n*s,i*s,n*o,e,t)}static multiply(e,t){const r=e.a*t.a+e.b*t.c,i=e.a*t.b+e.b*t.d,n=e.c*t.a+e.d*t.c,o=e.c*t.b+e.d*t.d,s=e.a*t.tx+e.b*t.ty+e.tx,a=e.c*t.tx+e.d*t.ty+e.ty;return new za(r,i,n,o,s,a)}static transformPoint(e,t){return{x:e.a*t.x+e.b*t.y+e.tx,y:e.c*t.x+e.d*t.y+e.ty}}static getInverted(e){const t=e.a*e.d-e.b*e.c;if(t===0)return e;const r=1/t,i=r*e.d,n=-r*e.b,o=-r*e.c,s=r*e.a,a=r*(e.b*e.ty-e.d*e.tx),l=r*(e.c*e.tx-e.a*e.ty);return new za(i,n,o,s,a,l)}},gt=za;gt.IDENTITY=za.fromScale(1,1);function Os(e){return typeof e=="number"}var aF=e=>e<0,lF=e=>aF(e)?-e:e,zu=e=>e*(Math.PI/180),Cw=e=>e*(180/Math.PI),Cv={[0]:zu(0),[90]:zu(90),[180]:zu(180),[270]:zu(270)},cF=Object.values(Cv),kv=e=>{let t=Math.round(Cw(lF(e)));return aF(e)&&(t===270?t=90:t===90&&(t=270)),Cv[t%360]},uF=e=>e===0?e:360-lF(e),hF=e=>sV(cF,kv(e)),dF=e=>aV(cF,kv(e)),EV=e=>{const t=kv(e);return t===Cv[270]||t===Cv[90]},Xr=class{static get IDENTITY(){return new Xr({x:0,y:0})}constructor(e,t={x:1,y:1},r=0){this.position=e,this.scale=t,this.rotation=r}};Eo();var rt={};_r(rt,{absoluteToRelativePoint:()=>AV,absoluteToRelativeSize:()=>MV,getBaseLocalToWorldMatrix:()=>Tv,getLocalToParentMatrix:()=>pF,getLocalToWorldMatrix:()=>$u,getPointInWorldSpace:()=>Ew,getRotationBetweenCoordinateSpaces:()=>zV,getScalarInWorldSpace:()=>RV,getSizeInOutputSpace:()=>FV,getSizeInWorldSpace:()=>mF,pointFromSpaceToSpace:()=>gf,rectTransformToAffineTransform:()=>kw,relativeToAbsolutePoint:()=>PV,relativeToAbsoluteSize:()=>OV,scalarFromSpaceToSpace:()=>Tw,sizeFromSpaceToSpace:()=>IV});function fF(e){return e.x!==void 0}function kw(e){return gt.fromTRS(e.position.x,e.position.y,e.rotation,e.scale.x,e.scale.y)}function DV(e){return e.getBaseLocalToParentMatrix?e.getBaseLocalToParentMatrix():kw(e.getTransform())}function Tv(e){const t=e.getParent(),r=DV(e);if(t===void 0)return r;const i=Tv(t);return gt.multiply(i,r)}function pF(e){return e.getLocalToParentMatrix?e.getLocalToParentMatrix():kw(e.getTransform())}function $u(e){const t=e.getParent(),r=pF(e);if(t===void 0)return r;const i=$u(t);return gt.multiply(i,r)}function gf(e,t,r,i=!1){const n=t.type==="output"&&i?Tv(t):$u(t),o=r.type==="output"&&i?Tv(r):$u(r),s=gt.getInverted(o);return gt.transformPoint(s,gt.transformPoint(n,e))}function Tw(e,t,r){const i=new G(e,0),n=new G(gf(i,t,r)),o=new G(gf(G.ZERO,t,r));return G.distance(o,n)}function IV(e,t,r){const i=fF(e)?e.x:e.width,n=fF(e)?e.y:e.height,o=Tw(i,t,r),s=Tw(n,t,r);return{width:o,height:s}}function Ew(e,t){const r=$u(t);return gt.transformPoint(r,e)}function RV(e,t){const r=new G(e,0),i=new G(Ew(r,t)),n=new G(Ew(G.ZERO,t));return G.distance(i,n)}function mF(e){const t=$u(e),r=e.getBounds(),i={x:r.width,y:0},n={x:0,y:r.height},o=new G(gt.transformPoint(t,G.ZERO)),s=new G(gt.transformPoint(t,i)),a=new G(gt.transformPoint(t,n)),l=G.distance(o,s),c=G.distance(o,a);return{width:l,height:c}}function FV(e,t){const r=mF(e),i=t.getTransform().scale,n={x:1/i.x,y:1/i.y};return{width:r.width*n.x,height:r.height*n.y}}function OV(e,t){const r=t.getBounds();return{width:e.width*r.width,height:e.height*r.height}}function MV(e,t){const r=t.getBounds();return{width:e.width/r.width,height:e.height/r.height}}function PV(e,t,r=!0){const i=t.getBounds();return{x:e.x*i.width+(r?0:i.minX),y:e.y*i.height+(r?0:i.minY)}}function AV(e,t,r=!0){const i=t.getBounds();return{x:(e.x-(r?0:i.minX))/i.width,y:(e.y-(r?0:i.minY))/i.height}}function zV(e,t){const i=gf({x:1,y:0},e,t,!0),n=gf(G.ZERO,e,t,!0);return Math.atan2(i.y-n.y,i.x-n.x)}function gF(e){return typeof e!="string"&&!Array.isArray(e)&&e.a===void 0}function vF(e){return typeof e!="string"&&Array.isArray(e)&&e.length===3}function yF(e){return typeof e!="string"&&!Array.isArray(e)&&e.a!==void 0}function _F(e){return typeof e!="string"&&Array.isArray(e)&&e.length===4}function $V(e){return typeof e=="string"}var BV=class{constructor(e,t){this.engine=t,this.transform=Xr.IDENTITY,this.canvasPivot={x:0,y:0},this.previewQuality=1,this.canvas=e}get quality(){return this.previewQuality}setQuality(e){this.previewQuality=Math.min(Math.max(e,.01),1)}getTransform(){return this.transform}setTransform(e){this.transform=e}getPosition(){return this.transform.position}setPosition(e,t){let r;typeof e=="number"?r={x:e,y:t===void 0?e:t}:r=e;const{scale:i}=this.transform,{rotation:n}=this.transform;this.setTransform(new Xr(r,i,n))}getScale(){return this.transform.scale}setScale(e,t){let r;typeof e!="number"?r=e:r={x:e,y:t===void 0?e:t};const{position:i}=this.transform,{rotation:n}=this.transform;this.setTransform(new Xr(i,r,n))}getRotation(){return this.transform.rotation}setRotation(e){const{position:t}=this.transform,{scale:r}=this.transform;this.setTransform(new Xr(t,r,e))}getCanvasPivot(){return this.canvasPivot}setCanvasPivot(e,t){typeof e=="number"?this.canvasPivot={x:e,y:typeof t===void 0?e:t}:this.canvasPivot=e}getCanvasBounds(){const e=this.canvasPivot,{width:t,height:r}=this.canvas;return new uo(-e.x*t,-e.y*r,t,r)}};function bF(e){return e.getTransform!==void 0}function LV(e){return e.getContainer!==void 0}var Ev=e=>2*Math.PI-e,UV=e=>-e,Dw=({rotation:e,outputRotation:t=0,flipHorizontally:r,flipVertically:i})=>{let n=e;return r&&(n=Ev(n)),i&&(n=UV(n)),n+t};Jt(),Yh(),tR(),Ul(),tf(),Jt();var Iw=class{static downloadDataURL(e,t="photoeditorsdk-export"){const r=this.createBlobURLFromDataURL(e),i=this.getExtensionFromDataURL(e),n=document.createElement("a");n.download=`${t}.${i}`,n.href=r,document.body.appendChild(n),n.click(),document.body.removeChild(n)}static downloadMSBlob(e,t="photoeditorsdk-export"){navigator.msSaveBlob&&navigator.msSaveBlob(e,`${t}.png`)}static getExtensionFromDataURL(e){return e.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}static createBlobURLFromDataURL(e){if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array)return e;const t=eR.decode(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),n=new Uint8Array(i);for(let s=0;s<t.length;s++)n[s]=t[s];const o=new window.Blob([i],{type:r});return window.URL.createObjectURL(o)}};Jt();var NV=class{constructor(e,t,r){this._sdk=e,this._options=t,this._download=r}export(){const e=this._getRenderType();return this._sdk.export(e,this._options.format,this._options.quality).then(t=>(this._download&&this._downloadData(e,t),t))}_downloadData(e,t){switch(e){case Ll.DATAURL:Iw.downloadDataURL(t,this._options.fileBasename);break;case Ll.MSBLOB:Iw.downloadMSBlob(t,this._options.fileBasename);break}}_getRenderType(){const e=this._options;return e.type!==Ll.IMAGE||!this._download?e.type:jo.supportsMSBlob()?Ll.MSBLOB:Ll.DATAURL}};Ul(),Eo(),Jt(),Jt();var jV=class{constructor(e,t,r){this._editor=e,this._sdk=t,this._mediator=r,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}exists(e){return!!this._map[e]}add(e){const{identifier:t}=e.constructor;e.on("update",()=>{this._mediator.emit(ai.EVENTS.OPERATION_UPDATED,e)});const r=this._preferredOrder.indexOf(t);if(r===-1)throw new Error(`EditorOperations#add: \`${t}\` does not appear in \`operationsOrder\``);this._stack.set(r,e),this._map[t]=e,this._mediator.emit(ai.EVENTS.OPERATION_CREATED,e)}remove(e,t=!0){const r=typeof e=="object"?e.constructor.identifier:e,i=this._stack.getStack();e=this.get(r),delete this._map[r];const n=i.map(o=>o.constructor.identifier).indexOf(r);if(n!==-1){this._stack.removeAt(n);for(let o=n+1;o<i.length;o++){const s=i[o];!s||s.setDirty(!0)}t&&this._mediator.emit(ai.EVENTS.OPERATION_REMOVED,e)}}get(e){return this._map[e]}getOrCreate(e,t={}){if(this._map[e]){const n=this._map[e];return n.set(t,!1),n}const r=this._available[e],i=new r(this._sdk,t);return this.add(i),i}getStack(){return this._stack}reset(){this._map={}}_fixStack(){const e=this._stack.getStack().slice();this._stack.clear(),e.forEach(t=>{this.add(t)})}};Jt();var HV=class{constructor(e,t,r){this._image=e,this._maxPixels=t,this._maxDimensions=r}needsResize(){const e=new Tt(this._image.width,this._image.height),r=e.x*e.y>this._maxPixels,i=this._maxDimensions!==null&&(e.x>this._maxDimensions||e.y>this._maxDimensions);return r||i}resize(){let e=null,t=null;const r=this._maxDimensions;return new Promise((i,n)=>{window.setTimeout(()=>{const s=new Tt(this._image.width,this._image.height).clone();if(s.x*s.y>this._maxPixels&&(s.copy(this._getDimensionsByMaxPixels()),e="maxMegaPixels"),r!==null&&(s.x>r||s.y>r)){const a=Math.min(r/s.x,r/s.y);s.multiply(a),e="maxDimensions"}s.floor(),t=this._createResizedImageCanvas(s),i({canvas:t,dimensions:s,reason:e})},1e3)})}_createResizedImageCanvas(e,t=e){const r=this._image,i=document.createElement("canvas");i.width=e.x,i.height=e.y;const n=e.clone().subtract(t).divide(2);return i.getContext("2d").drawImage(r,0,0,r.width,r.height,n.x,n.y,t.x,t.y),i}_getDimensionsByMaxPixels(){const e=this._image,t=this._maxPixels,r=e.width/e.height,i=e.height/e.width;return new Tt(Math.sqrt(t*r),Math.sqrt(t*i)).floor()}},WV=class extends Eg{constructor(e,t,r,i=!1){super(),this._ui=e,this._options=t,this._mediator=r,this._shallow=i,i||(this._initSDK(),this.operations=new jV(this,this._sdk,this._mediator))}_initFonts(){const e=Er.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new ka(this._ui,e);const t=this._fontManager.getFonts(),r=this._ui.getFontLoader();r.setFonts(t),r.load()}setImage(e=this._options.editor.image,t=!0){t&&this.reset();let r=null;r=this._sdk.parseExif(e),this._setImage(e,r)}_initSDK(){const{logLevel:e,displayWelcomeMessage:t,debug:r,license:i,crossOrigin:n,watermark:o}=this._options,{smoothDownscaling:s,smoothUpscaling:a,preferredRenderer:l,pixelRatio:c,transparent:h,clearColor:f}=this._options.editor;let d;Array.isArray(f)?d=hr.fromArray(f):typeof f=="string"?d=hr.fromHex(f):f instanceof hr&&(d=f.clone());const p={logLevel:e,debug:r,displayWelcomeMessage:t,pixelRatio:c,smoothDownscaling:s,smoothUpscaling:a,transparent:h,crossOrigin:n,clearColor:d,license:i,watermark:o};this._sdk=new et(l,p)}getMaxMegapixels(){const{maxMegaPixels:e}=this._options.editor;return e}getCrossOrigin(){return Er.getCrossOriginValue(this._options.crossOrigin||"anonymous")}getOutputDimensions(e=!1){return this._sdk.getOutputDimensions(e)}getOutputTextureDimensions(e=!1){return this._sdk.getOutputTextureDimensions(e)}getFinalDimensions(e=!1){return this._sdk.getFinalDimensions(e)}_setImage(e=this._options.editor.image,t=null){this._sdk.setAllOperationsToDirty(),this._options.editor.image=e,this._sdk.setImage(e,t)}_ensureImageIsResized(){const e=this._sdk.getImage(),t=this._sdk.getRenderer(),r=this.getMaxMegapixels(),i=r?r*1e6:null,n=t.getMaxDimensions(),o=new HV(e,i,n);return!this._resizedImage&&o.needsResize()?o.resize().then(({canvas:s,dimensions:a,reason:l})=>(this._resizedImage=s,this._sdk.setImage(s),s)):Promise.resolve(e)}export(e=!1){return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then(t=>{const r=this._options.editor.export;return new NV(this._sdk,r,e).export().then(n=>(this.emit("export",n),this._mediator.emit(ai.EVENTS.EXPORT,n,this),this._watermarkOperation&&(this._watermarkOperation.setEnabled(!0),this._sdk.render()),this._sdk.setAllOperationsToDirty(),n))})}broadcastTransform(e,t){const r=new et.Operations.TransformOperation.TransformChange(e,t);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach(n=>{const o=this.operations.get(n);!o||o.transform(r)})}broadcastFlip(e){["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"].forEach(r=>{const i=this.operations.get(r);!i||i.flip(e)})}broadcastRotate(e){["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"].forEach(r=>{const i=this.operations.get(r);!i||i.rotate(e)})}_initSerializers(){this._serializers={"1.0.0":(_j(),Zi(_R)).default,"1.0.1":(bj(),Zi(wR)).default,"2.0.0":(Cj(),Zi(DR)).default,"3.0.0":(kj(),Zi(OR)).default,"3.1.0":(Tj(),Zi(AR)).default,"3.2.0":(Ej(),Zi(BR)).default,"3.4.0":(Dj(),Zi(NR)).default,"3.5.0":(Ij(),Zi(WR)).default,"3.6.0":(Rj(),Zi(qR)).default,"3.7.0":(Fj(),Zi(QR)).default,"3.8.0":(Oj(),Zi(JR)).default,"3.9.0":(Mj(),Zi(r4)).default,"3.12.0":(zj(),Zi(i4)).default}}serialize(e={},t="3.12.0"){const r=this._serializers[t];return r?new r(this).serialize(e):Promise.reject(new Error(`No serializer for version ${t} found.`))}deserialize(e){const t=this._serializers[e.version];return t?new t(this).deserialize(e):Promise.reject(new Error(`No serializer for version ${e.version} found.`))}save(e=!1,t=!1){const r=this._options.editor.save;return this.serialize({image:t}).then(i=>{const n=JSON.stringify(i,null,2);if(e){const o=`data:text/json;charset=utf-8;base64,${window.encodeURI(window.btoa(n))}`;Iw.downloadDataURL(o,r.fileBasename)}return n})}reset(){this._sdk.reset(),this.operations.reset()}dispose(){this.stop(),this._resizedImage&&Nr(this._resizedImage),this._sdk.dispose()}getRenderer(){return this._sdk.getRenderer()}getSDK(){return this._sdk}getInputDimensions(){return this._sdk.getInputDimensions()}getImage(){return this._sdk.getImage()}getOptions(){return this._options}getUI(){return this._ui}getMediator(){return this._mediator}},VV=WV;Sx();var Xl=class extends Eg{constructor(e={}){super(),this._mediator=new Eg,this._fontLoader=new Rg(this),this._options=e,this._initOptions(),this._initEvents(),this._disposed=!1,this._isReady=!1,this._editor=new VV(this,this._options,this._mediator),this._options.editor.image&&this._editor.setImage(this._options.editor.image),this._mediator.once(ai.EVENTS.EDITOR_READY,()=>{this._isReady=!0}),Ke.setLevel(this._options.logLevel)}export(...e){return this._editor.export(...e)}serialize(...e){return this._editor.serialize(...e)}deserialize(e){return this._editor.deserialize(e)}getEditor(){return this._editor}isReady(){return this._isReady}onReady(e){this._isReady?e():this._mediator.once(ai.EVENTS.EDITOR_READY,e)}createFilter(e){return new Dg(this,this._getOptions("filter")).instantiateFilterWithIdentifier(e)}getTextDesignLayoutByID(e){const t=new xu(this,this._getOptions("textDesign"));return new(t.getLayoutByIdentifier(e))}getTextDesignAssetManager(){return et.Operations.SpriteOperation.TextDesignSprite.AssetManager}getTextDesignFontManager(){return new ka(this,{fonts:ai.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0,isTextDesign:!0})}_getOptions(e){const t=this.getEditor(),{controls:r}=t;let i={};r&&r.get(e)&&(i=r.get(e).defaultOptions);const n=t.getOptions();return Er.deepDefaults({},n.editor.controlsOptions[e]||{},i)}_initOptions(){if(this._options=Er.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:!1,preloader:!0,autoRun:!0}),this._options.editor=Er.defaults(this._options.editor||{},{enableZoom:!0,enableDrag:!0,enableExport:!0,enableKeyboardControls:!0,enablePositionSnapping:!0,enableRotationSnapping:!0,enableSave:!1,enableLoad:!1,pixelRatio:Math.max(typeof window!="undefined"&&window.devicePixelRatio||1,1),preferredRenderer:"webgl",transparent:!0,clearColor:[0,0,0,0],displayResizeMessage:!0,maxMegaPixels:{},displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame"],controlsOptions:{focus:{highQualityCanvasBlur:!1}}}),this._options.editor.snappingOptions=Er.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}}),this._options.editor.snappingOptions.position=Er.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20}),this._options.editor.snappingOptions.position.padding=Er.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1}),this._options.editor.snappingOptions.rotation=Er.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20}),this._options.editor.controlsOptions.focus=Er.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:!1}),this._options.editor.maxMegaPixels=Er.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=Er.defaults(this._options.editor.export||{},{format:"image/png",type:Ll.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.editor.save=Er.defaults(this._options.editor.save||{},{format:"text/json",download:!0,fileBasename:"photoeditorsdk-save"}),this._options.extensions=Er.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=Er.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null}),!(this._options.editor.image instanceof window.Image)){const e=new window.Image;this._options.editor.image&&(e.src=this._options.editor.image,this._options.editor.image=e)}}_initEvents(){this._mediator.pipeEvents(this)}_disposeEvents(){this._mediator.unpipeEvents(this)}setImage(e){this._editor.setImage(e)}getAssetPath(e,t=!1,r=!1){let{baseUrl:i,resolver:n}=this._options.assets,o=`${i}/${e}`;n=n||(c=>c),e.match(/(ftp|http|https):\/\//)&&(o=e);const s=e.replace(/assets\//,"").split("/"),a=s[0];let l={};switch(a){case"art-filters":return l={identifier:s[1],type:s[2].split(".")[0]},n("art-filter",l);case"filters":return l={identifier:s[1].replace(/\.png$/g,"")},n("filter",l);case"fonts":return l={identifier:s[1].replace(/\.(woff|otf|ttf)$/g,"")},n("font",l);case"frames":return l={identifier:s[1],filename:s[2]},n("frame",l);case"overlays":return l={identifier:s[1].replace(/\.(png|jpg|jpeg)$/g,"")},n("overlay",l);case"stickers":{const c=s[3].endsWith(".svg"),h=s[3]==="thumbs";return l={category:s[1],identifier:(c?s[3]:s[4]).replace(/\.(png|svg)$/g,""),variant:c?"svg":h?"thumb":"base"},n("sticker",l)}case"text-design":return l={type:s[1]==="fonts"?"font":"image",identifier:s[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")},n("text-design",l)}return typeof n!="undefined"&&n!==null&&(o=n(o)),o}getFontLoader(){return this._fontLoader}dispose(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}render(e){return this.deserialize(e).then(()=>this.export())}};Xl.prototype.identifier="engine-wrapper",Xl.Constants=ai,Xl.Events=ai.EVENTS,Xl.Utils=jo,Xl.JSONLoader=Uc,Xl.SDK=et;var GV=class extends ff{constructor(e){super(),this.config=e}getOutputDimensions(){const e=this.getOutputContainer();return e?e.getResolution():{width:0,height:0}}getSmallerOutputSide(){const e=this.getOutputContainer();if(!e)return 0;const t=e.getResolution();return Math.min(t.width,t.height)}convertPointFromPreviewIntoOutputSpace(e,t){const r=gt.getInverted(rt.rectTransformToAffineTransform(t));return gt.transformPoint(r,e)}convertPointFromPreviewIntoWorldSpace(e,t,r){const i=gt.getInverted(rt.rectTransformToAffineTransform(t)),n=r?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix(),o=gt.multiply(n,i);return gt.transformPoint(o,e)}convertPointFromPreviewIntoFlippedPreviewSpace(e){const t=this.getOutputContainer().getFlipTransformMatrix();return gt.transformPoint(t,e)}convertPointFromWorldIntoPreviewSpace(e,t){const r=rt.rectTransformToAffineTransform(t),i=gt.getInverted(this.getOutputContainer().getLocalToParentMatrix()),n=gt.multiply(r,i);return gt.transformPoint(n,e)}convertPointFromOutputIntoPreviewSpace(e,t){const r=rt.rectTransformToAffineTransform(t);return gt.transformPoint(r,e)}getContainersAtPreviewPoint(e,t){const r=new Array,i=this.convertPointFromPreviewIntoWorldSpace(e,t),n=this.getRootContainers();for(const o of n)this.accumulateContainersAtWorldPointInHierarchy(i,o,r);return r}isPreviewPointInContainer(e,t,r){const i=this.convertPointFromPreviewIntoWorldSpace(e,r);return this.isWorldPointInContainer(i,t)}isWorldPointInContainer(e,t){const r=rt.getLocalToWorldMatrix(t),i=gt.getInverted(r),n=gt.transformPoint(i,e);return uo.contains(t.getBounds(),n)}accumulateContainersAtWorldPointInHierarchy(e,t,r){this.isWorldPointInContainer(e,t)&&r.push(t);const i=t.getChildren();for(const n of i)bF(n)&&this.accumulateContainersAtWorldPointInHierarchy(e,n,r)}},Ms=class{constructor(e){this.engine=e,this.id=gi()}getID(){return this.id}getContainer(){return this.engine.getRootContainers()[0]}getIndexInParent(){const{rootOperations:e}=this.engine;for(let t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1}setIndexInParent(e){this.engine.moveIndex(this,e)}isValid(){return this.getIndexInParent()!==-1}},qV=class extends Ms{constructor(e,t,r){super(t),this.operation=r,this.type="adjustments",this.setProperties(e)}getProperties(){const e=this.operation.getOptions(),t=e.gamma-1;return{brightness:e.brightness||0,saturation:e.saturation||0,contrast:e.contrast||0,gamma:(t<0?2*t:t)||0,clarity:e.clarity||0,exposure:e.exposure||0,shadows:e.shadows*.5||0,highlights:e.highlights||0,whites:e.whites||0,blacks:e.blacks||0,temperature:e.temperature||0,sharpness:e.sharpness||0}}setProperties(e){e.gamma!==void 0&&(e.gamma=1+(e.gamma<0?.5*e.gamma:e.gamma)),e.shadows&&(e.shadows=e.shadows*2),this.operation.set(e)}getOperation(){return this.operation}getTypeIdentifier(){return"adjustments"}},Ps=e=>{if(yF(e))return new et.Color(e.r,e.g,e.b,e.a);if(_F(e))return new et.Color(e[0],e[1],e[2],e[3]);if(gF(e))return new et.Color(e.r,e.g,e.b,1);if(vF(e))return new et.Color(e[0],e[1],e[2],1);if($V(e)){const[t,r,i]=e.match(/[0-9A-fa-f]{1,2}/g);return new et.Color(parseInt(t,16)/255,parseInt(r,16)/255,parseInt(i,16)/255,1)}throw new Error("Invalid color type")},fr=class{get x(){return this._x}get y(){return this._y}constructor(e=0,t=0){this._x=e,this._y=t}set(e,t){return this._x=e,this._y=t,this}clone(){return new fr(this._x,this._y)}copy(e){return this._x=e.x,this._y=e.y,this}clamped(e=this,t=this){let r=typeof e=="number"?{x:e,y:e}:e,i=typeof t=="number"?{x:t,y:t}:t;return this._x=Math.max(r.x,this._x),this._y=Math.max(r.y,this._y),this._x=Math.min(i.x,this._x),this._y=Math.min(i.y,this._y),this}divide(e,t){return typeof e=="number"||e===null?(this._x/=e,this._y/=typeof t=="undefined"?e:t):(this._x/=e.x,this._y/=e.y),this}subtract(e,t){return typeof e=="number"||e===null?(this._x-=e,this._y-=typeof t=="undefined"?e:t):(this._x-=e.x,this._y-=e.y),this}multiply(e,t){return typeof e=="number"||e===null?(this._x*=e,this._y*=typeof t=="undefined"?e:t):(this._x*=e.x,this._y*=e.y),this}add(e,t){return typeof e=="number"||e===null?(this._x+=e,this._y+=typeof t=="undefined"?e:t):(this._x+=e.x,this._y+=e.y),this}dot(e,t){return typeof e=="number"||e===null?this._x*e+this._y*(typeof t=="undefined"?e:t):this._x*e.x+this._y*e.y}equals(e,t){return typeof e=="number"||e===null?e===this._x&&t===this._y:e.x===this._x&&e.y===this._y}flip(){let e=this._x;return this._x=this._y,this._y=e,this}round(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this}ceil(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this}floor(){return this._x=this._x|0,this._y=this._y|0,this}abs(){return this._x=Math.abs(this._x),this._y=Math.abs(this._y),this}len(){return Math.sqrt(this._x*this._x+this._y*this._y)}min(){return Math.min(this._x,this._y)}max(){return Math.max(this._x,this._y)}toObject(){return{x:this._x,y:this._y}}toString(){return`Vector2({ x: ${this._x}, y: ${this._y} })`}roundDecimal(e){return this._x=parseFloat(this._x.toFixed(e)),this._y=parseFloat(this._y.toFixed(e)),this}asArray(e=!1){return e?[this._y,this._x]:[this._x,this._y]}static fromObject(e){return new fr(e.x,e.y)}static fromSize(e){return new fr(e.width,e.height)}static get NULL(){return new fr(0,0)}},Bu=class{constructor(e){this.engine=e,this.id=gi(),this.transform=Xr.IDENTITY,this.bounds=uo.ZERO}getID(){return this.id}getParent(){const e=this.engine.getRootContainers();if(!(e.length===0||this.id===e[0].id))return e[0]}getIndexInParent(){const{rootOperations:e}=this.engine;for(let t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1}setIndexInParent(e){this.engine.moveIndex(this,e)}getChildren(){const e=this.engine.getRootContainers();return e.length>0&&(this.id===e[0].id||this.id===this.engine.getOutputContainer().id)?this.engine.rootOperations:[]}getBounds(){return this.bounds}setPivotOnSelfAndSprite(e,t,r){typeof t=="number"?(this.setPivotInternal(t,r),e.setPivot(new fr(t,r))):(this.setPivotInternal(t),e.setPivot(fr.fromObject(t)))}setPivot(e,t){this.setPivotInternal(e,t)}getPivot(){const e=this.getBounds();return{x:-e.minX/e.width,y:-e.minY/e.height}}getTransform(){return this.transform}setTransform(e){this.transform=e}updateTransform(){this.setTransform(this.transform)}getPosition(){return this.transform.position}setPosition(e,t){let r;typeof e=="number"?r={x:e,y:t===void 0?e:t}:r=e;const{scale:i}=this.transform,{rotation:n}=this.transform;this.setTransform(new Xr(r,i,n))}getScale(){return this.transform.scale}setScale(e,t){let r;typeof e!="number"?r=e:r={x:e,y:t===void 0?e:t};const{position:i,rotation:n}=this.transform;this.setTransform(new Xr(i,r,n))}getRotation(){return this.transform.rotation}setRotation(e){const{position:t,scale:r}=this.transform;this.setTransform(new Xr(t,r,e))}getSizeInWorldSpace(){return rt.getSizeInWorldSpace(this)}getSizeInOutputSpace(){return rt.getSizeInOutputSpace(this,this.engine.getOutputContainer())}setSizeInWorldSpace(e){const t=this.getBounds();this.setScale(e.width/t.width,e.height/t.height)}setSizeInOutputSpace(e){const t=this.engine.getOutputContainer().getScale();this.setSizeInWorldSpace({width:e.width/t.x,height:e.height/t.y})}isValid(){return this.getIndexInParent()!==-1}setPivotInternal(e,t){const r=this.getBounds();typeof e=="number"?this.setBoundsFromSize(r.width,r.height,{x:e,y:t}):this.setBoundsFromSize(r.width,r.height,e)}setBoundsFromSize(e,t,r=this.getPivot()){this.bounds=new uo(-r.x*e,-r.y*t,e,t)}},XV=class extends Bu{constructor(e,t){super(t),this.type="drawing",this.drawing=e,this.operation=t.createSpriteOperation(),this.sprite=this.operation.createBrush({}),this.operation.addSprite(this.sprite),this.radialBrush=this.sprite._createRadialBrush();const i=t.getRootContainers()[0].getBounds();this.bounds=new uo(0,0,i.width,i.height),this.setTransform(Xr.IDENTITY),this.operation.setDirty(!0),this.setData(e)}beginStroke(e){if(this.currentStroke)throw new Error("A brush stroke has already been started but not finished.");if(e.id!=="imgly_brush_radial")throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.");this.currentBrush=e,this.currentStroke={brush:e,path:{controlPoints:[]}},this.radialBrush.setColor(Ps(e.color)),this.radialBrush.setHardness(e.hardness),this.radialBrush.setSize(e.size),this.currentPath=this.sprite.createPath(this.radialBrush.clone())}addPointToCurrentStroke(e,t=!0){if(!this.currentStroke||!this.currentBrush||!this.currentPath)throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"');if(this.currentStroke.path.controlPoints.length){const a=this.currentStroke.path.controlPoints,l=a[a.length-1],c=this.currentBrush.size/10;if(Math.sqrt(e.x-l.x**2+(e.y-l.y**2))<c)return}const r=this.engine.getOutputContainer(),i=this.engine.getRootContainers()[0],n=rt.pointFromSpaceToSpace(e,i,r,!0),o=rt.absoluteToRelativePoint(n,r,!1),s=r.getBounds();this.currentPath.addControlPoint(fr.fromObject(o)),this.currentStroke.path.controlPoints.push(e),t&&this.sprite.render(fr.fromObject({x:s.width,y:s.height}))}endStroke(){if(!this.currentStroke||!this.currentPath||!this.currentBrush)return;this.currentStroke.path.controlPoints.length&&this.drawing.strokes.push(this.currentStroke),this.currentStroke=void 0,this.currentBrush=void 0,this.currentPath.setClosed(!0);const e=this.engine.getOutputContainer().getBounds();this.sprite.render(fr.fromObject({x:e.width,y:e.height})),this.currentPath=void 0}setData(e){this.drawing=L(L({},this.drawing),e),this.drawing.strokes&&(this.drawing.strokes=[]),this.sprite.clearPersistCanvas(),this.sprite.clearCanvas(),this.sprite.setPaths([]),this.drawStrokes(e.strokes)}getData(){return this.drawing}updateData(){this.setData(this.getData())}getOperation(){return this.operation}drawStrokes(e){e.forEach(t=>{this.beginStroke(t.brush),t.path.controlPoints.forEach(r=>{this.addPointToCurrentStroke(r,!0)}),this.endStroke()})}},YV=class extends Ms{constructor(e,t,r,i){super(i),this.filterOperation=t,this.type="duotone-filter",t.set({intensity:r.colorIntensity}),t.set({filter:e}),i.pesdk.setAllOperationsToDirty()}getProperties(){return{colorIntensity:this.filterOperation.getOptions().intensity}}setProperties(e){let r=this.filterOperation.getOptions().intensity;e.colorIntensity!==void 0&&(r=Math.min(Math.max(e.colorIntensity,0),1)),this.filterOperation.set({intensity:r})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}},QV=class{constructor(e,t){this.engine=t,this.loaded=!1,this.loading=!1,this.asset=L({},e)}async load(){if(this.loaded)return Promise.resolve();if(this.loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this.loading=!0;const{imageGroups:e}=this.asset,t=[];return["top","left","right","bottom"].forEach(r=>{if(!e[r])return;const i=e[r];["start","mid","end"].forEach(n=>{n in i&&t.push(this.loadPart(r,n))})}),Promise.all(t).then(()=>{this.loaded=!0,this.loading=!1}).catch(()=>{this.loaded=!1,this.loading=!1})}getFrame(){return ge(L({},this.asset),{defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI})}getIdentifier(){return this.asset.identifier}getDefaultName(){return this.asset.name}getThumbnail(){return this.asset.thumbnailURI}getTintable(){return this.asset.tintable||!1}getLayoutMode(){return this.asset.layoutMode}getImageGroups(){return this.asset.imageGroups}async loadPart(e,t){return new Promise((r,i)=>{const{imageGroups:n}=this.asset,o=n[e][t];let s=o;typeof o!="string"&&"image"in o&&(s=o.image);const a=new Image;a.addEventListener("load",()=>{typeof o!="string"?this.asset.imageGroups[e][t].image=a:this.asset.imageGroups[e][t]=a,r(a)}),a.addEventListener("error",()=>{i(new Error(`Failed to load image at ${a.src}`))}),a.crossOrigin=this.engine.configuration.crossOrigin||"anonymus",a.src=this.engine.assetProvider.getAssetSource("frame",s)})}},KV=class extends Ms{constructor(e,t,r){super(r),this.frameOperation=e,this.type="frame",this.setProperties(t),r.pesdk.setAllOperationsToDirty()}setProperties(e){if(this.props=L(L({},this.props),e),typeof e.opacity=="number"&&this.frameOperation.set({alpha:e.opacity}),e.tintColor&&this.frameOperation.set({tintColor:Ps(e.tintColor)}),e.width){const t=this.engine.getOutputContainer().getBounds(),r=Math.min(t.width,t.height),i=e.width/r;this.frameOperation.set({scale:i})}this.frameOperation.setDirty(!0)}getProperties(){return this.props}getOperation(){return this.frameOperation}getTypeIdentifier(){return"frame"}},ZV=class extends Ms{constructor(e,t,r){super(t),this.blurOperation=r,this.type="gaussian-blur",this.setProperties(e)}getProperties(){const e=this.engine.getOutputContainer(),t=e.getBounds(),r=Math.min(t.size.width,t.size.height);return{blurRadius:rt.scalarFromSpaceToSpace(this.blurOperation.getOptions().blurRadius*r,e,this.getContainer())}}setProperties(e){if(e.blurRadius!==void 0){const t=this.engine.pesdk.getOutputDimensions(),r=Math.min(t.x,t.y),i=this.getContainer(),n=this.engine.getOutputContainer(),s=rt.scalarFromSpaceToSpace(e.blurRadius,i,n)/r;this.blurOperation.set({blurRadius:s})}}getOperation(){return this.blurOperation}getTypeIdentifier(){return"blur"}},JV=class extends Bu{constructor(e,t){super(t),this.data=e,this.type="image",this.dispose=()=>{var n;((n=this.data)==null?void 0:n.image)instanceof HTMLCanvasElement&&Nr(this.data.image)};const r=t.configuration.downscaleOptions;if(!r)this.downscaleOptions={maxDimensions:{width:t.maxTextureDimension,height:t.maxTextureDimension}};else{const{maxDimensions:n}=r;this.downscaleOptions={maxMegaPixels:r.maxMegaPixels,maxDimensions:{width:Math.min(t.maxTextureDimension,n?n.width:Number.MAX_VALUE),height:Math.min(t.maxTextureDimension,n?n.height:Number.MAX_VALUE)}}}this.setData(e);const{image:i}=this.data;this.bounds=new uo(G.ZERO,{width:i.width,height:i.height})}setData(e){if(this.data=L(L({},this.data),e),e.image){let{image:t}=e,r;if(t instanceof HTMLImageElement&&(r=this.engine.pesdk.parseExif(t),r)){const n=r.getTags();if(n&&n.Orientation){const o=n.Orientation!==1&&n.Orientation!==2,s=[2,4,5,7].indexOf(n.Orientation)!==-1;if(o||s){if(yn()||Gl()||!CSS.supports("image-orientation","from-image")){const a=this.engine.pesdk.createOperation("exif-orientation",{},!1);a.setTags(n),t=a.applyTo(t)}r.setOrientation(1),n.Orientation=1}}}const i=new J4(t,this.downscaleOptions);i.on("imageDownscaled",({width:n,height:o})=>{this.engine.emit("imageDownscaled",{width:n,height:o})}),i.on("beganImageDownscaling",()=>{this.engine.emit("beganImageDownscaling")}),t=i.downscaleIfNecessary(),this.data.image=t,this.engine.pesdk.setImage(t,r),this.setBoundsFromSize(t.width,t.height)}}getData(){return this.data}setPivot(e,t){throw new Error("This container does not support modifying the pivot")}getOperation(){throw new Error("This container has no associated operation")}},eG=class extends Ms{constructor(e,t,r){super(t),this.props=e,this.blurOperation=r,this.type="linear-blur",this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props=L(L({},this.props),e);const t=this.blurOperation.getOptions(),r=this.engine.getOutputContainer(),i=r.getBounds(),n=this.getContainer(),o=r.getBaseLocalToParentMatrix(),s=rt.getBaseLocalToWorldMatrix(n),a=gt.multiply(gt.getInverted(o),s),l=Math.min(i.size.width,i.size.height);if(e.blurRadius!==void 0){const c=rt.scalarFromSpaceToSpace(e.blurRadius,n,r);t.blurRadius=c/l}if(e.start!==void 0){const c=gt.transformPoint(a,e.start),h=rt.absoluteToRelativePoint(c,r,!1);t.controlPoint1=h}if(e.end!==void 0){const c=gt.transformPoint(a,e.end),h=rt.absoluteToRelativePoint(c,r,!1);t.controlPoint2=h}this.blurOperation.set(t)}updateProperties(){const e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"linear-focus"}},tG=class extends Ms{constructor(e,t,r,i){super(i),this.filter=e,this.filterOperation=t,this.props=r,this.type="lut-filter",t.set({intensity:r.intensity}),t.set({filter:e}),i.pesdk.setAllOperationsToDirty()}getProperties(){return{intensity:this.filterOperation.getOptions().intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}}setProperties(e){const t=this.filterOperation.getOptions(),r=typeof e.intensity=="number"?e.intensity:t.intensity;this.filterOperation.set({intensity:r})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}},rG=class extends Ms{constructor(e,t,r){super(t),this.props=e,this.blurOperation=r,this.type="mirrored-blur",this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props=L(L({},this.props),e);const t=this.blurOperation.getOptions(),r=this.engine.getOutputContainer(),i=r.getBounds(),n=this.getContainer(),o=r.getBaseLocalToParentMatrix(),s=rt.getBaseLocalToWorldMatrix(n),a=gt.multiply(gt.getInverted(o),s),l=Math.min(i.size.width,i.size.height);if(e.blurRadius!==void 0){const c=rt.scalarFromSpaceToSpace(e.blurRadius,n,r);t.blurRadius=c/l}if(e.gradientSize!==void 0){const h=rt.scalarFromSpaceToSpace(e.gradientSize,n,r)/l;t.gradientSize=h}if(e.clearAreaWidth!==void 0){const h=rt.scalarFromSpaceToSpace(e.clearAreaWidth,n,r)/l;t.size=h*.5}if(e.mirrorAxisOrigin!==void 0){const c=gt.transformPoint(a,e.mirrorAxisOrigin),h=rt.absoluteToRelativePoint(c,r,!1);t.start=h}if(e.mirrorAxisDirection!==void 0){const c=gt.transformPoint(a,e.mirrorAxisDirection),h=rt.absoluteToRelativePoint(c,r,!1);t.end=h}this.blurOperation.set(t)}updateProperties(){const e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"mirrored-focus"}},iG=class extends Bu{constructor(e,t,r,i){super(i),this.settings=e,this.operation=t,this.flipOperation=r,this.type="output",this.flipTransform=gt.IDENTITY,this.blockTransformUpdate=!1,this.transformUpdateWhileBlock=!1,this.bounds=new uo({x:0,y:0},this.settings.resolution),this.setData(e)}pauseChildrenUpdates(){this.transformUpdateWhileBlock=!1,this.blockTransformUpdate=!0}resumeChildrenUpdates(){this.blockTransformUpdate=!1,this.transformUpdateWhileBlock&&this.updateChildrenContainers()}setData(e){if(this.settings=L(L({},this.settings),e),e.resolution&&(this.setBoundsFromSize(e.resolution.width,e.resolution.height),this.setTransform(this.transform),this.operation.set({outputResolution:new fr(e.resolution.width,e.resolution.height)})),e.flipHorizontally!==void 0){const t=e.flipHorizontally;this.updateFlipTransform(),this.flipOperation.set({flipHorizontally:t})}if(e.flipVertically!==void 0){const t=e.flipVertically;this.updateFlipTransform(),this.flipOperation.set({flipVertically:t})}this.operation.setDirty(!0),this.flipOperation.setDirty(!0)}getData(){return this.settings}setResolution(e){this.setData({resolution:e})}getResolution(){return this.getData().resolution}setTransform(e){if(this.transform.rotation!==e.rotation||this.transform.position!==e.position||this.transform.scale!==e.scale){this.transform=e;const t=this.flipTransform;this.flipTransform=gt.IDENTITY;const r=this.engine.getRootContainers()[0],i=rt.pointFromSpaceToSpace({x:0,y:0},r,this),n=-e.rotation,o=fr.fromObject(i).clone().subtract(fr.fromObject(this.getBounds().origin));this.operation.set({pivot:new fr(0,0),position:o,scale:new fr(1/e.scale.x,1/e.scale.y),rotation:n}),this.flipTransform=t,this.operation.setDirty(!0),this.updateChildrenContainers()}}rotate(e,t){const r=this.getPivot(),i=this.getBounds(),n={x:i.midX,y:i.midY},o=rt.getPointInWorldSpace(n,this);this.setPivot(.5,.5),this.setPosition(o),this.setRotation(e),this.setResolution(t);const s={x:-t.width*(.5-r.x),y:-t.height*(.5-r.y)},a=rt.getPointInWorldSpace(s,this);this.setPivot(r),this.setPosition(a),this.updateChildrenContainers()}setPivot(e,t){super.setPivotInternal(e,t),this.setTransform(this.transform)}getTransform(){return this.transform}getBaseLocalToParentMatrix(){return rt.rectTransformToAffineTransform(this.getTransform())}getLocalToParentMatrix(){const e=rt.rectTransformToAffineTransform(this.getTransform());return gt.multiply(e,this.flipTransform)}getFlipTransformMatrix(){return this.flipTransform}isValid(){return!0}getOperation(){return this.operation}updateFlipTransform(){const{flipHorizontally:e,flipVertically:t}=this.settings;if(!e&&!t)this.flipTransform=gt.IDENTITY;else{const r=this.getPivot(),i=this.getBounds(),n=e?-1:1,o=e?-2*(r.x-.5)*i.width:0,s=t?-1:1,a=t?-2*(r.y-.5)*i.height:0;this.flipTransform=new gt(n,0,0,s,o,a)}}updateChildrenContainers(){if(this.blockTransformUpdate){this.transformUpdateWhileBlock=!0;return}this.engine.rootOperations.forEach(e=>{bF(e)?(e.updateTransform(),"updateData"in e&&e.updateData()):"updateProperties"in e&&e.updateProperties()})}},xF=class extends Ms{constructor(e,t,r){super(r),this.overlayOperation=e,this.type="overlay";const i=t.blendMode||r.mapBlendMode(e.getBlendMode());e.set({blendMode:r.reverseMapBlendMode(i)}),e.set({image:t.image}),r.pesdk.setAllOperationsToDirty()}getProperties(){const e=this.overlayOperation.getOptions();return{image:e.image,blendMode:this.engine.mapBlendMode(e.blendMode),opacity:e.alpha}}setProperties(e){const t=this.overlayOperation.getOptions();typeof e.opacity=="number"&&(t.alpha=e.opacity),e.blendMode!==void 0&&(t.blendMode=this.engine.reverseMapBlendMode(e.blendMode)),this.overlayOperation.set(t),this.overlayOperation.setDirty(!0)}getOperation(){return this.overlayOperation}getTypeIdentifier(){return"overlay"}setFlipHorizontally(e){this.overlayOperation.setFlipHorizontally(e)}setFlipVertically(e){this.overlayOperation.setFlipVertically(e)}getFlipHorizontally(){return this.overlayOperation.getFlipHorizontally()}getFlipVertically(){return this.overlayOperation.getFlipVertically()}},nG=class extends Ms{constructor(e,t,r){super(t),this.props=e,this.blurOperation=r,this.type="radial-blur",this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props=L(L({},this.props),e);const t=this.blurOperation.getOptions(),r=this.engine.getOutputContainer(),i=r.getBounds(),n=this.getContainer(),o=r.getBaseLocalToParentMatrix(),s=rt.getBaseLocalToWorldMatrix(n),a=gt.multiply(gt.getInverted(o),s),l=Math.min(i.size.width,i.size.height);if(e.blurRadius!==void 0){const c=rt.scalarFromSpaceToSpace(e.blurRadius,n,r);t.blurRadius=c/l}if(e.center!==void 0){const c=gt.transformPoint(a,e.center),h=rt.absoluteToRelativePoint(c,r,!1);t.position=h}if(e.radius!==void 0){const h=rt.scalarFromSpaceToSpace(e.radius,n,r)/l;t.radius=h}if(e.gradientSize!==void 0){const h=rt.scalarFromSpaceToSpace(e.gradientSize,n,r)/l;t.gradientRadius=h}this.blurOperation.set(t)}updateProperties(){const e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"radial-focus"}},wF=class extends Bu{constructor(e,t){super(t),this.data=e,this.type="sticker";let r=e.image;const i=this.engine.pesdk.parseExif(e.image);if(i){const o=i.getTags();if(o&&o.Orientation){const s=o.Orientation!==1&&o.Orientation!==2,a=[2,4,5,7].indexOf(o.Orientation)!==-1;if(s||a){const l=this.engine.pesdk.createOperation("exif-orientation",{},!1);l.setTags(o),r=l.applyTo(e.image),i.setOrientation(1),o.Orientation=1}}}r=new J4(r,{maxMegaPixels:{desktop:10,mobile:5}}).downscaleImageIfNecessary(),this.operation=t.createSpriteOperation(),this.sprite=this.operation.createSticker({identifier:"",image:r,position:new fr(0,0),dimensions:new fr(1,1),rotation:0,smoothDownscaling:!1}),this.operation.addSprite(this.sprite),this.bounds=new uo({x:0,y:0},{width:r.width,height:r.height}),this.setTransform(Xr.IDENTITY),this.sprite.setPivot(new fr(0,0)),this.operation.setDirty(!0),this.setData(e)}setData(e){this.data=L(L({},this.data),e),e.id&&(this.id=e.id),Os(e.opacity)&&e.opacity>=0&&this.sprite.setAlpha(e.opacity),e.tintColor&&this.sprite.setTintColor(Ps(e.tintColor)),e.tintMode&&this.sprite.setTintMode(e.tintMode),this.operation.setDirty(!0)}getData(){return this.data}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);const t=this.engine.getOutputContainer(),r=this.getParent(),i={width:this.bounds.width*e.scale.x,height:this.bounds.height*e.scale.y},n=rt.sizeFromSpaceToSpace(i,r,t);this.sprite.setDimensions(fr.fromSize(n));const o=rt.pointFromSpaceToSpace(e.position,r,t,!0),s=rt.absoluteToRelativePoint(o,t,!1);this.sprite.setPosition(new fr(s.x,s.y));const a=rt.getRotationBetweenCoordinateSpaces(r,t),l=e.rotation+a;this.sprite.setRotation(l),this.operation.setDirty(!0)}setPivot(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)}getOperation(){return this.operation}setFlipHorizontally(e){this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}};function oG(e,t){if(t){const r=1/t.unitsPerEm*e,i=t.ascender*r,n=t.descender*r;return i+Math.abs(n)}return e*1.1}var SF=class{constructor(e){this.context=e,this.sourceLines=[],this.maxWidth=100}static buildWords(e){const t=[];let r="";const i=e.length;for(let n=0;n<i;n+=1){const o=e[n];r+=o,(o===" "||o==="-"||n===i-1)&&(t.push(r),r="")}return t}getLines(){let e=[],t=[];const r=this.sourceLines.length;for(let i=0;i<r;i+=1){const n=this.sourceLines[i],o=SF.buildWords(n),s=o.length;for(let a=0;a<s;a+=1){const l=o[a],c=t.concat(l).join("").replace(/\s+$/i,"");if(this.getWidth(c)>this.maxWidth){t.length>0&&(e.push(t.join("")),t=[l]);const f=l.replace(/\s+$/i,"");if(this.getWidth(f)>this.maxWidth){const d=this.splitWord(l);e=e.concat(d.lines),d.rest&&(t=[d.rest])}}else t.push(l)}e.push(t.join("")),t=[]}return e}splitWord(e){const t={lines:[],rest:null},r=e.length;let i=[];for(let n=0;n<r;n+=1){const o=e[n];this.getWidth(i.concat(o).join(""))>this.maxWidth?(i.length>0&&t.lines.push(i.join("")),i=[o]):i.push(o),n===r-1&&i.length>0&&(t.rest=i.join(""))}return t}getWidth(e){return this.context.measureText(e).width}setText(e){this.sourceLines=e.split(`
`)}setMaxWidth(e){this.maxWidth=e}};function Dv(e,t,r,i,n,o,s){e.font=`${r.fontStyle||"normal"} ${r.fontWeight||"normal"} ${i}px "${r.fontFamily}"`;const a=new SF(e);a.setText(t),a.setMaxWidth(o);const l=a.getLines().map(d=>d.replace(/\s+$/i,"")),c=oG(i,s),h=c*n,f=c/5;return{width:o+f*2,height:l.length*h+f*2}}var Lu=class extends Bu{constructor(e,t){if(super(t),this.text=e,this.type="text",!Lu.measureContext){const a=document.createElement("canvas");Lu.measureContext=a.getContext("2d")}this.operation=t.createSpriteOperation();const r=this.engine.getOutputContainer(),i=this.getParent(),n=r.getBounds();this.sprite=this.operation.createText({text:e.text,position:new fr(0,0),rotation:0,fontSize:rt.scalarFromSpaceToSpace(e.fontSize/n.height,i,r),lineHeight:e.lineHeight,fontIdentifier:e.fontIdentifier,alignment:e.alignment,color:Ps(e.textColor),backgroundColor:Ps(e.backgroundColor),maxWidth:rt.scalarFromSpaceToSpace(e.width/n.width,i,r)});const o=t.assetProvider.getFontManager().getFontWithId(e.fontIdentifier);this.sprite.setFontFamily(o.fontFamily),this.sprite.setFontWeight(o.fontWeight||"normal"),this.sprite.setFontStyle(o.fontStyle||"normal"),this.sprite.setFontIdentifier(o.identifier),this.sprite.setTextMetrics(o.textMetrics),this.sprite.setPivot(new fr(0,0)),this.operation.addSprite(this.sprite);const s=Dv(Lu.measureContext,e.text,o,e.fontSize,e.lineHeight,e.width,o.textMetrics);this.bounds=new uo(0,0,s.width,s.height),this.setTransform(Xr.IDENTITY),this.operation.setDirty(!0)}setData(e){this.text=L(L({},this.text),e);const t=this.engine.assetProvider.getFontManager().getFontWithId(e.fontIdentifier||this.text.fontIdentifier);if(e.fontIdentifier&&(this.sprite.setFontFamily(t.fontFamily),this.sprite.setFontWeight(t.fontWeight||"normal"),this.sprite.setFontStyle(t.fontStyle||"normal"),this.sprite.setFontIdentifier(t.identifier),this.sprite.setTextMetrics(t.textMetrics)),e.id&&(this.id=e.id),e.text&&this.sprite.setText(e.text),e.fontSize){const i=this.engine.getOutputContainer(),n=this.getParent(),o=rt.scalarFromSpaceToSpace(e.fontSize,n,i),s=i.getBounds();this.sprite.setFontSize(o/s.height)}if(e.alignment&&this.sprite.setAlignment(e.alignment),e.lineHeight&&this.sprite.setLineHeight(e.lineHeight),e.textColor&&this.sprite.setColor(Ps(e.textColor)),e.backgroundColor&&this.sprite.setBackgroundColor(Ps(e.backgroundColor)),e.width){const i=this.engine.getOutputContainer(),n=this.getParent(),o=rt.scalarFromSpaceToSpace(e.width,n,i),s=i.getBounds();this.sprite.setMaxWidth(o/s.width)}const r=Dv(Lu.measureContext,this.text.text,t,this.text.fontSize,this.text.lineHeight,this.text.width,t.textMetrics);this.setBoundsFromSize(r.width,r.height),this.operation.setDirty(!0)}getData(){return this.text}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);const t=this.engine.getOutputContainer(),r=this.getParent(),i=rt.pointFromSpaceToSpace(e.position,r,t,!0),n=rt.absoluteToRelativePoint(i,t,!1);this.sprite.setPosition(new fr(n.x,n.y));const o=rt.getRotationBetweenCoordinateSpaces(r,t);this.sprite.setRotation(e.rotation+o),this.operation.setDirty(!0)}setPivot(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)}getOperation(){return this.operation}setFlipHorizontally(e){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:e})),this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setRotation(this.getFlippedRotation({flipVertically:e})),this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}getFlippedRotation({flipVertically:e,flipHorizontally:t}){const r=e||this.getFlipVertically(),i=t||this.getFlipHorizontally();let n=this.getRotation();return(r||i)&&(n=Ev(n)),n}},Rw=1e3,Iv=class extends Bu{constructor(e,t,r){super(r),this.textDesign=e,this.layout=t,this.type="text-design",this.currentLayoutSize=void 0,this.layoutID=t.identifier,this.operation=r.createSpriteOperation();const i=this.engine.getOutputContainer(),n=this.getParent(),o=i.getBounds(),s=Math.min(o.width,o.height);t.seed(e.seed),this.bounds=this.calculateBounds(this.textDesign,this.layout);const a=e.width;this.sprite=this.operation.createTextDesign({text:e.text,layout:t,inverted:e.inverted,color:Ps(e.color),width:rt.scalarFromSpaceToSpace(e.width/s,n,i),padding:e.padding/a,seed:e.seed}),this.updatePivot(),this.operation.addSprite(this.sprite),this.setTransform(Xr.IDENTITY),this.operation.setDirty(!0)}static stringify(e){return JSON.stringify(e,Iv.serializer())}static serializer(){const e=[],t=[],r=(i,n)=>e[0]===n?"[Circular ~]":`[Circular ~.${t.slice(0,e.indexOf(n)).join(".")}]`;return function(n,o){const s=this;if(e.length>0){const a=e.indexOf(s);~a?(e.splice(a+1),t.splice(a,1/0,n)):(e.push(s),t.push(n)),~e.indexOf(o)&&(o=r.call(s,n,o))}else e.push(o);return o}}calculateBounds(e,t,r=!0){const i=e.inverted&&r?Math.max(0,2*e.padding):0,n=e.width/Rw;if(this.currentLayoutSize===void 0){t.seed(e.seed);const o=t.generateLayoutData(e.text,Rw);this.currentLayoutData=o,this.currentLayoutSize=o.getSize()}return new uo(0,0,this.currentLayoutSize.width*n+i,this.currentLayoutSize.height*n+i)}findNextUniqueSeed(e,t,r){let i=r;const n=this.currentLayoutData?Iv.stringify(this.currentLayoutData.getRows()):"";let o;for(let s=0;s<20&&(t.seed(i),o=t.generateLayoutData(e.text,Rw),n===Iv.stringify(o.getRows()));s+=1)i+=1;return t.seed(i),this.currentLayoutData=o,i}setData(e){if(this.textDesign=L(L({},this.textDesign),e),e.id&&(this.id=e.id),e.padding!==void 0){const t=this.textDesign.width;this.sprite.setPadding(e.padding/t)}else e.width&&(this.textDesign.padding=this.sprite.getPadding()*this.textDesign.width);if(e.seed!==void 0&&(e.seed<0&&(e.seed=this.findNextUniqueSeed(this.textDesign,this.layout,Date.now()),this.textDesign.seed=e.seed),this.currentLayoutSize=void 0,this.layout.seed(e.seed),this.sprite.setSeed(e.seed),this.sprite.setLayout(this.layout)),e.color&&this.sprite.setColor(Ps(e.color)),e.inverted!==void 0&&this.sprite.setInverted(e.inverted),e.text&&(this.currentLayoutSize=void 0,this.sprite.setText(e.text)),e.width){const t=this.engine.getOutputContainer(),r=this.getParent(),i=t.getBounds(),n=Math.min(i.width,i.height),o=rt.scalarFromSpaceToSpace(e.width/n,r,t);this.sprite.setWidth(o)}if(e.padding!==void 0||e.seed!==void 0||e.inverted!==void 0||e.text||e.width){const t=this.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(t.width,t.height),this.updatePivot()}this.operation.setDirty(!0)}getData(){return this.textDesign}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);const t=this.engine.getOutputContainer(),r=this.getParent();if(e.scale.x!==1||e.scale.y!==1)throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.");const i=rt.pointFromSpaceToSpace(e.position,r,t,!0),n=rt.absoluteToRelativePoint(i,t,!1);this.sprite.setPosition(new fr(n.x,n.y));const o=rt.getRotationBetweenCoordinateSpaces(r,t);this.sprite.setRotation(e.rotation+o),this.operation.setDirty(!0)}setPivot(e,t){typeof e=="number"?super.setPivot(e,t):super.setPivot(e),this.updatePivot()}getOperation(){return this.operation}getLayoutID(){return this.layoutID}setFlipHorizontally(e){this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}updatePivot(){const e=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0,t=new G(this.bounds.width-2*e,this.bounds.height-2*e),r=this.getPivot(),i=new G(r.x*this.bounds.width,r.y*this.bounds.height),n=new G(e,e),s=i.subtract(n).divide(t);this.sprite.setPivot(new fr(s.x,s.y))}},{BLEND_MODES:Yr}=et.Operations.OverlayOperation,Rv="imgly_font_open_sans_bold",CF=class extends GV{constructor(e){super(e),this.previews=Array(),this.rootOperationStack=[],this.deferredRenderQueue=[],this.operationStackOffset=1,this.enforceOperationOrder=()=>{this.refreshFlipIndex(),this.refreshFrameIndex()},this.isSpriteTop=n=>{const o=this.rootOperationStack.findIndex(({id:a})=>n===a);let s=1;return this.rootOperationStack.find(a=>a.type==="frame")&&(s+=1),o+s===this.rootOperationStack.length},this.setWatermarkOpacity=n=>{const s=this.sdk.getOperationsStack().getByIdentifier("watermark");s&&s.set({alpha:n})};var t,r;this.assetProvider=e.assetProvider||new oF;let i;if(((t=e==null?void 0:e.watermark)==null?void 0:t.watermarkURI)&&typeof e.watermark.watermarkURI=="string"&&e.watermark.watermarkURI.slice(0,5)==="data:"?i=e.watermark.watermarkURI:((r=e==null?void 0:e.watermark)==null?void 0:r.watermarkURI)&&typeof e.watermark.watermarkURI=="string"&&e.watermark.watermarkURI.trim()&&(i=Au(e.watermark.watermarkURI)?e.watermark.watermarkURI:this.assetProvider.getPath(e.watermark.watermarkURI)),this.wrapper=new Xl({license:e.license,crossOrigin:e.crossOrigin,assets:{resolver:(n,o)=>this.resolveAssetForSDK(n,o)},editor:{preferredRenderer:e.preferredRenderer,pixelRatio:1,clearColor:it(e.backgroundColor)},watermark:ge(L({},it(e.watermark)),{watermarkURI:i})}),this.editor=this.wrapper.getEditor(),this.sdk=this.editor.getSDK(),this.sdk.setRenderMode("adapter"),this.tempCanvas=document.createElement("canvas"),this.sdk.setCanvas(this.tempCanvas),e.preferredRenderer==="webgl"){const n=document.createElement("canvas"),o=n.getContext("webgl")||n.getContext("experimental-webgl");this.maxTextureDimension=o.getParameter(o.MAX_TEXTURE_SIZE),Nr(n)}else this.maxTextureDimension=1/0}get configuration(){return this.config}get pesdk(){return this.sdk}get rootOperations(){return this.rootOperationStack}dispose(){Nr(this.tempCanvas),this.rootContainer.dispose(),this.pesdk.dispose(),this.wrapper.dispose()}render(e){return new Promise(t=>{const r=()=>new Promise(i=>{const{canvas:n}=e,o=e.getTransform(),s=this.outputContainer.getPivot(),a=e.getCanvasBounds(),l=e.quality,{tempCanvas:c}=this;this.sdk.setTextureQuality(l);const h=this.sdk.getOutputDimensions();return c.width=h.x,c.height=h.y,this.sdk.getRenderer().resizeTo(new fr(c.width,c.height)),this.sdk.render(!0).then(()=>{const f=n.getContext("2d");f.clearRect(0,0,n.width,n.height),f.save(),f.translate(-a.minX,-a.minY),f.translate(o.position.x,o.position.y),f.rotate(o.rotation),f.scale(o.scale.x,o.scale.y),f.translate(-s.x*c.width,-s.y*c.height),f.scale(1/e.quality,1/e.quality),f.drawImage(c,0,0),f.restore(),t(),this.deferredRenderQueue.shift(),this.deferredRenderQueue.length?(this.sdk.setAllOperationsToDirty(),Promise.resolve(this.deferredRenderQueue[0]().then(i))):i()})});this.deferredRenderQueue.push(r),this.deferredRenderQueue.length===1&&r()})}createPreview(e){const t=new BV(e,this);return this.previews.push(t),t}async export(e="image",t="image/png",r=1,i=!0){return new Promise(n=>{const o=()=>new Promise(s=>this.sdk.export(this.mapToRenderType(e),this.mapToImageFormat(t),r,i).then(a=>{n(a),this.deferredRenderQueue.shift(),this.deferredRenderQueue.length?Promise.resolve(this.deferredRenderQueue[0]().then(s)):s()}));this.deferredRenderQueue.push(o),this.deferredRenderQueue.length===1&&o()})}getRootContainers(){return[this.rootContainer]}getOutputContainer(){return this.outputContainer}findContainerByID(e){return e===this.rootContainer.getID()?this.rootContainer:this.rootOperationStack.find(t=>t.getID()===e)}findEffectByID(e){return this.rootOperationStack.find(t=>t.getID()===e)}addImage(e,t,r){if(this.rootContainer)throw new Error("A background image already exists - did you mean to use addSticker?");const i=new JV(e,this);if(this.rootContainer=i,!this.outputContainer){const{width:n,height:o}=i.getBounds(),s={resolution:{width:n,height:o},flipHorizontally:!1,flipVertically:!1},a=this.sdk.createOperation("output",{},!1),l=this.sdk.createOperation("flip",{},!1);this.insertIntoOperationsStack(a,this.operationStackOffset-1),this.insertIntoOperationsStack(l,this.operationStackOffset),this.outputContainer=new iG(s,a,l,this)}return i}addSticker(e,t,r){if(!t)throw new Error("This engine does not support adding stickers as root elements.");this.ensureContainerIsRoot(t);const i=new wF(e,this);return this.addToStackAtIndex(i,r),i}addStickerFromAssets(e,t,r){if(!t)throw new Error("This engine does not support adding stickers as root elements.");return this.ensureContainerIsRoot(t),new Promise((i,n)=>{const o=new Image;o.onload=()=>{const s={image:o,opacity:1},a=new wF(s,this);this.addToStackAtIndex(a,r),i(a)},o.onerror=s=>{n(s)},o.crossOrigin=this.config.crossOrigin||null,o.src=this.assetProvider.getAssetSource("sticker",e)})}addText(e,t,r){if(!t)throw new Error("This engine does not support adding text as root elements.");if(!this.assetProvider.getFontManager().isFontLoaded(e.fontIdentifier||Rv))throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!");this.ensureContainerIsRoot(t);const n=L({text:"",fontIdentifier:Rv,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),o=new Lu(n,this);return this.addToStackAtIndex(o,r),o}addTextWithFontLoading(e,t,r){if(!t)throw new Error("This engine does not support adding text as root elements.");const i=this.assetProvider.getFontManager(),n=e.fontIdentifier||Rv;return new Promise((o,s)=>{i.loadFontWithIdentifier(n).then(()=>{this.ensureContainerIsRoot(t);const a=L({text:"",fontIdentifier:Rv,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),l=new Lu(a,this);this.addToStackAtIndex(l,r),o(l)}).catch(s)})}async addTextDesignAsync(e="imgly_text_design_blocks",t,r,i){if(!r)throw new Error("This engine does not support adding TextDesign as a root element.");const n=L({seed:Date.now(),padding:0,text:"",color:[0,0,0],inverted:!1,width:100},t),o=this.wrapper.getTextDesignLayoutByID(e);if(!o)throw new Error(`The layout could not be loaded for the given id: ${e}`);const s=o.getImagePaths().map(d=>{const p=d.split("/").pop()||"";return{path:d,fullPath:this.assetProvider.getAssetSource("textdesign",p)}}),a=this.wrapper.getTextDesignAssetManager(),c=this.wrapper.getTextDesignFontManager().getVariationsByIdentifier();a.setFonts(c),await a.loadImages(s),o.onImagesLoaded();const h=Object.keys(c);return this.assetProvider.getFontManager().loadFontsWithIdentifiers(h).then(()=>{this.ensureContainerIsRoot(r);const d=new Iv(n,o,this);return this.addToStackAtIndex(d,i),Promise.resolve(d)})}addDrawing(e,t,r){if(!t)throw new Error("This engine does not support DrawingContainers as root elements.");this.ensureContainerIsRoot(t);const i=new XV(e,this);return this.addToStackAtIndex(i,r),i}addGaussianBlur(e,t,r){this.ensureContainerIsRoot(t);const i=new ZV(e,this,this.sdk.createOperation("blur",{},!1));return this.addToStackAtIndex(i,r),i}addRadialBlur(e,t,r){this.ensureContainerIsRoot(t);const i=new nG(e,this,this.sdk.createOperation("radial-focus",{},!1));return this.addToStackAtIndex(i,r),i}addMirroredBlur(e,t,r){this.ensureContainerIsRoot(t);const i=new rG(e,this,this.sdk.createOperation("mirrored-focus",{},!1));return this.addToStackAtIndex(i,r),i}addLinearBlur(e,t,r){this.ensureContainerIsRoot(t);const i=new eG(e,this,this.sdk.createOperation("linear-focus",{},!1));return this.addToStackAtIndex(i,r),i}addDuoToneFilter(e,t,r){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")}addDuoToneFilterFromAssets(e,t,r){this.ensureContainerIsRoot(t);const n=this.sdk.getOperationsStack().getByIdentifier("filter");n&&n.getIdentifier()!==e&&this.sdk.removeOperation(n);const o=n||this.sdk.createOperation("filter",{identifier:e},!1);return new Promise((s,a)=>{try{const l=this.assetProvider.getDuotoneFilterAsset(e),c={colorIntensity:l.defaultIntensity||0},h=new et.Operations.FilterOperation.Filters.DuoToneFilter({intensity:c.colorIntensity,lightColor:et.Color.fromHex(l.lightColor),darkColor:et.Color.fromHex(l.darkColor)}),f=new YV(h,o,c,this);this.addToStackAtIndex(f,r),s(f)}catch(l){l&&a(l)}})}addLUTFilter(e,t,r){throw new Error("Not supported! Use addLUTFilterFromAssets instead")}addLUTFilterFromAssets(e,t,r){this.ensureContainerIsRoot(t);const n=this.sdk.getOperationsStack().getByIdentifier("filter");n&&n.getIdentifier()!==e&&this.sdk.removeOperation(n);const o=n||this.sdk.createOperation("filter",{identifier:e},!1);return this.getLutFilterImage(e).then(s=>{const a=this.assetProvider.getLUTFilterAsset(e),l={horizontalTileCount:a.horizontalTileCount||5,verticalTileCount:a.verticalTileCount||5,intensity:a.defaultIntensity||1},c=new et.Operations.FilterOperation.Filters.ThreeDLUTFilter(ge(L({},l),{image:s})),h=ge(L({},l),{lutImage:new Image}),f=new tG(c,o,h,this);return this.addToStackAtIndex(f,r),f})}getLutFilterImage(e){return new Promise((t,r)=>{rF({src:this.assetProvider.getAssetSource("filter",e),crossOrigin:this.config.crossOrigin||null,key:"filter",resolve:t,reject:r})})}addAdjustments(e,t,r){this.ensureContainerIsRoot(t);const i=new qV(e,this,this.sdk.createOperation("adjustments",{},!1));return this.addToStackAtIndex(i,r),i}addOverlay(e,t,r){this.ensureContainerIsRoot(t);const i=new xF(this.sdk.createOperation("overlay",{},!1),e,this);return this.addToStackAtIndex(i,r),i}addOverlayFromAssets(e,t,r){return this.ensureContainerIsRoot(t),new Promise((i,n)=>{rF({src:this.assetProvider.getAssetSource("overlay",e),crossOrigin:this.config.crossOrigin||null,key:"overlay",resolve:o=>{const s=this.sdk.getOperationsStack(),a=s.getByIdentifier("overlay");a&&a.getIdentifier()!==e&&s.remove(a);const l=a||this.sdk.createOperation("overlay",{},!1),c={image:o,opacity:1,blendMode:"normal"},h=new xF(l,c,this);this.addToStackAtIndex(h,r),i(h)},reject:n})})}addFrame(e,t,r){throw new Error("Not supported!")}async addFrameFromAssets(e,t,r){this.ensureContainerIsRoot(t);const i=this.assetProvider.getFrameAsset(e);if(!i)throw new Error(`The requested asset does not exist! ${e}`);const n=new QV(i,this);await n.load();const o=this.getOutputContainer().getBounds(),s=Math.min(o.width,o.height),a=this.sdk.createOperation("frame",{},!1);a.setFrame(n.getFrame());const l={opacity:1,tintColor:[1,1,1],tintable:!1,width:Math.max(1,.1*s),imageGroups:n.getFrame().imageGroups},c=new KV(a,l,this);return this.addToStackAtIndex(c,r),Promise.resolve(c)}removeEffect(e){if(!e.isValid())return;const r=e.getOperation();this.sdk.removeOperation(r),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}removeContainer(e){if(!e.isValid()||e.type==="output")return;const r=e.getOperation();this.sdk.removeOperation(r),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}refreshOutputIndex(){const e=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(e,this.operationStackOffset-1)}refreshFlipIndex(){const e=this.sdk.getOperationsStack().getIndexByIdentifier("flip"),t=this.sdk.getOperationsStack().getStack().length-1;e!==t&&this.moveInOperationsStack(e,t)}refreshFrameIndex(){const e=this.sdk.getOperationsStack().getIndexByIdentifier("frame"),t=this.sdk.getOperationsStack().getStack().length-1;e!==-1&&e!==t&&this.moveInOperationsStack(e,t)}mapToRenderType(e){switch(e){case"image":return et.RenderType.IMAGE;case"data-url":return et.RenderType.DATAURL;case"blob":return et.RenderType.BLOB;case"ms-blob":return et.RenderType.MSBLOB;default:return et.RenderType.IMAGE}}mapToImageFormat(e){switch(e){case"image/png":return et.ImageFormat.PNG;case"image/jpeg":return et.ImageFormat.JPEG;default:return null}}mapBlendMode(e){switch(e){case Yr.NORMAL:return"normal";case Yr.OVERLAY:return"overlay";case Yr.HARD_LIGHT:return"hardLight";case Yr.SOFT_LIGHT:return"softLight";case Yr.MULTIPLY:return"multiply";case Yr.DARKEN:return"darken";case Yr.LIGHTEN:return"lighten";case Yr.SCREEN:return"screen";case Yr.COLOR_BURN:return"colorBurn";default:return"normal"}}reverseMapBlendMode(e){switch(e){case"normal":return Yr.NORMAL;case"overlay":return Yr.OVERLAY;case"hardLight":return Yr.HARD_LIGHT;case"softLight":return Yr.SOFT_LIGHT;case"multiply":return Yr.MULTIPLY;case"darken":return Yr.DARKEN;case"lighten":return Yr.LIGHTEN;case"screen":return Yr.SCREEN;case"colorBurn":return Yr.COLOR_BURN;default:return Yr.NORMAL}}createSpriteOperation(){return this.sdk.createOperation("sprite",{},!1)}moveIndex(e,t){const r=this.getSiblingIndex(e);if(r===-1)throw new Error("The item to be moved is not part of any stack.");this.moveInStack(this.rootOperationStack,r,t);const i=this.operationStackOffset;this.moveInOperationsStack(r+i,t+i),this.enforceOperationOrder()}ensureContainerIsRoot(e){if(e.getID()!==this.rootContainer.getID())throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")}addToStackAtIndex(e,t){if(t&&t<0)throw new Error(`The given index may not be negative: ${t}`);t===void 0?this.rootOperationStack.push(e):this.rootOperationStack.splice(t,0,e);const r=this.rootOperationStack.length-1;let i=t!==void 0?t:r;i+=this.operationStackOffset,LV(e)?this.insertIntoOperationsStack(e.getOperation(),i):this.insertIntoOperationsStack(e.getOperation(),i),this.sdk.setAllOperationsToDirty()}insertIntoOperationsStack(e,t){const r=this.sdk.getOperationsStack().getStack(),i=r.length,n=Math.max(Math.min(t,i),0);for(let o=i-1;o>=n;o-=1){const s=r[o];r[o+1]=s}r[n]=e,this.sdk.setAllOperationsToDirty(),this.enforceOperationOrder()}moveInStack(e,t,r){const i=e.length,n=Math.max(Math.min(t,i-1),0),o=Math.max(Math.min(r,i-1),0);if(n===o)return;const s=e[n];if(n<o)for(let a=n+1;a<=o;a+=1)e[a-1]=e[a];else for(let a=n-1;a>=o;a-=1)e[a+1]=e[a];e[o]=s}moveInOperationsStack(e,t){const r=this.sdk.getOperationsStack().getStack(),i=r.length,n=Math.min(Math.max(0,e),i-1),o=Math.min(Math.max(0,t),i-1);if(n===o)return;const s=r[n];if(n<o)for(let a=n+1;a<=o;a+=1)r[a-1]=r[a];else for(let a=n-1;a>=o;a-=1)r[a+1]=r[a];r[o]=s,this.sdk.getOperationsStack().setAllToDirty()}getSiblingIndex(e){return e.getIndexInParent()}resolveAssetForSDK(e,t){switch(t=t,e){case"filter":return this.assetProvider.getAssetSource("filter",t.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",t.identifier);case"font":return this.assetProvider.getAssetSource("font",t.identifier);default:return""}}},sG=class{constructor(e){this.isEmpty=!1,this.isValid=!1,this.isWhiteLabel=()=>this.isValid&&this.licenseChecker.isWhiteLabel(),this.areCustomAssetsAllowed=()=>this.isEmpty||!this.isValid||this.licenseChecker.areCustomAssetsAllowed(),e&&e.length!==0?(this.licenseChecker=new et.LicenseChecker(e),this.isValid=this.licenseChecker.validate()):e===""&&(this.isEmpty=!0)}isToolAllowed(e){return this.licenseChecker&&this.isValid&&e!=="customTool"?this.licenseChecker.isToolAllowed(e):!0}};/*
* Based on https://github.com/exif-js/exif-js by Jacob Seidelin
* Licensed under MIT
* @license
*//*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 *//*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 *//*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 *//*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *//*!
    StackBlur - a fast almost Gaussian Blur For Canvas

    Version:  0.5
    Author:   Mario Klingemann
    Contact:  mario@quasimondo.com
    Website:  http://www.quasimondo.com/StackBlurForCanvas
    Twitter:  @quasimondo

    In case you find this class useful - especially in commercial projects -
    I am not totally unhappy for a small donation to my PayPal account
    mario@quasimondo.de

    Or support me on flattr:
    https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

    Copyright (c) 2010 Mario Klingemann

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.
    @license
    *//*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var kF={exports:{}};(function(e,t){(function(r){e.exports=r(null)})(function r(i){var n=/^\0+/g,o=/[\0\r\f]/g,s=/: */g,a=/zoo|gra/,l=/([,: ])(transform)/g,c=/,+\s*(?![^(]*[)])/g,h=/ +\s*(?![^(]*[)])/g,f=/ *[\0] */g,d=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,v=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,g=/\W+/g,m=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,_=/:(read-only)/g,b=/\s+(?=[{\];=:>])/g,w=/([[}=:>])\s+/g,S=/(\{[^{]+?);(?=\})/g,C=/\s{2,}/g,D=/([^\(])(:+) */g,E=/[svh]\w+-[tblr]{2}/,I=/\(\s*(.*)\s*\)/g,M=/([\s\S]*?);/g,k=/-self|flex-/g,R=/[^]*?(:[rp][el]a[\w-]+)[^]*/,$=/stretch|:\s*\w+\-(?:conte|avail)/,H=/([^-])(image-set\()/,j="-webkit-",V="-moz-",J="-ms-",ae=59,U=125,N=123,B=40,W=41,q=91,xe=93,Te=10,Se=13,fe=9,te=64,X=32,le=38,de=45,Fe=95,Ee=42,ye=44,he=58,De=39,Ze=34,dt=47,Nt=62,gr=43,Xt=126,ft=0,Fr=12,ri=11,Cr=107,Si=109,Ge=115,be=112,Me=111,je=105,Ie=99,Oe=100,qe=112,Xe=1,Je=1,yt=0,Mt=1,Bt=1,Wr=1,Li=0,Ci=0,Ui=0,Co=[],Oc=[],fn=0,Bh=null,S0=-2,C0=-1,k0=0,T0=1,E0=2,D0=3,cm=0,xl=1,Mc="",ko="",fi="";function Pc(We,ze,Be,Z,we){for(var mt,ee,St=0,_t=0,kr=0,Dt=0,ii=0,lr=0,At=0,Ki=0,pn=0,Uh=0,mn=0,ra=0,I0=0,ls=0,jt=0,ro=0,Nh=0,um=0,cr=0,Ac=Be.length,hm=Ac-1,Ni="",pt="",vr="",Ur="",R0="",WT="";jt<Ac;){if(At=Be.charCodeAt(jt),jt===hm&&_t+Dt+kr+St!==0&&(_t!==0&&(At=_t===dt?Te:dt),Dt=kr=St=0,Ac++,hm++),_t+Dt+kr+St===0){if(jt===hm&&(ro>0&&(pt=pt.replace(o,"")),pt.trim().length>0)){switch(At){case X:case fe:case ae:case Se:case Te:break;default:pt+=Be.charAt(jt)}At=ae}if(Nh===1)switch(At){case N:case U:case ae:case Ze:case De:case B:case W:case ye:Nh=0;case fe:case Se:case Te:case X:break;default:for(Nh=0,cr=jt,ii=At,jt--,At=ae;cr<Ac;)switch(Be.charCodeAt(cr++)){case Te:case Se:case ae:++jt,At=ii,cr=Ac;break;case he:ro>0&&(++jt,At=ii);case N:cr=Ac}}switch(At){case N:for(ii=(pt=pt.trim()).charCodeAt(0),mn=1,cr=++jt;jt<Ac;){switch(At=Be.charCodeAt(jt)){case N:mn++;break;case U:mn--;break;case dt:switch(lr=Be.charCodeAt(jt+1)){case Ee:case dt:jt=ut(lr,jt,hm,Be)}break;case q:At++;case B:At++;case Ze:case De:for(;jt++<hm&&Be.charCodeAt(jt)!==At;);}if(mn===0)break;jt++}switch(vr=Be.substring(cr,jt),ii===ft&&(ii=(pt=pt.replace(n,"").trim()).charCodeAt(0)),ii){case te:switch(ro>0&&(pt=pt.replace(o,"")),lr=pt.charCodeAt(1)){case Oe:case Si:case Ge:case de:mt=ze;break;default:mt=Co}if(cr=(vr=Pc(ze,mt,vr,lr,we+1)).length,Ui>0&&cr===0&&(cr=pt.length),fn>0&&(mt=Lh(Co,pt,um),ee=ve(D0,vr,mt,ze,Je,Xe,cr,lr,we,Z),pt=mt.join(""),ee!==void 0&&(cr=(vr=ee.trim()).length)===0&&(lr=0,vr="")),cr>0)switch(lr){case Ge:pt=pt.replace(I,pe);case Oe:case Si:case de:vr=pt+"{"+vr+"}";break;case Cr:vr=(pt=pt.replace(m,"$1 $2"+(xl>0?Mc:"")))+"{"+vr+"}",Bt===1||Bt===2&&re("@"+vr,3)?vr="@"+j+vr+"@"+vr:vr="@"+vr;break;default:vr=pt+vr,Z===qe&&(Ur+=vr,vr="")}else vr="";break;default:vr=Pc(ze,Lh(ze,pt,um),vr,Z,we+1)}R0+=vr,ra=0,Nh=0,ls=0,ro=0,um=0,I0=0,pt="",vr="",At=Be.charCodeAt(++jt);break;case U:case ae:if((cr=(pt=(ro>0?pt.replace(o,""):pt).trim()).length)>1)switch(ls===0&&((ii=pt.charCodeAt(0))===de||ii>96&&ii<123)&&(cr=(pt=pt.replace(" ",":")).length),fn>0&&(ee=ve(T0,pt,ze,We,Je,Xe,Ur.length,Z,we,Z))!==void 0&&(cr=(pt=ee.trim()).length)===0&&(pt="\0\0"),ii=pt.charCodeAt(0),lr=pt.charCodeAt(1),ii){case ft:break;case te:if(lr===je||lr===Ie){WT+=pt+Be.charAt(jt);break}default:if(pt.charCodeAt(cr-1)===he)break;Ur+=ie(pt,ii,lr,pt.charCodeAt(2))}ra=0,Nh=0,ls=0,ro=0,um=0,pt="",At=Be.charCodeAt(++jt)}}switch(At){case Se:case Te:if(_t+Dt+kr+St+Ci===0)switch(Uh){case W:case De:case Ze:case te:case Xt:case Nt:case Ee:case gr:case dt:case de:case he:case ye:case ae:case N:case U:break;default:ls>0&&(Nh=1)}_t===dt?_t=0:Mt+ra===0&&Z!==Cr&&pt.length>0&&(ro=1,pt+="\0"),fn*cm>0&&ve(k0,pt,ze,We,Je,Xe,Ur.length,Z,we,Z),Xe=1,Je++;break;case ae:case U:if(_t+Dt+kr+St===0){Xe++;break}default:switch(Xe++,Ni=Be.charAt(jt),At){case fe:case X:if(Dt+St+_t===0)switch(Ki){case ye:case he:case fe:case X:Ni="";break;default:At!==X&&(Ni=" ")}break;case ft:Ni="\\0";break;case Fr:Ni="\\f";break;case ri:Ni="\\v";break;case le:Dt+_t+St===0&&Mt>0&&(um=1,ro=1,Ni="\f"+Ni);break;case 108:if(Dt+_t+St+yt===0&&ls>0)switch(jt-ls){case 2:Ki===be&&Be.charCodeAt(jt-3)===he&&(yt=Ki);case 8:pn===Me&&(yt=pn)}break;case he:Dt+_t+St===0&&(ls=jt);break;case ye:_t+kr+Dt+St===0&&(ro=1,Ni+="\r");break;case Ze:case De:_t===0&&(Dt=Dt===At?0:Dt===0?At:Dt);break;case q:Dt+_t+kr===0&&St++;break;case xe:Dt+_t+kr===0&&St--;break;case W:Dt+_t+St===0&&kr--;break;case B:if(Dt+_t+St===0){if(ra===0)switch(2*Ki+3*pn){case 533:break;default:mn=0,ra=1}kr++}break;case te:_t+kr+Dt+St+ls+I0===0&&(I0=1);break;case Ee:case dt:if(Dt+St+kr>0)break;switch(_t){case 0:switch(2*At+3*Be.charCodeAt(jt+1)){case 235:_t=dt;break;case 220:cr=jt,_t=Ee}break;case Ee:At===dt&&Ki===Ee&&cr+2!==jt&&(Be.charCodeAt(cr+2)===33&&(Ur+=Be.substring(cr,jt+1)),Ni="",_t=0)}}if(_t===0){if(Mt+Dt+St+I0===0&&Z!==Cr&&At!==ae)switch(At){case ye:case Xt:case Nt:case gr:case W:case B:if(ra===0){switch(Ki){case fe:case X:case Te:case Se:Ni+="\0";break;default:Ni="\0"+Ni+(At===ye?"":"\0")}ro=1}else switch(At){case B:ls+7===jt&&Ki===108&&(ls=0),ra=++mn;break;case W:(ra=--mn)==0&&(ro=1,Ni+="\0")}break;case fe:case X:switch(Ki){case ft:case N:case U:case ae:case ye:case Fr:case fe:case X:case Te:case Se:break;default:ra===0&&(ro=1,Ni+="\0")}}pt+=Ni,At!==X&&At!==fe&&(Uh=At)}}pn=Ki,Ki=At,jt++}if(cr=Ur.length,Ui>0&&cr===0&&R0.length===0&&ze[0].length!==0&&(Z!==Si||ze.length===1&&(Mt>0?ko:fi)===ze[0])&&(cr=ze.join(",").length+2),cr>0){if(mt=Mt===0&&Z!==Cr?function(kB){for(var ia,ki,F0=0,TB=kB.length,EB=Array(TB);F0<TB;++F0){for(var VT=kB[F0].split(f),O0="",jh=0,GT=0,DB=0,IB=0,RB=VT.length;jh<RB;++jh)if(!((GT=(ki=VT[jh]).length)===0&&RB>1)){if(DB=O0.charCodeAt(O0.length-1),IB=ki.charCodeAt(0),ia="",jh!==0)switch(DB){case Ee:case Xt:case Nt:case gr:case X:case B:break;default:ia=" "}switch(IB){case le:ki=ia+ko;case Xt:case Nt:case gr:case X:case W:case B:break;case q:ki=ia+ki+ko;break;case he:switch(2*ki.charCodeAt(1)+3*ki.charCodeAt(2)){case 530:if(Wr>0){ki=ia+ki.substring(8,GT-1);break}default:(jh<1||VT[jh-1].length<1)&&(ki=ia+ko+ki)}break;case ye:ia="";default:GT>1&&ki.indexOf(":")>0?ki=ia+ki.replace(D,"$1"+ko+"$2"):ki=ia+ki+ko}O0+=ki}EB[F0]=O0.replace(o,"").trim()}return EB}(ze):ze,fn>0&&(ee=ve(E0,Ur,mt,We,Je,Xe,cr,Z,we,Z))!==void 0&&(Ur=ee).length===0)return WT+Ur+R0;if(Ur=mt.join(",")+"{"+Ur+"}",Bt*yt!=0){switch(Bt===2&&!re(Ur,2)&&(yt=0),yt){case Me:Ur=Ur.replace(_,":"+V+"$1")+Ur;break;case be:Ur=Ur.replace(y,"::"+j+"input-$1")+Ur.replace(y,"::"+V+"$1")+Ur.replace(y,":"+J+"input-$1")+Ur}yt=0}}return WT+Ur+R0}function Lh(We,ze,Be){var Z=ze.trim().split(d),we=Z,mt=Z.length,ee=We.length;switch(ee){case 0:case 1:for(var St=0,_t=ee===0?"":We[0]+" ";St<mt;++St)we[St]=A(_t,we[St],Be,ee).trim();break;default:St=0;var kr=0;for(we=[];St<mt;++St)for(var Dt=0;Dt<ee;++Dt)we[kr++]=A(We[Dt]+" ",Z[St],Be,ee).trim()}return we}function A(We,ze,Be,Z){var we=ze,mt=we.charCodeAt(0);switch(mt<33&&(mt=(we=we.trim()).charCodeAt(0)),mt){case le:switch(Mt+Z){case 0:case 1:if(We.trim().length===0)break;default:return we.replace(p,"$1"+We.trim())}break;case he:switch(we.charCodeAt(1)){case 103:if(Wr>0&&Mt>0)return we.replace(v,"$1").replace(p,"$1"+fi);break;default:return We.trim()+we.replace(p,"$1"+We.trim())}default:if(Be*Mt>0&&we.indexOf("\f")>0)return we.replace(p,(We.charCodeAt(0)===he?"":"$1")+We.trim())}return We+we}function ie(We,ze,Be,Z){var we,mt=0,ee=We+";",St=2*ze+3*Be+4*Z;if(St===944)return function(_t){var kr=_t.length,Dt=_t.indexOf(":",9)+1,ii=_t.substring(0,Dt).trim(),lr=_t.substring(Dt,kr-1).trim();switch(_t.charCodeAt(9)*xl){case 0:break;case de:if(_t.charCodeAt(10)!==110)break;default:for(var At=lr.split((lr="",c)),Ki=0,Dt=0,kr=At.length;Ki<kr;Dt=0,++Ki){for(var pn=At[Ki],Uh=pn.split(h);pn=Uh[Dt];){var mn=pn.charCodeAt(0);if(xl===1&&(mn>te&&mn<90||mn>96&&mn<123||mn===Fe||mn===de&&pn.charCodeAt(1)!==de))switch(isNaN(parseFloat(pn))+(pn.indexOf("(")!==-1)){case 1:switch(pn){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:pn+=Mc}}Uh[Dt++]=pn}lr+=(Ki===0?"":",")+Uh.join(" ")}}return lr=ii+lr+";",Bt===1||Bt===2&&re(lr,1)?j+lr+lr:lr}(ee);if(Bt===0||Bt===2&&!re(ee,1))return ee;switch(St){case 1015:return ee.charCodeAt(10)===97?j+ee+ee:ee;case 951:return ee.charCodeAt(3)===116?j+ee+ee:ee;case 963:return ee.charCodeAt(5)===110?j+ee+ee:ee;case 1009:if(ee.charCodeAt(4)!==100)break;case 969:case 942:return j+ee+ee;case 978:return j+ee+V+ee+ee;case 1019:case 983:return j+ee+V+ee+J+ee+ee;case 883:return ee.charCodeAt(8)===de?j+ee+ee:ee.indexOf("image-set(",11)>0?ee.replace(H,"$1"+j+"$2")+ee:ee;case 932:if(ee.charCodeAt(4)===de)switch(ee.charCodeAt(5)){case 103:return j+"box-"+ee.replace("-grow","")+j+ee+J+ee.replace("grow","positive")+ee;case 115:return j+ee+J+ee.replace("shrink","negative")+ee;case 98:return j+ee+J+ee.replace("basis","preferred-size")+ee}return j+ee+J+ee+ee;case 964:return j+ee+J+"flex-"+ee+ee;case 1023:if(ee.charCodeAt(8)!==99)break;return we=ee.substring(ee.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),j+"box-pack"+we+j+ee+J+"flex-pack"+we+ee;case 1005:return a.test(ee)?ee.replace(s,":"+j)+ee.replace(s,":"+V)+ee:ee;case 1e3:switch(mt=(we=ee.substring(13).trim()).indexOf("-")+1,we.charCodeAt(0)+we.charCodeAt(mt)){case 226:we=ee.replace(E,"tb");break;case 232:we=ee.replace(E,"tb-rl");break;case 220:we=ee.replace(E,"lr");break;default:return ee}return j+ee+J+we+ee;case 1017:if(ee.indexOf("sticky",9)===-1)return ee;case 975:switch(mt=(ee=We).length-10,St=(we=(ee.charCodeAt(mt)===33?ee.substring(0,mt):ee).substring(We.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|we.charCodeAt(7))){case 203:if(we.charCodeAt(8)<111)break;case 115:ee=ee.replace(we,j+we)+";"+ee;break;case 207:case 102:ee=ee.replace(we,j+(St>102?"inline-":"")+"box")+";"+ee.replace(we,j+we)+";"+ee.replace(we,J+we+"box")+";"+ee}return ee+";";case 938:if(ee.charCodeAt(5)===de)switch(ee.charCodeAt(6)){case 105:return we=ee.replace("-items",""),j+ee+j+"box-"+we+J+"flex-"+we+ee;case 115:return j+ee+J+"flex-item-"+ee.replace(k,"")+ee;default:return j+ee+J+"flex-line-pack"+ee.replace("align-content","").replace(k,"")+ee}break;case 973:case 989:if(ee.charCodeAt(3)!==de||ee.charCodeAt(4)===122)break;case 931:case 953:if($.test(We)===!0)return(we=We.substring(We.indexOf(":")+1)).charCodeAt(0)===115?ie(We.replace("stretch","fill-available"),ze,Be,Z).replace(":fill-available",":stretch"):ee.replace(we,j+we)+ee.replace(we,V+we.replace("fill-",""))+ee;break;case 962:if(ee=j+ee+(ee.charCodeAt(5)===102?J+ee:"")+ee,Be+Z===211&&ee.charCodeAt(13)===105&&ee.indexOf("transform",10)>0)return ee.substring(0,ee.indexOf(";",27)+1).replace(l,"$1"+j+"$2")+ee}return ee}function re(We,ze){var Be=We.indexOf(ze===1?":":"{"),Z=We.substring(0,ze!==3?Be:10),we=We.substring(Be+1,We.length-1);return Bh(ze!==2?Z:Z.replace(R,"$1"),we,ze)}function pe(We,ze){var Be=ie(ze,ze.charCodeAt(0),ze.charCodeAt(1),ze.charCodeAt(2));return Be!==ze+";"?Be.replace(M," or ($1)").substring(4):"("+ze+")"}function ve(We,ze,Be,Z,we,mt,ee,St,_t,kr){for(var Dt,ii=0,lr=ze;ii<fn;++ii)switch(Dt=Oc[ii].call(Pt,We,lr,Be,Z,we,mt,ee,St,_t,kr)){case void 0:case!1:case!0:case null:break;default:lr=Dt}if(lr!==ze)return lr}function ut(We,ze,Be,Z){for(var we=ze+1;we<Be;++we)switch(Z.charCodeAt(we)){case dt:if(We===Ee&&Z.charCodeAt(we-1)===Ee&&ze+2!==we)return we+1;break;case Te:if(We===dt)return we+1}return we}function He(We){for(var ze in We){var Be=We[ze];switch(ze){case"keyframe":xl=0|Be;break;case"global":Wr=0|Be;break;case"cascade":Mt=0|Be;break;case"compress":Li=0|Be;break;case"semicolon":Ci=0|Be;break;case"preserve":Ui=0|Be;break;case"prefix":Bh=null,Be?typeof Be!="function"?Bt=1:(Bt=2,Bh=Be):Bt=0}}return He}function Pt(We,ze){if(this!==void 0&&this.constructor===Pt)return r(We);var Be=We,Z=Be.charCodeAt(0);Z<33&&(Z=(Be=Be.trim()).charCodeAt(0)),xl>0&&(Mc=Be.replace(g,Z===q?"":"-")),Z=1,Mt===1?fi=Be:ko=Be;var we,mt=[fi];fn>0&&(we=ve(C0,ze,mt,mt,Je,Xe,0,0,0,0))!==void 0&&typeof we=="string"&&(ze=we);var ee=Pc(Co,mt,ze,0,0);return fn>0&&(we=ve(S0,ee,mt,mt,Je,Xe,ee.length,0,0,0))!==void 0&&typeof(ee=we)!="string"&&(Z=0),Mc="",fi="",ko="",yt=0,Je=1,Xe=1,Li*Z==0?ee:ee.replace(o,"").replace(b,"").replace(w,"$1").replace(S,"$1").replace(C," ")}return Pt.use=function We(ze){switch(ze){case void 0:case null:fn=Oc.length=0;break;default:if(typeof ze=="function")Oc[fn++]=ze;else if(typeof ze=="object")for(var Be=0,Z=ze.length;Be<Z;++Be)We(ze[Be]);else cm=0|!!ze}return We},Pt.set=He,i!==void 0&&He(i),Pt})})(kF);var TF=kF.exports,EF={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(r){var i="/*|*/",n=i+"}";function o(s){if(s)try{r(s+"}")}catch{}}return function(a,l,c,h,f,d,p,v,g,m){switch(a){case 1:if(g===0&&l.charCodeAt(0)===64)return r(l+";"),"";break;case 2:if(v===0)return l+i;break;case 3:switch(v){case 102:case 112:return r(c[0]+l),"";default:return l+(m===0?i:"")}case-2:l.split(n).forEach(o)}}}})})(EF);var aG=EF.exports,K={exports:{}},zt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var DF=Object.getOwnPropertySymbols,lG=Object.prototype.hasOwnProperty,cG=Object.prototype.propertyIsEnumerable;function uG(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function hG(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(o){n[o]=o}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Fw=hG()?Object.assign:function(e,t){for(var r,i=uG(e),n,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)lG.call(r,s)&&(i[s]=r[s]);if(DF){n=DF(r);for(var a=0;a<n.length;a++)cG.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i};/** @license React v17.0.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow=Fw,Uu=60103,IF=60106;zt.Fragment=60107,zt.StrictMode=60108,zt.Profiler=60114;var RF=60109,FF=60110,OF=60112;zt.Suspense=60113;var MF=60115,PF=60116;if(typeof Symbol=="function"&&Symbol.for){var ho=Symbol.for;Uu=ho("react.element"),IF=ho("react.portal"),zt.Fragment=ho("react.fragment"),zt.StrictMode=ho("react.strict_mode"),zt.Profiler=ho("react.profiler"),RF=ho("react.provider"),FF=ho("react.context"),OF=ho("react.forward_ref"),zt.Suspense=ho("react.suspense"),MF=ho("react.memo"),PF=ho("react.lazy")}var AF=typeof Symbol=="function"&&Symbol.iterator;function dG(e){return e===null||typeof e!="object"?null:(e=AF&&e[AF]||e["@@iterator"],typeof e=="function"?e:null)}function vf(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$F={};function Nu(e,t,r){this.props=e,this.context=t,this.refs=$F,this.updater=r||zF}Nu.prototype.isReactComponent={},Nu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(vf(85));this.updater.enqueueSetState(this,e,t,"setState")},Nu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function BF(){}BF.prototype=Nu.prototype;function Mw(e,t,r){this.props=e,this.context=t,this.refs=$F,this.updater=r||zF}var Pw=Mw.prototype=new BF;Pw.constructor=Mw,Ow(Pw,Nu.prototype),Pw.isPureReactComponent=!0;var Aw={current:null},LF=Object.prototype.hasOwnProperty,UF={key:!0,ref:!0,__self:!0,__source:!0};function NF(e,t,r){var i,n={},o=null,s=null;if(t!=null)for(i in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)LF.call(t,i)&&!UF.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:Uu,type:e,key:o,ref:s,props:n,_owner:Aw.current}}function fG(e,t){return{$$typeof:Uu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uu}function pG(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var jF=/\/+/g;function $w(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pG(""+e.key):t.toString(36)}function Fv(e,t,r,i,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Uu:case IF:s=!0}}if(s)return s=e,n=n(s),e=i===""?"."+$w(s,0):i,Array.isArray(n)?(r="",e!=null&&(r=e.replace(jF,"$&/")+"/"),Fv(n,t,r,"",function(c){return c})):n!=null&&(zw(n)&&(n=fG(n,r+(!n.key||s&&s.key===n.key?"":(""+n.key).replace(jF,"$&/")+"/")+e)),t.push(n)),1;if(s=0,i=i===""?".":i+":",Array.isArray(e))for(var a=0;a<e.length;a++){o=e[a];var l=i+$w(o,a);s+=Fv(o,t,r,l,n)}else if(l=dG(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=i+$w(o,a++),s+=Fv(o,t,r,l,n);else if(o==="object")throw t=""+e,Error(vf(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function Ov(e,t,r){if(e==null)return e;var i=[],n=0;return Fv(e,i,"","",function(o){return t.call(r,o,n++)}),i}function mG(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var HF={current:null};function As(){var e=HF.current;if(e===null)throw Error(vf(321));return e}var gG={ReactCurrentDispatcher:HF,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Aw,IsSomeRendererActing:{current:!1},assign:Ow};zt.Children={map:Ov,forEach:function(e,t,r){Ov(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ov(e,function(){t++}),t},toArray:function(e){return Ov(e,function(t){return t})||[]},only:function(e){if(!zw(e))throw Error(vf(143));return e}},zt.Component=Nu,zt.PureComponent=Mw,zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gG,zt.cloneElement=function(e,t,r){if(e==null)throw Error(vf(267,e));var i=Ow({},e.props),n=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Aw.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)LF.call(t,l)&&!UF.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Uu,type:e.type,key:n,ref:o,props:i,_owner:s}},zt.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:FF,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:RF,_context:e},e.Consumer=e},zt.createElement=NF,zt.createFactory=function(e){var t=NF.bind(null,e);return t.type=e,t},zt.createRef=function(){return{current:null}},zt.forwardRef=function(e){return{$$typeof:OF,render:e}},zt.isValidElement=zw,zt.lazy=function(e){return{$$typeof:PF,_payload:{_status:-1,_result:e},_init:mG}},zt.memo=function(e,t){return{$$typeof:MF,type:e,compare:t===void 0?null:t}},zt.useCallback=function(e,t){return As().useCallback(e,t)},zt.useContext=function(e,t){return As().useContext(e,t)},zt.useDebugValue=function(){},zt.useEffect=function(e,t){return As().useEffect(e,t)},zt.useImperativeHandle=function(e,t,r){return As().useImperativeHandle(e,t,r)},zt.useLayoutEffect=function(e,t){return As().useLayoutEffect(e,t)},zt.useMemo=function(e,t){return As().useMemo(e,t)},zt.useReducer=function(e,t,r){return As().useReducer(e,t,r)},zt.useRef=function(e){return As().useRef(e)},zt.useState=function(e){return As().useState(e)},zt.version="17.0.1",K.exports=zt;var u=K.exports,vG={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Bw={exports:{}},Qt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var li=typeof Symbol=="function"&&Symbol.for,Lw=li?Symbol.for("react.element"):60103,Uw=li?Symbol.for("react.portal"):60106,Mv=li?Symbol.for("react.fragment"):60107,Pv=li?Symbol.for("react.strict_mode"):60108,Av=li?Symbol.for("react.profiler"):60114,zv=li?Symbol.for("react.provider"):60109,$v=li?Symbol.for("react.context"):60110,Nw=li?Symbol.for("react.async_mode"):60111,Bv=li?Symbol.for("react.concurrent_mode"):60111,Lv=li?Symbol.for("react.forward_ref"):60112,Uv=li?Symbol.for("react.suspense"):60113,yG=li?Symbol.for("react.suspense_list"):60120,Nv=li?Symbol.for("react.memo"):60115,jv=li?Symbol.for("react.lazy"):60116,_G=li?Symbol.for("react.block"):60121,bG=li?Symbol.for("react.fundamental"):60117,xG=li?Symbol.for("react.responder"):60118,wG=li?Symbol.for("react.scope"):60119;function _n(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Lw:switch(e=e.type,e){case Nw:case Bv:case Mv:case Av:case Pv:case Uv:return e;default:switch(e=e&&e.$$typeof,e){case $v:case Lv:case jv:case Nv:case zv:return e;default:return t}}case Uw:return t}}}function WF(e){return _n(e)===Bv}Qt.AsyncMode=Nw,Qt.ConcurrentMode=Bv,Qt.ContextConsumer=$v,Qt.ContextProvider=zv,Qt.Element=Lw,Qt.ForwardRef=Lv,Qt.Fragment=Mv,Qt.Lazy=jv,Qt.Memo=Nv,Qt.Portal=Uw,Qt.Profiler=Av,Qt.StrictMode=Pv,Qt.Suspense=Uv,Qt.isAsyncMode=function(e){return WF(e)||_n(e)===Nw},Qt.isConcurrentMode=WF,Qt.isContextConsumer=function(e){return _n(e)===$v},Qt.isContextProvider=function(e){return _n(e)===zv},Qt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lw},Qt.isForwardRef=function(e){return _n(e)===Lv},Qt.isFragment=function(e){return _n(e)===Mv},Qt.isLazy=function(e){return _n(e)===jv},Qt.isMemo=function(e){return _n(e)===Nv},Qt.isPortal=function(e){return _n(e)===Uw},Qt.isProfiler=function(e){return _n(e)===Av},Qt.isStrictMode=function(e){return _n(e)===Pv},Qt.isSuspense=function(e){return _n(e)===Uv},Qt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Mv||e===Bv||e===Av||e===Pv||e===Uv||e===yG||typeof e=="object"&&e!==null&&(e.$$typeof===jv||e.$$typeof===Nv||e.$$typeof===zv||e.$$typeof===$v||e.$$typeof===Lv||e.$$typeof===bG||e.$$typeof===xG||e.$$typeof===wG||e.$$typeof===_G)},Qt.typeOf=_n,Bw.exports=Qt;var VF=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function SG(e,t){return!!(e===t||VF(e)&&VF(t))}function CG(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!SG(e[r],t[r]))return!1;return!0}function GF(e,t){t===void 0&&(t=CG);var r,i=[],n,o=!1;function s(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o&&r===this&&t(a,i)||(n=e.apply(this,a),o=!0,r=this,i=a),n}return s}function kG(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var TG=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,EG=kG(function(e){return TG.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function jw(e){return Object.prototype.toString.call(e).slice(8,-1)}function yf(e){return jw(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function qF(e){return jw(e)==="Array"}function XF(e){return jw(e)==="Symbol"}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function YF(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function QF(e,t,r,i){var n=i.propertyIsEnumerable(t)?"enumerable":"nonenumerable";n==="enumerable"&&(e[t]=r),n==="nonenumerable"&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function KF(e,t,r){if(!yf(t))return r&&qF(r)&&r.forEach(function(c){t=c(e,t)}),t;var i={};if(yf(e)){var n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertySymbols(e);i=YF(n,o).reduce(function(c,h){var f=e[h];return(!XF(h)&&!Object.getOwnPropertyNames(t).includes(h)||XF(h)&&!Object.getOwnPropertySymbols(t).includes(h))&&QF(c,h,f,e),c},{})}var s=Object.getOwnPropertyNames(t),a=Object.getOwnPropertySymbols(t),l=YF(s,a).reduce(function(c,h){var f=t[h],d=yf(e)?e[h]:void 0;return r&&qF(r)&&r.forEach(function(p){f=p(d,f)}),d!==void 0&&yf(f)&&(f=KF(d,f,r)),QF(c,h,f,t),c},i);return l}function DG(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=null,n=e;return yf(e)&&e.extensions&&Object.keys(e).length===1&&(n={},i=e.extensions),t.reduce(function(o,s){return KF(o,s,i)},n)}var Hv={exports:{}},_f={};/** @license React v17.0.1
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IG=K.exports,ZF=60103;if(_f.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var JF=Symbol.for;ZF=JF("react.element"),_f.Fragment=JF("react.fragment")}var RG=IG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FG=Object.prototype.hasOwnProperty,OG={key:!0,ref:!0,__self:!0,__source:!0};function eO(e,t,r){var i,n={},o=null,s=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(i in t)FG.call(t,i)&&!OG.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:ZF,type:e,key:o,ref:s,props:n,_owner:RG.current}}_f.jsx=eO,_f.jsxs=eO,Hv.exports=_f;const Wi=Hv.exports.jsx,MG=Hv.exports.jsxs,PG=Hv.exports.Fragment;var tO=function(e,t){for(var r=[e[0]],i=0,n=t.length;i<n;i+=1)r.push(t[i],e[i+1]);return r},rO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yl=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},AG=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Wv=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},zG=function(e,t){var r={};for(var i in e)t.indexOf(i)>=0||!Object.prototype.hasOwnProperty.call(e,i)||(r[i]=e[i]);return r},bf=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Hw=function(e){return(typeof e=="undefined"?"undefined":rO(e))==="object"&&e.constructor===Object},Ww=Object.freeze([]),xf=Object.freeze({});function zs(e){return typeof e=="function"}function iO(e){return e.displayName||e.name||"Component"}function $G(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)}function Vv(e){return e&&typeof e.styledComponentId=="string"}var wf=typeof process!="undefined"&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Gv="data-styled-version",BG="data-styled-streamed",ju=typeof window!="undefined"&&"HTMLElement"in window,nO=typeof SC_DISABLE_SPEEDY=="boolean"&&SC_DISABLE_SPEEDY||typeof process!="undefined"&&({}.REACT_APP_SC_DISABLE_SPEEDY||{}.SC_DISABLE_SPEEDY)||!1,$a=function(e){Wv(t,e);function t(r){Yl(this,t);for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];var s,s=bf(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+r+" for more information."+(n.length>0?" Additional arguments: "+n.join(", "):"")));return bf(s)}return t}(Error),LG=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,UG=function(e){var t=""+(e||""),r=[];return t.replace(LG,function(i,n,o){return r.push({componentId:n,matchIndex:o}),i}),r.map(function(i,n){var o=i.componentId,s=i.matchIndex,a=r[n+1],l=a?t.slice(s,a.matchIndex):t.slice(s);return{componentId:o,cssFromDOM:l}})},NG=/^\s*\/\/.*$/gm,oO=new TF({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),sO=new TF({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),Vw=[],aO=function(t){if(t===-2){var r=Vw;return Vw=[],r}},lO=aG(function(e){Vw.push(e)}),cO=void 0,Hu=void 0,uO=void 0,jG=function(t,r,i){return r>0&&i.slice(0,r).indexOf(Hu)!==-1&&i.slice(r-Hu.length,r)!==Hu?"."+cO:t},HG=function(t,r,i){t===2&&i.length&&i[0].lastIndexOf(Hu)>0&&(i[0]=i[0].replace(uO,jG))};sO.use([HG,lO,aO]),oO.use([lO,aO]);var WG=function(t){return oO("",t)};function hO(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"&",n=e.join("").replace(NG,""),o=t&&r?r+" "+t+" { "+n+" }":n;return cO=i,Hu=t,uO=new RegExp("\\"+Hu+"\\b","g"),sO(r||!t?"":t,o)}var Gw=function(){return typeof __webpack_nonce__!="undefined"?__webpack_nonce__:null},qw=function(t,r,i){if(i){var n=t[r]||(t[r]=Object.create(null));n[i]=!0}},qv=function(t,r){t[r]=Object.create(null)},Xw=function(t){return function(r,i){return t[r]!==void 0&&t[r][i]}},dO=function(t){var r="";for(var i in t)r+=Object.keys(t[i]).join(" ")+" ";return r.trim()},VG=function(t){var r=Object.create(null);for(var i in t)r[i]=Yo({},t[i]);return r},Yw=function(t){if(t.sheet)return t.sheet;for(var r=t.ownerDocument.styleSheets.length,i=0;i<r;i+=1){var n=t.ownerDocument.styleSheets[i];if(n.ownerNode===t)return n}throw new $a(10)},GG=function(t,r,i){if(!r)return!1;var n=t.cssRules.length;try{t.insertRule(r,i<=n?i:n)}catch{return!1}return!0},qG=function(t,r,i){for(var n=r-i,o=r;o>n;o-=1)t.deleteRule(o)},Qw=function(t){return`
/* sc-component-id: `+t+` */
`},Kw=function(t,r){for(var i=0,n=0;n<=r;n+=1)i+=t[n];return i},XG=function(t,r,i){var n=document;t?n=t.ownerDocument:r&&(n=r.ownerDocument);var o=n.createElement("style");o.setAttribute(wf,""),o.setAttribute(Gv,"4.4.1");var s=Gw();if(s&&o.setAttribute("nonce",s),o.appendChild(n.createTextNode("")),t&&!r)t.appendChild(o);else{if(!r||!t||!r.parentNode)throw new $a(6);r.parentNode.insertBefore(o,i?r:r.nextSibling)}return o},Zw=function(t,r){return function(i){var n=Gw(),o=[n&&'nonce="'+n+'"',wf+'="'+dO(r)+'"',Gv+'="4.4.1"',i],s=o.filter(Boolean).join(" ");return"<style "+s+">"+t()+"</style>"}},Jw=function(t,r){return function(){var i,n=(i={},i[wf]=dO(r),i[Gv]="4.4.1",i),o=Gw();return o&&(n.nonce=o),Wi("style",ge(L({},n),{dangerouslySetInnerHTML:{__html:t()}}))}},e2=function(t){return function(){return Object.keys(t)}},YG=function(t,r){var i=Object.create(null),n=Object.create(null),o=[],s=r!==void 0,a=!1,l=function(p){var v=n[p];return v!==void 0?v:(n[p]=o.length,o.push(0),qv(i,p),n[p])},c=function(p,v,g){for(var m=l(p),y=Yw(t),_=Kw(o,m),b=0,w=[],S=v.length,C=0;C<S;C+=1){var D=v[C],E=s;E&&D.indexOf("@import")!==-1?w.push(D):GG(y,D,_+b)&&(E=!1,b+=1)}s&&w.length>0&&(a=!0,r().insertRules(p+"-import",w)),o[m]+=b,qw(i,p,g)},h=function(p){var v=n[p];if(v!==void 0&&t.isConnected!==!1){var g=o[v],m=Yw(t),y=Kw(o,v)-1;qG(m,y,g),o[v]=0,qv(i,p),s&&a&&r().removeRules(p+"-import")}},f=function(){var p=Yw(t),v=p.cssRules,g="";for(var m in n){g+=Qw(m);for(var y=n[m],_=Kw(o,y),b=o[y],w=_-b;w<_;w+=1){var S=v[w];S!==void 0&&(g+=S.cssText)}}return g};return{clone:function(){throw new $a(5)},css:f,getIds:e2(n),hasNameForId:Xw(i),insertMarker:l,insertRules:c,removeRules:h,sealed:!1,styleTag:t,toElement:Jw(f,i),toHTML:Zw(f,i)}},fO=function(t,r){return t.createTextNode(Qw(r))},QG=function(t,r){var i=Object.create(null),n=Object.create(null),o=r!==void 0,s=!1,a=function(d){var p=n[d];return p!==void 0?p:(n[d]=fO(t.ownerDocument,d),t.appendChild(n[d]),i[d]=Object.create(null),n[d])},l=function(d,p,v){for(var g=a(d),m=[],y=p.length,_=0;_<y;_+=1){var b=p[_],w=o;if(w&&b.indexOf("@import")!==-1)m.push(b);else{w=!1;var S=_===y-1?"":" ";g.appendData(""+b+S)}}qw(i,d,v),o&&m.length>0&&(s=!0,r().insertRules(d+"-import",m))},c=function(d){var p=n[d];if(p!==void 0){var v=fO(t.ownerDocument,d);t.replaceChild(v,p),n[d]=v,qv(i,d),o&&s&&r().removeRules(d+"-import")}},h=function(){var d="";for(var p in n)d+=n[p].data;return d};return{clone:function(){throw new $a(5)},css:h,getIds:e2(n),hasNameForId:Xw(i),insertMarker:a,insertRules:l,removeRules:c,sealed:!1,styleTag:t,toElement:Jw(h,i),toHTML:Zw(h,i)}},KG=function e(t,r){var i=t===void 0?Object.create(null):t,n=r===void 0?Object.create(null):r,o=function(d){var p=n[d];return p!==void 0?p:n[d]=[""]},s=function(d,p,v){var g=o(d);g[0]+=p.join(" "),qw(i,d,v)},a=function(d){var p=n[d];p!==void 0&&(p[0]="",qv(i,d))},l=function(){var d="";for(var p in n){var v=n[p][0];v&&(d+=Qw(p)+v)}return d},c=function(){var d=VG(i),p=Object.create(null);for(var v in n)p[v]=[n[v][0]];return e(d,p)},h={clone:c,css:l,getIds:e2(n),hasNameForId:Xw(i),insertMarker:o,insertRules:s,removeRules:a,sealed:!1,styleTag:null,toElement:Jw(l,i),toHTML:Zw(l,i)};return h},pO=function(t,r,i,n,o){if(ju&&!i){var s=XG(t,r,n);return nO?QG(s,o):YG(s,o)}return KG()},ZG=function(t,r,i){for(var n=0,o=i.length;n<o;n+=1){var s=i[n],a=s.componentId,l=s.cssFromDOM,c=WG(l);t.insertRules(a,c)}for(var h=0,f=r.length;h<f;h+=1){var d=r[h];d.parentNode&&d.parentNode.removeChild(d)}},JG=/\s+/,Xv=void 0;ju?Xv=nO?40:1e3:Xv=-1;var mO=0,t2=void 0,Yv=function(){function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ju?document.head:null,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Yl(this,e),this.getImportRuleTag=function(){var n=t.importRuleTag;if(n!==void 0)return n;var o=t.tags[0],s=!0;return t.importRuleTag=pO(t.target,o?o.styleTag:null,t.forceServer,s)},mO+=1,this.id=mO,this.forceServer=i,this.target=i?null:r,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!ju||this.forceServer)return this;var r=[],i=[],n=!1,o=document.querySelectorAll("style["+wf+"]["+Gv+'="4.4.1"]'),s=o.length;if(!s)return this;for(var a=0;a<s;a+=1){var l=o[a];n||(n=!!l.getAttribute(BG));for(var c=(l.getAttribute(wf)||"").trim().split(JG),h=c.length,f=0,d;f<h;f+=1)d=c[f],this.rehydratedNames[d]=!0;i.push.apply(i,UG(l.textContent)),r.push(l)}var p=i.length;if(!p)return this;var v=this.makeTag(null);ZG(v,r,i),this.capacity=Math.max(1,Xv-p),this.tags.push(v);for(var g=0;g<p;g+=1)this.tagMap[i[g].componentId]=v;return this},e.reset=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;t2=new e(void 0,r).rehydrate()},e.prototype.clone=function(){var r=new e(this.target,this.forceServer);return this.clones.push(r),r.tags=this.tags.map(function(i){for(var n=i.getIds(),o=i.clone(),s=0;s<n.length;s+=1)r.tagMap[n[s]]=o;return o}),r.rehydratedNames=Yo({},this.rehydratedNames),r.deferred=Yo({},this.deferred),r},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(r){r.sealed=!0})},e.prototype.makeTag=function(r){var i=r?r.styleTag:null,n=!1;return pO(this.target,i,this.forceServer,n,this.getImportRuleTag)},e.prototype.getTagForId=function(r){var i=this.tagMap[r];if(i!==void 0&&!i.sealed)return i;var n=this.tags[this.tags.length-1];return this.capacity-=1,this.capacity===0&&(this.capacity=Xv,n=this.makeTag(n),this.tags.push(n)),this.tagMap[r]=n},e.prototype.hasId=function(r){return this.tagMap[r]!==void 0},e.prototype.hasNameForId=function(r,i){if(this.ignoreRehydratedNames[r]===void 0&&this.rehydratedNames[i])return!0;var n=this.tagMap[r];return n!==void 0&&n.hasNameForId(r,i)},e.prototype.deferredInject=function(r,i){if(this.tagMap[r]===void 0){for(var n=this.clones,o=0;o<n.length;o+=1)n[o].deferredInject(r,i);this.getTagForId(r).insertMarker(r),this.deferred[r]=i}},e.prototype.inject=function(r,i,n){for(var o=this.clones,s=0;s<o.length;s+=1)o[s].inject(r,i,n);var a=this.getTagForId(r);if(this.deferred[r]!==void 0){var l=this.deferred[r].concat(i);a.insertRules(r,l,n),this.deferred[r]=void 0}else a.insertRules(r,i,n)},e.prototype.remove=function(r){var i=this.tagMap[r];if(i!==void 0){for(var n=this.clones,o=0;o<n.length;o+=1)n[o].remove(r);i.removeRules(r),this.ignoreRehydratedNames[r]=!0,this.deferred[r]=void 0}},e.prototype.toHTML=function(){return this.tags.map(function(r){return r.toHTML()}).join("")},e.prototype.toReactElements=function(){var r=this.id;return this.tags.map(function(i,n){var o="sc-"+r+"-"+n;return K.exports.cloneElement(i.toElement(),{key:o})})},AG(e,null,[{key:"master",get:function(){return t2||(t2=new e().rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),gO=function(){function e(t,r){var i=this;Yl(this,e),this.inject=function(n){n.hasNameForId(i.id,i.name)||n.inject(i.id,i.rules,i.name)},this.toString=function(){throw new $a(12,String(i.name))},this.name=t,this.rules=r,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),eq=/([A-Z])/g,tq=/^ms-/;function vO(e){return e.replace(eq,"-$1").toLowerCase().replace(tq,"-ms-")}function rq(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!(e in vG)?t+"px":String(t).trim()}var yO=function(t){return t==null||t===!1||t===""},iq=function e(t,r){var i=[],n=Object.keys(t);return n.forEach(function(o){if(!yO(t[o])){if(Hw(t[o]))return i.push.apply(i,e(t[o],o)),i;if(zs(t[o]))return i.push(vO(o)+":",t[o],";"),i;i.push(vO(o)+": "+rq(o,t[o])+";")}return i}),r?[r+" {"].concat(i,["}"]):i};function Sf(e,t,r){if(Array.isArray(e)){for(var i=[],n=0,o=e.length,s;n<o;n+=1)s=Sf(e[n],t,r),s!==null&&(Array.isArray(s)?i.push.apply(i,s):i.push(s));return i}if(yO(e))return null;if(Vv(e))return"."+e.styledComponentId;if(zs(e))if($G(e)&&t){var a=e(t);return Sf(a,t,r)}else return e;return e instanceof gO?r?(e.inject(r),e.getName()):e:Hw(e)?iq(e):e.toString()}function ne(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return zs(e)||Hw(e)?Sf(tO(Ww,[e].concat(r))):Sf(tO(e,r))}function r2(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xf;if(!Bw.exports.isValidElementType(t))throw new $a(1,String(t));var i=function(){return e(t,r,ne.apply(void 0,arguments))};return i.withConfig=function(n){return r2(e,t,Yo({},r,n))},i.attrs=function(n){return r2(e,t,Yo({},r,{attrs:Array.prototype.concat(r.attrs,n).filter(Boolean)}))},i}function _O(e){for(var t=e.length|0,r=t|0,i=0,n;t>=4;)n=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,n=1540483477*(n&65535)+((1540483477*(n>>>16)&65535)<<16),n^=n>>>24,n=1540483477*(n&65535)+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)^n,t-=4,++i;switch(t){case 3:r^=(e.charCodeAt(i+2)&255)<<16;case 2:r^=(e.charCodeAt(i+1)&255)<<8;case 1:r^=e.charCodeAt(i)&255,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16),(r^r>>>15)>>>0}var Qv=52,bO=function(t){return String.fromCharCode(t+(t>25?39:97))};function xO(e){var t="",r=void 0;for(r=e;r>Qv;r=Math.floor(r/Qv))t=bO(r%Qv)+t;return bO(r%Qv)+t}function nq(e){for(var t in e)if(zs(e[t]))return!0;return!1}function wO(e,t){for(var r=0;r<e.length;r+=1){var i=e[r];if(Array.isArray(i)&&!wO(i,t))return!1;if(zs(i)&&!Vv(i))return!1}return!t.some(function(n){return zs(n)||nq(n)})}var SO=function(t){return xO(_O(t))},CO=function(){function e(t,r,i){Yl(this,e),this.rules=t,this.isStatic=wO(t,r),this.componentId=i,Yv.master.hasId(i)||Yv.master.deferredInject(i,[])}return e.prototype.generateAndInjectStyles=function(r,i){var n=this.isStatic,o=this.componentId,s=this.lastClassName;if(ju&&n&&typeof s=="string"&&i.hasNameForId(o,s))return s;var a=Sf(this.rules,r,i),l=SO(this.componentId+a.join(""));return i.hasNameForId(o,l)||i.inject(this.componentId,hO(a,"."+l,void 0,o),l),this.lastClassName=l,l},e.generateName=function(r){return SO(r)},e}(),oq=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xf,i=r?e.theme===r.theme:!1,n=e.theme&&!i?e.theme:t||r.theme;return n},sq=/[[\].#*$><+~=|^:(),"'`-]+/g,aq=/(^-|-$)/g;function i2(e){return e.replace(sq,"-").replace(aq,"")}function Kv(e){return typeof e=="string"&&!0}function lq(e){return Kv(e)?"styled."+e:"Styled("+iO(e)+")"}var n2,kO={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},cq={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},TO=(n2={},n2[Bw.exports.ForwardRef]={$$typeof:!0,render:!0},n2),uq=Object.defineProperty,hq=Object.getOwnPropertyNames,EO=Object.getOwnPropertySymbols,dq=EO===void 0?function(){return[]}:EO,fq=Object.getOwnPropertyDescriptor,pq=Object.getPrototypeOf,mq=Object.prototype,gq=Array.prototype;function DO(e,t,r){if(typeof t!="string"){var i=pq(t);i&&i!==mq&&DO(e,i,r);for(var n=gq.concat(hq(t),dq(t)),o=TO[e.$$typeof]||kO,s=TO[t.$$typeof]||kO,a=n.length,l=void 0,c=void 0;a--;)if(c=n[a],!cq[c]&&!(r&&r[c])&&!(s&&s[c])&&!(o&&o[c])&&(l=fq(t,c),l))try{uq(e,c,l)}catch{}return e}return e}function vq(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}var o2=K.exports.createContext(),yq=o2.Consumer,IO=function(e){Wv(t,e);function t(r){Yl(this,t);var i=bf(this,e.call(this,r));return i.getContext=GF(i.getContext.bind(i)),i.renderInner=i.renderInner.bind(i),i}return t.prototype.render=function(){return this.props.children?Wi(o2.Consumer,{children:this.renderInner}):null},t.prototype.renderInner=function(i){var n=this.getContext(this.props.theme,i);return Wi(o2.Provider,{value:n,children:this.props.children})},t.prototype.getTheme=function(i,n){if(zs(i)){var o=i(n);return o}if(i===null||Array.isArray(i)||(typeof i=="undefined"?"undefined":rO(i))!=="object")throw new $a(8);return Yo({},n,i)},t.prototype.getContext=function(i,n){return this.getTheme(i,n)},t}(K.exports.Component),RO=K.exports.createContext(),_q=RO.Consumer;(function(e){Wv(t,e);function t(r){Yl(this,t);var i=bf(this,e.call(this,r));return i.getContext=GF(i.getContext),i}return t.prototype.getContext=function(i,n){if(i)return i;if(n)return new Yv(n);throw new $a(4)},t.prototype.render=function(){var i=this.props,n=i.children,o=i.sheet,s=i.target;return Wi(RO.Provider,{value:this.getContext(o,s),children:n})},t})(K.exports.Component);var FO={};function bq(e,t,r){var i=typeof t!="string"?"sc":i2(t),n=(FO[i]||0)+1;FO[i]=n;var o=i+"-"+e.generateName(i+n);return r?r+"-"+o:o}var xq=function(e){Wv(t,e);function t(){Yl(this,t);var r=bf(this,e.call(this));return r.attrs={},r.renderOuter=r.renderOuter.bind(r),r.renderInner=r.renderInner.bind(r),r}return t.prototype.render=function(){return Wi(_q,{children:this.renderOuter})},t.prototype.renderOuter=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yv.master;return this.styleSheet=i,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():Wi(yq,{children:this.renderInner})},t.prototype.renderInner=function(i){var n=this.props.forwardedComponent,o=n.componentStyle,s=n.defaultProps;n.displayName;var a=n.foldedComponentIds,l=n.styledComponentId,c=n.target,h=void 0;o.isStatic?h=this.generateAndInjectStyles(xf,this.props):h=this.generateAndInjectStyles(oq(this.props,i,s)||xf,this.props);var f=this.props.as||this.attrs.as||c,d=Kv(f),p={},v=Yo({},this.props,this.attrs),g=void 0;for(g in v)g==="forwardedComponent"||g==="as"||(g==="forwardedRef"?p.ref=v[g]:g==="forwardedAs"?p.as=v[g]:(!d||EG(g))&&(p[g]=v[g]));return this.props.style&&this.attrs.style&&(p.style=Yo({},this.attrs.style,this.props.style)),p.className=Array.prototype.concat(a,l,h!==l?h:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),K.exports.createElement(f,p)},t.prototype.buildExecutionContext=function(i,n,o){var s=this,a=Yo({},n,{theme:i});return o.length&&(this.attrs={},o.forEach(function(l){var c=l,h=!1,f=void 0,d=void 0;zs(c)&&(c=c(a),h=!0);for(d in c)f=c[d],h||zs(f)&&!vq(f)&&!Vv(f)&&(f=f(a)),s.attrs[d]=f,a[d]=f})),a},t.prototype.generateAndInjectStyles=function(i,n){var o=n.forwardedComponent,s=o.attrs,a=o.componentStyle;if(o.warnTooManyClasses,a.isStatic&&!s.length)return a.generateAndInjectStyles(xf,this.styleSheet);var l=a.generateAndInjectStyles(this.buildExecutionContext(i,n,s),this.styleSheet);return l},t}(K.exports.Component);function OO(e,t,r){var i=Vv(e),n=!Kv(e),o=t.displayName,s=o===void 0?lq(e):o,a=t.componentId,l=a===void 0?bq(CO,t.displayName,t.parentComponentId):a,c=t.ParentComponent,h=c===void 0?xq:c,f=t.attrs,d=f===void 0?Ww:f,p=t.displayName&&t.componentId?i2(t.displayName)+"-"+t.componentId:t.componentId||l,v=i&&e.attrs?Array.prototype.concat(e.attrs,d).filter(Boolean):d,g=new CO(i?e.componentStyle.rules.concat(r):r,v,p),m=void 0,y=function(b,w){return Wi(h,ge(L({},b),{forwardedComponent:m,forwardedRef:w}))};return y.displayName=s,m=u.forwardRef(y),m.displayName=s,m.attrs=v,m.componentStyle=g,m.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Ww,m.styledComponentId=p,m.target=i?e.target:e,m.withComponent=function(b){var w=t.componentId,S=zG(t,["componentId"]),C=w&&w+"-"+(Kv(b)?b:i2(iO(b))),D=Yo({},S,{attrs:v,componentId:C,ParentComponent:h});return OO(b,D,r)},Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(b){this._foldedDefaultProps=i?DG(e.defaultProps,b):b}}),m.toString=function(){return"."+m.styledComponentId},n&&DO(m,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),m}var wq=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],s2=function(t){return r2(OO,t)};wq.forEach(function(e){s2[e]=s2(e)}),ju&&(window.scCGSHMRCache={});var Sq=function(t){return t.replace(/\s|\\n/g,"")};function Cf(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n=ne.apply(void 0,[e].concat(r)),o=xO(_O(Sq(JSON.stringify(n))));return new gO(o,hO(n,o,"@keyframes"))}var z=s2,Zv={exports:{}},jn={},MO={exports:{}},PO={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,i,n;if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,c=null,h=function(){if(l!==null)try{var B=e.unstable_now();l(!0,B),l=null}catch(W){throw setTimeout(h,0),W}};t=function(B){l!==null?setTimeout(t,0,B):(l=B,setTimeout(h,0))},r=function(B,W){c=setTimeout(B,W)},i=function(){clearTimeout(c)},e.unstable_shouldYield=function(){return!1},n=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if(typeof console!="undefined"){var p=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof p!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,g=null,m=-1,y=5,_=0;e.unstable_shouldYield=function(){return e.unstable_now()>=_},n=function(){},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<B?Math.floor(1e3/B):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(g!==null){var B=e.unstable_now();_=B+y;try{g(!0,B)?w.postMessage(null):(v=!1,g=null)}catch(W){throw w.postMessage(null),W}}else v=!1},t=function(B){g=B,v||(v=!0,w.postMessage(null))},r=function(B,W){m=f(function(){B(e.unstable_now())},W)},i=function(){d(m),m=-1}}function S(B,W){var q=B.length;B.push(W);e:for(;;){var xe=q-1>>>1,Te=B[xe];if(Te!==void 0&&0<E(Te,W))B[xe]=W,B[q]=Te,q=xe;else break e}}function C(B){return B=B[0],B===void 0?null:B}function D(B){var W=B[0];if(W!==void 0){var q=B.pop();if(q!==W){B[0]=q;e:for(var xe=0,Te=B.length;xe<Te;){var Se=2*(xe+1)-1,fe=B[Se],te=Se+1,X=B[te];if(fe!==void 0&&0>E(fe,q))X!==void 0&&0>E(X,fe)?(B[xe]=X,B[te]=q,xe=te):(B[xe]=fe,B[Se]=q,xe=Se);else if(X!==void 0&&0>E(X,q))B[xe]=X,B[te]=q,xe=te;else break e}}return W}return null}function E(B,W){var q=B.sortIndex-W.sortIndex;return q!==0?q:B.id-W.id}var I=[],M=[],k=1,R=null,$=3,H=!1,j=!1,V=!1;function J(B){for(var W=C(M);W!==null;){if(W.callback===null)D(M);else if(W.startTime<=B)D(M),W.sortIndex=W.expirationTime,S(I,W);else break;W=C(M)}}function ae(B){if(V=!1,J(B),!j)if(C(I)!==null)j=!0,t(U);else{var W=C(M);W!==null&&r(ae,W.startTime-B)}}function U(B,W){j=!1,V&&(V=!1,i()),H=!0;var q=$;try{for(J(W),R=C(I);R!==null&&(!(R.expirationTime>W)||B&&!e.unstable_shouldYield());){var xe=R.callback;if(typeof xe=="function"){R.callback=null,$=R.priorityLevel;var Te=xe(R.expirationTime<=W);W=e.unstable_now(),typeof Te=="function"?R.callback=Te:R===C(I)&&D(I),J(W)}else D(I);R=C(I)}if(R!==null)var Se=!0;else{var fe=C(M);fe!==null&&r(ae,fe.startTime-W),Se=!1}return Se}finally{R=null,$=q,H=!1}}var N=n;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){j||H||(j=!0,t(U))},e.unstable_getCurrentPriorityLevel=function(){return $},e.unstable_getFirstCallbackNode=function(){return C(I)},e.unstable_next=function(B){switch($){case 1:case 2:case 3:var W=3;break;default:W=$}var q=$;$=W;try{return B()}finally{$=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=N,e.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=$;$=B;try{return W()}finally{$=q}},e.unstable_scheduleCallback=function(B,W,q){var xe=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?xe+q:xe):q=xe,B){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=q+Te,B={id:k++,callback:W,priorityLevel:B,startTime:q,expirationTime:Te,sortIndex:-1},q>xe?(B.sortIndex=q,S(M,B),C(I)===null&&B===C(M)&&(V?i():V=!0,r(ae,q-xe))):(B.sortIndex=Te,S(I,B),j||H||(j=!0,t(U))),B},e.unstable_wrapCallback=function(B){var W=$;return function(){var q=$;$=W;try{return B.apply(this,arguments)}finally{$=q}}}})(PO),MO.exports=PO;/** @license React v17.0.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv=K.exports,Sr=Fw,ci=MO.exports;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Jv)throw Error(ke(227));var AO=new Set,kf={};function Ql(e,t){Wu(e,t),Wu(e+"Capture",t)}function Wu(e,t){for(kf[e]=t,e=0;e<t.length;e++)AO.add(t[e])}var $s=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Cq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zO=Object.prototype.hasOwnProperty,$O={},BO={};function kq(e){return zO.call(BO,e)?!0:zO.call($O,e)?!1:Cq.test(e)?BO[e]=!0:($O[e]=!0,!1)}function Tq(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Eq(e,t,r,i){if(t===null||typeof t=="undefined"||Tq(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vi(e,t,r,i,n,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var vi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vi[e]=new Vi(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vi[t]=new Vi(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){vi[e]=new Vi(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vi[e]=new Vi(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vi[e]=new Vi(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){vi[e]=new Vi(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){vi[e]=new Vi(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){vi[e]=new Vi(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){vi[e]=new Vi(e,5,!1,e.toLowerCase(),null,!1,!1)});var a2=/[\-:]([a-z])/g;function l2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(a2,l2);vi[t]=new Vi(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(a2,l2);vi[t]=new Vi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(a2,l2);vi[t]=new Vi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){vi[e]=new Vi(e,1,!1,e.toLowerCase(),null,!1,!1)}),vi.xlinkHref=new Vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){vi[e]=new Vi(e,1,!1,e.toLowerCase(),null,!0,!0)});function c2(e,t,r,i){var n=vi.hasOwnProperty(t)?vi[t]:null,o=n!==null?n.type===0:i?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");o||(Eq(t,r,n,i)&&(r=null),i||n===null?kq(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Kl=Jv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tf=60103,Zl=60106,Ba=60107,u2=60108,Ef=60114,h2=60109,d2=60110,ey=60112,Df=60113,ty=60120,ry=60115,f2=60116,p2=60121,m2=60128,LO=60129,g2=60130,v2=60131;if(typeof Symbol=="function"&&Symbol.for){var ui=Symbol.for;Tf=ui("react.element"),Zl=ui("react.portal"),Ba=ui("react.fragment"),u2=ui("react.strict_mode"),Ef=ui("react.profiler"),h2=ui("react.provider"),d2=ui("react.context"),ey=ui("react.forward_ref"),Df=ui("react.suspense"),ty=ui("react.suspense_list"),ry=ui("react.memo"),f2=ui("react.lazy"),p2=ui("react.block"),ui("react.scope"),m2=ui("react.opaque.id"),LO=ui("react.debug_trace_mode"),g2=ui("react.offscreen"),v2=ui("react.legacy_hidden")}var UO=typeof Symbol=="function"&&Symbol.iterator;function If(e){return e===null||typeof e!="object"?null:(e=UO&&e[UO]||e["@@iterator"],typeof e=="function"?e:null)}var y2;function Rf(e){if(y2===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);y2=t&&t[1]||""}return`
`+y2+e}var _2=!1;function iy(e,t){if(!e||_2)return"";_2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var i=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){i=l}e.call(t.prototype)}else{try{throw Error()}catch(l){i=l}e()}}catch(l){if(l&&i&&typeof l.stack=="string"){for(var n=l.stack.split(`
`),o=i.stack.split(`
`),s=n.length-1,a=o.length-1;1<=s&&0<=a&&n[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(n[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||n[s]!==o[a])return`
`+n[s].replace(" at new "," at ");while(1<=s&&0<=a);break}}}finally{_2=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Rf(e):""}function Dq(e){switch(e.tag){case 5:return Rf(e.type);case 16:return Rf("Lazy");case 13:return Rf("Suspense");case 19:return Rf("SuspenseList");case 0:case 2:case 15:return e=iy(e.type,!1),e;case 11:return e=iy(e.type.render,!1),e;case 22:return e=iy(e.type._render,!1),e;case 1:return e=iy(e.type,!0),e;default:return""}}function Vu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ba:return"Fragment";case Zl:return"Portal";case Ef:return"Profiler";case u2:return"StrictMode";case Df:return"Suspense";case ty:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case d2:return(e.displayName||"Context")+".Consumer";case h2:return(e._context.displayName||"Context")+".Provider";case ey:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case ry:return Vu(e.type);case p2:return Vu(e._render);case f2:t=e._payload,e=e._init;try{return Vu(e(t))}catch{}}return null}function La(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function NO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Iq(e){var t=NO(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ny(e){e._valueTracker||(e._valueTracker=Iq(e))}function jO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=NO(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function oy(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function b2(e,t){var r=t.checked;return Sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function HO(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=La(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WO(e,t){t=t.checked,t!=null&&c2(e,"checked",t,!1)}function x2(e,t){WO(e,t);var r=La(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?w2(e,t.type,r):t.hasOwnProperty("defaultValue")&&w2(e,t.type,La(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function VO(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function w2(e,t,r){(t!=="number"||oy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Rq(e){var t="";return Jv.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function S2(e,t){return e=Sr({children:void 0},t),(t=Rq(t.children))&&(e.children=t),e}function Gu(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+La(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function C2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Sr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function GO(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ke(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(ke(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:La(r)}}function qO(e,t){var r=La(t.value),i=La(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function XO(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var k2={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function YO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function T2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?YO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sy,QO=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!==k2.svg||"innerHTML"in e)e.innerHTML=t;else{for(sy=sy||document.createElement("div"),sy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ff(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Of={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fq=["Webkit","ms","Moz","O"];Object.keys(Of).forEach(function(e){Fq.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Of[t]=Of[e]})});function KO(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Of.hasOwnProperty(e)&&Of[e]?(""+t).trim():t+"px"}function ZO(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=KO(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var Oq=Sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E2(e,t){if(t){if(Oq[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function D2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function I2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var R2=null,qu=null,Xu=null;function JO(e){if(e=Kf(e)){if(typeof R2!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=Cy(t),R2(e.stateNode,e.type,t))}}function eM(e){qu?Xu?Xu.push(e):Xu=[e]:qu=e}function tM(){if(qu){var e=qu,t=Xu;if(Xu=qu=null,JO(e),t)for(e=0;e<t.length;e++)JO(t[e])}}function F2(e,t){return e(t)}function rM(e,t,r,i,n){return e(t,r,i,n)}function O2(){}var iM=F2,Jl=!1,M2=!1;function P2(){(qu!==null||Xu!==null)&&(O2(),tM())}function Mq(e,t,r){if(M2)return e(t,r);M2=!0;try{return iM(e,t,r)}finally{M2=!1,P2()}}function Mf(e,t){var r=e.stateNode;if(r===null)return null;var i=Cy(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ke(231,t,typeof r));return r}var A2=!1;if($s)try{var Pf={};Object.defineProperty(Pf,"passive",{get:function(){A2=!0}}),window.addEventListener("test",Pf,Pf),window.removeEventListener("test",Pf,Pf)}catch{A2=!1}function Pq(e,t,r,i,n,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var Af=!1,ay=null,ly=!1,z2=null,Aq={onError:function(e){Af=!0,ay=e}};function zq(e,t,r,i,n,o,s,a,l){Af=!1,ay=null,Pq.apply(Aq,arguments)}function $q(e,t,r,i,n,o,s,a,l){if(zq.apply(this,arguments),Af){if(Af){var c=ay;Af=!1,ay=null}else throw Error(ke(198));ly||(ly=!0,z2=c)}}function ec(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function nM(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oM(e){if(ec(e)!==e)throw Error(ke(188))}function Bq(e){var t=e.alternate;if(!t){if(t=ec(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var o=n.alternate;if(o===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===r)return oM(n),e;if(o===i)return oM(n),t;o=o.sibling}throw Error(ke(188))}if(r.return!==i.return)r=n,i=o;else{for(var s=!1,a=n.child;a;){if(a===r){s=!0,r=n,i=o;break}if(a===i){s=!0,i=n,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,i=n;break}if(a===i){s=!0,i=o,r=n;break}a=a.sibling}if(!s)throw Error(ke(189))}}if(r.alternate!==i)throw Error(ke(190))}if(r.tag!==3)throw Error(ke(188));return r.stateNode.current===r?e:t}function sM(e){if(e=Bq(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function aM(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var lM,$2,cM,uM,B2=!1,Qo=[],Ua=null,Na=null,ja=null,zf=new Map,$f=new Map,Bf=[],hM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L2(e,t,r,i,n){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:n,targetContainers:[i]}}function dM(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":zf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$f.delete(t.pointerId)}}function Lf(e,t,r,i,n,o){return e===null||e.nativeEvent!==o?(e=L2(t,r,i,n,o),t!==null&&(t=Kf(t),t!==null&&$2(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Lq(e,t,r,i,n){switch(t){case"focusin":return Ua=Lf(Ua,e,t,r,i,n),!0;case"dragenter":return Na=Lf(Na,e,t,r,i,n),!0;case"mouseover":return ja=Lf(ja,e,t,r,i,n),!0;case"pointerover":var o=n.pointerId;return zf.set(o,Lf(zf.get(o)||null,e,t,r,i,n)),!0;case"gotpointercapture":return o=n.pointerId,$f.set(o,Lf($f.get(o)||null,e,t,r,i,n)),!0}return!1}function Uq(e){var t=tc(e.target);if(t!==null){var r=ec(t);if(r!==null){if(t=r.tag,t===13){if(t=nM(r),t!==null){e.blockedOn=t,uM(e.lanePriority,function(){ci.unstable_runWithPriority(e.priority,function(){cM(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=V2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=Kf(r),t!==null&&$2(t),e.blockedOn=r,!1;t.shift()}return!0}function fM(e,t,r){cy(e)&&r.delete(t)}function Nq(){for(B2=!1;0<Qo.length;){var e=Qo[0];if(e.blockedOn!==null){e=Kf(e.blockedOn),e!==null&&lM(e);break}for(var t=e.targetContainers;0<t.length;){var r=V2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&Qo.shift()}Ua!==null&&cy(Ua)&&(Ua=null),Na!==null&&cy(Na)&&(Na=null),ja!==null&&cy(ja)&&(ja=null),zf.forEach(fM),$f.forEach(fM)}function Uf(e,t){e.blockedOn===t&&(e.blockedOn=null,B2||(B2=!0,ci.unstable_scheduleCallback(ci.unstable_NormalPriority,Nq)))}function pM(e){function t(n){return Uf(n,e)}if(0<Qo.length){Uf(Qo[0],e);for(var r=1;r<Qo.length;r++){var i=Qo[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Ua!==null&&Uf(Ua,e),Na!==null&&Uf(Na,e),ja!==null&&Uf(ja,e),zf.forEach(t),$f.forEach(t),r=0;r<Bf.length;r++)i=Bf[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Bf.length&&(r=Bf[0],r.blockedOn===null);)Uq(r),r.blockedOn===null&&Bf.shift()}function uy(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Yu={animationend:uy("Animation","AnimationEnd"),animationiteration:uy("Animation","AnimationIteration"),animationstart:uy("Animation","AnimationStart"),transitionend:uy("Transition","TransitionEnd")},U2={},mM={};$s&&(mM=document.createElement("div").style,"AnimationEvent"in window||(delete Yu.animationend.animation,delete Yu.animationiteration.animation,delete Yu.animationstart.animation),"TransitionEvent"in window||delete Yu.transitionend.transition);function hy(e){if(U2[e])return U2[e];if(!Yu[e])return e;var t=Yu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in mM)return U2[e]=t[r];return e}var gM=hy("animationend"),vM=hy("animationiteration"),yM=hy("animationstart"),_M=hy("transitionend"),bM=new Map,N2=new Map,jq=["abort","abort",gM,"animationEnd",vM,"animationIteration",yM,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",_M,"transitionEnd","waiting","waiting"];function j2(e,t){for(var r=0;r<e.length;r+=2){var i=e[r],n=e[r+1];n="on"+(n[0].toUpperCase()+n.slice(1)),N2.set(i,t),bM.set(i,n),Ql(n,[i])}}var Hq=ci.unstable_now;Hq();var or=8;function Qu(e){if((1&e)!==0)return or=15,1;if((2&e)!==0)return or=14,2;if((4&e)!==0)return or=13,4;var t=24&e;return t!==0?(or=12,t):(e&32)!==0?(or=11,32):(t=192&e,t!==0?(or=10,t):(e&256)!==0?(or=9,256):(t=3584&e,t!==0?(or=8,t):(e&4096)!==0?(or=7,4096):(t=4186112&e,t!==0?(or=6,t):(t=62914560&e,t!==0?(or=5,t):e&67108864?(or=4,67108864):(e&134217728)!==0?(or=3,134217728):(t=805306368&e,t!==0?(or=2,t):(1073741824&e)!==0?(or=1,1073741824):(or=8,e))))))}function Wq(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Vq(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(ke(358,e))}}function Nf(e,t){var r=e.pendingLanes;if(r===0)return or=0;var i=0,n=0,o=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(o!==0)i=o,n=or=15;else if(o=r&134217727,o!==0){var l=o&~s;l!==0?(i=Qu(l),n=or):(a&=o,a!==0&&(i=Qu(a),n=or))}else o=r&~s,o!==0?(i=Qu(o),n=or):a!==0&&(i=Qu(a),n=or);if(i===0)return 0;if(i=31-Ha(i),i=r&((0>i?0:1<<i)<<1)-1,t!==0&&t!==i&&(t&s)===0){if(Qu(t),n<=or)return t;or=n}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Ha(t),n=1<<r,i|=e[r],t&=~n;return i}function xM(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dy(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Ku(24&~t),e===0?dy(10,t):e;case 10:return e=Ku(192&~t),e===0?dy(8,t):e;case 8:return e=Ku(3584&~t),e===0&&(e=Ku(4186112&~t),e===0&&(e=512)),e;case 2:return t=Ku(805306368&~t),t===0&&(t=268435456),t}throw Error(ke(358,e))}function Ku(e){return e&-e}function H2(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fy(e,t,r){e.pendingLanes|=t;var i=t-1;e.suspendedLanes&=i,e.pingedLanes&=i,e=e.eventTimes,t=31-Ha(t),e[t]=r}var Ha=Math.clz32?Math.clz32:Xq,Gq=Math.log,qq=Math.LN2;function Xq(e){return e===0?32:31-(Gq(e)/qq|0)|0}var Yq=ci.unstable_UserBlockingPriority,Qq=ci.unstable_runWithPriority,py=!0;function Kq(e,t,r,i){Jl||O2();var n=W2,o=Jl;Jl=!0;try{rM(n,e,t,r,i)}finally{(Jl=o)||P2()}}function Zq(e,t,r,i){Qq(Yq,W2.bind(null,e,t,r,i))}function W2(e,t,r,i){if(py){var n;if((n=(t&4)===0)&&0<Qo.length&&-1<hM.indexOf(e))e=L2(null,e,t,r,i),Qo.push(e);else{var o=V2(e,t,r,i);if(o===null)n&&dM(e,i);else{if(n){if(-1<hM.indexOf(e)){e=L2(o,e,t,r,i),Qo.push(e);return}if(Lq(o,e,t,r,i))return;dM(e,i)}KM(e,t,i,null,r)}}}}function V2(e,t,r,i){var n=I2(i);if(n=tc(n),n!==null){var o=ec(n);if(o===null)n=null;else{var s=o.tag;if(s===13){if(n=nM(o),n!==null)return n;n=null}else if(s===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return KM(e,t,i,n,r),null}var Wa=null,G2=null,my=null;function wM(){if(my)return my;var e,t=G2,r=t.length,i,n="value"in Wa?Wa.value:Wa.textContent,o=n.length;for(e=0;e<r&&t[e]===n[e];e++);var s=r-e;for(i=1;i<=s&&t[r-i]===n[o-i];i++);return my=n.slice(e,1<i?1-i:void 0)}function gy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vy(){return!0}function SM(){return!1}function bn(e){function t(r,i,n,o,s){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?vy:SM,this.isPropagationStopped=SM,this}return Sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vy)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vy)},persist:function(){},isPersistent:vy}),t}var Zu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q2=bn(Zu),jf=Sr({},Zu,{view:0,detail:0}),Jq=bn(jf),X2,Y2,Hf,yy=Sr({},jf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hf&&(Hf&&e.type==="mousemove"?(X2=e.screenX-Hf.screenX,Y2=e.screenY-Hf.screenY):Y2=X2=0,Hf=e),X2)},movementY:function(e){return"movementY"in e?e.movementY:Y2}}),CM=bn(yy),eX=Sr({},yy,{dataTransfer:0}),tX=bn(eX),rX=Sr({},jf,{relatedTarget:0}),Q2=bn(rX),iX=Sr({},Zu,{animationName:0,elapsedTime:0,pseudoElement:0}),nX=bn(iX),oX=Sr({},Zu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sX=bn(oX),aX=Sr({},Zu,{data:0}),kM=bn(aX),lX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hX(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uX[e])?!!t[e]:!1}function K2(){return hX}var dX=Sr({},jf,{key:function(e){if(e.key){var t=lX[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cX[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K2,charCode:function(e){return e.type==="keypress"?gy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fX=bn(dX),pX=Sr({},yy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TM=bn(pX),mX=Sr({},jf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K2}),gX=bn(mX),vX=Sr({},Zu,{propertyName:0,elapsedTime:0,pseudoElement:0}),yX=bn(vX),_X=Sr({},yy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bX=bn(_X),xX=[9,13,27,32],Z2=$s&&"CompositionEvent"in window,Wf=null;$s&&"documentMode"in document&&(Wf=document.documentMode);var wX=$s&&"TextEvent"in window&&!Wf,EM=$s&&(!Z2||Wf&&8<Wf&&11>=Wf),DM=String.fromCharCode(32),IM=!1;function RM(e,t){switch(e){case"keyup":return xX.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ju=!1;function SX(e,t){switch(e){case"compositionend":return FM(t);case"keypress":return t.which!==32?null:(IM=!0,DM);case"textInput":return e=t.data,e===DM&&IM?null:e;default:return null}}function CX(e,t){if(Ju)return e==="compositionend"||!Z2&&RM(e,t)?(e=wM(),my=G2=Wa=null,Ju=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return EM&&t.locale!=="ko"?null:t.data;default:return null}}var kX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kX[e.type]:t==="textarea"}function MM(e,t,r,i){eM(i),t=by(t,"onChange"),0<t.length&&(r=new q2("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Vf=null,Gf=null;function TX(e){GM(e,0)}function _y(e){var t=nh(e);if(jO(t))return e}function EX(e,t){if(e==="change")return t}var PM=!1;if($s){var J2;if($s){var eS="oninput"in document;if(!eS){var AM=document.createElement("div");AM.setAttribute("oninput","return;"),eS=typeof AM.oninput=="function"}J2=eS}else J2=!1;PM=J2&&(!document.documentMode||9<document.documentMode)}function zM(){Vf&&(Vf.detachEvent("onpropertychange",$M),Gf=Vf=null)}function $M(e){if(e.propertyName==="value"&&_y(Gf)){var t=[];if(MM(t,Gf,e,I2(e)),e=TX,Jl)e(t);else{Jl=!0;try{F2(e,t)}finally{Jl=!1,P2()}}}}function DX(e,t,r){e==="focusin"?(zM(),Vf=t,Gf=r,Vf.attachEvent("onpropertychange",$M)):e==="focusout"&&zM()}function IX(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _y(Gf)}function RX(e,t){if(e==="click")return _y(t)}function FX(e,t){if(e==="input"||e==="change")return _y(t)}function OX(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hn=typeof Object.is=="function"?Object.is:OX,MX=Object.prototype.hasOwnProperty;function qf(e,t){if(Hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++)if(!MX.call(t,r[i])||!Hn(e[r[i]],t[r[i]]))return!1;return!0}function BM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function LM(e,t){var r=BM(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=BM(r)}}function UM(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UM(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function NM(){for(var e=window,t=oy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=oy(e.document)}return t}function tS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var PX=$s&&"documentMode"in document&&11>=document.documentMode,eh=null,rS=null,Xf=null,iS=!1;function jM(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;iS||eh==null||eh!==oy(i)||(i=eh,"selectionStart"in i&&tS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xf&&qf(Xf,i)||(Xf=i,i=by(rS,"onSelect"),0<i.length&&(t=new q2("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=eh)))}j2("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),j2("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),j2(jq,2);for(var HM="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),nS=0;nS<HM.length;nS++)N2.set(HM[nS],0);Wu("onMouseEnter",["mouseout","mouseover"]),Wu("onMouseLeave",["mouseout","mouseover"]),Wu("onPointerEnter",["pointerout","pointerover"]),Wu("onPointerLeave",["pointerout","pointerover"]),Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yf));function VM(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,$q(i,t,void 0,e),e.currentTarget=null}function GM(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&n.isPropagationStopped())break e;VM(n,a,c),o=l}else for(s=0;s<i.length;s++){if(a=i[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&n.isPropagationStopped())break e;VM(n,a,c),o=l}}}if(ly)throw e=z2,ly=!1,z2=null,e}function pr(e,t){var r=i8(t),i=e+"__bubble";r.has(i)||(QM(t,e,2,!1),r.add(i))}var qM="_reactListening"+Math.random().toString(36).slice(2);function XM(e){e[qM]||(e[qM]=!0,AO.forEach(function(t){WM.has(t)||YM(t,!1,e,null),YM(t,!0,e,null)}))}function YM(e,t,r,i){var n=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=r;if(e==="selectionchange"&&r.nodeType!==9&&(o=r.ownerDocument),i!==null&&!t&&WM.has(e)){if(e!=="scroll")return;n|=2,o=i}var s=i8(o),a=e+"__"+(t?"capture":"bubble");s.has(a)||(t&&(n|=4),QM(o,e,n,t),s.add(a))}function QM(e,t,r,i){var n=N2.get(t);switch(n===void 0?2:n){case 0:n=Kq;break;case 1:n=Zq;break;default:n=W2}r=n.bind(null,t,r,e),n=void 0,!A2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function KM(e,t,r,i,n){var o=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;s=s.return}for(;a!==null;){if(s=tc(a),s===null)return;if(l=s.tag,l===5||l===6){i=o=s;continue e}a=a.parentNode}}i=i.return}Mq(function(){var c=o,h=I2(r),f=[];e:{var d=bM.get(e);if(d!==void 0){var p=q2,v=e;switch(e){case"keypress":if(gy(r)===0)break e;case"keydown":case"keyup":p=fX;break;case"focusin":v="focus",p=Q2;break;case"focusout":v="blur",p=Q2;break;case"beforeblur":case"afterblur":p=Q2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=CM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=tX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=gX;break;case gM:case vM:case yM:p=nX;break;case _M:p=yX;break;case"scroll":p=Jq;break;case"wheel":p=bX;break;case"copy":case"cut":case"paste":p=sX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=TM}var g=(t&4)!==0,m=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var _=c,b;_!==null;){b=_;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=Mf(_,y),w!=null&&g.push(Qf(_,w,b)))),m)break;_=_.return}0<g.length&&(d=new p(d,v,null,r,h),f.push({event:d,listeners:g}))}}if((t&7)===0){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&(t&16)===0&&(v=r.relatedTarget||r.fromElement)&&(tc(v)||v[ih]))break e;if((p||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=c,v=v?tc(v):null,v!==null&&(m=ec(v),v!==m||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(g=CM,w="onMouseLeave",y="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(g=TM,w="onPointerLeave",y="onPointerEnter",_="pointer"),m=p==null?d:nh(p),b=v==null?d:nh(v),d=new g(w,_+"leave",p,r,h),d.target=m,d.relatedTarget=b,w=null,tc(h)===c&&(g=new g(y,_+"enter",v,r,h),g.target=b,g.relatedTarget=m,w=g),m=w,p&&v)t:{for(g=p,y=v,_=0,b=g;b;b=th(b))_++;for(b=0,w=y;w;w=th(w))b++;for(;0<_-b;)g=th(g),_--;for(;0<b-_;)y=th(y),b--;for(;_--;){if(g===y||y!==null&&g===y.alternate)break t;g=th(g),y=th(y)}g=null}else g=null;p!==null&&ZM(f,d,p,g,!1),v!==null&&m!==null&&ZM(f,m,v,g,!0)}}e:{if(d=c?nh(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var S=EX;else if(OM(d))if(PM)S=FX;else{S=IX;var C=DX}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=RX);if(S&&(S=S(e,c))){MM(f,S,r,h);break e}C&&C(e,d,c),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&w2(d,"number",d.value)}switch(C=c?nh(c):window,e){case"focusin":(OM(C)||C.contentEditable==="true")&&(eh=C,rS=c,Xf=null);break;case"focusout":Xf=rS=eh=null;break;case"mousedown":iS=!0;break;case"contextmenu":case"mouseup":case"dragend":iS=!1,jM(f,r,h);break;case"selectionchange":if(PX)break;case"keydown":case"keyup":jM(f,r,h)}var D;if(Z2)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ju?RM(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(EM&&r.locale!=="ko"&&(Ju||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ju&&(D=wM()):(Wa=h,G2="value"in Wa?Wa.value:Wa.textContent,Ju=!0)),C=by(c,E),0<C.length&&(E=new kM(E,e,null,r,h),f.push({event:E,listeners:C}),D?E.data=D:(D=FM(r),D!==null&&(E.data=D)))),(D=wX?SX(e,r):CX(e,r))&&(c=by(c,"onBeforeInput"),0<c.length&&(h=new kM("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=D))}GM(f,t)})}function Qf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function by(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=Mf(e,r),o!=null&&i.unshift(Qf(e,o,n)),o=Mf(e,t),o!=null&&i.push(Qf(e,o,n))),e=e.return}return i}function th(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ZM(e,t,r,i,n){for(var o=t._reactName,s=[];r!==null&&r!==i;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,n?(l=Mf(r,o),l!=null&&s.unshift(Qf(r,l,a))):n||(l=Mf(r,o),l!=null&&s.push(Qf(r,l,a)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}function xy(){}var oS=null,sS=null;function JM(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function aS(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var e8=typeof setTimeout=="function"?setTimeout:void 0,AX=typeof clearTimeout=="function"?clearTimeout:void 0;function lS(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function rh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function t8(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cS=0;function zX(e){return{$$typeof:m2,toString:e,valueOf:e}}var wy=Math.random().toString(36).slice(2),Va="__reactFiber$"+wy,Sy="__reactProps$"+wy,ih="__reactContainer$"+wy,r8="__reactEvents$"+wy;function tc(e){var t=e[Va];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ih]||r[Va]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=t8(e);e!==null;){if(r=e[Va])return r;e=t8(e)}return t}e=r,r=e.parentNode}return null}function Kf(e){return e=e[Va]||e[ih],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function Cy(e){return e[Sy]||null}function i8(e){var t=e[r8];return t===void 0&&(t=e[r8]=new Set),t}var uS=[],oh=-1;function Ga(e){return{current:e}}function mr(e){0>oh||(e.current=uS[oh],uS[oh]=null,oh--)}function Mr(e,t){oh++,uS[oh]=e.current,e.current=t}var qa={},Ri=Ga(qa),sn=Ga(!1),rc=qa;function sh(e,t){var r=e.type.contextTypes;if(!r)return qa;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in r)n[o]=t[o];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function an(e){return e=e.childContextTypes,e!=null}function ky(){mr(sn),mr(Ri)}function n8(e,t,r){if(Ri.current!==qa)throw Error(ke(168));Mr(Ri,t),Mr(sn,r)}function o8(e,t,r){var i=e.stateNode;if(e=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in e))throw Error(ke(108,Vu(t)||"Unknown",n));return Sr({},r,i)}function Ty(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qa,rc=Ri.current,Mr(Ri,e),Mr(sn,sn.current),!0}function s8(e,t,r){var i=e.stateNode;if(!i)throw Error(ke(169));r?(e=o8(e,t,rc),i.__reactInternalMemoizedMergedChildContext=e,mr(sn),mr(Ri),Mr(Ri,e)):mr(sn),Mr(sn,r)}var hS=null,ic=null,$X=ci.unstable_runWithPriority,dS=ci.unstable_scheduleCallback,fS=ci.unstable_cancelCallback,BX=ci.unstable_shouldYield,a8=ci.unstable_requestPaint,pS=ci.unstable_now,LX=ci.unstable_getCurrentPriorityLevel,Ey=ci.unstable_ImmediatePriority,l8=ci.unstable_UserBlockingPriority,c8=ci.unstable_NormalPriority,u8=ci.unstable_LowPriority,h8=ci.unstable_IdlePriority,mS={},UX=a8!==void 0?a8:function(){},Bs=null,Dy=null,gS=!1,d8=pS(),Fi=1e4>d8?pS:function(){return pS()-d8};function ah(){switch(LX()){case Ey:return 99;case l8:return 98;case c8:return 97;case u8:return 96;case h8:return 95;default:throw Error(ke(332))}}function f8(e){switch(e){case 99:return Ey;case 98:return l8;case 97:return c8;case 96:return u8;case 95:return h8;default:throw Error(ke(332))}}function nc(e,t){return e=f8(e),$X(e,t)}function Zf(e,t,r){return e=f8(e),dS(e,t,r)}function Ko(){if(Dy!==null){var e=Dy;Dy=null,fS(e)}p8()}function p8(){if(!gS&&Bs!==null){gS=!0;var e=0;try{var t=Bs;nc(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),Bs=null}catch(r){throw Bs!==null&&(Bs=Bs.slice(e+1)),dS(Ey,Ko),r}finally{gS=!1}}}var NX=Kl.ReactCurrentBatchConfig;function fo(e,t){if(e&&e.defaultProps){t=Sr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Iy=Ga(null),Ry=null,lh=null,Fy=null;function vS(){Fy=lh=Ry=null}function yS(e){var t=Iy.current;mr(Iy),e.type._context._currentValue=t}function m8(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function ch(e,t){Ry=e,Fy=lh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(po=!0),e.firstContext=null)}function Wn(e,t){if(Fy!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Fy=e,t=1073741823),t={context:e,observedBits:t,next:null},lh===null){if(Ry===null)throw Error(ke(308));lh=t,Ry.dependencies={lanes:0,firstContext:t,responders:null}}else lh=lh.next=t;return e._currentValue}var Xa=!1;function _S(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function g8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ya(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qa(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function v8(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?n=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?n=o=t:o=o.next=t}else n=o=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Jf(e,t,r,i){var n=e.updateQueue;Xa=!1;var o=n.firstBaseUpdate,s=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var h=e.alternate;if(h!==null){h=h.updateQueue;var f=h.lastBaseUpdate;f!==s&&(f===null?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=l)}}if(o!==null){f=n.baseState,s=0,h=c=l=null;do{a=o.lane;var d=o.eventTime;if((i&a)===a){h!==null&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(a=t,d=r,v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(d,f,a);break e}f=p;break e;case 3:p.flags=p.flags&-4097|64;case 0:if(p=v.payload,a=typeof p=="function"?p.call(d,f,a):p,a==null)break e;f=Sr({},f,a);break e;case 2:Xa=!0}}o.callback!==null&&(e.flags|=32,a=n.effects,a===null?n.effects=[o]:a.push(o))}else d={eventTime:d,lane:a,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=d,l=f):h=h.next=d,s|=a;if(o=o.next,o===null){if(a=n.shared.pending,a===null)break;o=a.next,a.next=null,n.lastBaseUpdate=a,n.shared.pending=null}}while(1);h===null&&(l=f),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,hp|=s,e.lanes=s,e.memoizedState=f}}function y8(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(ke(191,n));n.call(i)}}}var _8=new Jv.Component().refs;function Oy(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Sr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var My={isMounted:function(e){return(e=e._reactInternals)?ec(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=xn(),n=Ja(e),o=Ya(i,n);o.payload=t,r!=null&&(o.callback=r),Qa(e,o),el(e,n,i)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=xn(),n=Ja(e),o=Ya(i,n);o.tag=1,o.payload=t,r!=null&&(o.callback=r),Qa(e,o),el(e,n,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xn(),i=Ja(e),n=Ya(r,i);n.tag=2,t!=null&&(n.callback=t),Qa(e,n),el(e,i,r)}};function b8(e,t,r,i,n,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,s):t.prototype&&t.prototype.isPureReactComponent?!qf(r,i)||!qf(n,o):!0}function x8(e,t,r){var i=!1,n=qa,o=t.contextType;return typeof o=="object"&&o!==null?o=Wn(o):(n=an(t)?rc:Ri.current,i=t.contextTypes,o=(i=i!=null)?sh(e,n):qa),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=My,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),t}function w8(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&My.enqueueReplaceState(t,t.state,null)}function bS(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=_8,_S(e);var o=t.contextType;typeof o=="object"&&o!==null?n.context=Wn(o):(o=an(t)?rc:Ri.current,n.context=sh(e,o)),Jf(e,r,n,i),n.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Oy(e,t,o,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&My.enqueueReplaceState(n,n.state,null),Jf(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4)}var Py=Array.isArray;function ep(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ke(309));var i=r.stateNode}if(!i)throw Error(ke(147,e));var n=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===n?t.ref:(t=function(o){var s=i.refs;s===_8&&(s=i.refs={}),o===null?delete s[n]:s[n]=o},t._stringRef=n,t)}if(typeof e!="string")throw Error(ke(284));if(!r._owner)throw Error(ke(290,e))}return e}function Ay(e,t){if(e.type!=="textarea")throw Error(ke(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function S8(e){function t(m,y){if(e){var _=m.lastEffect;_!==null?(_.nextEffect=y,m.lastEffect=y):m.firstEffect=m.lastEffect=y,y.nextEffect=null,y.flags=8}}function r(m,y){if(!e)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function n(m,y){return m=il(m,y),m.index=0,m.sibling=null,m}function o(m,y,_){return m.index=_,e?(_=m.alternate,_!==null?(_=_.index,_<y?(m.flags=2,y):_):(m.flags=2,y)):y}function s(m){return e&&m.alternate===null&&(m.flags=2),m}function a(m,y,_,b){return y===null||y.tag!==6?(y=rC(_,m.mode,b),y.return=m,y):(y=n(y,_),y.return=m,y)}function l(m,y,_,b){return y!==null&&y.elementType===_.type?(b=n(y,_.props),b.ref=ep(m,y,_),b.return=m,b):(b=Jy(_.type,_.key,_.props,null,m.mode,b),b.ref=ep(m,y,_),b.return=m,b)}function c(m,y,_,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=iC(_,m.mode,b),y.return=m,y):(y=n(y,_.children||[]),y.return=m,y)}function h(m,y,_,b,w){return y===null||y.tag!==7?(y=vh(_,m.mode,b,w),y.return=m,y):(y=n(y,_),y.return=m,y)}function f(m,y,_){if(typeof y=="string"||typeof y=="number")return y=rC(""+y,m.mode,_),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Tf:return _=Jy(y.type,y.key,y.props,null,m.mode,_),_.ref=ep(m,null,y),_.return=m,_;case Zl:return y=iC(y,m.mode,_),y.return=m,y}if(Py(y)||If(y))return y=vh(y,m.mode,_,null),y.return=m,y;Ay(m,y)}return null}function d(m,y,_,b){var w=y!==null?y.key:null;if(typeof _=="string"||typeof _=="number")return w!==null?null:a(m,y,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tf:return _.key===w?_.type===Ba?h(m,y,_.props.children,b,w):l(m,y,_,b):null;case Zl:return _.key===w?c(m,y,_,b):null}if(Py(_)||If(_))return w!==null?null:h(m,y,_,b,null);Ay(m,_)}return null}function p(m,y,_,b,w){if(typeof b=="string"||typeof b=="number")return m=m.get(_)||null,a(y,m,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Tf:return m=m.get(b.key===null?_:b.key)||null,b.type===Ba?h(y,m,b.props.children,w,b.key):l(y,m,b,w);case Zl:return m=m.get(b.key===null?_:b.key)||null,c(y,m,b,w)}if(Py(b)||If(b))return m=m.get(_)||null,h(y,m,b,w,null);Ay(y,b)}return null}function v(m,y,_,b){for(var w=null,S=null,C=y,D=y=0,E=null;C!==null&&D<_.length;D++){C.index>D?(E=C,C=null):E=C.sibling;var I=d(m,C,_[D],b);if(I===null){C===null&&(C=E);break}e&&C&&I.alternate===null&&t(m,C),y=o(I,y,D),S===null?w=I:S.sibling=I,S=I,C=E}if(D===_.length)return r(m,C),w;if(C===null){for(;D<_.length;D++)C=f(m,_[D],b),C!==null&&(y=o(C,y,D),S===null?w=C:S.sibling=C,S=C);return w}for(C=i(m,C);D<_.length;D++)E=p(C,m,D,_[D],b),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?D:E.key),y=o(E,y,D),S===null?w=E:S.sibling=E,S=E);return e&&C.forEach(function(M){return t(m,M)}),w}function g(m,y,_,b){var w=If(_);if(typeof w!="function")throw Error(ke(150));if(_=w.call(_),_==null)throw Error(ke(151));for(var S=w=null,C=y,D=y=0,E=null,I=_.next();C!==null&&!I.done;D++,I=_.next()){C.index>D?(E=C,C=null):E=C.sibling;var M=d(m,C,I.value,b);if(M===null){C===null&&(C=E);break}e&&C&&M.alternate===null&&t(m,C),y=o(M,y,D),S===null?w=M:S.sibling=M,S=M,C=E}if(I.done)return r(m,C),w;if(C===null){for(;!I.done;D++,I=_.next())I=f(m,I.value,b),I!==null&&(y=o(I,y,D),S===null?w=I:S.sibling=I,S=I);return w}for(C=i(m,C);!I.done;D++,I=_.next())I=p(C,m,D,I.value,b),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?D:I.key),y=o(I,y,D),S===null?w=I:S.sibling=I,S=I);return e&&C.forEach(function(k){return t(m,k)}),w}return function(m,y,_,b){var w=typeof _=="object"&&_!==null&&_.type===Ba&&_.key===null;w&&(_=_.props.children);var S=typeof _=="object"&&_!==null;if(S)switch(_.$$typeof){case Tf:e:{for(S=_.key,w=y;w!==null;){if(w.key===S){switch(w.tag){case 7:if(_.type===Ba){r(m,w.sibling),y=n(w,_.props.children),y.return=m,m=y;break e}break;default:if(w.elementType===_.type){r(m,w.sibling),y=n(w,_.props),y.ref=ep(m,w,_),y.return=m,m=y;break e}}r(m,w);break}else t(m,w);w=w.sibling}_.type===Ba?(y=vh(_.props.children,m.mode,b,_.key),y.return=m,m=y):(b=Jy(_.type,_.key,_.props,null,m.mode,b),b.ref=ep(m,y,_),b.return=m,m=b)}return s(m);case Zl:e:{for(w=_.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){r(m,y.sibling),y=n(y,_.children||[]),y.return=m,m=y;break e}else{r(m,y);break}else t(m,y);y=y.sibling}y=iC(_,m.mode,b),y.return=m,m=y}return s(m)}if(typeof _=="string"||typeof _=="number")return _=""+_,y!==null&&y.tag===6?(r(m,y.sibling),y=n(y,_),y.return=m,m=y):(r(m,y),y=rC(_,m.mode,b),y.return=m,m=y),s(m);if(Py(_))return v(m,y,_,b);if(If(_))return g(m,y,_,b);if(S&&Ay(m,_),typeof _=="undefined"&&!w)switch(m.tag){case 1:case 22:case 0:case 11:case 15:throw Error(ke(152,Vu(m.type)||"Component"))}return r(m,y)}}var zy=S8(!0),C8=S8(!1),tp={},Zo=Ga(tp),rp=Ga(tp),ip=Ga(tp);function oc(e){if(e===tp)throw Error(ke(174));return e}function xS(e,t){switch(Mr(ip,t),Mr(rp,e),Mr(Zo,tp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:T2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=T2(t,e)}mr(Zo),Mr(Zo,t)}function uh(){mr(Zo),mr(rp),mr(ip)}function k8(e){oc(ip.current);var t=oc(Zo.current),r=T2(t,e.type);t!==r&&(Mr(rp,e),Mr(Zo,r))}function wS(e){rp.current===e&&(mr(Zo),mr(rp))}var Pr=Ga(0);function $y(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ls=null,Ka=null,Jo=!1;function T8(e,t){var r=qn(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function E8(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function SS(e){if(Jo){var t=Ka;if(t){var r=t;if(!E8(e,t)){if(t=rh(r.nextSibling),!t||!E8(e,t)){e.flags=e.flags&-1025|2,Jo=!1,Ls=e;return}T8(Ls,r)}Ls=e,Ka=rh(t.firstChild)}else e.flags=e.flags&-1025|2,Jo=!1,Ls=e}}function D8(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ls=e}function By(e){if(e!==Ls)return!1;if(!Jo)return D8(e),Jo=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!aS(t,e.memoizedProps))for(t=Ka;t;)T8(e,t),t=rh(t.nextSibling);if(D8(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ka=rh(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ka=null}}else Ka=Ls?rh(e.stateNode.nextSibling):null;return!0}function CS(){Ka=Ls=null,Jo=!1}var hh=[];function kS(){for(var e=0;e<hh.length;e++)hh[e]._workInProgressVersionPrimary=null;hh.length=0}var np=Kl.ReactCurrentDispatcher,Vn=Kl.ReactCurrentBatchConfig,op=0,Lr=null,Oi=null,yi=null,Ly=!1,sp=!1;function ln(){throw Error(ke(321))}function TS(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Hn(e[r],t[r]))return!1;return!0}function ES(e,t,r,i,n,o){if(op=o,Lr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,np.current=e===null||e.memoizedState===null?HX:WX,e=r(i,n),sp){o=0;do{if(sp=!1,!(25>o))throw Error(ke(301));o+=1,yi=Oi=null,t.updateQueue=null,np.current=VX,e=r(i,n)}while(sp)}if(np.current=Hy,t=Oi!==null&&Oi.next!==null,op=0,yi=Oi=Lr=null,Ly=!1,t)throw Error(ke(300));return e}function sc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?Lr.memoizedState=yi=e:yi=yi.next=e,yi}function ac(){if(Oi===null){var e=Lr.alternate;e=e!==null?e.memoizedState:null}else e=Oi.next;var t=yi===null?Lr.memoizedState:yi.next;if(t!==null)yi=t,Oi=e;else{if(e===null)throw Error(ke(310));Oi=e,e={memoizedState:Oi.memoizedState,baseState:Oi.baseState,baseQueue:Oi.baseQueue,queue:Oi.queue,next:null},yi===null?Lr.memoizedState=yi=e:yi=yi.next=e}return yi}function es(e,t){return typeof t=="function"?t(e):t}function ap(e){var t=ac(),r=t.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=e;var i=Oi,n=i.baseQueue,o=r.pending;if(o!==null){if(n!==null){var s=n.next;n.next=o.next,o.next=s}i.baseQueue=n=o,r.pending=null}if(n!==null){n=n.next,i=i.baseState;var a=s=o=null,l=n;do{var c=l.lane;if((op&c)===c)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),i=l.eagerReducer===e?l.eagerState:e(i,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(s=a=h,o=i):a=a.next=h,Lr.lanes|=c,hp|=c}l=l.next}while(l!==null&&l!==n);a===null?o=i:a.next=s,Hn(i,t.memoizedState)||(po=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=a,r.lastRenderedState=i}return[t.memoizedState,r.dispatch]}function lp(e){var t=ac(),r=t.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,o=t.memoizedState;if(n!==null){r.pending=null;var s=n=n.next;do o=e(o,s.action),s=s.next;while(s!==n);Hn(o,t.memoizedState)||(po=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,i]}function I8(e,t,r){var i=t._getVersion;i=i(t._source);var n=t._workInProgressVersionPrimary;if(n!==null?e=n===i:(e=e.mutableReadLanes,(e=(op&e)===e)&&(t._workInProgressVersionPrimary=i,hh.push(t))),e)return r(t._source);throw hh.push(t),Error(ke(350))}function R8(e,t,r,i){var n=Gi;if(n===null)throw Error(ke(349));var o=t._getVersion,s=o(t._source),a=np.current,l=a.useState(function(){return I8(n,t,r)}),c=l[1],h=l[0];l=yi;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var g=Lr;return e.memoizedState={refs:d,source:t,subscribe:i},a.useEffect(function(){d.getSnapshot=r,d.setSnapshot=c;var m=o(t._source);if(!Hn(s,m)){m=r(t._source),Hn(h,m)||(c(m),m=Ja(g),n.mutableReadLanes|=m&n.pendingLanes),m=n.mutableReadLanes,n.entangledLanes|=m;for(var y=n.entanglements,_=m;0<_;){var b=31-Ha(_),w=1<<b;y[b]|=m,_&=~w}}},[r,t,i]),a.useEffect(function(){return i(t._source,function(){var m=d.getSnapshot,y=d.setSnapshot;try{y(m(t._source));var _=Ja(g);n.mutableReadLanes|=_&n.pendingLanes}catch(b){y(function(){throw b})}})},[t,i]),Hn(p,r)&&Hn(v,t)&&Hn(f,i)||(e={pending:null,dispatch:null,lastRenderedReducer:es,lastRenderedState:h},e.dispatch=c=FS.bind(null,Lr,e),l.queue=e,l.baseQueue=null,h=I8(n,t,r),l.memoizedState=l.baseState=h),h}function F8(e,t,r){var i=ac();return R8(i,e,t,r)}function cp(e){var t=sc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:es,lastRenderedState:e},e=e.dispatch=FS.bind(null,Lr,e),[t.memoizedState,e]}function Uy(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Lr.updateQueue,t===null?(t={lastEffect:null},Lr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function O8(e){var t=sc();return e={current:e},t.memoizedState=e}function Ny(){return ac().memoizedState}function DS(e,t,r,i){var n=sc();Lr.flags|=e,n.memoizedState=Uy(1|t,r,void 0,i===void 0?null:i)}function IS(e,t,r,i){var n=ac();i=i===void 0?null:i;var o=void 0;if(Oi!==null){var s=Oi.memoizedState;if(o=s.destroy,i!==null&&TS(i,s.deps)){Uy(t,r,o,i);return}}Lr.flags|=e,n.memoizedState=Uy(1|t,r,o,i)}function M8(e,t){return DS(516,4,e,t)}function jy(e,t){return IS(516,4,e,t)}function P8(e,t){return IS(4,2,e,t)}function A8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function z8(e,t,r){return r=r!=null?r.concat([e]):null,IS(4,2,A8.bind(null,t,e),r)}function RS(){}function $8(e,t){var r=ac();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&TS(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function B8(e,t){var r=ac();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&TS(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function jX(e,t){var r=ah();nc(98>r?98:r,function(){e(!0)}),nc(97<r?97:r,function(){var i=Vn.transition;Vn.transition=1;try{e(!1),t()}finally{Vn.transition=i}})}function FS(e,t,r){var i=xn(),n=Ja(e),o={lane:n,action:r,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(s===null?o.next=o:(o.next=s.next,s.next=o),t.pending=o,s=e.alternate,e===Lr||s!==null&&s===Lr)sp=Ly=!0;else{if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,r);if(o.eagerReducer=s,o.eagerState=l,Hn(l,a))return}catch{}finally{}el(e,n,i)}}var Hy={readContext:Wn,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useOpaqueIdentifier:ln,unstable_isNewReconciler:!1},HX={readContext:Wn,useCallback:function(e,t){return sc().memoizedState=[e,t===void 0?null:t],e},useContext:Wn,useEffect:M8,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,DS(4,2,A8.bind(null,t,e),r)},useLayoutEffect:function(e,t){return DS(4,2,e,t)},useMemo:function(e,t){var r=sc();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=sc();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=FS.bind(null,Lr,e),[i.memoizedState,e]},useRef:O8,useState:cp,useDebugValue:RS,useDeferredValue:function(e){var t=cp(e),r=t[0],i=t[1];return M8(function(){var n=Vn.transition;Vn.transition=1;try{i(e)}finally{Vn.transition=n}},[e]),r},useTransition:function(){var e=cp(!1),t=e[0];return e=jX.bind(null,e[1]),O8(e),[e,t]},useMutableSource:function(e,t,r){var i=sc();return i.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},R8(i,e,t,r)},useOpaqueIdentifier:function(){if(Jo){var e=!1,t=zX(function(){throw e||(e=!0,r("r:"+(cS++).toString(36))),Error(ke(355))}),r=cp(t)[1];return(Lr.mode&2)===0&&(Lr.flags|=516,Uy(5,function(){r("r:"+(cS++).toString(36))},void 0,null)),t}return t="r:"+(cS++).toString(36),cp(t),t},unstable_isNewReconciler:!1},WX={readContext:Wn,useCallback:$8,useContext:Wn,useEffect:jy,useImperativeHandle:z8,useLayoutEffect:P8,useMemo:B8,useReducer:ap,useRef:Ny,useState:function(){return ap(es)},useDebugValue:RS,useDeferredValue:function(e){var t=ap(es),r=t[0],i=t[1];return jy(function(){var n=Vn.transition;Vn.transition=1;try{i(e)}finally{Vn.transition=n}},[e]),r},useTransition:function(){var e=ap(es)[0];return[Ny().current,e]},useMutableSource:F8,useOpaqueIdentifier:function(){return ap(es)[0]},unstable_isNewReconciler:!1},VX={readContext:Wn,useCallback:$8,useContext:Wn,useEffect:jy,useImperativeHandle:z8,useLayoutEffect:P8,useMemo:B8,useReducer:lp,useRef:Ny,useState:function(){return lp(es)},useDebugValue:RS,useDeferredValue:function(e){var t=lp(es),r=t[0],i=t[1];return jy(function(){var n=Vn.transition;Vn.transition=1;try{i(e)}finally{Vn.transition=n}},[e]),r},useTransition:function(){var e=lp(es)[0];return[Ny().current,e]},useMutableSource:F8,useOpaqueIdentifier:function(){return lp(es)[0]},unstable_isNewReconciler:!1},GX=Kl.ReactCurrentOwner,po=!1;function cn(e,t,r,i){t.child=e===null?C8(t,null,r,i):zy(t,e.child,r,i)}function L8(e,t,r,i,n){r=r.render;var o=t.ref;return ch(t,n),i=ES(e,t,r,i,o,n),e!==null&&!po?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,Us(e,t,n)):(t.flags|=1,cn(e,t,i,n),t.child)}function U8(e,t,r,i,n,o){if(e===null){var s=r.type;return typeof s=="function"&&!eC(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,N8(e,t,s,i,n,o)):(e=Jy(r.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}return s=e.child,(n&o)===0&&(n=s.memoizedProps,r=r.compare,r=r!==null?r:qf,r(n,i)&&e.ref===t.ref)?Us(e,t,o):(t.flags|=1,e=il(s,i),e.ref=t.ref,e.return=t,t.child=e)}function N8(e,t,r,i,n,o){if(e!==null&&qf(e.memoizedProps,i)&&e.ref===t.ref)if(po=!1,(o&n)!==0)(e.flags&16384)!==0&&(po=!0);else return t.lanes=e.lanes,Us(e,t,o);return MS(e,t,r,i,o)}function OS(e,t,r){var i=t.pendingProps,n=i.children,o=e!==null?e.memoizedState:null;if(i.mode==="hidden"||i.mode==="unstable-defer-without-hiding")if((t.mode&4)===0)t.memoizedState={baseLanes:0},Zy(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},Zy(t,o!==null?o.baseLanes:r);else return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Zy(t,e),null;else o!==null?(i=o.baseLanes|r,t.memoizedState=null):i=r,Zy(t,i);return cn(e,t,n,r),t.child}function j8(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function MS(e,t,r,i,n){var o=an(r)?rc:Ri.current;return o=sh(t,o),ch(t,n),r=ES(e,t,r,i,o,n),e!==null&&!po?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,Us(e,t,n)):(t.flags|=1,cn(e,t,r,n),t.child)}function H8(e,t,r,i,n){if(an(r)){var o=!0;Ty(t)}else o=!1;if(ch(t,n),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),x8(t,r,i),bS(t,r,i,n),i=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=Wn(c):(c=an(r)?rc:Ri.current,c=sh(t,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==i||l!==c)&&w8(t,s,i,c),Xa=!1;var d=t.memoizedState;s.state=d,Jf(t,i,s,n),l=t.memoizedState,a!==i||d!==l||sn.current||Xa?(typeof h=="function"&&(Oy(t,r,h,i),l=t.memoizedState),(a=Xa||b8(t,r,a,i,d,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4)):(typeof s.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):(typeof s.componentDidMount=="function"&&(t.flags|=4),i=!1)}else{s=t.stateNode,g8(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:fo(t.type,a),s.props=c,f=t.pendingProps,d=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=Wn(l):(l=an(r)?rc:Ri.current,l=sh(t,l));var p=r.getDerivedStateFromProps;(h=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&w8(t,s,i,l),Xa=!1,d=t.memoizedState,s.state=d,Jf(t,i,s,n);var v=t.memoizedState;a!==f||d!==v||sn.current||Xa?(typeof p=="function"&&(Oy(t,r,p,i),v=t.memoizedState),(c=Xa||b8(t,r,c,i,d,v,l))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=v),s.props=i,s.state=v,s.context=l,i=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),i=!1)}return PS(e,t,r,i,o,n)}function PS(e,t,r,i,n,o){j8(e,t);var s=(t.flags&64)!==0;if(!i&&!s)return n&&s8(t,r,!1),Us(e,t,o);i=t.stateNode,GX.current=t;var a=s&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&s?(t.child=zy(t,e.child,null,o),t.child=zy(t,null,a,o)):cn(e,t,a,o),t.memoizedState=i.state,n&&s8(t,r,!0),t.child}function W8(e){var t=e.stateNode;t.pendingContext?n8(e,t.pendingContext,t.pendingContext!==t.context):t.context&&n8(e,t.context,!1),xS(e,t.containerInfo)}var Wy={dehydrated:null,retryLane:0};function V8(e,t,r){var i=t.pendingProps,n=Pr.current,o=!1,s;return(s=(t.flags&64)!==0)||(s=e!==null&&e.memoizedState===null?!1:(n&2)!==0),s?(o=!0,t.flags&=-65):e!==null&&e.memoizedState===null||i.fallback===void 0||i.unstable_avoidThisFallback===!0||(n|=1),Mr(Pr,n&1),e===null?(i.fallback!==void 0&&SS(t),e=i.children,n=i.fallback,o?(e=G8(t,e,n,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Wy,e):typeof i.unstable_expectedLoadTime=="number"?(e=G8(t,e,n,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Wy,t.lanes=33554432,e):(r=tC({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?o?(i=X8(e,t,i.children,i.fallback,r),o=t.child,n=e.child.memoizedState,o.memoizedState=n===null?{baseLanes:r}:{baseLanes:n.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=Wy,i):(r=q8(e,t,i.children,r),t.memoizedState=null,r):o?(i=X8(e,t,i.children,i.fallback,r),o=t.child,n=e.child.memoizedState,o.memoizedState=n===null?{baseLanes:r}:{baseLanes:n.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=Wy,i):(r=q8(e,t,i.children,r),t.memoizedState=null,r)}function G8(e,t,r,i){var n=e.mode,o=e.child;return t={mode:"hidden",children:t},(n&2)===0&&o!==null?(o.childLanes=0,o.pendingProps=t):o=tC(t,n,0,null),r=vh(r,n,i,null),o.return=e,r.return=e,o.sibling=r,e.child=o,r}function q8(e,t,r,i){var n=e.child;return e=n.sibling,r=il(n,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function X8(e,t,r,i,n){var o=t.mode,s=e.child;e=s.sibling;var a={mode:"hidden",children:r};return(o&2)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,s=r.lastEffect,s!==null?(t.firstEffect=r.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):r=il(s,a),e!==null?i=il(e,i):(i=vh(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,i}function Y8(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),m8(e.return,t)}function AS(e,t,r,i,n,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n,s.lastEffect=o)}function Q8(e,t,r){var i=t.pendingProps,n=i.revealOrder,o=i.tail;if(cn(e,t,i.children,r),i=Pr.current,(i&2)!==0)i=i&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Y8(e,r);else if(e.tag===19)Y8(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Mr(Pr,i),(t.mode&2)===0)t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&$y(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),AS(t,!1,n,r,o,t.lastEffect);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&$y(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}AS(t,!0,r,null,o,t.lastEffect);break;case"together":AS(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Us(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),hp|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,r=il(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=il(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var K8,zS,Z8,J8;K8=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},zS=function(){},Z8=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,oc(Zo.current);var o=null;switch(r){case"input":n=b2(e,n),i=b2(e,i),o=[];break;case"option":n=S2(e,n),i=S2(e,i),o=[];break;case"select":n=Sr({},n,{value:void 0}),i=Sr({},i,{value:void 0}),o=[];break;case"textarea":n=C2(e,n),i=C2(e,i),o=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=xy)}E2(r,i);var s;r=null;for(c in n)if(!i.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kf.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var l=i[c];if(a=n!=null?n[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&pr("scroll",e),o||a===l||(o=[])):typeof l=="object"&&l!==null&&l.$$typeof===m2?l.toString():(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},J8=function(e,t,r,i){r!==i&&(t.flags|=4)};function up(e,t){if(!Jo)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qX(e,t,r){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return an(t.type)&&ky(),null;case 3:return uh(),mr(sn),mr(Ri),kS(),i=t.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(By(t)?t.flags|=4:i.hydrate||(t.flags|=256)),zS(t),null;case 5:wS(t);var n=oc(ip.current);if(r=t.type,e!==null&&t.stateNode!=null)Z8(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=128);else{if(!i){if(t.stateNode===null)throw Error(ke(166));return null}if(e=oc(Zo.current),By(t)){i=t.stateNode,r=t.type;var o=t.memoizedProps;switch(i[Va]=t,i[Sy]=o,r){case"dialog":pr("cancel",i),pr("close",i);break;case"iframe":case"object":case"embed":pr("load",i);break;case"video":case"audio":for(e=0;e<Yf.length;e++)pr(Yf[e],i);break;case"source":pr("error",i);break;case"img":case"image":case"link":pr("error",i),pr("load",i);break;case"details":pr("toggle",i);break;case"input":HO(i,o),pr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},pr("invalid",i);break;case"textarea":GO(i,o),pr("invalid",i)}E2(r,o),e=null;for(var s in o)o.hasOwnProperty(s)&&(n=o[s],s==="children"?typeof n=="string"?i.textContent!==n&&(e=["children",n]):typeof n=="number"&&i.textContent!==""+n&&(e=["children",""+n]):kf.hasOwnProperty(s)&&n!=null&&s==="onScroll"&&pr("scroll",i));switch(r){case"input":ny(i),VO(i,o,!0);break;case"textarea":ny(i),XO(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=xy)}i=e,t.updateQueue=i,i!==null&&(t.flags|=4)}else{switch(s=n.nodeType===9?n:n.ownerDocument,e===k2.html&&(e=YO(r)),e===k2.html?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=s.createElement(r,{is:i.is}):(e=s.createElement(r),r==="select"&&(s=e,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):e=s.createElementNS(e,r),e[Va]=t,e[Sy]=i,K8(e,t,!1,!1),t.stateNode=e,s=D2(r,i),r){case"dialog":pr("cancel",e),pr("close",e),n=i;break;case"iframe":case"object":case"embed":pr("load",e),n=i;break;case"video":case"audio":for(n=0;n<Yf.length;n++)pr(Yf[n],e);n=i;break;case"source":pr("error",e),n=i;break;case"img":case"image":case"link":pr("error",e),pr("load",e),n=i;break;case"details":pr("toggle",e),n=i;break;case"input":HO(e,i),n=b2(e,i),pr("invalid",e);break;case"option":n=S2(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Sr({},i,{value:void 0}),pr("invalid",e);break;case"textarea":GO(e,i),n=C2(e,i),pr("invalid",e);break;default:n=i}E2(r,n);var a=n;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?ZO(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QO(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ff(e,l):typeof l=="number"&&Ff(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kf.hasOwnProperty(o)?l!=null&&o==="onScroll"&&pr("scroll",e):l!=null&&c2(e,o,l,s))}switch(r){case"input":ny(e),VO(e,i,!1);break;case"textarea":ny(e),XO(e);break;case"option":i.value!=null&&e.setAttribute("value",""+La(i.value));break;case"select":e.multiple=!!i.multiple,o=i.value,o!=null?Gu(e,!!i.multiple,o,!1):i.defaultValue!=null&&Gu(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=xy)}JM(r,i)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)J8(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ke(166));r=oc(ip.current),oc(Zo.current),By(t)?(i=t.stateNode,r=t.memoizedProps,i[Va]=t,i.nodeValue!==r&&(t.flags|=4)):(i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Va]=t,t.stateNode=i)}return null;case 13:return mr(Pr),i=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(i=i!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&By(t):r=e.memoizedState!==null,i&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Pr.current&1)!==0?_i===0&&(_i=3):((_i===0||_i===3)&&(_i=4),Gi===null||(hp&134217727)===0&&(fh&134217727)===0||mh(Gi,Mi))),(i||r)&&(t.flags|=4),null);case 4:return uh(),zS(t),e===null&&XM(t.stateNode.containerInfo),null;case 10:return yS(t),null;case 17:return an(t.type)&&ky(),null;case 19:if(mr(Pr),i=t.memoizedState,i===null)return null;if(o=(t.flags&64)!==0,s=i.rendering,s===null)if(o)up(i,!1);else{if(_i!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(s=$y(e),s!==null){for(t.flags|=64,up(i,!1),o=s.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),i.lastEffect===null&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=r,r=t.child;r!==null;)o=r,e=i,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Mr(Pr,Pr.current&1|2),t.child}e=e.sibling}i.tail!==null&&Fi()>qS&&(t.flags|=64,o=!0,up(i,!1),t.lanes=33554432)}else{if(!o)if(e=$y(s),e!==null){if(t.flags|=64,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),up(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Jo)return t=t.lastEffect=i.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Fi()-i.renderingStartTime>qS&&r!==1073741824&&(t.flags|=64,o=!0,up(i,!1),t.lanes=33554432);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(r=i.tail,i.rendering=r,i.tail=r.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Fi(),r.sibling=null,t=Pr.current,Mr(Pr,o?t&1|2:t&1),r):null;case 23:case 24:return JS(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&i.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(ke(156,t.tag))}function XX(e){switch(e.tag){case 1:an(e.type)&&ky();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(uh(),mr(sn),mr(Ri),kS(),t=e.flags,(t&64)!==0)throw Error(ke(285));return e.flags=t&-4097|64,e;case 5:return wS(e),null;case 13:return mr(Pr),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return mr(Pr),null;case 4:return uh(),null;case 10:return yS(e),null;case 23:case 24:return JS(),null;default:return null}}function $S(e,t){try{var r="",i=t;do r+=Dq(i),i=i.return;while(i);var n=r}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:n}}function BS(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var YX=typeof WeakMap=="function"?WeakMap:Map;function eP(e,t,r){r=Ya(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){qy||(qy=!0,XS=i),BS(e,t)},r}function tP(e,t,r){r=Ya(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return BS(e,t),i(n)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){typeof i!="function"&&(ts===null?ts=new Set([this]):ts.add(this),BS(e,t));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}var QX=typeof WeakSet=="function"?WeakSet:Set;function rP(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){rl(e,r)}else t.current=null}function KX(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,i=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:fo(t.type,r),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&lS(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(ke(163))}function ZX(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var n=e;i=n.next,n=n.tag,(n&4)!==0&&(n&1)!==0&&(vP(r,e),sY(r,e)),e=i}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(i=r.elementType===r.type?t.memoizedProps:fo(r.type,t.memoizedProps),e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&y8(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}y8(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&JM(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&pM(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(ke(163))}function iP(e,t){for(var r=e;;){if(r.tag===5){var i=r.stateNode;if(t)i=i.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{i=r.stateNode;var n=r.memoizedProps.style;n=n!=null&&n.hasOwnProperty("display")?n.display:null,i.style.display=KO("display",n)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function nP(e,t){if(ic&&typeof ic.onCommitFiberUnmount=="function")try{ic.onCommitFiberUnmount(hS,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var i=r,n=i.destroy;if(i=i.tag,n!==void 0)if((i&4)!==0)vP(t,r);else{i=t;try{n()}catch(o){rl(i,o)}}r=r.next}while(r!==e)}break;case 1:if(rP(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){rl(t,o)}break;case 5:rP(t);break;case 4:lP(e,t)}}function oP(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function sP(e){return e.tag===5||e.tag===3||e.tag===4}function aP(e){e:{for(var t=e.return;t!==null;){if(sP(t))break e;t=t.return}throw Error(ke(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var i=!1;break;case 3:t=t.containerInfo,i=!0;break;case 4:t=t.containerInfo,i=!0;break;default:throw Error(ke(161))}r.flags&16&&(Ff(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||sP(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}i?LS(e,r,t):US(e,r,t)}function LS(e,t,r){var i=e.tag,n=i===5||i===6;if(n)e=n?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=xy));else if(i!==4&&(e=e.child,e!==null))for(LS(e,t,r),e=e.sibling;e!==null;)LS(e,t,r),e=e.sibling}function US(e,t,r){var i=e.tag,n=i===5||i===6;if(n)e=n?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(US(e,t,r),e=e.sibling;e!==null;)US(e,t,r),e=e.sibling}function lP(e,t){for(var r=t,i=!1,n,o;;){if(!i){i=r.return;e:for(;;){if(i===null)throw Error(ke(160));switch(n=i.stateNode,i.tag){case 5:o=!1;break e;case 3:n=n.containerInfo,o=!0;break e;case 4:n=n.containerInfo,o=!0;break e}i=i.return}i=!0}if(r.tag===5||r.tag===6){e:for(var s=e,a=r,l=a;;)if(nP(s,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}o?(s=n,a=r.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):n.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){n=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(nP(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(i=!1)}r.sibling.return=r.return,r=r.sibling}}function NS(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do(i.tag&3)===3&&(e=i.destroy,i.destroy=void 0,e!==void 0&&e()),i=i.next;while(i!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){i=t.memoizedProps;var n=e!==null?e.memoizedProps:i;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,o!==null){for(r[Sy]=i,e==="input"&&i.type==="radio"&&i.name!=null&&WO(r,i),D2(e,n),t=D2(e,i),n=0;n<o.length;n+=2){var s=o[n],a=o[n+1];s==="style"?ZO(r,a):s==="dangerouslySetInnerHTML"?QO(r,a):s==="children"?Ff(r,a):c2(r,s,a,t)}switch(e){case"input":x2(r,i);break;case"textarea":qO(r,i);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!i.multiple,o=i.value,o!=null?Gu(r,!!i.multiple,o,!1):e!==!!i.multiple&&(i.defaultValue!=null?Gu(r,!!i.multiple,i.defaultValue,!0):Gu(r,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(ke(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,pM(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(GS=Fi(),iP(t.child,!0)),cP(t);return;case 19:cP(t);return;case 17:return;case 23:case 24:iP(t,t.memoizedState!==null);return}throw Error(ke(163))}function cP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new QX),t.forEach(function(i){var n=cY.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function JX(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var eY=Math.ceil,Vy=Kl.ReactCurrentDispatcher,jS=Kl.ReactCurrentOwner,st=0,Gi=null,Qr=null,Mi=0,lc=0,HS=Ga(0),_i=0,Gy=null,dh=0,hp=0,fh=0,WS=0,VS=null,GS=0,qS=1/0;function ph(){qS=Fi()+500}var Ve=null,qy=!1,XS=null,ts=null,Za=!1,dp=null,fp=90,YS=[],QS=[],Ns=null,pp=0,KS=null,Xy=-1,js=0,Yy=0,mp=null,Qy=!1;function xn(){return(st&48)!==0?Fi():Xy!==-1?Xy:Xy=Fi()}function Ja(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return ah()===99?1:2;if(js===0&&(js=dh),NX.transition!==0){Yy!==0&&(Yy=VS!==null?VS.pendingLanes:0),e=js;var t=4186112&~Yy;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=ah(),(st&4)!==0&&e===98?e=dy(12,js):(e=Wq(e),e=dy(e,js)),e}function el(e,t,r){if(50<pp)throw pp=0,KS=null,Error(ke(185));if(e=Ky(e,t),e===null)return null;fy(e,t,r),e===Gi&&(fh|=t,_i===4&&mh(e,Mi));var i=ah();t===1?(st&8)!==0&&(st&48)===0?ZS(e):(Gn(e,r),st===0&&(ph(),Ko())):((st&4)===0||i!==98&&i!==99||(Ns===null?Ns=new Set([e]):Ns.add(e)),Gn(e,r)),VS=e}function Ky(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function Gn(e,t){for(var r=e.callbackNode,i=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Ha(s),l=1<<a,c=o[a];if(c===-1){if((l&i)===0||(l&n)!==0){c=t,Qu(l);var h=or;o[a]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(i=Nf(e,e===Gi?Mi:0),t=or,i===0)r!==null&&(r!==mS&&fS(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==mS&&fS(r)}t===15?(r=ZS.bind(null,e),Bs===null?(Bs=[r],Dy=dS(Ey,p8)):Bs.push(r),r=mS):t===14?r=Zf(99,ZS.bind(null,e)):(r=Vq(t),r=Zf(r,uP.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function uP(e){if(Xy=-1,Yy=js=0,(st&48)!==0)throw Error(ke(327));var t=e.callbackNode;if(tl()&&e.callbackNode!==t)return null;var r=Nf(e,e===Gi?Mi:0);if(r===0)return null;var i=r,n=st;st|=16;var o=pP();(Gi!==e||Mi!==i)&&(ph(),gh(e,i));do try{iY();break}catch(a){fP(e,a)}while(1);if(vS(),Vy.current=o,st=n,Qr!==null?i=0:(Gi=null,Mi=0,i=_i),(dh&fh)!==0)gh(e,0);else if(i!==0){if(i===2&&(st|=64,e.hydrate&&(e.hydrate=!1,lS(e.containerInfo)),r=xM(e),r!==0&&(i=gp(e,r))),i===1)throw t=Gy,gh(e,0),mh(e,r),Gn(e,Fi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,i){case 0:case 1:throw Error(ke(345));case 2:cc(e);break;case 3:if(mh(e,r),(r&62914560)===r&&(i=GS+500-Fi(),10<i)){if(Nf(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){xn(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=e8(cc.bind(null,e),i);break}cc(e);break;case 4:if(mh(e,r),(r&4186112)===r)break;for(i=e.eventTimes,n=-1;0<r;){var s=31-Ha(r);o=1<<s,s=i[s],s>n&&(n=s),r&=~o}if(r=n,r=Fi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eY(r/1960))-r,10<r){e.timeoutHandle=e8(cc.bind(null,e),r);break}cc(e);break;case 5:cc(e);break;default:throw Error(ke(329))}}return Gn(e,Fi()),e.callbackNode===t?uP.bind(null,e):null}function mh(e,t){for(t&=~WS,t&=~fh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ha(t),i=1<<r;e[r]=-1,t&=~i}}function ZS(e){if((st&48)!==0)throw Error(ke(327));if(tl(),e===Gi&&(e.expiredLanes&Mi)!==0){var t=Mi,r=gp(e,t);(dh&fh)!==0&&(t=Nf(e,t),r=gp(e,t))}else t=Nf(e,0),r=gp(e,t);if(e.tag!==0&&r===2&&(st|=64,e.hydrate&&(e.hydrate=!1,lS(e.containerInfo)),t=xM(e),t!==0&&(r=gp(e,t))),r===1)throw r=Gy,gh(e,0),mh(e,t),Gn(e,Fi()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,cc(e),Gn(e,Fi()),null}function tY(){if(Ns!==null){var e=Ns;Ns=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Gn(t,Fi())})}Ko()}function hP(e,t){var r=st;st|=1;try{return e(t)}finally{st=r,st===0&&(ph(),Ko())}}function dP(e,t){var r=st;st&=-2,st|=8;try{return e(t)}finally{st=r,st===0&&(ph(),Ko())}}function Zy(e,t){Mr(HS,lc),lc|=t,dh|=t}function JS(){lc=HS.current,mr(HS)}function gh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,AX(r)),Qr!==null)for(r=Qr.return;r!==null;){var i=r;switch(i.tag){case 1:i=i.type.childContextTypes,i!=null&&ky();break;case 3:uh(),mr(sn),mr(Ri),kS();break;case 5:wS(i);break;case 4:uh();break;case 13:mr(Pr);break;case 19:mr(Pr);break;case 10:yS(i);break;case 23:case 24:JS()}r=r.return}Gi=e,Qr=il(e.current,null),Mi=lc=dh=t,_i=0,Gy=null,WS=fh=hp=0}function fP(e,t){do{var r=Qr;try{if(vS(),np.current=Hy,Ly){for(var i=Lr.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Ly=!1}if(op=0,yi=Oi=Lr=null,sp=!1,jS.current=null,r===null||r.return===null){_i=1,Gy=t,Qr=null;break}e:{var o=e,s=r.return,a=r,l=t;if(t=Mi,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l;if((a.mode&2)===0){var h=a.alternate;h?(a.updateQueue=h.updateQueue,a.memoizedState=h.memoizedState,a.lanes=h.lanes):(a.updateQueue=null,a.memoizedState=null)}var f=(Pr.current&1)!==0,d=s;do{var p;if(p=d.tag===13){var v=d.memoizedState;if(v!==null)p=v.dehydrated!==null;else{var g=d.memoizedProps;p=g.fallback===void 0?!1:g.unstable_avoidThisFallback!==!0?!0:!f}}if(p){var m=d.updateQueue;if(m===null){var y=new Set;y.add(c),d.updateQueue=y}else m.add(c);if((d.mode&2)===0){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var _=Ya(-1,1);_.tag=2,Qa(a,_)}a.lanes|=1;break e}l=void 0,a=t;var b=o.pingCache;if(b===null?(b=o.pingCache=new YX,l=new Set,b.set(c,l)):(l=b.get(c),l===void 0&&(l=new Set,b.set(c,l))),!l.has(a)){l.add(a);var w=lY.bind(null,o,c,a);c.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(d!==null);l=Error((Vu(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}_i!==5&&(_i=2),l=$S(l,a),d=s;do{switch(d.tag){case 3:o=l,d.flags|=4096,t&=-t,d.lanes|=t;var S=eP(d,o,t);v8(d,S);break e;case 1:o=l;var C=d.type,D=d.stateNode;if((d.flags&64)===0&&(typeof C.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(ts===null||!ts.has(D)))){d.flags|=4096,t&=-t,d.lanes|=t;var E=tP(d,o,t);v8(d,E);break e}}d=d.return}while(d!==null)}gP(r)}catch(I){t=I,Qr===r&&r!==null&&(Qr=r=r.return);continue}break}while(1)}function pP(){var e=Vy.current;return Vy.current=Hy,e===null?Hy:e}function gp(e,t){var r=st;st|=16;var i=pP();Gi===e&&Mi===t||gh(e,t);do try{rY();break}catch(n){fP(e,n)}while(1);if(vS(),st=r,Vy.current=i,Qr!==null)throw Error(ke(261));return Gi=null,Mi=0,_i}function rY(){for(;Qr!==null;)mP(Qr)}function iY(){for(;Qr!==null&&!BX();)mP(Qr)}function mP(e){var t=_P(e.alternate,e,lc);e.memoizedProps=e.pendingProps,t===null?gP(e):Qr=t,jS.current=null}function gP(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=qX(r,t,lc),r!==null){Qr=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(lc&1073741824)!==0||(r.mode&4)===0){for(var i=0,n=r.child;n!==null;)i|=n.lanes|n.childLanes,n=n.sibling;r.childLanes=i}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=XX(t),r!==null){r.flags&=2047,Qr=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Qr=t;return}Qr=t=e}while(t!==null);_i===0&&(_i=5)}function cc(e){var t=ah();return nc(99,nY.bind(null,e,t)),null}function nY(e,t){do tl();while(dp!==null);if((st&48)!==0)throw Error(ke(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ke(177));e.callbackNode=null;var i=r.lanes|r.childLanes,n=i,o=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;for(var s=e.eventTimes,a=e.expirationTimes;0<o;){var l=31-Ha(o),c=1<<l;n[l]=0,s[l]=-1,a[l]=-1,o&=~c}if(Ns!==null&&(i&24)===0&&Ns.has(e)&&Ns.delete(e),e===Gi&&(Qr=Gi=null,Mi=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,i=r.firstEffect):i=r:i=r.firstEffect,i!==null){if(n=st,st|=32,jS.current=null,oS=py,s=NM(),tS(s)){if("selectionStart"in s)a={start:s.selectionStart,end:s.selectionEnd};else e:if(a=(a=s.ownerDocument)&&a.defaultView||window,(c=a.getSelection&&a.getSelection())&&c.rangeCount!==0){a=c.anchorNode,o=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var h=0,f=-1,d=-1,p=0,v=0,g=s,m=null;t:for(;;){for(var y;g!==a||o!==0&&g.nodeType!==3||(f=h+o),g!==l||c!==0&&g.nodeType!==3||(d=h+c),g.nodeType===3&&(h+=g.nodeValue.length),(y=g.firstChild)!==null;)m=g,g=y;for(;;){if(g===s)break t;if(m===a&&++p===o&&(f=h),m===l&&++v===c&&(d=h),(y=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=y}a=f===-1||d===-1?null:{start:f,end:d}}else a=null;a=a||{start:0,end:0}}else a=null;sS={focusedElem:s,selectionRange:a},py=!1,mp=null,Qy=!1,Ve=i;do try{oY()}catch(I){if(Ve===null)throw Error(ke(330));rl(Ve,I),Ve=Ve.nextEffect}while(Ve!==null);mp=null,Ve=i;do try{for(s=e;Ve!==null;){var _=Ve.flags;if(_&16&&Ff(Ve.stateNode,""),_&128){var b=Ve.alternate;if(b!==null){var w=b.ref;w!==null&&(typeof w=="function"?w(null):w.current=null)}}switch(_&1038){case 2:aP(Ve),Ve.flags&=-3;break;case 6:aP(Ve),Ve.flags&=-3,NS(Ve.alternate,Ve);break;case 1024:Ve.flags&=-1025;break;case 1028:Ve.flags&=-1025,NS(Ve.alternate,Ve);break;case 4:NS(Ve.alternate,Ve);break;case 8:a=Ve,lP(s,a);var S=a.alternate;oP(a),S!==null&&oP(S)}Ve=Ve.nextEffect}}catch(I){if(Ve===null)throw Error(ke(330));rl(Ve,I),Ve=Ve.nextEffect}while(Ve!==null);if(w=sS,b=NM(),_=w.focusedElem,s=w.selectionRange,b!==_&&_&&_.ownerDocument&&UM(_.ownerDocument.documentElement,_)){for(s!==null&&tS(_)&&(b=s.start,w=s.end,w===void 0&&(w=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(w,_.value.length)):(w=(b=_.ownerDocument||document)&&b.defaultView||window,w.getSelection&&(w=w.getSelection(),a=_.textContent.length,S=Math.min(s.start,a),s=s.end===void 0?S:Math.min(s.end,a),!w.extend&&S>s&&(a=s,s=S,S=a),a=LM(_,S),o=LM(_,s),a&&o&&(w.rangeCount!==1||w.anchorNode!==a.node||w.anchorOffset!==a.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&(b=b.createRange(),b.setStart(a.node,a.offset),w.removeAllRanges(),S>s?(w.addRange(b),w.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),w.addRange(b)))))),b=[],w=_;w=w.parentNode;)w.nodeType===1&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<b.length;_++)w=b[_],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}py=!!oS,sS=oS=null,e.current=r,Ve=i;do try{for(_=e;Ve!==null;){var C=Ve.flags;if(C&36&&ZX(_,Ve.alternate,Ve),C&128){b=void 0;var D=Ve.ref;if(D!==null){var E=Ve.stateNode;switch(Ve.tag){case 5:b=E;break;default:b=E}typeof D=="function"?D(b):D.current=b}}Ve=Ve.nextEffect}}catch(I){if(Ve===null)throw Error(ke(330));rl(Ve,I),Ve=Ve.nextEffect}while(Ve!==null);Ve=null,UX(),st=n}else e.current=r;if(Za)Za=!1,dp=e,fp=t;else for(Ve=i;Ve!==null;)t=Ve.nextEffect,Ve.nextEffect=null,Ve.flags&8&&(C=Ve,C.sibling=null,C.stateNode=null),Ve=t;if(i=e.pendingLanes,i===0&&(ts=null),i===1?e===KS?pp++:(pp=0,KS=e):pp=0,r=r.stateNode,ic&&typeof ic.onCommitFiberRoot=="function")try{ic.onCommitFiberRoot(hS,r,void 0,(r.current.flags&64)===64)}catch{}if(Gn(e,Fi()),qy)throw qy=!1,e=XS,XS=null,e;return(st&8)!==0||Ko(),null}function oY(){for(;Ve!==null;){var e=Ve.alternate;Qy||mp===null||((Ve.flags&8)!==0?aM(Ve,mp)&&(Qy=!0):Ve.tag===13&&JX(e,Ve)&&aM(Ve,mp)&&(Qy=!0));var t=Ve.flags;(t&256)!==0&&KX(e,Ve),(t&512)===0||Za||(Za=!0,Zf(97,function(){return tl(),null})),Ve=Ve.nextEffect}}function tl(){if(fp!==90){var e=97<fp?97:fp;return fp=90,nc(e,aY)}return!1}function sY(e,t){YS.push(t,e),Za||(Za=!0,Zf(97,function(){return tl(),null}))}function vP(e,t){QS.push(t,e),Za||(Za=!0,Zf(97,function(){return tl(),null}))}function aY(){if(dp===null)return!1;var e=dp;if(dp=null,(st&48)!==0)throw Error(ke(331));var t=st;st|=32;var r=QS;QS=[];for(var i=0;i<r.length;i+=2){var n=r[i],o=r[i+1],s=n.destroy;if(n.destroy=void 0,typeof s=="function")try{s()}catch(l){if(o===null)throw Error(ke(330));rl(o,l)}}for(r=YS,YS=[],i=0;i<r.length;i+=2){n=r[i],o=r[i+1];try{var a=n.create;n.destroy=a()}catch(l){if(o===null)throw Error(ke(330));rl(o,l)}}for(a=e.current.firstEffect;a!==null;)e=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=e;return st=t,Ko(),!0}function yP(e,t,r){t=$S(r,t),t=eP(e,t,1),Qa(e,t),t=xn(),e=Ky(e,1),e!==null&&(fy(e,1,t),Gn(e,t))}function rl(e,t){if(e.tag===3)yP(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){yP(r,e,t);break}else if(r.tag===1){var i=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ts===null||!ts.has(i))){e=$S(t,e);var n=tP(r,e,1);if(Qa(r,n),n=xn(),r=Ky(r,1),r!==null)fy(r,1,n),Gn(r,n);else if(typeof i.componentDidCatch=="function"&&(ts===null||!ts.has(i)))try{i.componentDidCatch(t,e)}catch{}break}}r=r.return}}function lY(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=xn(),e.pingedLanes|=e.suspendedLanes&r,Gi===e&&(Mi&r)===r&&(_i===4||_i===3&&(Mi&62914560)===Mi&&500>Fi()-GS?gh(e,0):WS|=r),Gn(e,t)}function cY(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=ah()===99?1:2:(js===0&&(js=dh),t=Ku(62914560&~js),t===0&&(t=4194304))),r=xn(),e=Ky(e,t),e!==null&&(fy(e,t,r),Gn(e,r))}var _P;_P=function(e,t,r){var i=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||sn.current)po=!0;else if((r&i)!==0)po=(e.flags&16384)!==0;else{switch(po=!1,t.tag){case 3:W8(t),CS();break;case 5:k8(t);break;case 1:an(t.type)&&Ty(t);break;case 4:xS(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var n=t.type._context;Mr(Iy,n._currentValue),n._currentValue=i;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?V8(e,t,r):(Mr(Pr,Pr.current&1),t=Us(e,t,r),t!==null?t.sibling:null);Mr(Pr,Pr.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&64)!==0){if(i)return Q8(e,t,r);t.flags|=64}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Mr(Pr,Pr.current),i)break;return null;case 23:case 24:return t.lanes=0,OS(e,t,r)}return Us(e,t,r)}else po=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=sh(t,Ri.current),ch(t,r),n=ES(null,t,i,e,n,r),t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,an(i)){var o=!0;Ty(t)}else o=!1;t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,_S(t);var s=i.getDerivedStateFromProps;typeof s=="function"&&Oy(t,i,s,e),n.updater=My,t.stateNode=n,n._reactInternals=t,bS(t,i,e,r),t=PS(null,t,i,!0,o,r)}else t.tag=0,cn(null,t,n,r),t=t.child;return t;case 16:n=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=n._init,n=o(n._payload),t.type=n,o=t.tag=hY(n),e=fo(n,e),o){case 0:t=MS(null,t,n,e,r);break e;case 1:t=H8(null,t,n,e,r);break e;case 11:t=L8(null,t,n,e,r);break e;case 14:t=U8(null,t,n,fo(n.type,e),i,r);break e}throw Error(ke(306,n,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:fo(i,n),MS(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:fo(i,n),H8(e,t,i,n,r);case 3:if(W8(t),i=t.updateQueue,e===null||i===null)throw Error(ke(282));if(i=t.pendingProps,n=t.memoizedState,n=n!==null?n.element:null,g8(e,t),Jf(t,i,null,r),i=t.memoizedState.element,i===n)CS(),t=Us(e,t,r);else{if(n=t.stateNode,(o=n.hydrate)&&(Ka=rh(t.stateNode.containerInfo.firstChild),Ls=t,o=Jo=!0),o){if(e=n.mutableSourceEagerHydrationData,e!=null)for(n=0;n<e.length;n+=2)o=e[n],o._workInProgressVersionPrimary=e[n+1],hh.push(o);for(r=C8(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else cn(e,t,i,r),CS();t=t.child}return t;case 5:return k8(t),e===null&&SS(t),i=t.type,n=t.pendingProps,o=e!==null?e.memoizedProps:null,s=n.children,aS(i,n)?s=null:o!==null&&aS(i,o)&&(t.flags|=16),j8(e,t),cn(e,t,s,r),t.child;case 6:return e===null&&SS(t),null;case 13:return V8(e,t,r);case 4:return xS(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=zy(t,null,i,r):cn(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:fo(i,n),L8(e,t,i,n,r);case 7:return cn(e,t,t.pendingProps,r),t.child;case 8:return cn(e,t,t.pendingProps.children,r),t.child;case 12:return cn(e,t,t.pendingProps.children,r),t.child;case 10:e:{i=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value;var a=t.type._context;if(Mr(Iy,a._currentValue),a._currentValue=o,s!==null)if(a=s.value,o=Hn(a,o)?0:(typeof i._calculateChangedBits=="function"?i._calculateChangedBits(a,o):1073741823)|0,o===0){if(s.children===n.children&&!sn.current){t=Us(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var c=l.firstContext;c!==null;){if(c.context===i&&(c.observedBits&o)!==0){a.tag===1&&(c=Ya(-1,r&-r),c.tag=2,Qa(a,c)),a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),m8(a.return,r),l.lanes|=r;break}c=c.next}}else s=a.tag===10&&a.type===t.type?null:a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}cn(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,o=t.pendingProps,i=o.children,ch(t,r),n=Wn(n,o.unstable_observedBits),i=i(n),t.flags|=1,cn(e,t,i,r),t.child;case 14:return n=t.type,o=fo(n,t.pendingProps),o=fo(n.type,o),U8(e,t,n,o,i,r);case 15:return N8(e,t,t.type,t.pendingProps,i,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:fo(i,n),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,an(i)?(e=!0,Ty(t)):e=!1,ch(t,r),x8(t,i,n),bS(t,i,n,r),PS(null,t,i,!0,e,r);case 19:return Q8(e,t,r);case 23:return OS(e,t,r);case 24:return OS(e,t,r)}throw Error(ke(156,t.tag))};function uY(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(e,t,r,i){return new uY(e,t,r,i)}function eC(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hY(e){if(typeof e=="function")return eC(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ey)return 11;if(e===ry)return 14}return 2}function il(e,t){var r=e.alternate;return r===null?(r=qn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Jy(e,t,r,i,n,o){var s=2;if(i=e,typeof e=="function")eC(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ba:return vh(r.children,n,o,t);case LO:s=8,n|=16;break;case u2:s=8,n|=1;break;case Ef:return e=qn(12,r,t,n|8),e.elementType=Ef,e.type=Ef,e.lanes=o,e;case Df:return e=qn(13,r,t,n),e.type=Df,e.elementType=Df,e.lanes=o,e;case ty:return e=qn(19,r,t,n),e.elementType=ty,e.lanes=o,e;case g2:return tC(r,n,o,t);case v2:return e=qn(24,r,t,n),e.elementType=v2,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case h2:s=10;break e;case d2:s=9;break e;case ey:s=11;break e;case ry:s=14;break e;case f2:s=16,i=null;break e;case p2:s=22;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=qn(s,r,t,n),t.elementType=e,t.type=i,t.lanes=o,t}function vh(e,t,r,i){return e=qn(7,e,i,t),e.lanes=r,e}function tC(e,t,r,i){return e=qn(23,e,i,t),e.elementType=g2,e.lanes=r,e}function rC(e,t,r){return e=qn(6,e,null,t),e.lanes=r,e}function iC(e,t,r){return t=qn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dY(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=H2(0),this.expirationTimes=H2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H2(0),this.mutableSourceEagerHydrationData=null}function fY(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zl,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function e_(e,t,r,i){var n=t.current,o=xn(),s=Ja(n);e:if(r){r=r._reactInternals;t:{if(ec(r)!==r||r.tag!==1)throw Error(ke(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(an(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(ke(171))}if(r.tag===1){var l=r.type;if(an(l)){r=o8(r,l,a);break e}}r=a}else r=qa;return t.context===null?t.context=r:t.pendingContext=r,t=Ya(o,s),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),Qa(n,t),el(n,s,o),s}function nC(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function oC(e,t){bP(e,t),(e=e.alternate)&&bP(e,t)}function pY(){return null}function sC(e,t,r){var i=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new dY(e,t,r!=null&&r.hydrate===!0),t=qn(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,_S(t),e[ih]=r.current,XM(e.nodeType===8?e.parentNode:e),i)for(e=0;e<i.length;e++){t=i[e];var n=t._getVersion;n=n(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,n]:r.mutableSourceEagerHydrationData.push(t,n)}this._internalRoot=r}sC.prototype.render=function(e){e_(e,this._internalRoot,null,null)},sC.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;e_(null,e,null,function(){t[ih]=null})};function vp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mY(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new sC(e,0,t?{hydrate:!0}:void 0)}function t_(e,t,r,i,n){var o=r._reactRootContainer;if(o){var s=o._internalRoot;if(typeof n=="function"){var a=n;n=function(){var c=nC(s);a.call(c)}}e_(t,s,e,n)}else{if(o=r._reactRootContainer=mY(r,i),s=o._internalRoot,typeof n=="function"){var l=n;n=function(){var c=nC(s);l.call(c)}}dP(function(){e_(t,s,e,n)})}return nC(s)}lM=function(e){if(e.tag===13){var t=xn();el(e,4,t),oC(e,4)}},$2=function(e){if(e.tag===13){var t=xn();el(e,67108864,t),oC(e,67108864)}},cM=function(e){if(e.tag===13){var t=xn(),r=Ja(e);el(e,r,t),oC(e,r)}},uM=function(e,t){return t()},R2=function(e,t,r){switch(t){case"input":if(x2(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=Cy(i);if(!n)throw Error(ke(90));jO(i),x2(i,n)}}}break;case"textarea":qO(e,r);break;case"select":t=r.value,t!=null&&Gu(e,!!r.multiple,t,!1)}},F2=hP,rM=function(e,t,r,i,n){var o=st;st|=4;try{return nc(98,e.bind(null,t,r,i,n))}finally{st=o,st===0&&(ph(),Ko())}},O2=function(){(st&49)===0&&(tY(),tl())},iM=function(e,t){var r=st;st|=2;try{return e(t)}finally{st=r,st===0&&(ph(),Ko())}};function xP(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vp(t))throw Error(ke(200));return fY(e,t,null,r)}var gY={Events:[Kf,nh,Cy,eM,tM,tl,{current:!1}]},yp={findFiberByHostInstance:tc,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},vY={bundleType:yp.bundleType,version:yp.version,rendererPackageName:yp.rendererPackageName,rendererConfig:yp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sM(e),e===null?null:e.stateNode},findFiberByHostInstance:yp.findFiberByHostInstance||pY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var r_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!r_.isDisabled&&r_.supportsFiber)try{hS=r_.inject(vY),ic=r_}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gY,jn.createPortal=xP,jn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):Error(ke(268,Object.keys(e)));return e=sM(t),e=e===null?null:e.stateNode,e},jn.flushSync=function(e,t){var r=st;if((r&48)!==0)return e(t);st|=1;try{if(e)return nc(99,e.bind(null,t))}finally{st=r,Ko()}},jn.hydrate=function(e,t,r){if(!vp(t))throw Error(ke(200));return t_(null,e,t,!0,r)},jn.render=function(e,t,r){if(!vp(t))throw Error(ke(200));return t_(null,e,t,!1,r)},jn.unmountComponentAtNode=function(e){if(!vp(e))throw Error(ke(40));return e._reactRootContainer?(dP(function(){t_(null,null,e,!1,function(){e._reactRootContainer=null,e[ih]=null})}),!0):!1},jn.unstable_batchedUpdates=hP,jn.unstable_createPortal=function(e,t){return xP(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)},jn.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!vp(r))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return t_(e,t,r,!1,i)},jn.version="17.0.1";function wP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wP)}catch(e){console.error(e)}}wP(),Zv.exports=jn;var _p=Zv.exports,i_=T((e,t)=>{var r="Expected a function",i=NaN,n="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,h=typeof global=="object"&&global&&global.Object===Object&&global,f=typeof self=="object"&&self&&self.Object===Object&&self,d=h||f||Function("return this")(),p=Object.prototype,v=p.toString,g=Math.max,m=Math.min,y=function(){return d.Date.now()};function _(D,E,I){var M,k,R,$,H,j,V=0,J=!1,ae=!1,U=!0;if(typeof D!="function")throw new TypeError(r);E=C(E)||0,b(I)&&(J=!!I.leading,ae="maxWait"in I,R=ae?g(C(I.maxWait)||0,E):R,U="trailing"in I?!!I.trailing:U);function N(X){var le=M,de=k;return M=k=void 0,V=X,$=D.apply(de,le),$}function B(X){return V=X,H=setTimeout(xe,E),J?N(X):$}function W(X){var le=X-j,de=X-V,Fe=E-le;return ae?m(Fe,R-de):Fe}function q(X){var le=X-j,de=X-V;return j===void 0||le>=E||le<0||ae&&de>=R}function xe(){var X=y();if(q(X))return Te(X);H=setTimeout(xe,W(X))}function Te(X){return H=void 0,U&&M?N(X):(M=k=void 0,$)}function Se(){H!==void 0&&clearTimeout(H),V=0,M=j=k=H=void 0}function fe(){return H===void 0?$:Te(y())}function te(){var X=y(),le=q(X);if(M=arguments,k=this,j=X,le){if(H===void 0)return B(j);if(ae)return H=setTimeout(xe,E),N(j)}return H===void 0&&(H=setTimeout(xe,E)),$}return te.cancel=Se,te.flush=fe,te}function b(D){var E=typeof D;return!!D&&(E=="object"||E=="function")}function w(D){return!!D&&typeof D=="object"}function S(D){return typeof D=="symbol"||w(D)&&v.call(D)==n}function C(D){if(typeof D=="number")return D;if(S(D))return i;if(b(D)){var E=typeof D.valueOf=="function"?D.valueOf():D;D=b(E)?E+"":E}if(typeof D!="string")return D===0?D:+D;D=D.replace(o,"");var I=a.test(D);return I||l.test(D)?c(D.slice(2),I?2:8):s.test(D)?i:+D}t.exports=_}),yY=T((e,t)=>{var r="Expected a function",i=NaN,n="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,h=typeof global=="object"&&global&&global.Object===Object&&global,f=typeof self=="object"&&self&&self.Object===Object&&self,d=h||f||Function("return this")(),p=Object.prototype,v=p.toString,g=Math.max,m=Math.min,y=function(){return d.Date.now()};function _(E,I,M){var k,R,$,H,j,V,J=0,ae=!1,U=!1,N=!0;if(typeof E!="function")throw new TypeError(r);I=D(I)||0,w(M)&&(ae=!!M.leading,U="maxWait"in M,$=U?g(D(M.maxWait)||0,I):$,N="trailing"in M?!!M.trailing:N);function B(le){var de=k,Fe=R;return k=R=void 0,J=le,H=E.apply(Fe,de),H}function W(le){return J=le,j=setTimeout(Te,I),ae?B(le):H}function q(le){var de=le-V,Fe=le-J,Ee=I-de;return U?m(Ee,$-Fe):Ee}function xe(le){var de=le-V,Fe=le-J;return V===void 0||de>=I||de<0||U&&Fe>=$}function Te(){var le=y();if(xe(le))return Se(le);j=setTimeout(Te,q(le))}function Se(le){return j=void 0,N&&k?B(le):(k=R=void 0,H)}function fe(){j!==void 0&&clearTimeout(j),J=0,k=V=R=j=void 0}function te(){return j===void 0?H:Se(y())}function X(){var le=y(),de=xe(le);if(k=arguments,R=this,V=le,de){if(j===void 0)return W(V);if(U)return j=setTimeout(Te,I),B(V)}return j===void 0&&(j=setTimeout(Te,I)),H}return X.cancel=fe,X.flush=te,X}function b(E,I,M){var k=!0,R=!0;if(typeof E!="function")throw new TypeError(r);return w(M)&&(k="leading"in M?!!M.leading:k,R="trailing"in M?!!M.trailing:R),_(E,I,{leading:k,maxWait:I,trailing:R})}function w(E){var I=typeof E;return!!E&&(I=="object"||I=="function")}function S(E){return!!E&&typeof E=="object"}function C(E){return typeof E=="symbol"||S(E)&&v.call(E)==n}function D(E){if(typeof E=="number")return E;if(C(E))return i;if(w(E)){var I=typeof E.valueOf=="function"?E.valueOf():E;E=w(I)?I+"":I}if(typeof E!="string")return E===0?E:+E;E=E.replace(o,"");var M=a.test(E);return M||l.test(E)?c(E.slice(2),M?2:8):s.test(E)?i:+E}t.exports=b}),SP=z.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${e=>e.theme.dropdown.caretColor};
  transform: rotate(${e=>e.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`,Hs=ne`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${e=>e.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${e=>e.theme.focusOutlineColor};
  }
`,aC=ne`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`,CP=Cf`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`,n_=z.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,kP=z(n_)``,nl=z(n_)``,o_=z(n_)``,TP={display:"none",left:0,top:0},EP=z(n_)`
  display: ${({display:e})=>e};
  left: ${({left:e})=>e}px;
  top: ${({top:e})=>e}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${CP} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`,yh=ne`
  color: ${e=>e.theme.button.activeForeground};
  border-color: ${e=>e.theme.button.activeForeground};

  svg {
    color: ${e=>e.theme.button.activeForeground};
  }
`,_Y=z.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  font-size: ${e=>e.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button1.case};
  font-family: ${e=>e.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${Hs}

  /* Active */

  &:active {
    ${yh}
  }

  ${({isActive:e})=>e&&yh}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${nl} {
      background-color: ${e=>e.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${o_} {
      background-color: ${e=>e.theme.button.hoverOverlayColor};
    }
  }

  div {
    font-size: ${e=>e.theme.measurements.fontSystem.button1.size}px;
    letter-spacing: ${e=>e.theme.measurements.fontSystem.button1.letterSpacing}px;
  }
`,ol=class extends u.Component{constructor(){super(...arguments),this.state=TP,this.timeout=null,this.onClick=e=>{const t=e.currentTarget.getBoundingClientRect(),r=e.pageX-t.left,i=e.pageY-t.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(r,i)}):this.setRippleState(r,i),this.props.onClick(e)},this.setRippleState=(e,t)=>{this.setState({left:e,top:t,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const h=this.props,{isActive:e,isDisabled:t,label:r,ariaLabel:i,children:n,className:o}=h,s=To(h,["isActive","isDisabled","label","ariaLabel","children","className"]),{left:a,top:l,display:c}=this.state;return u.createElement(_Y,ge(L({"data-test":i,className:o,isActive:e,disabled:t,"aria-label":i},s),{onClick:this.onClick}),r,n,u.createElement(EP,{display:c,left:a,top:l}),u.createElement(nl,null),u.createElement(o_,null))}};ol.defaultProps={type:"button",isDisabled:!1,isActive:!1};var DP=z(ol)`
  color: ${e=>e.theme.button.textPrimaryForeground};

  svg {
    color: ${e=>e.theme.button.textPrimaryForeground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:e})=>e&&yh}

  ${nl} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`,s_=z(ol)`
  color: ${e=>e.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:e})=>e&&yh}

  ${nl} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }

  svg {
    color: ${e=>e.theme.button.textSecondaryForeground};
  }
`,bY=z(ol)`
  ${({fullWidth:e})=>e&&ne`
      width: 100%;
    `}
`,xY=z.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  @media all and (min-width: 0) and (max-width: 599px) {
    display: flex;
  }
`,wY=z.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }
  font-size: inherit;
  text-spacing: inherit;
  color: inherit;

  ${({isDisabled:e})=>e&&ne`
      opacity: ${t=>t.theme.button.textInactiveOpacity};
    `}
  ${({hasIcon:e})=>e&&ne`
      @media all and (min-width: 0) and (max-width: 599px) {
        display: none;
      }
    `}
`,bp=s=>{var a=s,{label:e,children:t,icon:r,fullWidth:i,isDisabled:n}=a,o=To(a,["label","children","icon","fullWidth","isDisabled"]);const l=u.createElement(wY,{hasIcon:!!r,isDisabled:n},e,t);return u.createElement(bY,L({fullWidth:i,isDisabled:n},o),r&&u.createElement(xY,null,r),(t||e)&&l)},SY=z(bp)`
  background: ${e=>e.theme.button.outlinedPrimaryBackground};
  color: ${e=>e.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${e=>e.theme.button.outlinedBorderColor};
  min-width: 32px;

  svg {
    color: ${e=>e.theme.button.outlinedPrimaryForeground};
  }
`,lC=z(bp)`
  background: ${e=>e.theme.button.outlinedSecondaryBackground};
  color: ${e=>e.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${e=>e.theme.button.outlinedBorderColor};

  svg {
    color: ${e=>e.theme.button.outlinedSecondaryForeground};
  }

  ${({isActive:e})=>e&&yh}
`,CY=z(ol)`
  color: ${e=>e.theme.foreground};

  svg {
    color: ${e=>e.theme.foreground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:e})=>e&&yh}

  ${nl} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`,kY=z.div`
  display: flex;
  &:focus {
    outline: none;
  }
`,xp=n=>{var o=n,{label:e,icon:t,children:r}=o,i=To(o,["label","icon","children"]);return u.createElement(CY,L({},i),u.createElement(kY,null,t))},IP=z(bp)`
  background: ${e=>e.theme.button.containedPrimaryBackground};
  color: ${e=>e.theme.button.containedPrimaryForeground};
  border: 1px solid ${e=>e.theme.button.containedPrimaryBackground};

  &:active {
    color: ${e=>e.theme.button.containedPrimaryForeground};
  }

  svg {
    color: ${e=>e.theme.button.containedPrimaryForeground};

    &:active {
      color: ${e=>e.theme.button.containedPrimaryForeground};
    }
  }
`,TY=z.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
  ${e=>e.withBackground?ne`
          color: ${e.theme.card.labelForeground};
        `:ne`
          color: ${e.theme.card.foreground};
        `}
`,EY=z.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  left: 0;
  ${e=>e.withBackground?ne`
          color: ${e.theme.card.labelForeground};
          height: 40px;
          background: ${e.theme.card.labelBackground};
        `:ne`
          color: ${e.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`,DY=z.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${e=>e.theme.card.labelForeground};
  ${e=>e.withBackground?ne`
          border-top-color: ${e.theme.card.labelForeground};
        `:ne`
          border-top-color: ${e.theme.card.foreground};
        `}
  transform: rotate(${e=>e.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`,IY=z.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`,RY=z.div`
  ${aC}
`,wn=({children:e,className:t,caret:r,isActive:i,style:n,withBackground:o,hidden:s})=>{if(s)return u.createElement(RY,null,e);const a=()=>u.createElement(IY,null,u.createElement(DY,{"aria-hidden":!0,rotation:i?180:0,withBackground:o}));return u.createElement(EY,{className:t,withBackground:o,style:n},u.createElement(TY,{"data-test":Le.CardLabel,withBackground:o},e,r&&a()))},RP=z.div.attrs(e=>({"data-test":Le.CardAvatar,style:{backgroundImage:`url(${e.url})`}}))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`,FY=Cf`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`,FP=Cf`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`,uc=[],OY=function(){return uc.some(function(e){return e.activeTargets.length>0})},MY=function(){return uc.some(function(e){return e.skippedTargets.length>0})},OP="ResizeObserver loop completed with undelivered notifications.",PY=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:OP}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=OP),window.dispatchEvent(e)},wp;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(wp||(wp={}));var MP=function(){function e(t,r,i,n){return this.x=t,this.y=r,this.width=i,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,i=t.y,n=t.top,o=t.right,s=t.bottom,a=t.left,l=t.width,c=t.height;return{x:r,y:i,top:n,right:o,bottom:s,left:a,width:l,height:c}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),cC=function(e){return e instanceof SVGElement&&"getBBox"in e},PP=function(e){if(cC(e)){var t=e.getBBox(),r=t.width,i=t.height;return!r&&!i}var n=e,o=n.offsetWidth,s=n.offsetHeight;return!(o||s||e.getClientRects().length)},AP=function(e){var t,r,i=(r=(t=e)===null||t===void 0?void 0:t.ownerDocument)===null||r===void 0?void 0:r.defaultView;return!!(i&&e instanceof i.Element)},AY=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Sp=typeof window!="undefined"?window:{},a_=new WeakMap,zP=/auto|scroll/,zY=/^tb|vertical/,$Y=/msie|trident/i.test(Sp.navigator&&Sp.navigator.userAgent),rs=function(e){return parseFloat(e||"0")},_h=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),Object.freeze({inlineSize:(r?t:e)||0,blockSize:(r?e:t)||0})},$P=Object.freeze({devicePixelContentBoxSize:_h(),borderBoxSize:_h(),contentBoxSize:_h(),contentRect:new MP(0,0,0,0)}),BP=function(e,t){if(t===void 0&&(t=!1),a_.has(e)&&!t)return a_.get(e);if(PP(e))return a_.set(e,$P),$P;var r=getComputedStyle(e),i=cC(e)&&e.ownerSVGElement&&e.getBBox(),n=!$Y&&r.boxSizing==="border-box",o=zY.test(r.writingMode||""),s=!i&&zP.test(r.overflowY||""),a=!i&&zP.test(r.overflowX||""),l=i?0:rs(r.paddingTop),c=i?0:rs(r.paddingRight),h=i?0:rs(r.paddingBottom),f=i?0:rs(r.paddingLeft),d=i?0:rs(r.borderTopWidth),p=i?0:rs(r.borderRightWidth),v=i?0:rs(r.borderBottomWidth),g=i?0:rs(r.borderLeftWidth),m=f+c,y=l+h,_=g+p,b=d+v,w=a?e.offsetHeight-b-e.clientHeight:0,S=s?e.offsetWidth-_-e.clientWidth:0,C=n?m+_:0,D=n?y+b:0,E=i?i.width:rs(r.width)-C-S,I=i?i.height:rs(r.height)-D-w,M=E+m+S+_,k=I+y+w+b,R=Object.freeze({devicePixelContentBoxSize:_h(Math.round(E*devicePixelRatio),Math.round(I*devicePixelRatio),o),borderBoxSize:_h(M,k,o),contentBoxSize:_h(E,I,o),contentRect:new MP(f,l,E,I)});return a_.set(e,R),R},LP=function(e,t,r){var i=BP(e,r),n=i.borderBoxSize,o=i.contentBoxSize,s=i.devicePixelContentBoxSize;switch(t){case wp.DEVICE_PIXEL_CONTENT_BOX:return s;case wp.BORDER_BOX:return n;default:return o}},BY=function(){function e(t){var r=BP(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=[r.borderBoxSize],this.contentBoxSize=[r.contentBoxSize],this.devicePixelContentBoxSize=[r.devicePixelContentBoxSize]}return e}(),UP=function(e){if(PP(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},LY=function(){var e=1/0,t=[];uc.forEach(function(s){if(s.activeTargets.length!==0){var a=[];s.activeTargets.forEach(function(c){var h=new BY(c.target),f=UP(c.target);a.push(h),c.lastReportedSize=LP(c.target,c.observedBox),f<e&&(e=f)}),t.push(function(){s.callback.call(s.observer,a,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var r=0,i=t;r<i.length;r++){var n=i[r];n()}return e},NP=function(e){uc.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(n){n.isActive()&&(UP(n.target)>e?r.activeTargets.push(n):r.skippedTargets.push(n))})})},UY=function(){var e=0;for(NP(e);OY();)e=LY(),NP(e);return MY()&&PY(),e>0},uC,jP=[],NY=function(){return jP.splice(0).forEach(function(e){return e()})},jY=function(e){if(!uC){var t=0,r=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return NY()}).observe(r,i),uC=function(){r.textContent=""+(t?t--:t++)}}jP.push(e),uC()},HY=function(e){jY(function(){requestAnimationFrame(e)})},l_=0,WY=function(){return!!l_},VY=250,GY={attributes:!0,characterData:!0,childList:!0,subtree:!0},HP=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],WP=function(e){return e===void 0&&(e=0),Date.now()+e},hC=!1,qY=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=VY),!hC){hC=!0;var i=WP(t);HY(function(){var n=!1;try{n=UY()}finally{if(hC=!1,t=i-WP(),!WY())return;n?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,GY)};document.body?r():Sp.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),HP.forEach(function(r){return Sp.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),HP.forEach(function(r){return Sp.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),dC=new qY,VP=function(e){!l_&&e>0&&dC.start(),l_+=e,!l_&&dC.stop()},XY=function(e){return!cC(e)&&!AY(e)&&getComputedStyle(e).display==="inline"},YY=function(){function e(t,r){this.target=t,this.observedBox=r||wp.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=LP(this.target,this.observedBox,!0);return XY(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),QY=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}(),c_=new WeakMap,GP=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},u_=function(){function e(){}return e.connect=function(t,r){var i=new QY(t,r);c_.set(t,i)},e.observe=function(t,r,i){var n=c_.get(t),o=n.observationTargets.length===0;GP(n.observationTargets,r)<0&&(o&&uc.push(n),n.observationTargets.push(new YY(r,i&&i.box)),VP(1),dC.schedule())},e.unobserve=function(t,r){var i=c_.get(t),n=GP(i.observationTargets,r),o=i.observationTargets.length===1;n>=0&&(o&&uc.splice(uc.indexOf(i),1),i.observationTargets.splice(n,1),VP(-1))},e.disconnect=function(t){var r=this,i=c_.get(t);i.observationTargets.slice().forEach(function(n){return r.unobserve(t,n.target)}),i.activeTargets.splice(0,i.activeTargets.length)},e}(),fC=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");u_.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!AP(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");u_.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!AP(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");u_.unobserve(this,t)},e.prototype.disconnect=function(){u_.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),KY=ni(i_()),qP=u.createContext({}),ZY=z.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${e=>e.theme.background};
  color: ${e=>e.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;

    scrollbar-width: thin;
    scrollbar-color: ${e=>e.theme.scrollbar.handleColor} transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: ${e=>e.theme.scrollbar.handleColor};
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: ${e=>e.theme.scrollbar.handleColor};
    }
  }

  /* This will be applied first in some cases and should be treated as such */
  h1,
  h2,
  h3,
  input,
  textarea,
  label,
  span,
  div,
  p {
    line-height: normal;
  }
`,JY=class extends u.Component{constructor(e){super(e),this.node=u.createRef(),this.saveEditorDimensions=r=>{this.setState({contextValue:{element:r,rect:r.getBoundingClientRect()}})};var t;if((t=u)!=null&&t.version){const r=Number.parseInt(u.version.split(".")[0],10),i=Number.parseInt(u.version.split(".")[1],10);(r<16||r===16&&i<8)&&console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=(0,KY.default)(this.saveEditorDimensions,100),this.resizeObserver=new fC(([r])=>{this.saveEditorDimensions(r.target)}),this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var e;(e=this.node)!=null&&e.current&&this.resizeObserver.observe(this.node.current)}componentWillUnmount(){var e;(e=this.node)!=null&&e.current&&this.resizeObserver.unobserve(this.node.current)}render(){const{children:e}=this.props,{contextValue:t}=this.state;return u.createElement(ZY,{ref:this.node,"data-test":Le.EditorContainer},u.createElement(qP.Provider,{value:t},e))}};if(!K.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!I4)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var eQ=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o};function tQ(){var e=eQ(K.exports.useState(0),2),t=e[1],r=K.exports.useCallback(function(){t(function(i){return i+1})},[]);return r}function rQ(e){return typeof Symbol=="function"?Symbol.for(e):"__$mobx-react "+e+"__"}var iQ={};function nQ(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:iQ}var oQ=rQ("observerBatching");function sQ(e){e()}function aQ(e){e||(e=sQ),M4({reactionScheduler:e}),nQ()[oQ]=!0}function lQ(e){return P4(e)}function cQ(e){var t={cleanAt:Date.now()+uQ,reaction:e};return t}var uQ=1e4,hQ=1e4,Cp=new Set,pC;function XP(){pC===void 0&&(pC=setTimeout(pQ,hQ))}function dQ(e){Cp.add(e),XP()}function fQ(e){Cp.delete(e)}function pQ(){pC=void 0;var e=Date.now();Cp.forEach(function(t){var r=t.current;r&&e>=r.cleanAt&&(r.reaction.dispose(),t.current=null,Cp.delete(t))}),Cp.size>0&&XP()}var h_=!1,d_=[];function mQ(e){return function(){h_?d_.push(e):e()}}function gQ(e){h_=!0,d_=[];try{var t=e();h_=!1;var r=d_.length>0?d_:void 0;return u.useLayoutEffect(function(){r&&r.forEach(function(i){return i()})},[r]),t}finally{h_=!1}}var vQ={};function YP(e){return"observer"+e}function QP(e,t,r){t===void 0&&(t="observed"),r===void 0&&(r=vQ);var i=r.useForceUpdate||tQ,n=i(),o=mQ(n),s=u.useRef(null);if(!s.current){var a=new Du(YP(t),function(){l.mounted?o():(a.dispose(),s.current=null)}),l=cQ(a);s.current=l,dQ(s)}var c=s.current.reaction;return u.useDebugValue(c,lQ),u.useEffect(function(){return fQ(s),s.current?s.current.mounted=!0:(s.current={reaction:new Du(YP(t),function(){o()}),cleanAt:1/0},o()),function(){s.current.reaction.dispose(),s.current=null}},[]),gQ(function(){var h,f;if(c.track(function(){try{h=e()}catch(d){f=d}}),f)throw f;return h})}var mC=function(){return mC=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},mC.apply(this,arguments)};function yQ(e,t){var r=mC({forwardRef:!1},t),i=e.displayName||e.name,n=function(s,a){return QP(function(){return e(s,a)},i)};n.displayName=i;var o;return r.forwardRef?o=K.exports.memo(K.exports.forwardRef(n)):o=K.exports.memo(n),bQ(e,o),o.displayName=i,o}var _Q={$$typeof:!0,render:!0,compare:!0,type:!0};function bQ(e,t){Object.keys(e).forEach(function(r){_Q[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}function gC(e){var t=e.children,r=e.render,i=t||r;return typeof i!="function"?null:QP(i)}gC.propTypes={children:KP,render:KP},gC.displayName="Observer";function KP(e,t,r,i,n){var o=t==="children"?"render":"children",s=typeof e[t]=="function",a=typeof e[o]=="function";return s&&a?new Error("MobX Observer: Do not use children and render in the same time in`"+r):s||a?null:new Error("Invalid prop `"+n+"` of type `"+typeof e[t]+"` supplied to `"+r+"`, expected `function`.")}aQ(Zv.exports.unstable_batchedUpdates);var ZP=0;function xQ(e){if(typeof Symbol=="function")return Symbol(e);var t="__$mobx-react "+e+" ("+ZP+")";return ZP++,t}var vC={};function sl(e){return vC[e]||(vC[e]=xQ(e)),vC[e]}function JP(e,t){if(eA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var n=0;n<r.length;n++)if(!Object.hasOwnProperty.call(t,r[n])||!eA(e[r[n]],t[r[n]]))return!1;return!0}function eA(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var wQ={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};function SQ(e,t){var r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));Object.getOwnPropertyNames(e).forEach(function(i){!wQ[i]&&r.indexOf(i)===-1&&Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}function Ws(e,t,r){Object.hasOwnProperty.call(e,t)?e[t]=r:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:r})}var tA=sl("patchMixins"),rA=sl("patchedDefinition");function CQ(e,t){var r=e[tA]=e[tA]||{},i=r[t]=r[t]||{};return i.locks=i.locks||0,i.methods=i.methods||[],i}function iA(e,t){for(var r=this,i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];t.locks++;try{var s;return e!=null&&(s=e.apply(this,n)),s}finally{t.locks--,t.locks===0&&t.methods.forEach(function(a){a.apply(r,n)})}}function nA(e,t){var r=function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];iA.call.apply(iA,[this,e,t].concat(o))};return r}function kQ(e,t,r){var i=CQ(e,t);i.methods.indexOf(r)<0&&i.methods.push(r);var n=Object.getOwnPropertyDescriptor(e,t);if(!(n&&n[rA])){var o=e[t],s=oA(e,t,n?n.enumerable:void 0,i,o);Object.defineProperty(e,t,s)}}function oA(e,t,r,i,n){var o,s=nA(n,i);return o={},o[rA]=!0,o.get=function(){return s},o.set=function(l){if(this===e)s=nA(l,i);else{var c=oA(this,t,r,i,l);Object.defineProperty(this,t,c)}},o.configurable=!0,o.enumerable=r,o}var yC=V4,sA=sl("isMobXReactObserver"),aA=sl("isUnmounted"),f_=sl("skipRender"),p_=sl("isForcingUpdate");function TQ(e){var t=e.prototype;if(e[sA]){var r=_C(t);console.warn("The provided component class ("+r+`) 
                has already been declared as an observer component.`)}else e[sA]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==K.exports.PureComponent){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=lA;else if(t.shouldComponentUpdate!==lA)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}cA(t,"props"),cA(t,"state");var i=t.render;return t.render=function(){return EQ.call(this,i)},kQ(t,"componentWillUnmount",function(){var n;if((n=this.render[yC])===null||n===void 0||n.dispose(),this[aA]=!0,!this.render[yC]){var o=_C(this);console.warn("The reactive render of an observer class component ("+o+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),e}function _C(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function EQ(e){var t=this;Ws(this,f_,!1),Ws(this,p_,!1);var r=_C(this),i=e.bind(this),n=!1,o=new Du(r+".render()",function(){if(!n&&(n=!0,t[aA]!==!0)){var a=!0;try{Ws(t,p_,!0),t[f_]||K.exports.Component.prototype.forceUpdate.call(t),a=!1}finally{Ws(t,p_,!1),a&&o.dispose()}}});o.reactComponent=this,s[yC]=o,this.render=s;function s(){n=!1;var a=void 0,l=void 0;if(o.track(function(){try{l=lH(!1,i)}catch(c){a=c}}),a)throw a;return l}return s.call(this)}function lA(e,t){return this.state!==t?!0:!JP(this.props,e)}function cA(e,t){var r=sl("reactProp_"+t+"_valueHolder"),i=sl("reactProp_"+t+"_atomHolder");function n(){return this[i]||Ws(this,i,Kx("reactive "+t)),this[i]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var s=!1;return Eu&&Ia&&(s=Eu(!0)),n.call(this).reportObserved(),Eu&&Ia&&Ia(s),this[r]},set:function(s){!this[p_]&&!JP(this[r],s)?(Ws(this,r,s),Ws(this,f_,!0),n.call(this).reportChanged(),Ws(this,f_,!1)):Ws(this,r,s)}})}var uA=typeof Symbol=="function"&&Symbol.for,hA=uA?Symbol.for("react.forward_ref"):typeof K.exports.forwardRef=="function"&&K.exports.forwardRef(function(e){return null}).$$typeof,dA=uA?Symbol.for("react.memo"):typeof K.exports.memo=="function"&&K.exports.memo(function(e){return null}).$$typeof;function Q(e){if(e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),dA&&e.$$typeof===dA)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(hA&&e.$$typeof===hA){var t=e.render;if(typeof t!="function")throw new Error("render property of ForwardRef was not a function");return K.exports.forwardRef(function(){var i=arguments;return K.exports.createElement(gC,null,function(){return t.apply(void 0,i)})})}return typeof e=="function"&&(!e.prototype||!e.prototype.render)&&!e.isReactClass&&!Object.prototype.isPrototypeOf.call(K.exports.Component,e)?yQ(e):TQ(e)}function m_(){return m_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},m_.apply(this,arguments)}function DQ(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,o;for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}var g_=u.createContext({});function bC(e){var t=e.children,r=DQ(e,["children"]),i=u.useContext(g_),n=u.useRef(m_({},i,r)),o=n.current;return u.createElement(g_.Provider,{value:o},t)}bC.displayName="MobXProvider";function fA(e,t,r,i){var n=u.forwardRef(function(o,s){var a=m_({},o),l=u.useContext(g_);return Object.assign(a,e(l||{},a)||{}),s&&(a.ref=s),u.createElement(t,a)});return i&&(n=Q(n)),n.isMobxInjector=!0,SQ(t,n),n.wrappedComponent=t,n.displayName=IQ(t,r),n}function IQ(e,t){var r,i=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t?r="inject-with-"+t+"("+i+")":r="inject("+i+")",r}function RQ(e){return function(t,r){return e.forEach(function(i){if(!(i in r)){if(!(i in t))throw new Error("MobX injector: Store '"+i+"' is not available! Make sure it is provided by some Provider");r[i]=t[i]}}),r}}function vt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(typeof arguments[0]=="function"){var i=arguments[0];return function(n){return fA(i,n,i.name,!0)}}else return function(n){return fA(RQ(t),n,t.join("-"),!1)}}if(!K.exports.Component)throw new Error("mobx-react requires React to be available");if(!Ye)throw new Error("mobx-react requires mobx to be available");var xC=ne`
  position: absolute;
  top: 0;
  left: 0;
  height: ${e=>e.theme.measurements.colorItem.size}px;
  width: ${e=>e.theme.measurements.colorItem.size}px;
  border-radius: ${e=>e.theme.colorItem.borderRadius||`${e.theme.shape.radiusSmall}px`};
  pointer-events: none;
`,FQ=z.div.attrs(e=>({style:{background:e.color}}))`
  ${xC}
  z-index: ${e=>e.theme.measurements.zIndex.colorItem.background};
`,pA=FQ,OQ=z.div`
  ${xC}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${e=>e.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${e=>e.theme.colorItem.borderRadius||`${e.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${e=>e.isActive&&ne`
      border-color: ${e.theme.selectColor.activeBorderColor};
    `}
`,wC=z.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`,MQ=({isActive:e,className:t,style:r})=>u.createElement(OQ,{isActive:e,className:t,style:r},e&&u.createElement(u.Fragment,null,u.createElement(wC,null),u.createElement(wC,null),u.createElement(wC,null))),mA=MQ,PQ=z.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${e=>e.theme.measurements.colorItem.size}px;
  width: ${e=>e.theme.measurements.colorItem.size}px;
  margin: ${e=>e.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${e=>e.theme.colorItem.borderRadius||`${e.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${Hs}

  &:disabled {
    opacity: ${e=>e.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`,gA=PQ,AQ=z.div.attrs(e=>{const t=e.url?{backgroundImage:`url(${e.url})`}:{};return L({style:t},e.style)})`
  ${xC}
  z-index: ${e=>e.theme.measurements.zIndex.colorItem.tiledBackground};
`,vA=AQ,zQ=({isActive:e,onClick:t,color:r,label:i,isDisabled:n,tiledBackgroundUrl:o,className:s,style:a,children:l})=>u.createElement(gA,{disabled:n,onClick:t,"aria-label":i,className:s,style:a},u.createElement(vA,{url:o}),u.createElement(pA,{color:r}),u.createElement(mA,{isActive:e}),l),$Q=vt("config")(Q(zQ)),BQ=z.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${e=>e.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${e=>e.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`,yA=BQ,LQ=z.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${e=>e.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${e=>e.isVisible&&ne`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`,_A=({isVisible:e,className:t,children:r})=>u.createElement(LQ,{isVisible:e,className:t},r),UQ=z.div.attrs(({style:e})=>({role:"dialog","aria-hidden":!1,style:e}))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${e=>e.top}px);
  left: calc(50% + ${e=>e.left}px);
  width: ${e=>e.width};
  height: ${e=>e.height};
  transform: translate(-50%, -50%);
  border-radius: ${e=>e.theme.shape.radiusLarge}px;
  background: ${e=>e.theme.modal.background};
  color: ${e=>e.theme.modal.bodyForeground};
  z-index: ${e=>e.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`,bA=UQ,NQ=({isVisible:e=!1,width:t="350px",height:r="fit-content",position:i,header:n,body:o,footer:s,className:a,style:l,children:c})=>u.createElement(_A,{isVisible:e},u.createElement(yA,null),u.createElement(bA,{height:r,width:t,left:i.x,top:i.y,className:a,style:l,"data-test":Le.Dialog},n,o,c,s)),jQ=NQ,HQ=z.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  color: ${e=>e.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`,kp=HQ,WQ=z.div`
  display: flex;
  border-top: 2px solid
    ${e=>e.type==="error"?e.theme.error:e.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`,SC=WQ,VQ=z.h3`
  font-size: ${e=>e.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline2.case};
  color: ${e=>e.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`,CC=VQ,GQ=Cf`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,qQ=z.div`
  display: inline-block;
  position: relative;
  width: 45px;
  height: 45px;
`,v_=z.div`
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 2.5px;
  border: 2.5px solid ${e=>e.theme.primary};
  border-radius: 50%;
  animation: ${GQ} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: ${e=>e.theme.primary} transparent transparent
    transparent;

  :nth-child(1) {
    animation-delay: -0.45s;
  }
  :nth-child(2) {
    animation-delay: -0.3s;
  }
  :nth-child(3) {
    animation-delay: -0.15s;
  }
`,XQ=({className:e,style:t})=>u.createElement(qQ,{className:e,style:t},u.createElement(v_,null),u.createElement(v_,null),u.createElement(v_,null),u.createElement(v_,null)),xA=XQ,kC=["Moz","Webkit","O","ms"];function YQ(e){let t="",r=!0,i;for(i=0;i<e.length;i+=1)r?(t+=e[i].toUpperCase(),r=!1):e[i]==="-"?r=!0:t+=e[i];return t}function wA(e,t){return t?`${t}${YQ(e)}`:e}function QQ(e="transform"){if(typeof window=="undefined"||typeof window.document=="undefined")return"";const{style:t}=window.document.documentElement;if(e in t)return"";let r;for(r=0;r<kC.length;r+=1)if(wA(e,kC[r])in t)return kC[r];return""}var KQ=QQ();function TC(e,t){for(let r=0,{length:i}=e;r<i;r+=1)if(t.apply(t,[e[r],r,e]))return e[r];return null}function SA(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function Tp(e){return typeof e=="number"&&!Number.isNaN(e)}function Pi(e){return parseInt(e,10)}var y_="";function ZQ(e,t){return y_||(y_=TC(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],r=>SA(e[r]))),SA(e[y_])?e[y_](t):!1}function CA(e,t,r){let i=e;do{if(ZQ(i,t))return!0;if(i===r)return!1;i=i.parentNode}while(i);return!1}function EC(e,t,r){!e||(e.attachEvent?e.attachEvent(`on${t}`,r):e.addEventListener?e.addEventListener(t,r,!0):e[`on${t}`]=r)}function hc(e,t,r){!e||(e.detachEvent?e.detachEvent(`on${t}`,r):e.removeEventListener?e.removeEventListener(t,r,!0):e[`on${t}`]=null)}function JQ(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=Pi(r.borderTopWidth),t+=Pi(r.borderBottomWidth),t}function eK(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=Pi(r.borderLeftWidth),t+=Pi(r.borderRightWidth),t}function tK(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=Pi(r.paddingTop),t-=Pi(r.paddingBottom),t}function rK(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=Pi(r.paddingLeft),t-=Pi(r.paddingRight),t}function iK(e,t){const i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),n=e.clientX+t.scrollLeft-i.left,o=e.clientY+t.scrollTop-i.top;return{x:n,y:o}}function nK({x:e,y:t,rotation:r}){const i=`translate(${e}px,${t}px) rotate(${r}rad)`;return{[wA("transform",KQ)]:i}}function oK(e,t){let r=null;return e.targetTouches&&(r=TC(e.targetTouches,i=>t===i.identifier)),e.changedTouches&&!r&&(r=TC(e.changedTouches,i=>t===i.identifier)),r}function sK(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:null}function DC(e){const t=e.findDOMNode();return t||null}function aK(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function lK(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:i}=e.props;i=typeof i=="string"?i:aK(i);const n=DC(e);if(!n)return[t,r];if(typeof i=="string"){const{ownerDocument:o}=n,s=o.defaultView;let a;i==="parent"?a=n.parentNode:a=o.querySelector(i);const l=s.getComputedStyle(n),c=s.getComputedStyle(a);i={left:-n.offsetLeft+Pi(c.paddingLeft)+Pi(l.marginLeft),top:-n.offsetTop+Pi(c.paddingTop)+Pi(l.marginTop),right:rK(a)-eK(n)-n.offsetLeft+Pi(c.paddingRight)-Pi(l.marginRight),bottom:tK(a)-JQ(n)-n.offsetTop+Pi(c.paddingBottom)-Pi(l.marginBottom)}}return Tp(i.right)&&(t=Math.min(t,i.right)),Tp(i.bottom)&&(r=Math.min(r,i.bottom)),Tp(i.left)&&(t=Math.max(t,i.left)),Tp(i.top)&&(r=Math.max(r,i.top)),[t,r]}function IC(e,t,r){const{state:i}=e,n=!Tp(i.lastX),o=DC(e);return n?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:o,deltaX:t-i.lastX,deltaY:r-i.lastY,lastX:i.lastX,lastY:i.lastY,x:t,y:r}}function RC(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function cK(e){return e.props.axis==="both"||e.props.axis==="x"}function uK(e){return e.props.axis==="both"||e.props.axis==="y"}function FC(e,t){const r=DC(t);if(!r)return{x:0,y:0};let{offsetParent:i}=t.props;return!i&&r instanceof HTMLElement&&(i=r.offsetParent||r.ownerDocument.body),iK(e,i)}var is={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Sn=is.mouse,kA={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}},__=class extends u.Component{constructor(){super(...arguments),this.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0},this.findDOMNode=()=>{const{nodeRef:e}=this.props;return(e==null?void 0:e.current)||null},this.getTouchFromEvent=e=>{const t=sK(e);return this.setState({touchIdentifier:t}),oK(e,t)},this.preventDefault=e=>{e.stopPropagation&&e.stopPropagation()},this.handleDragStart=e=>{const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof Node)||this.props.handle&&!CA(e.target,this.props.handle,t)||this.props.cancel&&CA(e.target,this.props.cancel,t))return!1;const i=FC(e,this);if(i==null)return!1;const{x:n,y:o}=i,s=IC(this,n,o);if(this.props.onStart(e,s)===!1)return!1;this.setState({dragging:!0,lastX:n,lastY:o}),Sn.move==="touchmove"?EC(r,Sn.move,this.onTouchDrag):EC(r,Sn.move,this.onMouseDrag),EC(r,Sn.stop,this.handleDragStop)},this.handleDrag=e=>{const t=FC(e,this);if(t==null)return;const{x:r,y:i}=t,n=IC(this,r,i);if(this.props.onDrag(e,n)===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const a=document.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(a)}return}this.setState({lastX:r,lastY:i})},this.handleDragStop=e=>{if(!this.state.dragging)return;const t=FC(e,this);if(t==null)return;const{x:r,y:i}=t,n=IC(this,r,i),o=this.findDOMNode();this.setState({dragging:!1,lastX:NaN,lastY:NaN}),this.props.onStop(e,n),o&&(Sn.move==="touchmove"?hc(o.ownerDocument,Sn.move,this.onTouchDrag):hc(o.ownerDocument,Sn.move,this.onMouseDrag),hc(o.ownerDocument,Sn.stop,this.handleDragStop))},this.onMouseDown=e=>(this.preventDefault(e),Sn=is.mouse,this.props.onMouseDown(e),e.button&&typeof e.button=="number"&&e.button!==0?!1:this.handleDragStart(e)),this.onMouseDrag=e=>(this.preventDefault(e),this.handleDrag(e)),this.onMouseUp=e=>(this.preventDefault(e),Sn=is.mouse,this.handleDragStop(e)),this.onTouchStart=e=>{this.preventDefault(e),Sn=is.touch;const t=this.getTouchFromEvent(e);return this.handleDragStart(t)},this.onTouchDrag=e=>{this.preventDefault(e),Sn=is.touch;const t=this.getTouchFromEvent(e);return this.handleDrag(t)},this.onTouchEnd=e=>{this.preventDefault(e),Sn=is.touch;const t=this.getTouchFromEvent(e);return this.handleDragStop(t)}}componentWillUnmount(){const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;hc(t,is.mouse.move,this.onMouseDrag),hc(t,is.touch.move,this.onTouchDrag),hc(t,is.mouse.stop,this.handleDragStop),hc(t,is.touch.stop,this.handleDragStop)}}render(){return u.cloneElement(u.Children.only(this.props.children),{style:L({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};__.defaultProps=kA,__.displayName="DraggableCore";var hK=ge(L({},kA),{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1}),OC=class extends u.Component{constructor(e){super(e),this.onDragStart=(t,r)=>{if(this.props.onStart(t,RC(this,r))===!1)return!1;this.setState({dragging:!0,dragged:!0})},this.onDrag=(t,r)=>{const{position:i,defaultPosition:n,onDrag:o,bounds:s}=this.props;if(!this.state.dragging)return!1;const a=RC(this,r),l=Boolean(i),c={x:l?a.x:n.x,y:l?a.y:n.y,slackX:0,slackY:0};if(s){const{x:f,y:d}=c;c.x+=this.state.slackX,c.y+=this.state.slackY;const[p,v]=lK(this,c.x,c.y);c.x=p,c.y=v,c.slackX=this.state.slackX+(f-c.x),c.slackY=this.state.slackY+(d-c.y),a.x=c.x,a.y=c.y,a.deltaX=c.x-this.state.x,a.deltaY=c.y-this.state.y}if(o(t,a)===!1)return!1;this.setState(c)},this.onDragStop=(t,r)=>{if(!this.state.dragging||this.props.onStop(t,RC(this,r))===!1)return!1;const n={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(this.props.position)){const{x:s,y:a}=this.props.position;n.x=s,n.y=a}this.setState(n)},this.findDOMNode=()=>{const{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null},this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(e){Boolean(this.props.position)&&(this.props.updateOnPosition?(e.position&&e.position.x!==this.props.position.x||e.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(e.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))}componentWillUnmount(){this.setState({dragging:!1})}render(){const b=this.props,{position:e,defaultPosition:t,rotation:r,defaultClassName:i,defaultClassNameDragging:n,defaultClassNameDragged:o}=b,s=To(b,["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"]),{x:a,y:l,dragging:c,dragged:h}=this.state;let f={};const p=!Boolean(e)||c,v=e||t,g={x:cK(this)&&p?a:v.x,y:uK(this)&&p?l:v.y,rotation:r};f=nK(g);const m=u.Children.only(this.props.children),y=[m.props.className||"",i,c?n:"",h?o:""].join(" ").trim(),_=u.cloneElement(m,{className:y,style:L(L({},m.props.style),f)});return u.createElement(__,ge(L({},s),{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),_)}};OC.defaultProps=hK,OC.displayName="Draggable";var dK=OC,fK=ni(yY()),pK=z.label`
  ${aC}
`,mK=z.label`
  display: block;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:e})=>e&&ne`
      opacity: ${t=>t.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`,Vs=({label:e,htmlFor:t,show:r,style:i,isDisabled:n,className:o})=>{const s=r?mK:pK,a=t||(e?e.replace(" ","-"):void 0);return u.createElement(s,{style:i,isDisabled:n,htmlFor:a,className:o},e)};Vs.defaultProps={show:!0};var gK=z.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`,vK=z(Vs)`
  align-self: flex-start;
`,TA=z(ol)`
  color: ${e=>e.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`,yK=z.div`
  display: flex;
  justify-content: space-between;
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width-48}px;
`,_K=z.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${e=>.6*e.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};
`,bK=z.div`
  width: ${e=>.6*e.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`,xK=z.span`
  width: ${e=>Math.round(e.length*.6*e.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${e=>e.activeIndex*.6*e.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;
`,EA=z.div`
  border: solid ${e=>e.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:e})=>e==="left"?ne`
          margin-left: 2px;
          transform: rotate(135deg);
        `:ne`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`,DA=class extends u.PureComponent{constructor(e){super(e),this.updateIndex=(t,r=!1)=>{let i=t+(r?-1:1);const n=this.props.list.length-1;i>n&&(i=0),i<0&&(i=n),this.props.onSelect(this.props.list[i].identifier)},this.getActiveIndex=t=>{const{list:r}=this.props,i=r.findIndex(n=>n.identifier===t);return i!==-1?i:0},this.throttledUpdateIndex=(0,fK.default)(this.updateIndex,600)}render(){const{list:e,label:t,showLabel:r=!0}=this.props,i=this.getActiveIndex(this.props.defaultIdentifier),n=e.length<=1;return u.createElement(gK,{"data-test":Le.CarouselSlider},u.createElement(vK,{show:r,label:t}),u.createElement(yK,{id:`photoeditorsdk-${t.replace(" ","-")}`},u.createElement(TA,{ariaLabel:"Select Previous",isDisabled:n,onClick:()=>this.throttledUpdateIndex(i,!0)},u.createElement(EA,{direction:"left"})),u.createElement(bK,null,u.createElement(xK,{activeIndex:i,length:e.length},e.map(o=>u.createElement(_K,{key:o.identifier},o.value)))),u.createElement(TA,{ariaLabel:"Select Next",isDisabled:n,onClick:()=>this.throttledUpdateIndex(i)},u.createElement(EA,{direction:"right"}))))}};DA.defaultProps={showLabel:!0};var wK=DA,SK=z.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${e=>e.theme.measurements.inputs.checkbox.maxWidth}px;
`,IA=SK,CK=z.div.attrs({tabIndex:0})`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${e=>e.theme.checkbox.background};
  border-radius: ${e=>e.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${Hs}

  &:hover {
    opacity: ${e=>e.theme.checkbox.hoverOpacity};
  }
  ${e=>e.isChecked&&ne`
      background-color: ${e.theme.checkbox.activeBackground};
      &::after {
        color: ${e.theme.checkbox.activeForeground};
        border-color: ${e.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${e.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${e=>e.isDisabled&&ne`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`,MC=CK,kK=z.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${Hs}
`,RA=kK,FA=({label:e,value:t,checkMarkPosition:r,onClick:i,isDisabled:n,className:o,style:s})=>{const a=`photoeditorsdk-${e.replace(" ","-")}`;return u.createElement(IA,{"data-test":Le.Checkbox,className:o,style:s},r==="left"&&u.createElement(MC,{onClick:i,isDisabled:n,isChecked:t}),u.createElement(Vs,{isDisabled:n,label:e,htmlFor:a}),u.createElement(RA,{id:a,disabled:n,checked:t,onChange:i}),r==="right"&&u.createElement(MC,{onClick:i,isDisabled:n,isChecked:t}))},TK=FA;FA.defaultProps={value:!1,checkMarkPosition:"left"};var PC=ne`
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  height: 100%;
  width: 100%;
  min-height: 26px;
  color: ${e=>e.theme.textInput.foreground};
  padding-bottom: 7px;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${e=>e.theme.textInput.borderColor};
  background: ${e=>e.theme.textInput.background};
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &::-webkit-search-decoration,
  &::-webkit-search-cancel-button,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${e=>e.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &:focus {
    outline: none;
    border-color: ${e=>e.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${e=>e.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${e=>e.theme.textInput.hoverBorderColor};
  }
`,OA=ne`
  opacity: ${e=>e.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`,EK=z.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${OA}
  }

  ${({isDisabled:e})=>e&&OA}
`,DK=z.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${e=>e.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${e=>e.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${e=>e.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:e})=>e&&ne`
      border-left: 2px solid ${t=>t.theme.primary};
    `}

  ${Hs}
`,IK=z.div`
  display: flex;
  ${e=>yn()||Gl()?ne`
        overflow: hidden;
      `:e.direction==="vertical"?ne`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `:ne`
      overflow-y: hidden;
      overflow-x: auto;
    `};
`,RK=z.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
  display: flex;
  flex-direction: ${e=>e.direction==="vertical"?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${e=>yn()||Gl()?ne`
        ${()=>e.direction==="vertical"?ne`
              width: 100%;
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `:ne`
            height: 100%;
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}

        scrollbar-face-color: ${e.theme.scrollbar.handleColor};
        scrollbar-track-color: ${e.theme.toolbar.background};
        scrollbar-base-color: ${e.theme.toolbar.background};
        scrollbar-3dlight-color: ${e.theme.scrollbar.handleColor};
        scrollbar-highlight-color: ${e.theme.scrollbar.handleColor};
        scrollbar-arrow-color: ${e.theme.toolbar.background};
        scrollbar-shadow-color: ${e.theme.scrollbar.handleColor};
        scrollbar-dark-shadow-color: ${e.theme.scrollbar.handleColor};
      `:""}
`,Ep=({direction:e="horizontal","data-test":t,className:r,children:i})=>u.createElement(IK,{direction:e,className:r},u.createElement(RK,{direction:e,"data-test":t},i)),MA=z(Ep)`
  position: absolute;

  background: ${e=>e.theme.dropdown.listBackground};
  color: ${e=>e.theme.dropdown.listForeground};
  border: 1px solid ${e=>e.theme.dropdown.listBorderColor};
  box-shadow: ${e=>e.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${e=>e.isOpen?ne`
        visibility: visible;
        opacity: 1;
        display: flex;
      `:""}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>yn()?ne`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `:""}

  border-radius: 0 0 ${e=>e.theme.shape.radiusMedium}px
    ${e=>e.theme.shape.radiusMedium}px;
  z-index: ${e=>e.theme.measurements.zIndex.input.list};
`;MA.defaultProps={direction:"vertical"};var FK=z.div`
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  color: ${e=>e.theme.dropdown.foreground};
  background-color: ${e=>e.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${e=>e.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${e=>e.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${e=>e.theme.dropdown.hoverBorderColor};
  }

  ${Hs}
`,OK=z.div``,MK=class extends u.PureComponent{constructor(e){super(e),this.state={isOpen:!1},this.handleOutsideClick=t=>{this.node&&this.node.contains(t.target)||this.setState({isOpen:!1})},this.onSelect=t=>{const{onSelect:r}=this.props;r(t),this.setState({isOpen:!1})},this.onClick=()=>{this.setState(t=>({isOpen:!t.isOpen}))},this.listItem=t=>{const{itemStyle:r,selectedItem:i}=this.props,{isOpen:n}=this.state,{value:o,label:s}=t;let a={};return typeof r=="function"?a=r(t):r!==null&&typeof r=="object"&&(a=r),u.createElement(DK,{"aria-hidden":!n,tabIndex:0,style:a,onClick:()=>this.onSelect(o),key:o,isActive:i===o},s)},this.onKeyDown=t=>{(t.code==="Space"||t.code==="Enter")&&this.onClick()},this.nodeRef=t=>{this.node=t}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}render(){const{selectedItem:e,list:t,label:r,style:i,isDisabled:n}=this.props,{isOpen:o}=this.state,s=t.length>1,a=n?{}:{tabIndex:0};return u.createElement(OK,null,u.createElement(Vs,{isDisabled:n,style:{paddingLeft:"0px"},label:r}),u.createElement("div",{ref:this.nodeRef},u.createElement(EK,{isOpen:o,isDisabled:n},u.createElement(FK,ge(L({"data-test":Le.Dropdown,"aria-hidden":n},a),{showList:s,style:i,onClick:s?this.onClick:void 0,onKeyDown:this.onKeyDown}),e,s&&u.createElement(SP,{rotation:o?180:0})),u.createElement(MA,{"data-test":Le.DropdownList,isOpen:o},s&&t.map(this.listItem)))))}},PK=z.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`,AK=({children:e})=>{const t=r=>{r.preventDefault()};return u.createElement("form",{onSubmit:t},e)},zK=AK,$K=z.input`
  ${PC}
  /* override user agent style */
  padding: 0;
  &:disabled {
    opacity: ${e=>e.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`,BK=z.div`
  position: relative;
  &:first-child {
    margin-right: 15px;
  }
`,PA=class extends u.Component{constructor(){super(...arguments),this.onChange=e=>{const{onChange:t}=this.props;t&&t(e.target.value)}}render(){const{id:e,testId:t,value:r,type:i,min:n,max:o,onBlur:s,onFocus:a,onKeyUp:l,onKeyDown:c,onMouseUp:h,onTouchEnd:f,isDisabled:d,className:p,children:v}=this.props;return u.createElement(BK,{className:p},u.createElement($K,{id:e,"data-test":t,"aria-hidden":d,disabled:d,value:r,type:i,min:n,max:o,onChange:this.onChange,onBlur:s,onFocus:a,onKeyUp:l,onKeyDown:c,onMouseUp:h,onTouchEnd:f}),v)}};PA.defaultProps={type:"text"};var AA=PA,LK=z.div`
  ${yn()?ne``:ne`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`,b_=class extends u.Component{constructor(e){super(e),this.node=null,this.handleOutsideClick=t=>{this.node&&this.node.current&&this.node.current.contains(t.target)||this.onSubmit()},this.onSubmit=()=>{const{onSubmit:t}=this.props,{value:r,isActive:i}=this.state;if(t){const n=parseFloat(b_.cleanValue(r));!Number.isNaN(n)&&i&&t(`${n}`)}this.setState({isActive:!1})},this.onBlur=()=>{this.onSubmit()},this.onFocus=()=>{this.setState({isActive:!0})},this.onKeyDown=t=>{const{value:r}=this.state;if(t.key==="Enter")this.onSubmit();else if(t.key==="ArrowUp"){const i=parseFloat(b_.cleanValue(r));typeof i=="number"&&this.setState({value:(i+1).toString(),isActive:!0})}else if(t.key==="ArrowDown"){const i=parseFloat(b_.cleanValue(r));typeof i=="number"&&this.setState({value:(i-1).toString(),isActive:!0})}},this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isActive:!0})},this.state={value:this.props.value||"",isActive:!1},this.node=u.createRef()}static getDerivedStateFromProps({value:e},{value:t,isActive:r}){return e!==t&&!r?{value:e}:null}static cleanValue(e){return e?e.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1)}render(){const{id:e,label:t,isDisabled:r,ariaHidden:i,onMouseUp:n,onTouchEnd:o,className:s}=this.props,{value:a}=this.state;return u.createElement(LK,{ref:this.node,"data-test":Le.NummericInput,className:s},u.createElement(Vs,{htmlFor:e,label:t,show:!!t,isDisabled:r}),u.createElement(AA,{id:e,value:a,isDisabled:r,"aria-hidden":i,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:n,onTouchEnd:o}))}},zA=b_;zA.defaultProps={showLabel:!0};var $A=zA,UK=z.input.attrs({type:"search"})`
  ${PC}
`,NK=K.exports.forwardRef(({value:e,onChange:t,onKeyDown:r,placeholder:i,className:n,style:o},s)=>{const a=l=>{t&&t(l.target.value)};return u.createElement("div",{className:n,style:o},u.createElement(Vs,{show:!1,label:"photoeditorsdk-Search"}),u.createElement(UK,{ref:s,id:"photoeditorsdk-Search",value:e,onChange:a,onKeyDown:r,placeholder:i,autoComplete:"off"}))}),jK=z.div``,BA=({label:e,children:t,inline:r,showLabel:i,isDisabled:n,"data-test":o})=>u.createElement(jK,{"data-test":o},u.createElement(Vs,{isDisabled:n,label:e,show:i}),u.createElement(HK,{id:`photoeditorsdk-${e.replace(" ","-")}`,inline:!!r},t)),HK=z.div`
  display: inline-flex;
  ${e=>!e.inline&&ne`
        flex-wrap: wrap;
      `||""}
`;BA.defaultProps={showLabel:!0};var WK=BA,VK=z.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`,GK=z(Vs)`
  padding-bottom: 2px;
`,AC=ne`
  ${Gl()||yn()?ne`
        width: 16px;
        height: 16px;
      `:ne`
        width: 20px;
        height: 20px;
      `}
  background: ${e=>e.theme.slider.thumbBackground};
  border: 2px solid ${e=>e.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`,qK=e=>{let t=(e.value-e.min)*100/(e.max-e.min);return e.adjust?e.value>0?(t=e.value*(e.max/2)*100,`${e.theme.slider.trackColor} 0%,
      ${e.theme.slider.trackColor} 50%,
      ${e.theme.slider.activeTrackColor} 50%,
      ${e.theme.slider.activeTrackColor} ${50+t}%,
      ${e.theme.slider.trackColor} ${50+t}%,
      ${e.theme.slider.trackColor} 100%
      `):e.value<0?(t=e.value*(e.min/2)*100,`${e.theme.slider.trackColor} 0%,
      ${e.theme.slider.trackColor} ${50-t}%,
      ${e.theme.slider.activeTrackColor} ${50-t}%,
      ${e.theme.slider.activeTrackColor} 50%,
      ${e.theme.slider.trackColor} 50%,
      ${e.theme.slider.trackColor} 100%
      `):`${e.theme.slider.trackColor} 0%,
    ${e.theme.slider.trackColor} 100%`:`${e.theme.slider.activeTrackColor} 0%,
    ${e.theme.slider.activeTrackColor} ${t}%,
    ${e.theme.slider.trackColor} ${t}%,
    ${e.theme.slider.trackColor} 100%`},XK=z.input`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  max-width: calc(100% - 50px);
  outline: none;
  border-radius: 0; /* iOS */

  padding: 0;
  margin: 0;
  height: 100;
  border: none;

  ${Hs}

  ${Gl()||yn()?ne`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `:ne`
        height: 2px;
        background: ${e=>`linear-gradient(to right, ${qK(e)})`};
      `}
  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${e=>e.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${e=>e.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${AC}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${AC}
  }
  &::-ms-thumb {
    appearance: none;
    ${AC}
  }
  &::-ms-fill-lower {
    background: ${e=>`${e.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${e=>`${e.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 200px;
  }
`,YK=z.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${e=>e.centerSlider?-56:0}px;
`,QK=z($A)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`,LA=class extends u.Component{constructor(e){super(e),this.onSubmit=t=>{const{onChange:r,suffix:i,divider:n,min:o,max:s,value:a}=this.props,l=t.replace(i,""),c=l?parseFloat(l)/n:a,h=Math.max(o,Math.min(s,c));Number.isNaN(h)||(r(h),this.props.onMouseUp?this.props.onMouseUp(h):this.props.onTouchEnd&&this.props.onTouchEnd(h))},this.onSliderChange=t=>{const{onChange:r}=this.props,i=parseFloat(t.target.value);r(i)},this.onTouchOrMouseUp=t=>{const{value:r}=t.target,{onMouseUp:i,onTouchEnd:n}=this.props,o=parseFloat(r);i&&i(o),n&&n(o)},this.randomId=gi()}render(){const{"data-test":e,identifier:t,value:r,min:i,max:n,divider:o,suffix:s,decimal:a,showLabel:l,showInput:c,style:h,centerSlider:f,adjust:d,label:p,isDisabled:v,step:g,"aria-hidden":m,className:y}=this.props,_=`photoeditorsdk-slider-${this.randomId}`,b=`${_}-input`,w=`${(r*o).toFixed(a)}${s}`,S=c&&u.createElement(QK,{id:b,value:w,isDisabled:v,"aria-hidden":m,onSubmit:this.onSubmit});return u.createElement(VK,{className:y,"data-test":e||t||_},u.createElement(GK,{isDisabled:v,label:p,show:l}),u.createElement(YK,{centerSlider:c&&f},u.createElement(XK,{type:"range",role:"slider","aria-hidden":m,tabIndex:0,value:r,min:i,max:n,step:g,style:h,disabled:v,id:_,onChange:this.onSliderChange,adjust:d,name:p,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:this.onTouchOrMouseUp,onTouchEnd:this.onTouchOrMouseUp}),S))}};LA.defaultProps={showLabel:!0,showInput:!0,adjust:!1,centerSlider:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""};var KK=LA,ZK=class extends u.Component{constructor(){super(...arguments),this.onDismiss=()=>{const{handleClose:e,handleDismiss:t}=this.props;e&&e(),t&&t()},this.onConfirm=()=>{const{handleClose:e,handleConfirm:t}=this.props;e&&e(),t&&t()}}render(){const{headerLabel:e,bodyLabel:t,confirmLabel:r,dismissLabel:i,type:n,children:o}=this.props,s=u.Children.toArray(o)[0];if(!u.isValidElement(s))throw new Error("Child is not a valid react element");return u.cloneElement(s,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:u.createElement(CC,null,e),body:u.createElement(kp,{"data-test":Le.DialogBody},t),footer:u.createElement(SC,{type:n},i&&u.createElement(s_,{label:i,ariaLabel:i,onClick:this.onDismiss}),r&&u.createElement(DP,{label:r,ariaLabel:r,onClick:this.onConfirm}))})}},JK=z.div`
  display: flex;
`,eZ=z(CC)`
  padding: 0;
`,tZ=z.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`,rZ=z(kp)`
  padding: 0;
  margin: 0;
`,iZ=class extends u.PureComponent{render(){const{headerLabel:e,bodyLabel:t,children:r}=this.props,i=u.Children.toArray(r)[0];if(!u.isValidElement(i))throw new Error("Child is not a valid react element");return u.cloneElement(i,{height:"90px",body:u.createElement(kp,{"data-test":Le.DialogBody},u.createElement(JK,null,u.createElement(xA,null),u.createElement(tZ,null,u.createElement(eZ,null,e),u.createElement(rZ,null,t))))})}},nZ=z.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,oZ=z.textarea`
  display: flex;
  caret-color: ${e=>e.theme.primary};
  ${PC}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${e=>e.theme.modal.bodyForeground};
  resize: none;
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${e=>e.theme.primary};
    color: ${e=>e.theme.foreground};
  }
`,sZ=z.label`
  padding: 11px 20px 8px;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
  color: ${e=>e.theme.modal.headerForeground};
`,aZ=z(kp)`
  height: 100%;
`,lZ=z(SC)`
  border-top: none;
`,UA=class extends u.Component{constructor(){super(...arguments),this.state={value:""},this.input=u.createRef(),this.handleKeydown=e=>{rV(this.handleDismiss)(e)},this.handleDismiss=()=>{const{handleDismiss:e}=this.props;e&&e(!1)},this.handleConfirm=()=>{const{handleConfirm:e}=this.props,{value:t}=this.input.current;t&&(e&&e(t),this.handleDismiss())},this.onChange=e=>{const{allowEmojis:t}=this.props,r=t?e.target.value:cV(e.target.value);this.input.current.value=r,this.setState({value:r})},this.onSubmit=e=>{e.preventDefault()}}componentDidMount(){const{text:e,defaultText:t}=this.props;this.input.current.focus(),this.input.current.value=e||t||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),e===t&&this.input.current.select()}componentDidUpdate(e){const{isVisible:t}=this.props;e.isVisible!==t&&t&&this.input.current.focus()}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,!1)}render(){const{headerLabel:e,dismissLabel:t,confirmLabel:r,maxLength:i,type:n,children:o}=this.props,{value:s}=this.state,a=u.Children.toArray(o)[0];if(!u.isValidElement(a))throw new Error("Child is not a valid react element");return u.cloneElement(a,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!s,height:"150px",header:u.createElement(sZ,{htmlFor:"photoeditorsdk-TextInput"},e),body:u.createElement(aZ,null,u.createElement(nZ,{onSubmit:this.onSubmit},u.createElement(oZ,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:i}))),footer:u.createElement(lZ,{type:n},u.createElement(s_,{label:t,ariaLabel:t,onClick:this.handleDismiss}),u.createElement(DP,{label:r,ariaLabel:r,isDisabled:!s,onClick:this.handleConfirm}))})}};UA.defaultProps={defaultText:"Write Something",allowEmojis:!1};var cZ=UA,NA=z.div`
  padding-bottom: ${e=>(e.count||1)*8}px;
`;NA.defaultProps={count:1};var uZ=class extends u.Component{getChildren(){const e=[],t=[];return u.Children.forEach(this.props.children,r=>{switch(r.type.componentName){case"case":this.props.type===r.props.value&&e.push(r);break;case"default":t.push(r);break}}),e.length>0?e:t}render(){const e=this.getChildren();return e.length===0?null:u.createElement(u.Fragment,null,e)}},jA=class extends u.Component{render(){return this.props.children}};jA.componentName="case";var HA=class extends u.Component{render(){return this.props.children}};HA.componentName="default";var hZ=Cf`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`,dZ=z.div`
  position: absolute;
  top: ${e=>e.position.y}px;
  left: ${e=>e.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${e=>e.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:e})=>e&&ne`
      visibility: visible;
      animation: ${hZ} 0.5s, fadeout 0.5s 2.5s;
    `}
`,fZ=dZ,pZ=()=>ne`
    animation: ${FP} 0.2s linear;
  `,mZ=ne`
  border: 1px solid ${e=>e.theme.card.activeBorderColor};
  ${kP} {
    background-color: ${e=>e.theme.card.activeOverlayColor};
  }
`,gZ=z.button.attrs(e=>{const t={};return e.image&&(t.backgroundImage=`url(${e.image})`),L({style:t},e.style)})`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${e=>e.theme.card.background};
  color: ${e=>e.theme.card.foreground};

  border-radius: ${e=>e.theme.shape.radiusMedium}px;
  ${pZ};
  animation-fill-mode: both;
  overflow: hidden;

  ${Hs}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:e})=>e&&mZ}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${nl} {
      background-color: ${e=>e.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${o_} {
      background-color: ${e=>e.theme.card.hoverOverlayColor};
    }
  }
`,bh=class extends u.Component{constructor(){super(...arguments),this.state=TP,this.timeout=null,this.onKeyDown=e=>{(e.key==="Space"||e.key==="Enter")&&this.props.onClick&&this.props.onClick()},this.onClick=e=>{const t=e.currentTarget.getBoundingClientRect(),r=e.pageX-t.left,i=e.pageY-t.top;this.state.display==="block"?this.setState({display:"none"},()=>{this.setRippleState(r,i)}):this.setRippleState(r,i),this.props.onClick(e)},this.setRippleState=(e,t)=>{this.setState({left:e,top:t,display:"block"}),this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{children:e,label:t,isActive:r,isDisabled:i,image:n,style:o,className:s}=this.props,{left:a,top:l,display:c}=this.state;return u.createElement(gZ,{isActive:r,"aria-label":t,"data-test":t,disabled:i,image:n,onClick:this.onClick,onKeyDown:this.onKeyDown,style:o,className:s},e,u.createElement(EP,{display:c,left:a,top:l}),u.createElement(kP,null),u.createElement(nl,null),u.createElement(o_,null))}};bh.defaultProps={isActive:!1};var vZ=e=>{const t=[];return t[0]=requestAnimationFrame(()=>{t[1]=requestAnimationFrame(()=>{e()})}),t},WA=e=>{e.forEach(t=>cancelAnimationFrame(t))},zC=e=>!Number.isNaN(parseFloat(e))&&Number.isFinite(e),VA=e=>typeof e=="string"&&e.search("%")===e.length-1&&zC(e.substr(0,e.length-1)),$C,yZ=($C=class extends u.Component{constructor(e){super(e),this.contentRef=null,this.contentRef=u.createRef(),this.animationFrameIDs=[];let t="auto",r="visible";zC(e.height)?(t=e.height<0||e.height==="0"?0:e.height,r="hidden"):VA(e.height)&&(t=e.height==="0%"?0:e.height,r="hidden"),typeof window!="undefined"&&window.matchMedia&&(this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)").matches),this.state={height:t,overflow:r,shouldUseTransitions:!1}}componentDidMount(){const{height:e}=this.state;this.contentRef.current&&this.contentRef.current.style&&this.hideContent(e)}componentDidUpdate(e,t){const{height:r}=this.props,{duration:i,delay:n}=this.getTimings();if(this.contentRef.current&&r!==e.height){this.showContent(t.height),this.contentRef.current.style.overflow="hidden";const o=this.contentRef.current.offsetHeight;this.contentRef.current.style.overflow="";const s=i+n;let a=null;const l={height:null,overflow:"hidden"},c=t.height==="auto";zC(r)?(a=r<0||r==="0"?0:r,l.height=a):VA(r)?(a=r==="0%"?0:r,l.height=a):(a=o,l.height="auto",l.overflow=null),c&&(l.height=a,a=o),this.setState({height:a,overflow:"hidden",shouldUseTransitions:!c}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),c?(WA(this.animationFrameIDs),this.animationFrameIDs=vZ(()=>{this.setState({height:l.height,overflow:l.overflow,shouldUseTransitions:!0})}),this.animationClassesTimeoutID=setTimeout(()=>{this.setState({shouldUseTransitions:!1}),this.hideContent(l.height)},s)):this.timeoutID=setTimeout(()=>{this.setState({height:l.height,overflow:"visible",shouldUseTransitions:!1}),r!=="auto"&&this.hideContent(a)},s)}}componentWillUnmount(){WA(this.animationFrameIDs),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),this.timeoutID=null}getTimings(){if(this.prefersReducedMotion)return{delay:0,duration:0};const{delay:e,duration:t}=this.props;return{delay:e,duration:t}}showContent(e){e===0&&(this.contentRef.current.style.display="")}hideContent(e){e===0&&(this.contentRef.current.style.display="none")}render(){const{animateOpacity:e,children:t,className:r,easing:i}=this.props,{height:n,overflow:o,shouldUseTransitions:s}=this.state,{duration:a,delay:l}=this.getTimings(),c={height:n,overflow:o};s&&(c.transition=`height ${a}ms ${i} ${l}ms`,c.WebkitTransition=c.transition);const h={};return e&&(h.transition=`opacity ${a}ms ${i} ${l}ms`,h.WebkitTransition=h.transition,n===0&&(h.opacity=0)),u.createElement("div",{"aria-hidden":n===0,className:r,style:c},u.createElement("div",{style:h,ref:this.contentRef},t))}},$C.defaultProps={animateOpacity:!1,duration:250,delay:0,easing:"ease"},$C),GA={Focused:Hs,VisuallyHidden:aC},_Z={ripple:CP,scale:FY,slide:FP},ce={Container:JY,ColorItem:$Q,ColorItemBase:gA,ColorItemBackground:pA,ColorItemTiledBackground:vA,ColorItemActiveOverlay:mA,Dialog:jQ,DialogBase:_A,DialogContainer:bA,DialogBackdrop:yA,DialogHeader:CC,DialogBody:kp,DialogFooter:SC,DialogSpinner:xA,TextEditModal:cZ,ActionModal:ZK,InfoModal:iZ,Spacer:NA,Draggable:dK,DraggableCore:__,Toast:fZ,Input:{Label:Vs,File:PK,Search:NK,Slider:KK,CarouselSlider:wK,Selection:WK,Checkbox:TK,CheckboxBase:IA,CheckboxInput:RA,CheckboxCheckMark:MC,Dropdown:MK,Text:AA,NumericInput:$A,Form:zK},Switch:{Index:uZ,Case:jA,Default:HA}},bZ=z(bp)`
  font-size: ${e=>e.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button2.case};
  color: ${e=>e.theme.button.textSecondaryForeground};

  ${nl} {
    display: none;
  }

  &:disabled {
    opacity: ${e=>e.theme.button.textInactiveOpacity};
  }
`,xZ=z.div`
  display: inline-flex;
`,x_=z(bp)`
  background: ${e=>e.theme.canvasActionBar.background};
  color: ${e=>e.theme.canvasActionBar.foreground};
  font-size: ${e=>e.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`,qA=z.div`
  ${({show:e})=>e?ne`
          opacity: 1;
        `:ne`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${e=>e.theme.canvasActionBar.background};
  color: ${e=>e.theme.canvasActionBar.foreground};
  border-radius: ${e=>e.theme.canvasActionBar.borderRadius?e.theme.canvasActionBar.borderRadius:e.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${e=>e.theme.measurements.zIndex.buttonGroup};

  ${x_} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${e=>e.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`,wZ=z(ol)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${e=>e.theme.measurements.zIndex.button.float};
  padding: 2px;
`,SZ=z.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${e=>e.theme.webcam.floatButton};
`,CZ=e=>u.createElement(wZ,L({},e),u.createElement(SZ,null)),XA=["library",["transform","filter","adjustment"],["focus","frame","overlay"],["text","textdesign","sticker","brush"]],BC={image:"",license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:["undo","redo","export","close"],displayResizeWarning:!1,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,displaySerializationModal:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:QW()?"webgl":"canvas",backgroundColor:[0,0,0,1]},enableZoom:!0,scaleImageToFit:!0,restrictZoomOutToDefault:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:"filter",tools:XA,snapping:new ZH,filter:new cW,focus:new mW,adjustment:new sW,library:new kW,overlay:new DW,sticker:new OW,text:new AW,textdesign:new jW,frame:new yW,brush:new UW,transform:new WW,export:{image:{exportType:"image",format:"image/png",quality:.9,enableDownload:!0,transparent:!0},filename:"photoeditorsdk-export"},custom:{},watermark:new eW};function LC(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)!=="[object RegExp]"&&Object.prototype.toString.call(e)!=="[object Date]"}function kZ(e){return Array.isArray(e)?[]:{}}function UC(e,t){return t&&t.clone===!0&&LC(e)?NC(kZ(e),e,t):e}function TZ(e,t,r){const i={};return LC(e)&&Object.keys(e).forEach(n=>{i[n]=UC(e[n],r)}),Object.keys(t).forEach(n=>{const o=LC(t[n])&&e[n];i[n]=o?NC(e[n],t[n],r):UC(t[n],r)}),i}function NC(e,t,r){return Array.isArray(t)?Array.isArray(e)?t:UC(t,r):TZ(e,t,r)}function Gs(e,t=null){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((r,i)=>NC(r,i,t))}var EZ={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:14,letterSpacing:0,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},DZ={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},YA=(e,t=8)=>{const r=e,i=3*t,n=r-2*i,o=(n-2*t)/3,s=(n-t)/2;return{advancedUIToolControlBar:{width:r,paddingTop:2*t,paddingBottom:2*t,paddingLeft:i,paddingRight:i,marginBottom:0,controls:{gutter:2*t}},advancedUICard:{small:{height:o,width:o},medium:{height:s,width:s},large:{height:86,width:n}},advancedUISpacer:t,inputs:{cropSize:{maxWidth:r},checkbox:{maxWidth:r}}}},QA=()=>{const e=YA(230),t={advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},basicCanvasOffset:40+76-88,basicUIToolbar:{openHeight:88,closeHeight:40},basicUIToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:72+40+4,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:EZ,zIndex:DZ};return Gs([e,t])},jC=e=>{let t=Number(e).toString(16);return t.length<2&&(t=`0${t}`),t},KA=(e,t,r)=>{const i=jC(e*255),n=jC(t*255),o=jC(r*255);return`#${i}${n}${o}`},Dp=e=>{if(_F(e)){const[t,r,i,n]=e;return`rgba(${t*255}, ${r*255}, ${i*255}, ${n})`}if(yF(e)){const{r:t,g:r,b:i,a:n}=e;return`rgba(${t*255}, ${r*255}, ${i*255}, ${n})`}if(vF(e)){const[t,r,i]=e;return KA(t,r,i)}if(gF(e)){const{r:t,g:r,b:i}=e;return KA(t,r,i)}return e},xh=e=>e.map(t=>({identifier:t.name,color:t.color,colorString:Dp(t.color)})),al={black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],gray:[191/255,191/255,191/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]},ZA={transparent:[0/255,0/255,0/255,0],black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]},Ip={brightness:0,saturation:0,contrast:0,gamma:0,clarity:0,exposure:0,shadows:0,highlights:0,whites:0,blacks:0,temperature:0,sharpness:0},Xn=class{constructor(e,t){this.assets=[],this.entityMapper=r=>"items"in r?this.categoryMapper(r):this.itemMapper(r),this.categoryMapper=r=>r?ge(L({},r),{thumbnailURI:this.getCategoryThumbnailURI(r),name:this.config.locale[r.identifier]||r.name,items:r.items.map(this.itemMapper)}):null,this.itemMapper=r=>ge(L({},r),{thumbnailURI:this.getItemThumbnailURI(r),name:this.config.locale[r.identifier]||("name"in r?r.name:"")}),this.getCategoryThumbnailURI=r=>r.thumbnailURI?Au(r.thumbnailURI)||r.thumbnailURI.substr(0,10)==="data:image"?r.thumbnailURI:this.config.getAssetPath(r.thumbnailURI||""):"",this.getItemThumbnailURI=r=>{var i;if((i=r.thumbnailURI)!=null&&i.trim())return Au(r.thumbnailURI)||r.thumbnailURI.substr(0,10)==="data:image"?r.thumbnailURI:this.config.getAssetPath(r.thumbnailURI||"");const n=r[this.config.itemFallbackKey];return n?this.config.getAssetPath(n):""},this.config=t,this.assets=e.map(this.entityMapper).filter(Boolean)}static isCategory(e){return Object.prototype.hasOwnProperty.call(e,"items")}get categories(){return this.assets.reduce((e,t)=>{if(Xn.isCategory(t))return[...e,t]},[]).filter(Boolean)}get items(){return this.assets.reduce((e,t)=>Xn.isCategory(t)?[...e,...t.items]:[...e,t],[]).filter(Boolean)}},w_=class{constructor(e,t){this.from=e,this.to=t}contains(e){return this.from<=e&&e<=this.to}clamp(e){return Math.min(Math.max(this.from,e),this.to)}},IZ=new w_(-1,1),S_=class{constructor(e){this.editAdjustments=({type:t,value:r})=>{const i=IZ.clamp(r);this.state[t]=i},this.reset=()=>{Vo(()=>{this.indexInContainer===-1&&(Object.keys(Ip).forEach(t=>{this.state[t]=Ip[t]}),this.orderHelper.removeIndex("adjustment"))})},this.setAdjustmentEffect=t=>{const r=this.orderHelper.addIndex("adjustment");return this.effect?this.effect.setProperties(t):this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,r),this.effect.getProperties()},this.removeAdjustmentEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))},this.engineMediator=e,this.state=Ip}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get orderHelper(){return this.engineMediator.orderHelper}};x([Ye],S_.prototype,"state",2),x([P],S_.prototype,"editAdjustments",2),x([P],S_.prototype,"reset",2);var Wt=class{constructor(e){this.dirty=Ye.box(!1),this.editAdjustments=({type:r,value:i})=>{this.pureSetAdjustment({type:r,value:i}),this.editor.render()},this.toolSnapshot=()=>{(0,Nn.default)(this.state,Ip)?this.dirty.set(!1):this.dirty.set(!0),this.addSnapshot("edit","adjustment")},this.addSnapshot=(r,i)=>{this.editor.addSnapshot(void 0,r,i)},this.toggleOptionSelection=r=>{this.selectedOption=r},this.pureSetAdjustment=({type:r,value:i})=>{const n=this.adjustmentsStore.setAdjustmentEffect({[r]:i});this.adjustmentsStore.editAdjustments({type:r,value:n[r]})},this.pureReset=()=>{this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""},this.reset=()=>{this.pureReset(),this.addSnapshot("delete",this.locale.controls.buttonReset),this.editor.render()},this.updateStateFromHistory=r=>{if(!(0,Nn.default)(r,this.state)){if((0,Nn.default)(r,Ip)){this.pureReset();return}Vo(()=>{this.dirty.set(Object.values(r).some(i=>i!==0)),Object.keys(r).forEach(i=>{this.pureSetAdjustment({type:i,value:r[i]})})})}},this.updateStateFromSerialization=r=>{this.updateStateFromHistory(r)},this.editor=e,this.adjustmentsStore=new S_(this.editor.engineMediator),this.selectedOption="";const t=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new Xn(t,ge(L({},this.config),{locale:L(L({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){const e=this.items.find(t=>t?t.identifier===this.selectedOption:!1);return e?e.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config.adjustment}get locale(){return this.editor.configStore.locale.adjustment}};x([Ye],Wt.prototype,"selectedOption",2),x([Ye],Wt.prototype,"dirty",2),x([P],Wt.prototype,"editAdjustments",2),x([P],Wt.prototype,"toggleOptionSelection",2),x([P],Wt.prototype,"pureSetAdjustment",2),x([P],Wt.prototype,"pureReset",2),x([P],Wt.prototype,"reset",2),x([P],Wt.prototype,"updateStateFromHistory",2),x([P],Wt.prototype,"updateStateFromSerialization",2),x([O],Wt.prototype,"selectedAdjustmentType",1),x([O],Wt.prototype,"isDirty",1),x([O],Wt.prototype,"state",1),x([O],Wt.prototype,"selectedOptionLabel",1),x([O],Wt.prototype,"brightness",1),x([O],Wt.prototype,"saturation",1),x([O],Wt.prototype,"contrast",1),x([O],Wt.prototype,"gamma",1),x([O],Wt.prototype,"clarity",1),x([O],Wt.prototype,"exposure",1),x([O],Wt.prototype,"shadows",1),x([O],Wt.prototype,"highlights",1),x([O],Wt.prototype,"whites",1),x([O],Wt.prototype,"blacks",1),x([O],Wt.prototype,"temperature",1),x([O],Wt.prototype,"sharpness",1),x([O],Wt.prototype,"categories",1),x([O],Wt.prototype,"items",1),x([O],Wt.prototype,"config",1),x([O],Wt.prototype,"locale",1);var HC={identifier:"identity",intensity:1,isDuotone:!1},RZ=new w_(0,1),wh=class{constructor(e){this.changeIdentifier=t=>{this.state.identifier=t},this.changeIfDuotone=t=>{this.state.isDuotone=t},this.changeIntensity=t=>{const r=RZ.clamp(t);this.state.intensity=r},this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=HC.identifier,this.state.intensity=HC.intensity,this.removeIndex())},this.setFilterEffect=({identifier:t,intensity:r,isDuotone:i})=>{const n=this.state,o=()=>{this.changeIdentifier(t),this.changeIntensity(r),this.changeIfDuotone(i)};this.removeFilterEffect();const s=this.engineMediator.orderHelper.addIndex("filter");return i?new Promise((a,l)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(t,this.engineMediator.image.container,s).then(c=>{o(),this.effect=c,this.effect.setProperties({colorIntensity:r}),a()}).catch(c=>{this.fallbackOnError(n),l(c)})}):new Promise((a,l)=>{this.engineMediator.engine.addLUTFilterFromAssets(t,this.engineMediator.image.container,s).then(c=>{o(),this.effect=c,this.effect.setProperties({intensity:r}),a()}).catch(c=>{this.fallbackOnError(n),l(c)})})},this.removeFilterEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.indexInContainer===-1&&(this.effect=void 0))},this.setEffectProperties=({intensity:t})=>this.effect?(this.state.isDuotone?this.effect.setProperties({colorIntensity:t}):this.effect.setProperties({intensity:t}),this.effect.getProperties()):null,this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex("filter")},this.fallbackOnError=t=>{this.changeIdentifier(t.identifier),this.changeIntensity(t.intensity),t.identifier==="identity"&&this.removeIndex()},this.engineMediator=e,this.state=HC}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};x([Ye],wh.prototype,"state",2),x([P],wh.prototype,"changeIdentifier",2),x([P],wh.prototype,"changeIfDuotone",2),x([P],wh.prototype,"changeIntensity",2),x([P],wh.prototype,"reset",2);var C_="identity",jr=class{constructor(e){this.selectFilter=async(i,n=1)=>{if(i!==this.identifier){const o=this.selectedCategory;await this.filterStore.setFilterEffect({identifier:i,intensity:n,isDuotone:this.isOptionDuoTone(i)}),this.selectedCategory===C_&&(this.selectedCategory=o),this.editor.render(),this.addSnapshot("add","filter")}},this.changeIntensity=i=>{const n=this.isOptionDuoTone(this.identifier),o=this.filterStore.setEffectProperties({intensity:i});if(o){const s=n?o.colorIntensity:o.intensity;this.filterStore.changeIntensity(s),this.editor.render()}},this.setImageAndGetPreviews=async()=>{const{image:i}=this.editor.activeStore.state;await this.editor.previewThumbnails.addImageToContainer(i),await this.getAllFilterPreview()},this.getAllFilterPreview=async()=>{const i=this.entityManager.items.map(a=>({identifier:a.identifier,isDuotone:this.isOptionDuoTone(a.identifier)})),n=await this.editor.previewThumbnails.getAllFilterPreviewThumbnails(i);await this.editor.wait();const{config:o}=this,s=this.editor.configStore.assetProvider.getAssets("filter").map(a=>ge(L({},a),{items:a.items.map(l=>ge(L({},l),{thumbnailURI:n[l.identifier]}))}));this.entityManager=new Xn(s,ge(L({},o),{locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))},this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.sliderIntensity)},this.addSnapshot=(i,n)=>{this.editor.addSnapshot(void 0,i,n)},this.pureReset=()=>{this.selectedCategory=C_,this.filterStore.removeFilterEffect(),this.filterStore.reset()},this.reset=()=>{this.pureReset(),this.addSnapshot("delete",this.locale.controls.buttonReset),this.editor.render()},this.toggleCategorySelection=i=>{this.selectedCategory=this.selectedCategory===i?C_:i},this.updateStateFromSerialization=({identifier:i,intensity:n})=>{const o=this.doesFilterAssetExist(i);if(o){const s=dw(o);return this.filterStore.setFilterEffect({identifier:i,intensity:n,isDuotone:s})}throw new Pu(i)},this.updateStateFromHistory=async i=>i.identifier==="identity"?(this.pureReset(),new Promise(n=>{n()})):this.filterStore.setFilterEffect(i),this.doesFilterAssetExist=i=>this.entityManager.items.find(n=>i===n.identifier),this.isOptionDuoTone=i=>{const n=this.doesFilterAssetExist(i);return n?dw(n):!1},this.editor=e,this.selectedCategory=C_,this.filterStore=new wh(this.editor.engineMediator);const{config:t}=this,r=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new Xn(r,ge(L({},t),{locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config.filter}get locale(){return this.editor.configStore.locale.filter}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}};x([Ye],jr.prototype,"selectedCategory",2),x([Ye],jr.prototype,"entityManager",2),x([P],jr.prototype,"selectFilter",2),x([P],jr.prototype,"changeIntensity",2),x([P],jr.prototype,"pureReset",2),x([P],jr.prototype,"reset",2),x([P],jr.prototype,"toggleCategorySelection",2),x([P],jr.prototype,"updateStateFromSerialization",2),x([P],jr.prototype,"updateStateFromHistory",2),x([O],jr.prototype,"state",1),x([O],jr.prototype,"identifier",1),x([O],jr.prototype,"intensity",1),x([O],jr.prototype,"isDuotone",1),x([O],jr.prototype,"selectedCategoryIdentifier",1),x([O],jr.prototype,"isOptionSelected",1),x([O],jr.prototype,"config",1),x([O],jr.prototype,"locale",1),x([O],jr.prototype,"categories",1),x([O],jr.prototype,"items",1);var Rp=(e,t=0,r=3)=>{const i=Math.tan(t),n=Math.sqrt(i**2+1);return{x:e.x+r/n,y:e.y+r*i/n}},k_={blurRadius:40,gradientSize:.2},FZ=L({start:{x:0,y:0},end:{x:0,y:0}},k_),OZ=L({center:{x:0,y:0},radius:0},k_),MZ=L({origin:{x:0,y:0},rotation:0,size:0},k_),PZ=k_,Fp={identifier:"identity",linear:FZ,radial:OZ,mirrored:MZ,gaussian:PZ},un=class{constructor(e){this.selectFocus=(t,r)=>{Vo(()=>{this.state.identifier=t,r&&(this.state[t].blurRadius=r)})},this.changeBlurRadius=(t,r)=>{t!=="identity"&&(this.state[t].blurRadius=r)},this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=Fp.identifier,this.state.identifier!=="identity"&&(this.state[this.state.identifier].blurRadius=Fp[this.state.identifier].blurRadius))},this.setLinear=({start:t,end:r})=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y,this.state.linear.end.x=r.x,this.state.linear.end.y=r.y},this.setLinearStart=t=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y},this.setLinearEnd=t=>{this.state.linear.end.x=t.x,this.state.linear.end.y=t.y},this.setRadialCenter=t=>{this.state.radial.center.x=t.x,this.state.radial.center.y=t.y},this.setRadialRadius=t=>{this.state.radial.radius=t},this.setMirroredOrigin=t=>{this.state.mirrored.origin.x=t.x,this.state.mirrored.origin.y=t.y},this.setMirroredRotation=t=>{this.state.mirrored.rotation=t},this.setMirroredSize=t=>{this.state.mirrored.size=t},this.getEffectProperties=()=>this.effect?this.effect.getProperties():null,this.setLinearFocus=t=>{this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order),this.updateLinearState(this.effect.getProperties())},this.setGaussianFocus=t=>{this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order),this.updateGaussianState(this.effect.getProperties())},this.setRadialFocus=t=>{this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order),this.updateRadialState(this.effect.getProperties())},this.setMirroredFocus=t=>{this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order),this.updateMirroredState(this.effect.getProperties())},this.updateFromEngineState=t=>{const r=this.getEffectProperties();if(r&&t!=="identity")switch(t){case"linear":this.updateLinearState(r);break;case"radial":this.updateRadialState(r);break;case"mirrored":this.updateMirroredState(r);break}},this.updateGaussianState=t=>{this.changeBlurRadius("gaussian",t.blurRadius)},this.updateMirroredState=t=>{const r=this.editor.worldToPreview(t.mirrorAxisOrigin),n=new G(this.editor.worldToPreview(t.mirrorAxisDirection)).subtract(r),o=Math.atan2(n.y,n.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.setMirroredRotation(o),this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.changeBlurRadius("mirrored",t.blurRadius)},this.updateRadialState=t=>{this.setRadialCenter(this.editor.worldToPreview(t.center)),this.setRadialRadius(this.editor.worldToPreview(t.radius)),this.changeBlurRadius("radial",t.blurRadius)},this.updateLinearState=t=>{this.setLinearStart(this.editor.worldToPreview(t.start)),this.setLinearEnd(this.editor.worldToPreview(t.end)),this.changeBlurRadius("linear",t.blurRadius)},this.setEffectProperties=t=>this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null,this.removeFocus=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex("focus"))},this.editor=e,this.engineMediator=this.editor.engineMediator,this.state=Fp}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get order(){return this.engineMediator.orderHelper.addIndex("focus")}get imageContainer(){return this.engineMediator.image.container}};x([Ye],un.prototype,"state",2),x([P],un.prototype,"selectFocus",2),x([P],un.prototype,"changeBlurRadius",2),x([P],un.prototype,"reset",2),x([P],un.prototype,"setLinear",2),x([P],un.prototype,"setLinearStart",2),x([P],un.prototype,"setLinearEnd",2),x([P],un.prototype,"setRadialCenter",2),x([P],un.prototype,"setRadialRadius",2),x([P],un.prototype,"setMirroredOrigin",2),x([P],un.prototype,"setMirroredRotation",2),x([P],un.prototype,"setMirroredSize",2),x([P],un.prototype,"updateFromEngineState",2);var Sh=class{constructor(e){this.selectFocus=r=>{if(r!==this.identifier){this.focusStore.removeFocus();const i=this.maxIntensity*.2,{width:n}=this.editor.engine.getOutputContainer().getBounds(),o=this.editor.shortestOutputSide*.2;switch(r){case"linear":const s=this.editor.outputToWorld({x:-n/2,y:0}),a=this.editor.outputToWorld({x:n/2,y:0});this.setLinearFocus({start:s,end:a,blurRadius:i});break;case"radial":const l=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:l,radius:o,blurRadius:i});break;case"mirrored":const c=this.editor.outputToWorld({x:0,y:0}),h=o,f=this.editor.outputToWorld(Rp({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:c,clearAreaWidth:h,blurRadius:i,mirrorAxisDirection:f});break;case"gaussian":this.setGaussianFocus({blurRadius:i});break}this.focusStore.selectFocus(r,i),this.editor.render(),this.addSnapshot("add","focus")}},this.changeIntensity=r=>{const i=this.focusStore.setEffectProperties({blurRadius:r});i&&(this.focusStore.changeBlurRadius(this.identifier,i.blurRadius),this.editor.render())},this.changeRelativeIntensity=r=>{const i=(this.maxIntensity-Sh.minIntensity)*r/100+Sh.minIntensity,n=this.focusStore.setEffectProperties({blurRadius:i});n&&(this.focusStore.changeBlurRadius(this.identifier,n.blurRadius),this.editor.render())},this.toolSnapshot=r=>{this.addSnapshot("edit",r)},this.addSnapshot=(r,i)=>{this.editor.addSnapshot(void 0,r,i)},this.clickableCanvas=r=>{this.editor.clickableCanvas(r)},this.pureReset=()=>{this.focusStore.removeFocus(),this.focusStore.reset()},this.reset=()=>{this.pureReset(),this.editor.render(),this.addSnapshot("delete",this.locale.controls.buttonReset)},this.setStart=r=>{const i=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(r)});i&&(this.focusStore.setLinearStart(this.editor.worldToPreview(i.start)),this.editor.render())},this.setEnd=r=>{const i=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(r)});i&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(i.end)),this.editor.render())},this.setCenter=r=>{const i=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(r)});i&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(i.center)),this.editor.render())},this.setRadius=r=>{const i=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(r)});i&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(i.radius)),this.editor.render())},this.setOrigin=r=>{const i=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(r),mirrorAxisDirection:this.editor.previewToWorld(Rp(r,this.rotation))});i&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(i.mirrorAxisOrigin)),this.editor.render())},this.setSize=r=>{const i=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(r)});i&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(i.clearAreaWidth)),this.editor.render())},this.setRotation=r=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(Rp(this.origin,r))}),this.focusStore.setMirroredRotation(r),this.editor.render()},this.updateStateFromHistory=(r,i)=>{this.focusStore.removeFocus();const{magnitude:n}=i;Vo(()=>{switch(this.focusStore.selectFocus(r.identifier),r.identifier){case"linear":this.setLinearFocus({start:this.editor.previewToWorld(new G(r.linear.start).multiply(i)),end:this.editor.previewToWorld(new G(r.linear.end).multiply(i)),blurRadius:r.linear.blurRadius});break;case"gaussian":this.setGaussianFocus({blurRadius:r.gaussian.blurRadius});break;case"radial":this.setRadialFocus({center:this.editor.previewToWorld(new G(r.radial.center).multiply(i)),radius:this.editor.previewToWorld(r.radial.radius*n),blurRadius:r.radial.blurRadius});break;case"mirrored":{const o=new G(r.mirrored.origin).multiply(i);this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(o),mirrorAxisDirection:this.editor.previewToWorld(Rp(o,r.mirrored.rotation)),clearAreaWidth:this.editor.previewToWorld(r.mirrored.size*n),blurRadius:r.mirrored.blurRadius});break}case"identity":this.pureReset();break}})},this.updateStateFromSerialization=async r=>{if(Sh.doesFocusIdentifierExist(r.identifier))this.focusStore.removeFocus(),Vo(()=>{switch(this.focusStore.selectFocus(r.identifier),r.identifier){case"linear":this.setLinearFocus(r.linear);break;case"gaussian":this.setGaussianFocus(r.gaussian);break;case"radial":this.setRadialFocus(r.radial);break;case"mirrored":this.setMirroredFocus({mirrorAxisOrigin:r.mirrored.origin,clearAreaWidth:r.mirrored.size,blurRadius:r.mirrored.blurRadius,mirrorAxisDirection:Rp(r.mirrored.origin,r.mirrored.rotation)});break}});else throw new Pu(r.identifier)},this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)},this.getFocusStateForHistory=()=>{const r=this.editor.canvasStore.sizeVector,{linear:i}=this.focusStore.state,{radial:n}=this.focusStore.state,{mirrored:o}=this.focusStore.state,s=r,{magnitude:a}=s;return ge(L({},this.focusStore.state),{linear:ge(L({},i),{start:new G(i.start).divide(s),end:new G(i.end).divide(s)}),radial:ge(L({},n),{center:new G(n.center).divide(s),radius:n.radius/a}),mirrored:ge(L({},o),{origin:new G(o.origin).divide(s),size:o.size/a}),gaussian:L({},this.focusStore.state.gaussian)})},this.editor=e,this.focusStore=new un(this.editor);const t=this.editor.assetProvider.getAssets("focus");this.entityManager=new Xn(t,ge(L({},this.config),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}static get minIntensity(){return 0}static doesFocusIdentifierExist(e){return Object.keys(fw).map(t=>fw[t]).findIndex(t=>t===e)!==-1}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case"linear":return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case"radial":return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case"mirrored":const e=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:e.blurRadius,origin:e.mirrorAxisOrigin,rotation:it(this.state.mirrored.rotation),size:e.clearAreaWidth}};case"gaussian":return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return Fp}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){const e=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(e.x),y:Math.abs(e.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){const e=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(e.x),y:Math.abs(e.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();return Dw({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:e,flipVertically:t})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){const{width:e,height:t}=this.editor.canvasStore.canvasSize;return Math.sqrt(e**2+t**2)*2}get identifier(){return this.state.identifier}get intensity(){return this.identifier==="identity"?Fp.gaussian.blurRadius:this.state[this.identifier].blurRadius}get relativeIntensity(){const{blurRadius:e}=this.identifier==="identity"?this.state.gaussian:this.state[this.identifier];return(e-Sh.minIntensity)*100/(this.maxIntensity-Sh.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config.focus}get locale(){return this.editor.configStore.locale.focus}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:e}){this.focusStore.setGaussianFocus({blurRadius:e})}setLinearFocus({start:e,end:t,blurRadius:r}){this.focusStore.setLinearFocus({start:e,end:t,blurRadius:r})}setRadialFocus({center:e,radius:t,blurRadius:r}){this.focusStore.setRadialFocus({center:e,radius:t,blurRadius:r})}setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:t,blurRadius:r,mirrorAxisDirection:i}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:t,blurRadius:r,mirrorAxisDirection:i})}},bt=Sh;x([P],bt.prototype,"selectFocus",2),x([P],bt.prototype,"changeIntensity",2),x([P],bt.prototype,"changeRelativeIntensity",2),x([P],bt.prototype,"clickableCanvas",2),x([P],bt.prototype,"pureReset",2),x([P],bt.prototype,"reset",2),x([P],bt.prototype,"setStart",2),x([P],bt.prototype,"setEnd",2),x([P],bt.prototype,"setCenter",2),x([P],bt.prototype,"setRadius",2),x([P],bt.prototype,"setOrigin",2),x([P],bt.prototype,"setSize",2),x([P],bt.prototype,"setRotation",2),x([P],bt.prototype,"updateStateFromHistory",2),x([P],bt.prototype,"updateStateFromSerialization",2),x([P],bt.prototype,"updateCanvasControls",2),x([O],bt.prototype,"state",1),x([O],bt.prototype,"start",1),x([O],bt.prototype,"startOnPreview",1),x([O],bt.prototype,"end",1),x([O],bt.prototype,"endOnPreview",1),x([O],bt.prototype,"center",1),x([O],bt.prototype,"radius",1),x([O],bt.prototype,"origin",1),x([O],bt.prototype,"rotation",1),x([O],bt.prototype,"rotationOnPreview",1),x([O],bt.prototype,"size",1),x([O],bt.prototype,"mirroredAreaWidth",1),x([O],bt.prototype,"identifier",1),x([O],bt.prototype,"intensity",1),x([O],bt.prototype,"relativeIntensity",1),x([O],bt.prototype,"maxIntensity",1),x([O],bt.prototype,"isOptionSelected",1),x([O],bt.prototype,"config",1),x([O],bt.prototype,"locale",1),x([O],bt.prototype,"items",1);var T_={identifier:"identity",opacity:1,blendMode:"lighten"},AZ=new w_(0,1),dc=class{constructor(e,t){this.changeIdentifier=r=>{this.state.identifier=r},this.changeOpacity=r=>{const i=AZ.clamp(r);this.state.opacity=i},this.changeBlendMode=r=>{this.state.blendMode=r},this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=T_.identifier,this.state.opacity=T_.opacity,this.state.blendMode=T_.blendMode,this.removeIndex())},this.correctOverlayFlip=()=>{const{flipHorizontally:r,flipVertically:i}=this.editor.outputContainer.getData();this.effect&&(this.effect.setFlipHorizontally(r),this.effect.setFlipVertically(i))},this.removeOverlayEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.removeIndex(),this.effect=void 0)},this.setEffectProperties=r=>this.effect?(this.effect.setProperties(r),this.effect.getProperties()):null,this.setOverlayEffect=({identifier:r,blendMode:i,opacity:n})=>{const o=L({},this.state);this.removeOverlayEffect();const s=this.engineMediator.orderHelper.addIndex("overlay");return new Promise((a,l)=>{this.engineMediator.engine.addOverlayFromAssets(r,this.engineMediator.image.container,s).then(c=>{this.changeIdentifier(r),this.changeOpacity(n),this.changeBlendMode(i),this.effect=c,this.effect.setProperties({blendMode:i,opacity:n}),this.correctOverlayFlip(),a()}).catch(c=>{this.changeIdentifier(o.identifier),this.changeOpacity(o.opacity),this.changeBlendMode(o.blendMode),o.identifier==="identity"&&this.removeIndex(),l(c)})})},this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex("overlay")},this.engineMediator=e,this.editor=t,this.state=T_}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};x([Ye],dc.prototype,"state",2),x([P],dc.prototype,"changeIdentifier",2),x([P],dc.prototype,"changeOpacity",2),x([P],dc.prototype,"changeBlendMode",2),x([P],dc.prototype,"reset",2),x([P],dc.prototype,"correctOverlayFlip",2);var hi=class{constructor(e){this.selectOverlay=async i=>{if(i!==this.identifier){const n=this.defaultBlendModeForIdentifier(i);await this.overlayStore.setOverlayEffect({identifier:i,opacity:1,blendMode:n}),this.addSnapshot("add","overlay"),this.editor.render()}},this.changeOpacity=i=>{const n=this.overlayStore.setEffectProperties({opacity:i});n&&(this.overlayStore.changeOpacity(n.opacity),this.editor.render())},this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.sliderOpacity)},this.addSnapshot=(i,n)=>{this.editor.addSnapshot(void 0,i,n)},this.changeBlendMode=i=>{const n=this.overlayStore.setEffectProperties({blendMode:i});n&&(this.overlayStore.changeBlendMode(n.blendMode),this.addSnapshot("edit",this.locale.controls.carouselBlendMode),this.editor.render())},this.pureReset=()=>{this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()},this.reset=()=>{this.pureReset(),this.addSnapshot("delete",this.locale.controls.buttonReset),this.editor.render()},this.updateStateFromSerialization=async i=>{if(this.entityManager.items.find(o=>o.identifier===i.identifier))return this.overlayStore.setOverlayEffect(i).then(()=>{this.editor.transformToolStore.setOverlayOpacity(i.opacity)});throw new Pu(i.identifier)},this.updateStateFromHistory=async i=>i.identifier==="identity"?(this.pureReset(),new Promise(n=>{n()})):this.overlayStore.setOverlayEffect(i),this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()},this.defaultBlendModeForIdentifier=i=>{const n=this.entityManager.items.findIndex(o=>o.identifier===i);return n!==-1?this.entityManager.items[n].defaultBlendMode:"lighten"},this.editor=e,this.overlayStore=new dc(this.editor.engineMediator,e);const t=this.editor.assetProvider.getAssets("overlay"),{config:r}=this;this.entityManager=new Xn(t,ge(L({},r),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config.overlay}get locale(){return this.editor.configStore.locale.overlay}get items(){return this.entityManager.items}get allBlendModes(){const e=this.locale.controls;return Object.keys(pw).map(t=>{const r=pw[t],i=`blendMode${r.charAt(0).toUpperCase()}${r.slice(1)}`;return{identifier:r,value:e[i]}})}};x([P],hi.prototype,"selectOverlay",2),x([P],hi.prototype,"changeOpacity",2),x([P],hi.prototype,"changeBlendMode",2),x([P],hi.prototype,"pureReset",2),x([P],hi.prototype,"reset",2),x([P],hi.prototype,"updateStateFromSerialization",2),x([P],hi.prototype,"updateStateFromHistory",2),x([P],hi.prototype,"correctOverlayFlip",2),x([O],hi.prototype,"state",1),x([O],hi.prototype,"identifier",1),x([O],hi.prototype,"opacity",1),x([O],hi.prototype,"blendMode",1),x([O],hi.prototype,"isOptionSelected",1),x([O],hi.prototype,"config",1),x([O],hi.prototype,"locale",1),x([O],hi.prototype,"items",1),x([O],hi.prototype,"allBlendModes",1);var zZ="white",Yn={identifier:"identity",opacity:1,tintColor:al[zZ],tintMode:"none",resizeMode:"keepAspect"},JA={},Op=()=>Object.keys(al).map(e=>{const t=al[e];return{identifier:e,color:t,colorString:Dp(t)}});function WC(e,t=null){return new Promise((r,i)=>{const n=new Image;n.addEventListener("load",()=>{const o=document.createElement("canvas"),s=o.getContext("2d");o.width=n.width,o.height=n.height,t&&(o.width=t,o.height=t*n.height/n.width),s.drawImage(n,0,0,o.width,o.height);const a=o.toDataURL("image/png");Nr(o),r(a)}),n.addEventListener("error",()=>{i()}),n.src=e})}var $Z=e=>new Promise((t,r)=>{const i=new FileReader;i.onload=async n=>{try{const{result:o}=n.target,s=await WC(o,150);t({stickerURI:o,thumbnailURI:s,name:e.name||"",type:e.type,identifier:gi()})}catch(o){r(o)}},i.onerror=n=>{r(n)},i.readAsDataURL(e)}),ez="identity",VC="imgly_sticker_custom",Et=class{constructor(e){this.state=Ye.map(JA),this.customStickers=[],this.colorList=Op(),this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},this.doesStickerAssetExist=i=>this.entityManager.items.findIndex(n=>n.identifier===i)!==-1,this.add=i=>{const n=this.entityManager.items.find(a=>a.identifier===i),o=n?n.tintMode:Yn.tintMode,s=n?n.resizeMode:Yn.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:i,tintMode:o,tintColor:Yn.tintColor,opacity:Yn.opacity,resizeMode:s}})},this.duplicate=()=>{if(this.id){const i=this.editor.spriteStore.getDuplicateContainerTransform(this.id),n=this.editor.spriteStore.getDuplicateContainerFlip(this.id),{flipHorizontally:o,flipVertically:s}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:it(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:o!==n.flipHorizontally,flipVertically:s!==n.flipVertically},transform:i})}},this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)},this.flipHorizontally=()=>{this.id&&this.editor.spriteStore.flipHorizontally(this.id)},this.delete=()=>{if(this.id){const i=this.id;this.editor.spriteStore.removeSprite(i),this.state.delete(i),this.selectLast()}},this.updateStateFromHistory=(i,n)=>{(0,Nn.default)(n,this.state.get(i))||(this.setState(i,n),this.editor.spriteStore.setContainerProperties(i,n))},this.setState=(i,n)=>{const o=this.state.get(i);o?("opacity"in n&&(o.opacity=n.opacity),n.tintColor&&(o.tintColor=n.tintColor),n.tintMode&&(o.tintMode=n.tintMode),n.resizeMode&&(o.resizeMode=n.resizeMode),this.state.set(i,o)):this.state.set(i,{identifier:n.identifier,opacity:n.opacity,tintMode:n.tintMode,resizeMode:n.resizeMode,tintColor:n.tintColor?n.tintColor:Yn.tintColor})},this.changeOpacity=i=>{if(this.id){const n=this.state.get(this.id);if(n){this.editor.spriteStore.setContainerProperties(this.id,{opacity:i});const o=this.editor.spriteStore.getContainerProperties(this.id);n.opacity=o.opacity,this.state.set(this.id,n)}}},this.changeTintColor=i=>{if(this.id){const n=this.state.get(this.id);if(n){const{tintMode:o}=this.entityManager.items.find(a=>a.identifier===this.identifier);this.editor.spriteStore.setContainerProperties(this.id,{tintColor:i,tintMode:o});const s=this.editor.spriteStore.getContainerProperties(this.id);n.tintColor=s.tintColor,n.tintMode=s.tintMode||Yn.tintMode,this.state.set(this.id,n)}}},this.tintColorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.color)},this.addFiles=async i=>{if(this.editor.modalStore.showInfoModal("loading"),i.length){let n=0;const o=[];for(n=0;n<i.length;n+=1)o.push($Z(i[n]));try{const s=await Promise.all(o);this.addCustomStickerAsset(s),this.editor.configStore.events.onStickerUploadedAdd(s.map(({identifier:a,stickerURI:l},c)=>({identifier:a,stickerURI:l,file:i[c]})))}catch{this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}}},this.addCustomStickerAsset=async i=>{const n=[];i.forEach(({stickerURI:l,thumbnailURI:c,name:h,identifier:f,type:d})=>{n.push({stickerURI:l,thumbnailURI:c,name:h,tintMode:this.customStickerTintMode,resizeMode:this.customStickerResizeMode,identifier:f}),this.customStickers.push({identifier:f,type:d,stickerURI:l,name:h})});const o=this.locale.categories[VC];this.editor.assetProvider.addCustomStickerAsset(n,VC,o);const s=this.editor.assetProvider.getAssets("sticker"),{config:a}=this;this.entityManager=new Xn(s,ge(L({},a),{itemFallbackKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")})),this.selectedCategory=VC,this.editor.modalStore.hideModal()},this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.history.opacity)},this.addSnapshot=(i,n)=>{const o=this.editor.historyStore.getCurrentSpritesState();(o==null?void 0:o.sticker)&&(0,Nn.default)(o.sticker,it(this.state))||this.currentSticker&&this.editor.spriteStore.addSnapshot(i,n)},this.toggleCategorySelection=i=>{this.selectedCategory=this.selectedCategory===i?ez:i},this.pureReset=()=>{this.state=Ye.map(JA)},this.editor=e,this.selectedCategory=ez;const{config:t}=this,r=this.editor.assetProvider.getAssets("sticker");this.entityManager=new Xn(r,ge(L({},t),{itemFallbackKey:"stickerURI",locale:L(L({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")})),Yn.tintColor=it(Mu(this.config,"defaultTintColor",Yn.tintColor)),this.config.colors&&this.config.colors.length>0&&(this.colorList=xh(it(this.config.colors)))}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get customStickerResizeMode(){return this.config.customStickerResizeMode}get currentSticker(){if(this.isStickerSelected){const e=this.state.get(this.id);if(e)return e}}get identifier(){if(this.isStickerSelected){const e=this.state.get(this.id);if(e)return e.identifier}return"none"}get id(){if(this.isStickerSelected)return this.editor.spriteStore.id}get opacity(){return this.currentSticker?this.currentSticker.opacity:Yn.opacity}get tintMode(){return this.currentSticker?this.currentSticker.tintMode:Yn.tintMode}get resizeMode(){return this.currentSticker?this.currentSticker.resizeMode:Yn.resizeMode}get tintable(){return this.currentSticker?this.currentSticker.tintMode==="solid"||this.currentSticker.tintMode==="colorized":!1}get tintColor(){return this.currentSticker?this.currentSticker.tintColor:Yn.tintColor}get config(){return this.editor.configStore.config.sticker}get locale(){return this.editor.configStore.locale.sticker}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}};x([Ye],Et.prototype,"selectedCategory",2),x([Ye],Et.prototype,"entityManager",2),x([P],Et.prototype,"selectLast",2),x([P],Et.prototype,"add",2),x([P],Et.prototype,"duplicate",2),x([P],Et.prototype,"bringToFront",2),x([P],Et.prototype,"flipHorizontally",2),x([P],Et.prototype,"delete",2),x([P],Et.prototype,"updateStateFromHistory",2),x([P],Et.prototype,"setState",2),x([P],Et.prototype,"changeOpacity",2),x([P],Et.prototype,"changeTintColor",2),x([P],Et.prototype,"addFiles",2),x([P],Et.prototype,"addCustomStickerAsset",2),x([P],Et.prototype,"toggleCategorySelection",2),x([P],Et.prototype,"pureReset",2),x([O],Et.prototype,"isStickerSelected",1),x([O],Et.prototype,"isCustomStickerEnabled",1),x([O],Et.prototype,"customStickerTintMode",1),x([O],Et.prototype,"customStickerResizeMode",1),x([O],Et.prototype,"currentSticker",1),x([O],Et.prototype,"identifier",1),x([O],Et.prototype,"id",1),x([O],Et.prototype,"opacity",1),x([O],Et.prototype,"tintMode",1),x([O],Et.prototype,"resizeMode",1),x([O],Et.prototype,"tintable",1),x([O],Et.prototype,"tintColor",1),x([O],Et.prototype,"config",1),x([O],Et.prototype,"locale",1),x([O],Et.prototype,"localeColor",1),x([O],Et.prototype,"selectedCategoryIdentifier",1),x([O],Et.prototype,"items",1),x([O],Et.prototype,"categories",1);var BZ="imgly_font_open_sans_bold",Vt={text:"Write Something",identifier:BZ,fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:al.white,backgroundColor:al.transparent||[0,0,0,0],width:0},tz={},LZ=()=>Object.keys(ZA).map(e=>{const t=ZA[e];return{identifier:e,color:t,colorString:Dp(t)}}),rz={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"},Mp=class{constructor(e){this.state=Ye.map(tz),this.colorList=Op(),this.backgroundColorList=LZ(),this.fontsLoadStatus=Ye.object({pending:!1,loaded:!1}),this.doesTextAssetExist=t=>this.editor.assetProvider.getFontAssets().findIndex(r=>r.identifier===t)!==-1,this.validFontWithConfig=t=>this.fonts.find(r=>r.identifier===t)||this.fonts[0],this.addOrselect=()=>{this.state.size?(this.selectLast(),this.loadFonts()):this.add()},this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},this.add=async()=>{const{fontsLoadStatus:t}=this,r=()=>{this.editor.spriteStore.addText({state:{identifier:Vt.identifier,text:Vt.text,textColor:Vt.textColor,backgroundColor:Vt.backgroundColor,lineHeight:Vt.lineHeight,alignment:Vt.alignment,fontSize:0}})};if(!t.pending&&!t.loaded){this.fontsLoadStatus.pending=!0;const i=this.editor.assetProvider.getFontManager();try{await i.loadFontsWithIdentifiers([Vt.identifier]),r()}catch{this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:Vt.identifier})}await this.loadFonts()}else r()},this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:it(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:it(this.backgroundColor),width:this.width},transform:t})}},this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)},this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}},this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)},this.changeFont=t=>{const r=this.fonts.find(i=>i.identifier===t);this.changeIdentifier(r,this.id),this.id&&this.addSnapshot("edit",this.locale.history.fontFamily)},this.changeIdentifier=(t,r)=>{Vo(()=>{if(t&&r){const i=this.state.get(r);if(i){this.editor.spriteStore.setContainerProperties(r,{fontIdentifier:t.identifier},!0);const n=this.editor.spriteStore.getContainerProperties(r);i.identifier=n.fontIdentifier,i.fontFamily=t.fontFamily,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=n.fontSize,i.width=n.width,i.defaultFontSize=i.fontSize,this.state.set(r,i)}}})},this.changeFontSize=(t,r=!1)=>{if(this.id){const i=this.state.get(this.id);i&&(i.fontSize=t,r&&(i.defaultFontSize=t),this.state.set(this.id,i))}},this.updateDefaultFontSize=()=>{if(this.id){const t=this.state.get(this.id);t&&(t.defaultFontSize=t.fontSize,this.state.set(this.id,t))}},this.changeSize=(t,r)=>{const i=this.state.get(t);i&&(i.width=r.width,i.fontSize=r.fontSize,i.defaultFontSize=r.fontSize,this.state.set(t,i))},this.changeWidth=t=>{if(this.id){const r=this.state.get(this.id);r&&(r.width=t,this.state.set(this.id,r))}},this.changeText=t=>{if(this.id){const r=this.state.get(this.id);if(r){this.editor.spriteStore.setContainerProperties(this.id,{text:t},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);const n=this.editor.outputContainer.getSizeInOutputSpace(),o=this.editor.spriteStore.getSize(this.id);this.config.disableAutoScaling||o.height>n.height&&this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,n.height)},!0),i=this.editor.spriteStore.getContainerProperties(this.id),r.text=i.text,r.fontSize=i.fontSize,r.defaultFontSize=i.fontSize,this.state.set(this.id,r),this.addSnapshot("edit",this.locale.history.edit)}}},this.calculateFitFontSize=(t,r)=>{if(!Mp.measureContext){const p=document.createElement("canvas");Mp.measureContext=p.getContext("2d")}const i=this.editor.spriteStore.getContainerProperties(t),n=this.editor.engine.assetProvider.getFontManager().getFontWithId(i.fontIdentifier),o=this.config.minFontSizeForAutoScaling,s=Dv(Mp.measureContext,i.text,n,i.fontSize,i.lineHeight,i.width,n.textMetrics),a=Math.min(Math.floor(i.fontSize*(r/s.height)),1),l=Math.round(i.fontSize);let c=0,h=l-a,f=Math.floor((l-a)*2),d=h;for(;c<=f;){h=c+Math.floor((f-c)/2);const p=Dv(Mp.measureContext,i.text,n,h,i.lineHeight,i.width,n.textMetrics);if(r<p.height)f=h-1,d=h-1;else if(r>p.height){if(c=h+1,a+h>=l)return l}else{d=h;break}}return o&&d<o?o:d},this.changeLineHeight=t=>{if(this.id){const r=this.state.get(this.id);if(r&&t){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:t},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);r.lineHeight=i.lineHeight,this.state.set(this.id,r)}}},this.changeColor=t=>{if(this.id){const r=this.state.get(this.id);if(r){this.editor.spriteStore.setContainerProperties(this.id,{textColor:t});const i=this.editor.spriteStore.getContainerProperties(this.id);r.textColor=i.textColor,this.state.set(this.id,r)}}},this.changeBackgroundColor=t=>{if(this.id){const r=this.state.get(this.id);if(r){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:t});const i=this.editor.spriteStore.getContainerProperties(this.id);r.backgroundColor=i.backgroundColor,this.state.set(this.id,r)}}},this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.textColor)},this.backgroundColorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.backgroundColor)},this.changeAlignment=t=>{if(this.id){const r=this.state.get(this.id);if(r){this.editor.spriteStore.setContainerProperties(this.id,{alignment:t});const i=this.editor.spriteStore.getContainerProperties(this.id);r.alignment=i.alignment,this.state.set(this.id,r),this.addSnapshot("edit",this.locale.history.alignment)}}},this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.history.lineSpacing)},this.addSnapshot=(t,r)=>{const i=this.editor.historyStore.getCurrentSpritesState();(i==null?void 0:i.text)&&(0,Nn.default)(i.text,it(this.state))||this.currentText&&this.editor.spriteStore.addSnapshot(t,r)},this.updateStateFromHistory=(t,r)=>{(0,Nn.default)(r,this.state.get(t))||(this.setState(t,r),this.editor.spriteStore.setContainerProperties(t,r))},this.setState=(t,r)=>{const i=this.state.get(t);if(i)r.alignment&&(i.alignment=r.alignment),r.text&&(i.text=r.text),r.lineHeight&&(i.lineHeight=r.lineHeight),r.textColor&&(i.textColor=r.textColor),r.backgroundColor&&(i.backgroundColor=r.backgroundColor),r.fontIdentifier&&(i.identifier=r.fontIdentifier),r.fontSize&&(i.fontSize=r.fontSize,i.defaultFontSize=r.fontSize),r.width&&(i.width=r.width);else{const n=this.validFontWithConfig(r.fontIdentifier);n&&this.state.set(t,{text:r.text,identifier:n.identifier,alignment:r.alignment,textColor:r.textColor?r.textColor:Vt.textColor,backgroundColor:r.backgroundColor?r.backgroundColor:Vt.backgroundColor,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontSize:r.fontSize,fontWeight:n.fontWeight,lineHeight:r.lineHeight,width:r.width,defaultFontSize:r.fontSize})}},this.setFontSize=t=>{if(this.id){const r=this.state.get(this.id);if(r){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:t},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);r.fontSize=i.fontSize,r.defaultFontSize=i.fontSize,this.state.set(this.id,r)}}},this.pureReset=()=>{this.state=Ye.map(tz)},this.editor=e,this.fonts.find(t=>t.identifier===Vt.identifier)||(Vt.identifier=this.fonts[0].identifier),Vt.textColor=it(Mu(this.config,"defaultColor",Vt.textColor)),Vt.backgroundColor=it(Mu(this.config,"defaultBackgroundColor",Vt.backgroundColor)),Vt.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=xh(it(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=xh(it(this.config.backgroundColors)))}static defaultText(){return Vt.text}static getDisplayFontStyle(e){const t=e.fontWeight&&rz[e.fontWeight].toLowerCase()!=="regular"?rz[e.fontWeight]:"",r=e.fontStyle&&e.fontStyle.toLowerCase()!=="normal"?e.fontStyle:"";return`${e.fontFamily.toLowerCase().includes(t.toLowerCase())?"":t} ${r}`.trim()}async loadFonts(){const{fontsLoadStatus:e}=this;if(e.loaded)return;const t=this.editor.assetProvider.getFontManager(),r=this.editor.assetProvider.getFontAssetsForText().map(i=>i.identifier);try{await t.loadFontsWithIdentifiers(r)}catch{const n=r.filter(o=>!t.isFontLoaded(o)).join(", ");this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:n})}e.loaded=!0}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.fontsLoadStatus.loaded}get currentText(){if(this.isTextSelected){const e=this.state.get(this.id);if(e)return e}}get text(){return this.currentText?this.currentText.text:Vt.text}get fontSize(){return this.currentText?this.currentText.fontSize:Vt.fontSize}get defaultFontSize(){return this.currentText?this.currentText.defaultFontSize:Vt.defaultFontSize}get width(){return this.currentText?this.currentText.width:Vt.width}get fontFamily(){return this.currentText?this.currentText.fontFamily:Vt.fontFamily}get fontStyle(){return this.currentText?this.currentText.fontStyle:Vt.fontStyle}get fontWeight(){return this.currentText?this.currentText.fontWeight:Vt.fontWeight}get lineHeight(){return this.currentText?this.currentText.lineHeight:Vt.lineHeight}get identifier(){return this.currentText?this.currentText.identifier:Vt.identifier}get id(){if(this.isTextSelected)return this.editor.spriteStore.id}get alignment(){return this.currentText?this.currentText.alignment:Vt.alignment}get textColor(){return this.currentText?this.currentText.textColor:Vt.textColor}get backgroundColor(){return this.currentText?this.currentText.backgroundColor:Vt.backgroundColor}get config(){return this.editor.configStore.config.text}get locale(){return this.editor.configStore.locale.text}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get fonts(){return this.rawOptions.reduce((e,t)=>this.rawOptions.find(r=>r.identifier===t.identifier)?[...e,{identifier:t.identifier,fontFamily:t.fontFamily,fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||""}]:e,[])}get fontFamilies(){return[...new Set(this.fonts)]}},nt=Mp;x([P],nt.prototype,"addOrselect",2),x([P],nt.prototype,"selectLast",2),x([P],nt.prototype,"add",2),x([P],nt.prototype,"duplicate",2),x([P],nt.prototype,"bringToFront",2),x([P],nt.prototype,"delete",2),x([P],nt.prototype,"setEditMode",2),x([P],nt.prototype,"changeFont",2),x([P],nt.prototype,"changeIdentifier",2),x([P],nt.prototype,"changeFontSize",2),x([P],nt.prototype,"updateDefaultFontSize",2),x([P],nt.prototype,"changeSize",2),x([P],nt.prototype,"changeWidth",2),x([P],nt.prototype,"changeText",2),x([P],nt.prototype,"changeLineHeight",2),x([P],nt.prototype,"changeColor",2),x([P],nt.prototype,"changeBackgroundColor",2),x([P],nt.prototype,"changeAlignment",2),x([P],nt.prototype,"updateStateFromHistory",2),x([P],nt.prototype,"setState",2),x([P],nt.prototype,"setFontSize",2),x([P],nt.prototype,"pureReset",2),x([O],nt.prototype,"isEditMode",1),x([O],nt.prototype,"isTextSelected",1),x([O],nt.prototype,"fontsLoaded",1),x([O],nt.prototype,"currentText",1),x([O],nt.prototype,"text",1),x([O],nt.prototype,"fontSize",1),x([O],nt.prototype,"defaultFontSize",1),x([O],nt.prototype,"width",1),x([O],nt.prototype,"fontFamily",1),x([O],nt.prototype,"fontStyle",1),x([O],nt.prototype,"fontWeight",1),x([O],nt.prototype,"lineHeight",1),x([O],nt.prototype,"identifier",1),x([O],nt.prototype,"id",1),x([O],nt.prototype,"alignment",1),x([O],nt.prototype,"textColor",1),x([O],nt.prototype,"backgroundColor",1),x([O],nt.prototype,"config",1),x([O],nt.prototype,"locale",1),x([O],nt.prototype,"localeColor",1),x([O],nt.prototype,"rawOptions",1),x([O],nt.prototype,"fonts",1),x([O],nt.prototype,"fontFamilies",1);var UZ="imgly_text_design_blocks",Kr={identifier:UZ,color:al.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},iz={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},nz={},Ft=class{constructor(e){this.state=Ye.map(nz),this.colorList=Op(),this.fontsLoaded=!1,this.doesTextDesignAssetExist=r=>this.entityManager.items.findIndex(i=>i.identifier===r)!==-1,this.addOrselect=async()=>{await this.loadFonts(),this.state.size?this.selectLast():this.add()},this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},this.add=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:Kr.identifier,text:Kr.text,color:Kr.color,isInverted:Kr.isInverted,seed:iz[Kr.identifier]||Kr.seed,padding:0}})},this.updateStateFromHistory=(r,i)=>{if((0,Nn.default)(i,this.state.get(r)))return;const n=this.state.get(r);i.identifier===n.identifier?(this.setState(r,i),this.editor.spriteStore.setContainerProperties(r,i)):this.changeIdentifier(i.identifier,!1,i.seed,r)},this.setState=(r,i)=>{const n=this.state.get(r);n?(i.inverted&&(n.isInverted=i.inverted),i.seed&&(n.seed=i.seed),i.color&&(n.color=i.color),i.padding&&(n.padding=i.padding),i.width&&(n.width=i.width)):this.state.set(r,{width:i.width,text:i.text,isInverted:i.inverted,identifier:i.identifier,seed:i.seed,color:i.color?i.color:Kr.color,padding:i.padding})},this.changeText=r=>{if(this.id){const i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{text:r},!0);const n=this.editor.spriteStore.getContainerProperties(this.id);i.text=n.text,this.state.set(this.id,i),this.addSnapshot("edit",this.locale.history.edit)}}},this.setEditMode=r=>{this.editor.spriteStore.setEditMode(r)},this.duplicate=()=>{if(this.id){const r=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:it(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:r})}},this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)},this.addSnapshot=(r,i)=>{const n=this.editor.historyStore.getCurrentSpritesState();(n==null?void 0:n.textdesign)&&(0,Nn.default)(n.textdesign,it(this.state))||this.currentTextDesign&&this.editor.spriteStore.addSnapshot(r,i)},this.delete=(r=this.id)=>{r&&(this.editor.spriteStore.removeSprite(r),this.state.delete(r),this.selectLast())},this.changeSeed=()=>{if(this.id){const r=this.state.get(this.id);if(r){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);r.seed=i.seed,this.state.set(this.id,r),this.addSnapshot("edit",this.locale.history.shuffle)}}},this.changeIdentifier=(r,i=!0,n=null,o=this.id)=>{if(o&&r!==this.identifier){const s=this.state.get(o),a=this.editor.spriteStore.getContainerTransform(o);this.editor.spriteStore.addTextDesign({spriteId:o,state:{identifier:r,text:s.text,color:it(s.color),isInverted:s.isInverted,seed:n||iz[r]||s.seed,padding:s.padding,width:s.width},transform:a},i,!0)}},this.changeColor=r=>{if(this.id){const i=this.state.get(this.id);if(i){this.editor.spriteStore.setContainerProperties(this.id,{color:r});const n=this.editor.spriteStore.getContainerProperties(this.id);i.color=n.color,this.state.set(this.id,i)}}},this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.color)},this.invertBackground=()=>{if(this.id){const r=this.state.get(this.id);if(r){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!r.isInverted},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);r.isInverted=i.inverted,this.state.set(this.id,r),this.addSnapshot("edit",this.locale.history.invert)}}},this.changeWidth=r=>{if(this.id){const i=this.state.get(this.id);i&&(i.width=r,this.state.set(this.id,i))}},this.changePadding=r=>{if(this.id){const i=this.state.get(this.id);i&&(i.padding=r,this.state.set(this.id,i))}},this.pureReset=()=>{this.state=Ye.map(nz)},this.editor=e;const t=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new Xn(t,ge(L({},this.config),{flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find(r=>r.identifier===Kr.identifier)||(Kr.identifier=this.entityManager.items[0].identifier),Kr.text=this.locale.canvasControls.placeholderText,Kr.color=it(Mu(this.config,"defaultColor",Kr.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=xh(it(this.config.colors)))}static defaultText(){return Kr.text}async loadFonts(){if(this.fontsLoaded)return;const e=this.editor.assetProvider.getFontManager(),t=this.editor.assetProvider.getFontAssetsForTextDesign().map(r=>r.identifier);try{await e.loadFontsWithIdentifiers(t)}catch{const i=t.filter(n=>!e.isFontLoaded(n)).join(", ");this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:i})}this.fontsLoaded=!0}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){const e=this.state.get(this.id);if(e)return e}}get id(){if(this.isTextDesignSelected)return this.editor.spriteStore.id}get text(){return this.currentTextDesign?this.currentTextDesign.text:Kr.text}get seed(){return this.currentTextDesign?this.currentTextDesign.seed:Kr.seed}get padding(){return this.currentTextDesign?this.currentTextDesign.padding:Kr.padding}get width(){return this.currentTextDesign?this.currentTextDesign.width:Kr.width}get identifier(){return this.currentTextDesign?this.currentTextDesign.identifier:null}get isInverted(){return this.currentTextDesign?this.currentTextDesign.isInverted:Kr.isInverted}get color(){return this.currentTextDesign?this.currentTextDesign.color:Kr.color}get config(){return this.editor.configStore.config.textdesign}get locale(){return this.editor.configStore.locale.textdesign}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}};x([P],Ft.prototype,"addOrselect",2),x([P],Ft.prototype,"selectLast",2),x([P],Ft.prototype,"add",2),x([P],Ft.prototype,"updateStateFromHistory",2),x([P],Ft.prototype,"setState",2),x([P],Ft.prototype,"changeText",2),x([P],Ft.prototype,"setEditMode",2),x([P],Ft.prototype,"duplicate",2),x([P],Ft.prototype,"bringToFront",2),x([P],Ft.prototype,"delete",2),x([P],Ft.prototype,"changeSeed",2),x([P],Ft.prototype,"changeIdentifier",2),x([P],Ft.prototype,"changeColor",2),x([P],Ft.prototype,"invertBackground",2),x([P],Ft.prototype,"changeWidth",2),x([P],Ft.prototype,"changePadding",2),x([P],Ft.prototype,"pureReset",2),x([O],Ft.prototype,"isTextDesignSelected",1),x([O],Ft.prototype,"isEditMode",1),x([O],Ft.prototype,"currentTextDesign",1),x([O],Ft.prototype,"id",1),x([O],Ft.prototype,"text",1),x([O],Ft.prototype,"seed",1),x([O],Ft.prototype,"padding",1),x([O],Ft.prototype,"width",1),x([O],Ft.prototype,"identifier",1),x([O],Ft.prototype,"isInverted",1),x([O],Ft.prototype,"color",1),x([O],Ft.prototype,"config",1),x([O],Ft.prototype,"locale",1),x([O],Ft.prototype,"localeColor",1),x([O],Ft.prototype,"items",1);var ll={identifier:"identity",opacity:1,width:0,color:al.white},NZ=new w_(0,1),fc=class{constructor(e){this.changeIdentifier=t=>{this.state.identifier=t},this.changeOpacity=t=>{const r=NZ.clamp(t);this.state.opacity=r},this.changeWidth=t=>{this.state.width=t},this.changeColor=t=>{this.state.color=t},this.reset=()=>{this.indexInContainer===-1&&(this.state.identifier=ll.identifier,this.state.opacity=ll.opacity,this.state.width=ll.width,this.state.color=ll.color,this.removeIndex())},this.removeFrameEffect=()=>{this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)},this.setEffectProperties=t=>this.effect?(this.removeIndex(),this.effect.setProperties(t),this.effect.getProperties()):null,this.setFrameEffect=({identifier:t,width:r,opacity:i,color:n})=>{const o=L({},this.state);return this.changeIdentifier(t),this.changeWidth(r),this.changeOpacity(i),this.changeColor(n),this.removeFrameEffect(),new Promise((s,a)=>{this.engine.addFrameFromAssets(t,this.engineMediator.image.container).then(l=>{this.effect=l,this.effect.setProperties({tintColor:n,opacity:i,width:r}),s()}).catch(l=>{this.changeIdentifier(o.identifier),this.changeOpacity(o.opacity),this.changeWidth(o.width),this.changeColor(o.color),o.identifier==="identity"&&this.removeIndex(),a(l)})})},this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)},this.engineMediator=e,this.state=ll}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};x([Ye],fc.prototype,"state",2),x([P],fc.prototype,"changeIdentifier",2),x([P],fc.prototype,"changeOpacity",2),x([P],fc.prototype,"changeWidth",2),x([P],fc.prototype,"changeColor",2),x([P],fc.prototype,"reset",2);var Ar=class{constructor(e){this.colorList=Op(),this.selectFrame=async i=>{if(i!==this.identifier){const n=.1*this.editor.shortestOutputSide;await this.frameStore.setFrameEffect({identifier:i,width:n,opacity:1,color:ll.color}),this.editor.render(),this.addSnapshot("add","frame")}},this.changeOpacity=i=>{const n=this.frameStore.setEffectProperties({opacity:i});n&&(this.frameStore.changeOpacity(n.opacity),this.editor.render())},this.changeWidth=i=>{const n=this.frameStore.setEffectProperties({width:i});n&&(this.frameStore.changeWidth(n.width),this.editor.render())},this.changeColor=i=>{const n=this.frameStore.setEffectProperties({tintColor:i});n&&(this.frameStore.changeColor(n.tintColor),this.editor.render())},this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.selectColor)},this.toolSnapshot=i=>{this.addSnapshot("edit",i)},this.addSnapshot=(i,n)=>{this.editor.addSnapshot(void 0,i,n)},this.pureReset=()=>{this.frameStore.removeFrameEffect(),this.frameStore.reset()},this.reset=()=>{this.pureReset(),this.addSnapshot("delete",this.locale.controls.buttonReset),this.editor.render()},this.updateStateFromHistory=i=>i.identifier==="identity"?(this.pureReset(),new Promise(n=>{n()})):this.frameStore.setFrameEffect(i),this.updateStateFromSerialization=async i=>this.entityManager.items.find(o=>o.identifier===i.identifier)?this.frameStore.setFrameEffect(i).then(()=>{this.editor.transformToolStore.setFrameOpacity(i.opacity)}):new Promise((o,s)=>{s(new Error("Frame Asset doesn't exist"))}),this.editor=e,this.frameStore=new fc(this.editor.engineMediator);const t=this.editor.assetProvider.getAssets("frame"),{config:r}=this;this.entityManager=new Xn(t,ge(L({},r),{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")})),ll.color=it(Mu(this.config,"defaultColor",ll.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=xh(it(this.config.colors)))}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){const e=this.entityManager.items.find(t=>t.identifier===this.identifier);return e&&e.tintable||!1}get opacity(){return this.state.opacity}get minSize(){return this.editor.shortestOutputSide*.05}get maxSize(){return this.editor.shortestOutputSide*.3}get config(){return this.editor.configStore.config.frame}get locale(){return this.editor.configStore.locale.frame}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return this.identifier!=="identity"}};x([P],Ar.prototype,"selectFrame",2),x([P],Ar.prototype,"changeOpacity",2),x([P],Ar.prototype,"changeWidth",2),x([P],Ar.prototype,"changeColor",2),x([P],Ar.prototype,"pureReset",2),x([P],Ar.prototype,"reset",2),x([P],Ar.prototype,"updateStateFromHistory",2),x([P],Ar.prototype,"updateStateFromSerialization",2),x([O],Ar.prototype,"state",1),x([O],Ar.prototype,"identifier",1),x([O],Ar.prototype,"color",1),x([O],Ar.prototype,"size",1),x([O],Ar.prototype,"tintable",1),x([O],Ar.prototype,"opacity",1),x([O],Ar.prototype,"minSize",1),x([O],Ar.prototype,"maxSize",1),x([O],Ar.prototype,"config",1),x([O],Ar.prototype,"locale",1),x([O],Ar.prototype,"localeColor",1),x([O],Ar.prototype,"items",1),x([O],Ar.prototype,"isOptionSelected",1);var E_={size:0,color:al.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0},Dr=class{constructor(e){this.strokes={strokes:[]},this.colorList=Op(),this.dirty=Ye.box(!1),this.id="",this.containerId=()=>this.id,this.initSize=()=>{const{minimumSize:t,maximumSize:r}=this.state,{size:i}=this;i===0&&this.changeSize(eF(this.config,"defaultSize",[t,r]))},this.changeColor=t=>{this.state.color=t},this.changeSize=t=>{this.state.size=t},this.changeRelativeSize=t=>{const{maximumSize:r,minimumSize:i}=this.state;this.state.size=(r-i)*t/100+i},this.changeHardness=t=>{this.state.hardness=t},this.reset=()=>{this.pureReset(),this.addSnapshot("delete",this.locale.controls.buttonReset),this.editor.render()},this.editor=e,this.state=ge(L({},E_),{hardness:eF(this.config,"defaultHardness",[E_.minimumHardness,E_.maximumHardness]),color:it(Mu(this.config,"defaultColor",E_.color))}),this.config.colors&&this.config.colors.length>0&&(this.colorList=xh(it(this.config.colors)))}addSnapshot(e,t){this.editor.addSnapshot(void 0,e,t)}clickableCanvas(e){this.editor.clickableCanvas(e)}beginStroke(e=[]){if(!this.drawingContainer){const t=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:e},this.editor.imageContainer,t)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:it(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(e){if(this.drawingContainer){const t=this.editor.previewToWorld(e,!1);this.drawingContainer.addPointToCurrentStroke(t),this.editor.render()}}endStroke(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot("edit",this.locale.history.brushStroke),this.dirty.set(!0))}updateStateFromHistory(e){if(!(0,Nn.default)(e,this.strokes)){if((0,Nn.default)(e,{strokes:[]})||!e){this.pureReset();return}if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===e.strokes.length){this.dirty.set(!1);return}this.strokes=e,this.drawingContainer.setData(this.strokes)}else{const t=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:e.strokes},this.editor.imageContainer,t),this.strokes=this.drawingContainer.getData()}this.dirty.set(this.strokes.strokes.length!==0),this.id=this.drawingContainer.getID()}}pureReset(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)}get config(){return this.editor.configStore.config.brush}get locale(){return this.editor.configStore.locale.brush}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){const{size:e,maximumSize:t,minimumSize:r}=this.state;return(e-r)*100/(t-r)}get sizeOnScreenSpace(){const e=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*e)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}};x([Ye],Dr.prototype,"state",2),x([Ye],Dr.prototype,"dirty",2),x([P],Dr.prototype,"initSize",2),x([P],Dr.prototype,"changeColor",2),x([P],Dr.prototype,"changeSize",2),x([P],Dr.prototype,"changeRelativeSize",2),x([P],Dr.prototype,"changeHardness",2),x([P],Dr.prototype,"clickableCanvas",1),x([P],Dr.prototype,"beginStroke",1),x([P],Dr.prototype,"strokePosition",1),x([P],Dr.prototype,"endStroke",1),x([P],Dr.prototype,"updateStateFromHistory",1),x([P],Dr.prototype,"reset",2),x([O],Dr.prototype,"config",1),x([O],Dr.prototype,"locale",1),x([O],Dr.prototype,"localeColor",1),x([O],Dr.prototype,"color",1),x([O],Dr.prototype,"size",1),x([O],Dr.prototype,"relativeSize",1),x([O],Dr.prototype,"sizeOnScreenSpace",1),x([O],Dr.prototype,"hardness",1),x([O],Dr.prototype,"isDirty",1);var ns={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},jZ={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:Ye.map({})},HZ=class extends ff{constructor(){super(...arguments),this.prevDimensions={width:0,height:0}}onExport(e){this.emit("export",e)}onClose(){this.emit("close")}onUndo(){this.emit("historyUndo")}onRedo(){this.emit("historyRedo")}onHistoryChange(){this.emit("historyChange")}onEditorReady(){this.emit("editorReady")}onErrorImageLoading(e){this.emit("errorImageLoading",e)}onImageLoaded(){this.emit("imageLoad")}onStickerUploadedAdd(e){this.emit("stickerUploadAdd",e)}onToolChanged(e){this.emit("toolEnter",e)}onErrorWebGLContextLost(){this.emit("errorWebGLContextLost")}onCropDimensionsChanged(e){(this.prevDimensions.width!==e.width||this.prevDimensions.height!==e.height)&&(this.emit("cropDimensionsChange",e),this.prevDimensions=e)}},WZ=Gs([BC,{layout:"basic",defaultTool:null}]),VZ={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xFCckg\xE4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xDFen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xFCnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xFCtzt",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xDFen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xDFen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xDFen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xFCbersteigt die maximale Gr\xF6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"\xC4nderungen verwerfen",buttonNo:"\xC4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xDFen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xF6nnten anders aussehen",buttonYes:"\xC4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xFChren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xD6ffnen",buttonWebcamClose:"Webcam Schlie\xDFen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Filter Intensit\xE4t"},categories:{imgly_filter_category_duotone:"DuoTone",imgly_filter_category_bw:"B & W",imgly_filter_category_vintage:"Vintage",imgly_filter_category_smooth:"Smooth",imgly_filter_category_cold:"Cold",imgly_filter_category_warm:"Warm",imgly_filter_category_legacy:"Legacy"},items:{imgly_lut_celsius:"Inferno",imgly_lut_chest:"Chestnut",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Sunny 70s",imgly_lut_k2:"Flat Black",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Hard Stuff",imgly_lut_texas:"Oldtimer",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Kalmen",imgly_lut_bleachedblue:"Joran",imgly_lut_blues:"Polaroid",imgly_lut_blueshadows:"Zephyr",imgly_lut_breeze:"Levante",imgly_lut_bw:"Greyed",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Snappy",imgly_lut_cottoncandy:"Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Low Fire",imgly_lut_elder:"Colla",imgly_lut_evening:"Sunrise",imgly_lut_fall:"Moss",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"Hicon",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"Pebble",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lemon",imgly_lut_litho:"Litho",imgly_lut_lomo:"Lomo",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"Pumpkin",imgly_lut_orchid:"Solanus",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Weathered",imgly_lut_pola669:"Green Gap",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Golden",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Softy",imgly_lut_x400:"Dusty",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xFCcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xE4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xE4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xDF",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Focus Intensit\xE4t"},items:{radial:"Kreisf\xF6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xDFsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xF6\xDFe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xDCberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xF6\xDFe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xF6he",tabFontSize:"Schriftgr\xF6\xDFe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xFCcksetzen",sliderSize:"Dicke",sliderHardness:"H\xE4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xE4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xFCcksetzen",checkboxKeepResolution:"Fixiere Aufl\xF6sung",inputCropSize:"Bildgr\xF6\xDFe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xF6sung",tabCropSize:"Bildgr\xF6\xDFe"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}},customTool:{title:"Benutzerdefiniert"}},GC={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Retry",buttonNo:"Close"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Retry",buttonNo:"Close"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Retry",buttonNo:"Close"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{imgly_filter_category_duotone:"DuoTone",imgly_filter_category_bw:"B & W",imgly_filter_category_vintage:"Vintage",imgly_filter_category_smooth:"Smooth",imgly_filter_category_cold:"Cold",imgly_filter_category_warm:"Warm",imgly_filter_category_legacy:"Legacy"},items:{imgly_lut_celsius:"Inferno",imgly_lut_chest:"Chestnut",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Sunny 70s",imgly_lut_k2:"Flat Black",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Hard Stuff",imgly_lut_texas:"Oldtimer",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Kalmen",imgly_lut_bleachedblue:"Joran",imgly_lut_blues:"Polaroid",imgly_lut_blueshadows:"Zephyr",imgly_lut_breeze:"Levante",imgly_lut_bw:"Greyed",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Snappy",imgly_lut_cottoncandy:"Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Low Fire",imgly_lut_elder:"Colla",imgly_lut_evening:"Sunrise",imgly_lut_fall:"Moss",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"Hicon",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"Pebble",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lemon",imgly_lut_litho:"Litho",imgly_lut_lomo:"Lomo",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"Pumpkin",imgly_lut_orchid:"Solanus",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Weathered",imgly_lut_pola669:"Green Gap",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Golden",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Softy",imgly_lut_x400:"Dusty",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}},customTool:{title:"Custom"}},oz=e=>e==="de"?VZ:GC,GZ=(e,t)=>t&&t[e]?Gs([oz(e),t[e]]):oz(e)||GC,qZ=({primary:e="#365afc",background:t="#0B0B0B",foreground:r="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{const i="rgba(255, 255, 255, 0.90)",n="rgba(255, 255, 255, 0.60)",o="rgba(255, 255, 255, 0.38)",s="#424242",a="#333333",l="#242424",c="#171717",h="#0B0B0B",f="rgba(255, 255, 255, 0.08)",d="rgba(0, 0, 0, 0.3)",p="rgba(89, 121, 252, 0.20)",v="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:t,foreground:r,primary:e,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:a,activeForeground:e,containedPrimaryBackground:e,containedPrimaryForeground:i,outlinedPrimaryBackground:l,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:n,textPrimaryForeground:e,textSecondaryForeground:n,outlinedInactiveOverlayColor:d,textInactiveOpacity:"0.5",hoverOverlayColor:f},checkbox:{background:a,foreground:r,activeForeground:r,activeBackground:e,inactiveOpacity:v,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:i,headerForeground:n,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:i,activeBorderColor:e,activeOverlayColor:p,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:i,inactiveOverlayColor:d,hoverOverlayColor:f},tabTitle:{foreground:n,background:"transparent",activeBackground:"transparent",activeBorderColor:e,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:n,borderColor:a,caretColor:o,listBackground:a,listBorderColor:a,listItemHoverBackground:s,listForeground:n,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,inactiveOpacity:v},textInput:{foreground:i,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:a,inactiveOpacity:v},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:e,thumbBackground:c,thumbBorderColor:e,inactiveOpacity:v,hoverOpacity:"0.7"},selectColor:{activeBorderColor:e,inactiveOpacity:v},toolbar:{foreground:i,background:l,activeBackground:"transparent",activeForeground:e,borderColor:"transparent"},tooltip:{background:s,foreground:i},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:a,titleForeground:n,inputLabelForeground:n,inputLabelInactiveOpacity:v},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:i,borderColor:"none"},canvasActionBar:{background:s,foreground:i,separatorColor:o},canvas:{background:h,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:a,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:r,background:h},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}},sz=qZ,XZ=({primary:e="#1e47fb",background:t="#FBFBFB",foreground:r="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{const i="rgba(0, 0, 0, 0.90)",n="rgba(0, 0, 0, 0.60)",o="rgba(0, 0, 0, 0.38)",s="#CCCCCC",a="#D4D4D4",l="#E6E6E6",c="#EEEEEE",h="#FBFBFB",f="rgba(125, 125, 125, 0.12)",d="rgba(30, 71, 251, 0.2)",p="rgba(0, 0, 0, 0.1)",v="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:t,foreground:r,primary:e,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:a,activeForeground:e,containedPrimaryBackground:e,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:l,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:n,textPrimaryForeground:e,textSecondaryForeground:n,outlinedInactiveOverlayColor:p,textInactiveOpacity:"0.5",hoverOverlayColor:f},checkbox:{background:a,foreground:r,activeForeground:r,activeBackground:e,inactiveOpacity:v,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:i,headerForeground:n,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:i,activeBorderColor:e,activeOverlayColor:d,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:p,hoverOverlayColor:f},tabTitle:{foreground:n,background:"transparent",activeBackground:"transparent",activeBorderColor:e,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:n,borderColor:a,listBackground:a,caretColor:o,listForeground:n,listBorderColor:a,listItemHoverBackground:s,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,inactiveOpacity:v},textInput:{foreground:i,hoverBorderColor:i,background:"transparent",borderColor:a,inactiveOpacity:v},slider:{trackColor:s,activeTrackColor:e,thumbBackground:c,thumbBorderColor:e,inactiveOpacity:v,hoverOpacity:"0.7"},selectColor:{activeBorderColor:e,inactiveOpacity:v},toolbar:{foreground:i,background:a,activeBackground:"transparent",activeForeground:e,borderColor:"transparent"},tooltip:{background:s,foreground:i},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:c,shadow:"none",separatorColor:a,titleForeground:n,inputLabelForeground:n,inputLabelInactiveOpacity:v},mainCanvasActionBar:{background:"transparent",foreground:i,borderColor:"none"},canvasActionBar:{background:s,foreground:i,separatorColor:o},canvas:{background:h,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:a,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:r,background:h},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}},YZ=XZ,qC=sz(),XC=QA(),pc=ge(L({},qC),{measurements:XC}),QZ=e=>e==="light"?YZ:sz,KZ=(e,t)=>{const r=QZ(e);if(t&&t[e]){const{primary:i,background:n,foreground:o}=t[e],s={primary:i,background:n,foreground:o},a=Object.keys(s).reduce((l,c)=>s[c]?ge(L({},l),{[c]:s[c]}):l,{});return Gs([r(a),t[e]])}return r()||qC},ZZ=["canvas","advancedUIToolbar","advancedUIToolControlBar","advancedUICard","advancedUISpacer","basicUIToolbar","basicUIToolControlBar","mainCanvasActionBar","inputs","colorItem","fontSystem"],JZ=e=>{const t=QA();if(e){const r={};return Object.keys(e).forEach(i=>{ZZ.indexOf(i)!==-1&&(r[i]=e[i])}),Gs([t,r])}return t},eJ={config:BC,locale:GC,theme:qC,measurements:XC,initialMeasurements:XC},Qn=class{constructor(){this.checkDefaultToolAvailability=(e,t)=>t.indexOf(e)!==-1,this.state=Ye(eJ),this.events=new HZ,this.licenseChecker=null}saveConfig(e){e.mainCanvasActions&&e.mainCanvasActions.length!==4&&(e.mainCanvasActions.length=4);const t=e.layout&&e.layout==="basic"?WZ:BC,r=Gs([t,e]);this.licenseChecker=new sG(r.license),this.licenseChecker.areCustomAssetsAllowed()||(r.sticker.enableCustomUpload=!1);const i=GZ(r.language,r.custom.languages),n=KZ(r.theme,r.custom.themes),o=JZ(r.custom.measurements),{provider:s}=r.library,a=[];r.adjustment.categories=r.adjustment.categories.reduce((h,f)=>(h.push(ge(L({},f),{items:f.items.filter(d=>nW[d.identifier]?!0:(a.push(d.identifier),!1))})),h),[]),a.length!==0&&console.error(`The following identifier are incorrect for the adjustment tool: ${a.join(", ")}`),delete r.language,delete r.custom.languages,delete r.custom.themes,delete r.library.provider;let l=r.tools.reduce((h,f)=>typeof f=="object"?[...h,...f]:[...h,f],[]);l.length||(console.error("Empty list input for tools"),l=XA.reduce((h,f)=>typeof f=="object"?[...h,...f]:[...h,f],[])),l=l.filter(h=>this.licenseChecker.isToolAllowed(h)),r.defaultTool&&(this.checkDefaultToolAvailability(r.defaultTool,l)||(this.licenseChecker.isToolAllowed(r.defaultTool)&&console.warn(`Configured default tool ${r.defaultTool} is not a part of configured list of tools: [${l.join(" ")}]`),[r.defaultTool]=l)),r.tools=l,this.state.config=r,this.state.locale=i,this.state.theme=n,this.state.measurements=o,this.state.initialMeasurements=o;const c=this.buildCustomAssetsConfig();return this.assetProvider=new oF(c,this.licenseChecker.areCustomAssetsAllowed(),r.assetResolver),this.loadThemeFont(),s}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get initialMeasurements(){return this.state.initialMeasurements}get tools(){return this.config.tools.reduce((e,t)=>typeof t=="string"?[...e,t]:[...e,"",...t],[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return this.config.order==="default"}get isLayoutAdvanced(){return this.config.layout==="advanced"}get displayCloseButton(){return this.config.mainCanvasActions.indexOf("close")!==-1}loadThemeFont(){const{typography:e}=this.theme;e.skipLoading||this.assetProvider.getFontManager().injectFonts([e])}buildCustomAssetsConfig(){const e=this.tools,t=it(this.state.config),r=this.state.config.assetBaseUrl,{theme:i}=this.state,n=e.indexOf("filter")!==-1?t.filter:void 0,o=e.indexOf("focus")!==-1?t.focus:void 0,s=e.indexOf("adjustment")!==-1?t.adjustment:void 0,a=e.indexOf("sticker")!==-1?t.sticker:void 0,l=e.indexOf("frame")!==-1?t.frame:void 0,c=e.indexOf("overlay")!==-1?t.overlay:void 0,h=e.indexOf("transform")!==-1?t.transform:void 0,f=e.indexOf("text")!==-1?t.text:void 0,d=e.indexOf("textdesign")!==-1?t.textdesign:void 0;return{basePath:r,theme:i,filter:n,focus:o,sticker:a,frame:l,overlay:c,transform:h,text:f,adjustment:s,textdesign:d}}};x([P],Qn.prototype,"saveConfig",1),x([O],Qn.prototype,"config",1),x([O],Qn.prototype,"locale",1),x([O],Qn.prototype,"theme",1),x([O],Qn.prototype,"measurements",1),x([O],Qn.prototype,"initialMeasurements",1),x([O],Qn.prototype,"tools",1),x([O],Qn.prototype,"defaultTool",1),x([O],Qn.prototype,"isOrderDefault",1),x([O],Qn.prototype,"isLayoutAdvanced",1),x([O],Qn.prototype,"displayCloseButton",1);var tJ=class{constructor(e){this.editor=e}setBackgroundImage(e){this.container?this.container.setData({image:e,originalImage:e}):this.container=this.engine.addImage({image:e,originalImage:e,blendMode:"normal",opacity:1})}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise((e,t)=>{const{image:r}=this.editor.activeStore;if(uV(r))this.setBackgroundImage(r),e();else{const i=this.editor.libraryStore.getRawUrl(r);this.getImageElement(i).then(n=>{this.setBackgroundImage(n),e()}).catch(n=>{t({identifier:"imageLoading",message:n.message})})}})}getImageElement(e){return new Promise((t,r)=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",n=>{r(n)}),i.crossOrigin=this.editor.configStore.config.engine.crossOrigin,i.src=e})}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}},rJ=class{constructor(e){this.applyNewImageTransform=()=>{const{size:t,width:r,height:i}=this.editor.engineMediator.image.container.getBounds(),n=this.container;n.setTransform(Xr.IDENTITY),n.setResolution(t),n.setPivot(.5,.5),n.setPosition({x:r/2,y:i/2})},this.editor=e}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}};function D_(e,t){const r=e.width/e.height,i=t.width/t.height;return r>i?e.height/t.height:e.width/t.width}var iJ={transform:Xr.IDENTITY},mc=class{constructor(e){this.initialTransform=Xr.IDENTITY,this.editor=e,this.state=Ye(iJ)}createPreview(e){this.container=this.editor.engine.createPreview(e)}updateTransform(e=0,t=!0){const r=this.calculateTransform(e);return r.scale.x?(t?this.saveInitialTransform(r):this.savePreviewTransform(r),this.container.setTransform(this.state.transform),!0):!1}saveInitialTransform(e){this.initialTransform=e,this.savePreviewTransform(e)}savePreviewTransform(e){Vo(()=>{this.state.transform.position=e.position,this.state.transform.scale=e.scale,this.state.transform.rotation=e.rotation;const t=ql(),r=new G(e.scale).divide(t);this.previewTransformWithoutDpr={position:new G(e.position).divide(t),scale:r,rotation:e.rotation}})}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(e=0){const t=ql(),{scaleImageToFit:r}=this.editor.configStore.config,{width:i,height:n}=this.editor.canvasStore.canvasSize,o=this.editor.engine.getOutputDimensions(),s=D_({width:i,height:n},o);let a=r?s:Math.min(1,s);const l=n-o.height*a,c=this.editor.configStore.measurements.mainCanvasActionBar.height*2;l<c&&(a=D_({width:i,height:n-c},o));const h=.95;o.height*a>n*h&&(a=D_({width:i,height:n*h},o)),o.width*a>i*h&&(a=D_({width:i*h,height:n},o)),a*=t;const f={x:i*t/2,y:n*t/2},d={x:a,y:a};return new Xr(f,d,e)}};x([P],mc.prototype,"updateTransform",1),x([P],mc.prototype,"savePreviewTransform",1),x([O],mc.prototype,"transform",1),x([O],mc.prototype,"position",1),x([O],mc.prototype,"scale",1),x([O],mc.prototype,"rotation",1);var gc=class{constructor(){this.imageContainerOrder=[],this.spriteContainerOrder=[]}static checkTool(e){if(["sticker","text","textdesign","brush"].indexOf(e)!==-1)throw new Error("addIndex is used for non sprites, for sprites use addSprite")}static remove(e,t){const r=t.findIndex(i=>i===e);r!==-1&&t.splice(r,1)}static indexForOrder(e,t,r){const i=e[r],n=t.findIndex(s=>s===r);if(n!==-1)return{index:n,order:t};const{length:o}=t;if(o){let s;for(s=0;s<o;s+=1){const a=t[s],l=e[a];if(i<l)return t=[...t.slice(0,s),r,...t.slice(s)],{index:s,order:t}}}return t.push(r),{index:t.length-1,order:t}}addIndex(e){gc.checkTool(e);const{index:t,order:r}=gc.indexForOrder(gc.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,e);return this.imageContainerOrder=r,t}removeIndex(e){gc.checkTool(e),gc.remove(e,this.imageContainerOrder)}addSprite(e){return this.spriteContainerOrder.push(e),this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(e){gc.remove(e,this.spriteContainerOrder)}renameSprite(e,t){const r=this.spriteContainerOrder.findIndex(i=>i===e);r!==-1&&(this.spriteContainerOrder[r]=t)}bringToFront(e){const t=this.spriteContainerOrder.findIndex(r=>r===e);return t!==-1&&(this.spriteContainerOrder.splice(t,1),this.spriteContainerOrder.push(e)),this.getLastSpriteIndex()}getLastSpriteId(){const{length:e}=this.spriteContainerOrder;return this.spriteContainerOrder[e-1]}getSpriteIndex(e){return this.spriteContainerOrder.findIndex(r=>r===e)+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}},az=gc;az.IMAGE_CONTAINER_INDEX={filter:0,adjustment:1,focus:2,overlay:3};var nJ=class{constructor(e){this.orderHelper=new az,this.init=()=>{const t=this.editor.configStore.config.engine;this.engine=new CF(ge(L({},t),{license:this.editor.configStore.config.license,assetProvider:this.editor.configStore.assetProvider,watermark:this.editor.configStore.config.watermark})),this.image=new tJ(this.editor),this.output=new rJ(this.editor),this.preview=new mc(this.editor)},this.editor=e}render(e){return this.engine.render(e)}previewSpaceToWorldSpace(e,t){const r=this.preview.previewTransformWithoutDpr;if(Os(e)){const i=this.editor.engine.convertPointFromPreviewIntoWorldSpace(G.ZERO,r,t),n=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:e,y:0},r,t);return G.distance(new G(i),new G(n))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(e,r,t)}worldSpaceToPreviewSpace(e){const t=this.preview.previewTransformWithoutDpr;if(Os(e)){const r=this.editor.engine.convertPointFromWorldIntoPreviewSpace(G.ZERO,t),i=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:e,y:0},t);return G.distance(new G(r),new G(i))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(e,t)}outputSpaceToWorldSpace(e){return Os(e)?rt.getScalarInWorldSpace(e,this.editor.engine.getOutputContainer()):rt.getPointInWorldSpace(e,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(e){const t=this.preview.previewTransformWithoutDpr;if(Os(e)){const r=this.editor.engine.convertPointFromPreviewIntoOutputSpace(G.ZERO,t),i=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:e,y:0},t);return G.distance(new G(r),new G(i))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(e,t)}previewSpaceToFlippedPreviewSpace(e){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(e)}},I_=class{constructor(){this.snapshots=[],this.observeIndex=Ye.box(-1)}addSnapshot(e){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(e)):this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(e)],this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[],this.observeIndex.set(-1)}undo(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null}redo(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null}discardSnapshotsfromIndex(e){e>0&&e<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,e),this.observeIndex.set(this.snapshots.length-1))}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}};x([O],I_.prototype,"index",1),x([O],I_.prototype,"canUndo",1),x([O],I_.prototype,"canRedo",1);var Pp=class{constructor(e){this.awaitHistoryChange=!1,this.isDirtySinceSave=!1,this.undo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onUndo(),this.awaitHistoryChange=!0;const t=this.appHistoryManager.undo();await this.applyState(t),this.awaitHistoryChange=!1,this.canUndo||(this.isDirtySinceSave=!1)}},this.redo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onRedo(),this.awaitHistoryChange=!0;const t=this.appHistoryManager.redo();await this.applyState(t),this.awaitHistoryChange=!1}},this.editor=e,this.appHistoryManager=new I_}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){const e=it(this.editor.adjustmentsToolStore.state),t=it(this.editor.filterToolStore.state),r=this.editor.focusToolStore.getFocusStateForHistory(),i=it(this.editor.overlayToolStore.state),n=it(this.editor.frameToolStore.state),{strokes:o}=this.editor.brushToolStore,s=this.editor.spriteStore.getSpriteHistoryState(),a=this.editor.transformToolStore.serializableState;return{adjustment:e,filter:t,focus:r,overlay:i,frame:n,brush:o,sprite:s,transform:a}}addInitialSnapshot(){const e=this.getHistoryState();this.appHistoryManager.addSnapshot({state:e,type:"add",description:"Initial State"})}addSnapshot(e,t,r){let i;e?e.sprite||e.transform?i=L(L({},this.getHistoryState()),e):i=e:i=this.getHistoryState(),this.appHistoryManager.addSnapshot({state:i,type:t,description:r}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0)}async applyState({state:e}){try{if(e){const t=Object.keys(e);for(const r of t)switch(r){case"filter":await this.editor.filterToolStore.updateStateFromHistory(e[r]);break;case"adjustment":await this.editor.adjustmentsToolStore.updateStateFromHistory(e[r]);break;case"overlay":await this.editor.overlayToolStore.updateStateFromHistory(e[r]);break;case"frame":await this.editor.frameToolStore.updateStateFromHistory(e[r]);break;case"focus":await this.editor.focusToolStore.updateStateFromHistory(e[r],this.editor.canvasStore.sizeVector);break;case"brush":await this.editor.brushToolStore.updateStateFromHistory(e[r]);break;case"sprite":await this.editor.spriteStore.updateStateFromHistory(e[r]);break;case"transform":this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(e[r]),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),await this.editor.wait();break;default:break}await this.editor.renderPromise()}}catch(t){console.error(t),this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:t,handleConfirm:()=>{this.applyState({state:e})}})}}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset(),this.isDirtySinceSave=!1}getCurrentSpritesState(){var e,t;return(t=(e=JSON.parse(this.appHistoryManager.getCurrentState()))==null?void 0:e.state)==null?void 0:t.sprite}};x([P],Pp.prototype,"undo",2),x([P],Pp.prototype,"redo",2),x([O],Pp.prototype,"canUndo",1),x([O],Pp.prototype,"canRedo",1);var oJ=(e,t)=>new Promise((r,i)=>{const n=new XMLHttpRequest;n.onload=()=>{const o=new FileReader;o.onloadend=()=>{typeof o.result=="string"&&o.result.substr(0,10)==="data:image"?r(o.result):i(new Error(`The image could not be loaded from ${e}`))},o.onerror=s=>{i(s)},o.readAsDataURL(n.response)},n.open("GET",e),n.responseType="blob",n.withCredentials=t==="use-credentials",n.send()}),lz=(e,t)=>new Promise((r,i)=>{const n=new Image;n.onload=()=>{r(n)},n.onerror=()=>{i(new Error(`Failed to load image with src:${e}`))},n.crossOrigin=t,n.src=e}),sJ=(e,t)=>new Promise((r,i)=>{oJ(e,t).then(n=>{const o=new Image;o.addEventListener("load",()=>{r(o)}),o.src=n}).catch(()=>{lz(e,t).then(n=>r(n)).catch(n=>{i(n)})})}),cz=async({url:e,image:t,crossOrigin:r="anonymous"})=>{try{return t&&t.src&&t.src.substr(0,5)==="data:"||t&&t.src&&t.src.includes(".svg")?t:typeof e=="string"&&e.substr(0,5)==="data:"||typeof e=="string"&&e.includes(".svg")?lz(e,r):sJ(e||t.src,r)}catch(i){throw new Error(i)}},aJ={tool:null,isWebcam:!1,image:"",imageLoadedToEngine:!1},mo=class{constructor(e){this.setImage=async t=>{try{const{crossOrigin:r}=this.editor.configStore.config.engine;typeof t=="string"&&!t.trim()||t===void 0||t===null?this.state.image=null:typeof t=="string"?this.state.image=await cz({url:Au(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:r}):t instanceof HTMLImageElement&&(this.state.image=await cz({image:t,crossOrigin:r})),this.isWebcam&&(this.state.isWebcam=!1)}catch(r){throw new Error(r)}},this.setImageLoadedToEngine=t=>{this.state.imageLoadedToEngine=t},this.newImage=t=>{this.editor.init(t)},this.editor=e,this.state=Ye(aJ)}selectTool(e){var t,r,i;const{licenseChecker:n}=this.editor.configStore;if(this.state.tool!==e&&(n==null?void 0:n.isToolAllowed(e))&&(this.image||e==="library"||e==="customTool")){if(this.editor.configStore.isLayoutAdvanced){const o=(i=(r=(t=this.editor.configStore.state.config.customTool)==null?void 0:t.measurements)==null?void 0:r.advancedUIToolControlBar)==null?void 0:i.width;o&&(e==="customTool"?this.editor.configStore.measurements.advancedUIToolControlBar.width=o:this.state.tool!==e&&this.state.tool==="customTool"&&(this.editor.configStore.measurements.advancedUIToolControlBar.width=this.editor.configStore.initialMeasurements.advancedUIToolControlBar.width))}switch(this.editor.onToolChange(this.state.tool,e),this.state.tool=e,this.editor.configStore.events.onToolChanged(e),e){case"text":this.editor.configStore.config.text.addDefaultTextOnEnter&&this.editor.spriteStore.textToolStore.addOrselect();break;case"textdesign":this.editor.configStore.config.textdesign.addDefaultTextOnEnter&&this.editor.spriteStore.textDesignToolStore.addOrselect();break;case"brush":{this.editor.brushToolStore.initSize();break}case"transform":this.editor.transformToolStore.applyDefaultCrop();break}}}selectWebcam(e){this.state.isWebcam=e}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}get imageLoadedToEngine(){return this.state.imageLoadedToEngine}};x([P],mo.prototype,"selectTool",1),x([P],mo.prototype,"selectWebcam",1),x([P],mo.prototype,"setImage",2),x([P],mo.prototype,"setImageLoadedToEngine",2),x([P],mo.prototype,"newImage",2),x([O],mo.prototype,"webcamLabel",1),x([O],mo.prototype,"tool",1),x([O],mo.prototype,"isWebcam",1),x([O],mo.prototype,"image",1),x([O],mo.prototype,"imageLoadedToEngine",1);var lJ={height:150,width:150},YC={height:0,width:0},uz=class{constructor(e){this.canvasClickDisabled=Ye.box(!1),this.resizeCanvas=(t=null)=>{const r=this.editor.activeStore.tool,i=t==="transform"||!t&&r==="transform",{isLayoutAdvanced:n,measurements:o}=this.editor.configStore,{storedSize:s}=this.editor.canvasStore;let a=0;!n&&i&&(a=o.basicUIToolControlBar.controlsBarHeight*-1,t==="transform"&&r==="brush"&&(a-=o.basicUIToolControlBar.itemsBarHeight+4)),this.setCanvasSize({width:s.width,height:s.height+a})},this.setCanvasSize=t=>{this.state.canvasSize=t},this.editor=e,this.state=Ye(uz.initialState)}setCanvasElement(e){this.canvas=e,this.editor.engineMediator.preview.createPreview(e),this.editor.activeStore.image&&this.editor.init(this.editor.activeStore.image)}saveDimensions({height:e,width:t,render:r}){const{imageLoadedToEngine:i}=this.editor.activeStore;e>YC.height&&t>YC.width&&(this.state.storedSize={width:t,height:e},this.state.canvasSize.height===0&&(this.state.canvasSize={width:t,height:e}),r&&i&&this.editor.resize())}disableCanvasClick(){this.canvasClickDisabled.set(!0)}enableCanvasClick(){this.canvasClickDisabled.set(!1)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get storedSize(){return this.state.storedSize}get sizeVector(){return G.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(e){const t=this.editor.engine.getContainersAtPreviewPoint(e,this.editor.engineMediator.preview.previewTransformWithoutDpr).map(r=>r.getID()).filter(r=>r!==this.editor.engineMediator.image.getImgageContainerId());this.editor.spriteStore.onCanvasClick(t)}},Cn=uz;Cn.initialState={canvasSize:YC,storedSize:lJ},x([P],Cn.prototype,"setCanvasElement",1),x([P],Cn.prototype,"saveDimensions",1),x([P],Cn.prototype,"resizeCanvas",2),x([P],Cn.prototype,"disableCanvasClick",1),x([P],Cn.prototype,"enableCanvasClick",1),x([P],Cn.prototype,"setCanvasSize",2),x([O],Cn.prototype,"isCanvasClickable",1),x([O],Cn.prototype,"canvasSize",1),x([O],Cn.prototype,"storedSize",1),x([O],Cn.prototype,"sizeVector",1),x([O],Cn.prototype,"sizeVectorMagnitude",1);var cJ={type:null,identifier:null,isVisible:!1,error:""},os=class{constructor(e){this.showActionModal=({type:t,identifier:r,error:i,handleConfirm:n,handleDismiss:o})=>{this.resetHandlers(),this.state.isVisible=!0,this.state.identifier=r,this.state.type=t,this.state.error=i||"",this.handleConfirm=n,this.handleDismiss=o},this.hideModal=()=>{this.state.isVisible=!1,this.state.type=null,this.state.error="",this.state.identifier=null,this.resetHandlers()},this.resetHandlers=()=>{this.handleConfirm=null,this.handleDismiss=null},this.configStore=e.configStore,this.state=Ye(cJ)}showInfoModal(e){this.resetHandlers(),this.state.isVisible=!0,this.state.type="info",this.state.identifier=e,this.state.error=""}showTextEditModal(){this.resetHandlers(),this.state.isVisible=!0,this.state.type="textEdit",this.state.identifier="inputText",this.state.error=""}get modalProps(){const{isVisible:e}=this.state,t=this.getModalLocale();if(t){const{bodyLabel:r,headerLabel:i,buttonYes:n,buttonNo:o}=t;return{headerLabel:i,bodyLabel:r,confirmLabel:n,dismissLabel:o,isVisible:e,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){const{isLayoutAdvanced:e,measurements:{basicCanvasOffset:t,advancedUIToolControlBar:r,advancedUIToolbar:i},isOrderDefault:n}=this.configStore,o=(r.width+i.width)*(n?1:-1);return e?{x:o/2,y:0}:{x:0,y:-t}}getModalLocale(){const{identifier:e,error:t,type:r}=this.state,{locale:i}=this.configStore;if(!r||!e||r==="textEdit")return null;if(r&&e&&i[`${r}Modals`]&&i[`${r}Modals`][e]){const n=i[`${r}Modals`][e];let{body:o}=n;o&&typeof t=="object"?Object.keys(t).forEach(a=>{o=o.replace(`\${${a}}`,t[a])}):o&&(o=o.replace("${error}",t));let s=n.heading;if(r==="error"||r==="warning"){const a={error:i.common.error,warning:i.common.warning};s=`${r==="error"?a.error:a.warning}${n.headingDelimiter||""} ${n.header||""}`}return{bodyLabel:o,headerLabel:s,buttonYes:n.buttonYes,buttonNo:n.buttonNo}}return null}};x([P],os.prototype,"showActionModal",2),x([P],os.prototype,"showInfoModal",1),x([P],os.prototype,"showTextEditModal",1),x([P],os.prototype,"hideModal",2),x([O],os.prototype,"modalProps",1),x([O],os.prototype,"isVisible",1),x([O],os.prototype,"type",1),x([O],os.prototype,"identifier",1),x([O],os.prototype,"positionOffset",1);var di=class{constructor(e){this.defaultScale=1,this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map(t=>t/100),this.state={position:{x:0,y:0},scaleIndex:-1},this.offset={x:0,y:0},this.in=()=>{this.canZoomIn&&(this.state.scaleIndex+=1,this.scaleRender())},this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;const{maxOffsetX:t,maxOffsetY:r}=this.checkOffset({x:0,y:0});this.state.scaleIndex===this.defaultIndex&&(this.offset.y=r),this.state.scaleIndex===this.defaultIndex&&(this.offset.x=t),this.savePosition(),this.scaleRender()}},this.setOffset=t=>{const{canDragX:r,canDragY:i}=this.checkOffset(t);r&&(this.offset.x=t.x),i&&(this.offset.y=t.y),this.scaleRender()},this.editor=e}setInitialTransform(e=0){const t=ql(),{scaleImageToFit:r}=this.editor.configStore.config,{transform:i}=this.editor.engineMediator.preview;Vo(()=>{const n=Math.abs(e||i.scale.x);this.setDefaultScale(r?n:Math.min(1*t,n)),this.setPosition(i.position)})}resetScale(){this.state.scaleIndex=-1}resetPosition(){const{width:e,height:t}=this.editor.canvasStore.canvas;this.setPosition({x:e/2,y:t/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(e){this.state.position.x=e.x,this.state.position.y=e.y}savePosition(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}}setDefaultScale(e){if(this.defaultScale!==1){const r=this.SCALE_LEVELS.findIndex(i=>i===this.defaultScale);r!==-1&&(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,r),...this.SCALE_LEVELS.slice(r+1)])}const t=this.SCALE_LEVELS.findIndex(r=>r===e);if(t!==-1)this.state.scaleIndex=t;else{const r=this.SCALE_LEVELS.findIndex((i,n)=>(n===0||this.SCALE_LEVELS[n-1]<e)&&e<i);r!==-1?(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,r),e,...this.SCALE_LEVELS.slice(r)],this.state.scaleIndex=r):(this.SCALE_LEVELS=[...this.SCALE_LEVELS,e],this.state.scaleIndex=this.SCALE_LEVELS.length-1)}this.defaultScale=e}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(e){const t=ql(),{scaledSize:r}=this,{previewSize:i}=this,n=this.editor.engineMediator.preview.initialTransform.position,o=this.getPositionWithOffset(e),s=(r.width-i.width)*t/2,a=(r.height-i.height)*t/2,l=n.x-o.x,c=n.y-o.y,h=Math.abs(l),f=Math.abs(c),d=l>0,p=c>0,v=h-s,g=f-a;return{canDragX:v<0,canDragY:g<0,maxOffsetX:d?-v:v,maxOffsetY:p?-g:g}}calculateScale(e=0,t=this.previewSize,r=this.defaultScale){const{width:i,height:n}=t,o=new G({x:i,y:n}),s=new G(Math.abs(o.x*Math.cos(e))+Math.abs(o.y*Math.sin(e)),Math.abs(o.x*Math.sin(e))+Math.abs(o.y*Math.cos(e))),a=o.subtract(s).divide(2).multiply(r).abs;return a.y>a.x?a.y*2/o.y+r:a.x*2/o.x+r}get defaultIndex(){return this.SCALE_LEVELS.findIndex(e=>e===this.defaultScale)}getPositionWithOffset(e=this.offset){const{position:t}=this;return{x:t.x-e.x,y:t.y-e.y}}scaleRender(e=!1){const t=this.editor.scale.getPositionWithOffset(),r=e?this.defaultScale:this.scale,i={x:r,y:r};this.editor.engineMediator.preview.container.setScale(i),this.editor.engineMediator.preview.container.setPosition(t),this.editor.engineMediator.preview.savePreviewTransform({scale:i,position:t,rotation:0}),e||this.editor.render()}get scale(){const e=this.state.scaleIndex;return e!==-1?this.SCALE_LEVELS[e]:this.defaultScale}get zoomLevel(){const e=ql();return(this.scale/e*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){const{restrictZoomOutToDefault:e}=this.editor.configStore.config;return e?this.state.scaleIndex>this.defaultIndex:this.state.scaleIndex!==0}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){const e=this.state.scaleIndex,t=e!==-1?this.SCALE_LEVELS[e]:this.defaultScale,{previewSize:r}=this;return{width:r.width*t/this.defaultScale,height:r.height*t/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}};x([Ye],di.prototype,"state",2),x([P],di.prototype,"in",2),x([P],di.prototype,"out",2),x([P],di.prototype,"setInitialTransform",1),x([P],di.prototype,"resetScale",1),x([P],di.prototype,"resetPosition",1),x([P],di.prototype,"setPosition",1),x([P],di.prototype,"savePosition",1),x([P],di.prototype,"setDefaultScale",1),x([P],di.prototype,"setScaleToDefault",1),x([O],di.prototype,"scale",1),x([O],di.prototype,"zoomLevel",1),x([O],di.prototype,"canDrag",1),x([O],di.prototype,"canZoomOut",1),x([O],di.prototype,"canZoomIn",1),x([O],di.prototype,"position",1),x([O],di.prototype,"scaledSize",1);var hz=[[0,0],[0,1],[1,0],[1,1]],uJ=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]],qs=class{constructor(e,t,r="center",i=!0,n=!1){this.considerRotation=!0,this.considerFlip=!0,this.store=t,this.m=r==="center"?qs.movePivotTo([.5,.5]):hz,this.considerRotation=i,this.considerFlip=n,this.configStore=e.configStore}static getFlippedEdgeIndex(e,t,r){return uJ[(t?1:0)+(r?2:0)][e]}static movePivotTo(e){return hz.map(t=>[t[0]-e[0],t[1]-e[1]])}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return this.considerFlip?this.store.isFlippedHorizontal:!1}get flipVertically(){return this.considerFlip?this.store.isFlippedVertical:!1}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(e,t,r){const i=qs.getFlippedEdgeIndex(e,t,r),n=this.m[i][0]*this.size.width,o=this.m[i][1]*this.size.height;return{width:n,height:o}}get leftTop(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(0,t,r);return qs.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftBottom(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(1,t,r);return qs.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightTop(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(2,t,r);return qs.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightBottom(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(3,t,r);return qs.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftBottomHandle(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(1,t,r);return i.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,qs.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightBottomHandle(){const{position:e,flipHorizontally:t,flipVertically:r}=this,i=this.handleOrigin(3,t,r);return i.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,qs.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftMid(){const e=new G(this.leftTop),t=new G(this.leftBottom);return e.add(t).divide(2)}get rightMid(){const e=new G(this.rightTop),t=new G(this.rightBottom);return e.add(t).divide(2)}},Zr=qs;Zr.coordinatesWithRotation=({width:e,height:t},r,i,n,o,s)=>{let a=e*Math.cos(r)-t*Math.sin(r)+s.x,l=e*Math.sin(r)+t*Math.cos(r)+s.y;return i&&(a=o.x*2-a),n&&(l=o.y*2-l),new G({x:a,y:l}).rounded},x([O],Zr.prototype,"position",1),x([O],Zr.prototype,"size",1),x([O],Zr.prototype,"rotation",1),x([O],Zr.prototype,"flipHorizontally",1),x([O],Zr.prototype,"flipVertically",1),x([O],Zr.prototype,"flipCenter",1),x([O],Zr.prototype,"leftTop",1),x([O],Zr.prototype,"leftBottom",1),x([O],Zr.prototype,"rightTop",1),x([O],Zr.prototype,"rightBottom",1),x([O],Zr.prototype,"leftBottomHandle",1),x([O],Zr.prototype,"rightBottomHandle",1),x([O],Zr.prototype,"leftMid",1),x([O],Zr.prototype,"rightMid",1);var wt=class{constructor(e,t){this.minCropSize=0,this.state=jZ,this.configStore=e.configStore,this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=t}changeIdentifier(e){this.state.identifier=e,this.state.cropState.get(e)||this.state.cropState.set(e,L({},ns))}changeRatio(e){const t=this.state.cropState.get(this.identifier);t&&this.state.cropState.set(this.identifier,ge(L({},t),{ratio:e}))}changeSize(e){const t=this.state.cropState.get(this.identifier);t&&(e.width&&e.width>0&&(t.size.width=Math.round(e.width)),e.height&&e.height>0&&(t.size.height=Math.round(e.height)),this.state.cropState.set(this.identifier,t))}changeHeight(e){const t=this.state.cropState.get(this.identifier);t&&e&&(t.size.height=Math.round(e),this.state.cropState.set(this.identifier,t))}changeWidth(e){const t=this.state.cropState.get(this.identifier);t&&e&&(t.size.width=Math.round(e),this.state.cropState.set(this.identifier,t))}changePositionX(e,t){const r=this.state.cropState.get(this.identifier);return r&&e<=t-this.minCropSize&&e>=0?(r.position.x=Math.round(e),this.state.cropState.set(this.identifier,r),!0):!1}changePositionY(e,t){const r=this.state.cropState.get(this.identifier);return r&&e<=t-this.minCropSize&&e>=0?(r.position.y=Math.round(e),this.state.cropState.set(this.identifier,r),!0):!1}changePosition(e,t){const r=this.state.cropState.get(this.identifier);return r&&e.x<=t.width-this.minCropSize&&e.x>=0&&e.y<=t.height-this.minCropSize&&e.y>=0?(r.position.x=Math.round(e.x),r.position.y=Math.round(e.y),this.state.cropState.set(this.identifier,r),!0):!1}changeLockResolution(e){const t=this.state.cropState.get(this.identifier);t&&(t.lockResolution=e!==void 0?e:!t.lockResolution,this.state.cropState.set(this.identifier,t))}changeForceDimensions(e){const t=this.state.cropState.get(this.identifier);t&&(t.forceDimensions=e,this.state.cropState.set(this.identifier,t))}setRotation(e){this.state.rotationInDegrees=e}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=!1,this.state.flipVertically=!1}updateFlip({flipHorizontally:e,flipVertically:t}){this.state.flipHorizontally=e,this.state.flipVertically=t}setOutputRotation(e){this.state.outputRotation=e}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){const{width:e,height:t}=this.defaults.maxCropMaskSize;return new G(e/2,t/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:ns.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:ns.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:ns.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:ns.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:ns.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:ns.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:ns.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:ns.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:ns.forceDimensions}get selectedCrop(){return this.state.cropState.get(this.identifier)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}};x([Ye],wt.prototype,"state",2),x([P],wt.prototype,"changeIdentifier",1),x([P],wt.prototype,"changeRatio",1),x([P],wt.prototype,"changeSize",1),x([P],wt.prototype,"changeHeight",1),x([P],wt.prototype,"changeWidth",1),x([P],wt.prototype,"changePositionX",1),x([P],wt.prototype,"changePositionY",1),x([P],wt.prototype,"changePosition",1),x([P],wt.prototype,"changeLockResolution",1),x([P],wt.prototype,"changeForceDimensions",1),x([P],wt.prototype,"setRotation",1),x([P],wt.prototype,"resetRotation",1),x([P],wt.prototype,"resetOutputRotation",1),x([P],wt.prototype,"resetFlip",1),x([P],wt.prototype,"updateFlip",1),x([P],wt.prototype,"setOutputRotation",1),x([P],wt.prototype,"flipHorizontally",1),x([P],wt.prototype,"flipVertically",1),x([O],wt.prototype,"flipCenter",1),x([O],wt.prototype,"isFlippedHorizontal",1),x([O],wt.prototype,"isFlippedVertical",1),x([O],wt.prototype,"identifier",1),x([O],wt.prototype,"height",1),x([O],wt.prototype,"width",1),x([O],wt.prototype,"position",1),x([O],wt.prototype,"ratio",1),x([O],wt.prototype,"size",1),x([O],wt.prototype,"x",1),x([O],wt.prototype,"y",1),x([O],wt.prototype,"lockResolution",1),x([O],wt.prototype,"forceDimensions",1),x([O],wt.prototype,"selectedCrop",1),x([O],wt.prototype,"rotationInDegrees",1),x([O],wt.prototype,"outputRotation",1);var hJ=class{constructor(e){this.transforms={output:JSON.stringify(Xr.IDENTITY),preview:JSON.stringify(Xr.IDENTITY)},this.setFrameOpacity=t=>{this.frameOpacity=t,this.entered&&this.editor.frameToolStore.identifier!=="identity"&&this.editor.frameToolStore.changeOpacity(0)},this.setOverlayOpacity=t=>{this.overlayOpacity=t,this.entered&&this.editor.overlayToolStore.identifier!=="identity"&&this.editor.overlayToolStore.changeOpacity(0)},this.editor=e,this.overlayOpacity=0,this.frameOpacity=0,this.entered=!1}onLeave(){const{flipHorizontally:e,flipVertically:t,rotation:r,outputRotation:i}=this.transformToolStore.rotateFlipState;this.entered=!1,this.editor.overlayToolStore.identifier!=="identity"&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),this.editor.frameToolStore.identifier!=="identity"&&this.editor.frameToolStore.changeOpacity(this.frameOpacity),this.editor.engine.setWatermarkOpacity(1);const n=this.editor.previewToWorld(new G(this.transformToolStore.leftTopRespectFlip).add(new G(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new G(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),o=this.engineMediator.preview.container,{outputContainer:s}=this.editor;s.setResolution(it(this.transformToolStore.localOutputImageSize)),s.setData({flipVertically:t,flipHorizontally:e});const a=o.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();let l=1;if(this.transformToolStore.lockResolution){const{cropMaskSize:p,defaultImageSize:v}=this.transformToolStore,g=this.transformToolStore.maxCropMaskSize;l={height:p.height*v.height/g.height,width:p.width*v.width/g.width}.width/this.transformToolStore.localOutputImageSize.width}const c=Math.abs(a.x),h=l/(c/this.transformToolStore.defaultScale),f={x:h,y:h},d=-(r-i);s.setTransform({scale:f,position:n,rotation:d}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()}resetTransforms(e){this.transforms=e}onEnter(){this.entered=!0,this.editor.overlayToolStore.identifier!=="identity"&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),this.editor.frameToolStore.identifier!=="identity"&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.engine.setWatermarkOpacity(0),this.editor.scale.setScaleToDefault();const e=this.engineMediator.preview.container,{outputContainer:t}=this.editor,r=JSON.parse(this.transforms.preview);t.setResolution(it(this.transformToolStore.defaultImageSize)),e.setTransform(r),t.setTransform(JSON.parse(this.transforms.output));const i=r.scale;t.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:i.y<0,flipHorizontally:i.x<0}),this.engineMediator.preview.savePreviewTransform(r);const{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(e,t=!0){const{width:r,height:i}=this.editor.engineMediator.image.container.getBounds(),n=EV(e)?{width:i,height:r}:{width:r,height:i};this.editor.outputContainer.rotate(e,n),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());const{rotation:o}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(o),Vo(()=>{this.editor.scale.setInitialTransform();const s=this.getScaleWithFlip(o);this.engineMediator.preview.container.setScale(s),this.transformToolStore.setCropDefaults(!0),this.transformToolStore.updateCropMask()}),t&&this.editor.render()}applyPreviewTransform(){const{rotation:e,flipHorizontally:t,flipVertically:r}=this.transformToolStore.rotateFlipState,i=this.editor.scale.getPositionWithOffset(),n=this.getScaleWithFlip();let o=e;t&&(o=Ev(o)),r&&(o=Ev(o));const s={position:i,rotation:o,scale:n};this.engineMediator.preview.savePreviewTransform(s),this.engineMediator.preview.container.setTransform(s)}getScaleWithFlip(e=this.transformToolStore.rotateFlipState.rotation){const{flipHorizontally:t,flipVertically:r}=this.transformToolStore.rotateFlipState,i=t?-1:1,n=r?-1:1,o=this.editor.scale.calculateScale(e);return{x:o*i,y:o*n}}saveTransforms(){const e=JSON.stringify(this.engineMediator.preview.container.getTransform()),t=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:e,output:t}}saveTransformsBasedOnFlip(){const e=this.engineMediator.preview.container.getTransform(),{scale:t}=e,{flipVertically:r,flipHorizontally:i}=this.editor.outputContainer.getData(),n=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify(ge(L({},e),{scale:{x:i?-t.x:t.x,y:r?-t.y:t.y}})),output:n}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}},dJ=class{constructor(e){this.store=e,this.initialState={},this.state={}}init(){this.initialState=this.store.serializableState,this.state=L({},this.initialState)}trackChanges(){this.state=this.store.serializableState}isEqual(){return(0,Nn.default)(this.state,this.initialState)}hasChanges(){return!this.isEqual()}},dz="identity",Ch=class{constructor(e){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1},this.defaultAngle=0,this.dragMode=Ye.box(!1),this.minCropSize=0,this.transformHistory=new dJ(this),this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1},this.localOutputSize={width:0,height:0},this.checkIfTransformThumbnailExits=s=>{if(!s.trim())return!1;let a=this.editor.configStore.config.assetBaseUrl;const{length:l}=a;if(a[l-1]!=="/"&&(a+="/"),`${a}transform`===s)return!1;const c=new Image;try{return c.src=s,!0}catch{return!1}},this.reset=()=>{this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.resetCrop(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.editor.outputContainer.getRotation()!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop(),this.editor.render(),this.trackChanges()},this.changeLocalOutputSize=s=>{this.localOutputSize.height=Math.round(s.height),this.localOutputSize.width=Math.round(s.width),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(s.width),height:Math.round(s.height)})},this.changeDefaultScale=s=>{this.defaults.scale=s},this.changeLocalOutputHeight=s=>{this.localOutputSize.height=Math.round(s)},this.changeLocalOutputWidth=s=>{this.localOutputSize.width=Math.round(s)},this.changeLockResolution=()=>{this.transformStore.changeLockResolution(),this.trackChanges()},this.rotateClockwise=()=>{const s=this.editor.outputContainer.getRotation(),a=this.isFlippedVertical?hF:dF;this.rotateOutputContainer(a(s))},this.rotateAntiClockwise=()=>{const s=this.editor.outputContainer.getRotation(),a=this.isFlippedVertical?dF:hF;this.rotateOutputContainer(a(s))},this.flipHorizontally=(s=!0)=>{this.transformStore.flipHorizontally(),this.editor.spriteStore.reverseTextHorizontally(this.transformStore.isFlippedHorizontal),this.transformRender(s),s&&this.trackChanges()},this.flipVertically=(s=!0)=>{this.transformStore.flipVertically(),this.editor.spriteStore.reverseTextVertically(this.transformStore.isFlippedVertical),this.transformRender(s),s&&this.trackChanges()},this.applyDefaultCrop=(s=!1)=>{if(this.identifier==="identity"){const{identifier:a}=this.getMatchingItem();this.changeIdentifier(a,s)}},this.updateCropMask=()=>{this.changeIdentifier(this.identifier,!0)},this.onLeftTop=({x:s,y:a})=>{const l=this.getRatio(),c=this.rightBottom,{minCropMaskSize:h,maxCropMaskSize:f}=this,d=Math.min(Math.max(0,s),c.x-h.width),p=Math.min(Math.max(0,a),c.y-h.height),v=c.x-d,g=c.y-p,m={width:Math.max(this.minCropSize,Math.min(v,f.width-d)),height:Math.max(this.minCropSize,Math.min(g,f.height-p))};if(l==="*")this.changePosition({x:d,y:p})&&this.changeCropAndOutputSize(m);else{const y=this.proportionalSize(l,m),_=new G(c).subtract({x:y.width,y:y.height});this.changePosition(_)&&this.changeCropAndOutputSize(y,l)}},this.onLeftBottom=({x:s,y:a})=>{const l=this.getRatio(),c=this.rightTop,{minCropMaskSize:h,maxCropMaskSize:f}=this,d=Math.min(Math.max(0,s),c.x-h.width),p=Math.max(0,a,c.y+h.height),v=c.x-d,g=p-c.y,m={width:Math.max(1,Math.min(v,f.width-d)),height:Math.max(1,Math.min(g,f.height-c.y))};if(l==="*")this.changePositionX(d)&&this.changeCropAndOutputSize(m);else{const y=this.proportionalSize(l,m);this.changePositionX(c.x-y.width)&&this.changeCropAndOutputSize(y,l)}},this.onRightTop=({x:s,y:a})=>{const l=this.getRatio(),c=this.leftBottom,{minCropMaskSize:h,maxCropMaskSize:f}=this,d=Math.max(0,s,c.x+h.width),p=Math.min(Math.max(0,a),c.y-h.height),v=d-c.x,g=c.y-p,m={width:Math.max(1,Math.min(v,f.width-c.x)),height:Math.max(1,Math.min(g,f.height-p))};if(l==="*")this.changePositionY(p)&&this.changeCropAndOutputSize(m);else{const y=this.proportionalSize(l,m);this.changePositionY(c.y-y.height)&&this.changeCropAndOutputSize(y,l)}},this.onRightBottom=({x:s,y:a})=>{const l=this.getRatio(),c=this.leftTop,{minCropMaskSize:h,maxCropMaskSize:f}=this,d=Math.max(0,s,c.x+h.width),p=Math.max(0,a,c.y+h.height),v=d-c.x,g=p-c.y,m={width:Math.max(1,Math.min(v,f.width-c.x)),height:Math.max(1,Math.min(g,f.height-c.y))};if(l==="*")this.changeCropAndOutputSize(m);else{const y=this.proportionalSize(l,m);this.changeCropAndOutputSize(y,l)}},this.onPixelWidth=s=>{const a=JSON.stringify(it(this.localOutputSize)),l=this.entityManager.items.find(h=>h.identifier===this.identifier),c=this.defaults.imageSize;if(l&&l.ratio){let h=s,f=this.localOutputSize.height,{ratio:d}=l;if(d==="*"&&this.lockResolution&&(d=this.localOutputSize.width/this.localOutputSize.height),d==="*"&&!this.lockResolution)h=Math.max(Math.min(s,c.width),this.minCropSize),this.changeLocalOutputWidth(h),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(h),height:Math.round(f)});else{const p=Ch.placeCropMask(d,c);h=Math.max(Math.min(h,p.width),this.minCropSize),f=h/d,this.changeLocalOutputSize({height:f,width:h})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(a)),Math.round(h)}return s},this.onPixelHeight=s=>{const a=JSON.stringify(it(this.localOutputSize)),l=this.entityManager.items.find(h=>h.identifier===this.identifier),c=this.defaults.imageSize;if(l&&l.ratio){let h=s,f=this.localOutputSize.width,{ratio:d}=l;if(d==="*"&&this.lockResolution&&(d=this.localOutputSize.width/this.localOutputSize.height),d==="*"&&!this.lockResolution)h=Math.max(Math.min(s,c.height),this.minCropSize),this.changeLocalOutputHeight(h),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(f),height:Math.round(h)});else{const p=Ch.placeCropMask(d,c);h=Math.max(Math.min(h,p.height),this.minCropSize),f=h*d,this.changeLocalOutputSize({height:h,width:f})}return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(a)),Math.round(h)}return s},this.setFrameOpacity=s=>{this.transformations.setFrameOpacity(s)},this.setOverlayOpacity=s=>{this.transformations.setOverlayOpacity(s)},this.closestRatioReducer=s=>(a,l)=>l===null||Math.abs(s-a.ratio)<Math.abs(s-l.ratio)?-1:1,this.closestDimensionsReducer=s=>(a,l)=>{if(l===null)return-1;const c=Math.abs(a.dimensions.x/a.dimensions.y),h=Math.abs(l.dimensions.x/l.dimensions.y);return c===h?a.dimensions.x*a.dimensions.y>l.dimensions.x*l.dimensions.y?-1:1:Math.abs(s-c)<Math.abs(s-h)?-1:1},this.getMatchingItem=()=>{const s=this.entityManager.items.findIndex(p=>p.identifier==="imgly_transform_common_custom");if(s!==-1)return this.entityManager.items[s];const a=this.entityManager.items.findIndex(p=>p.ratio==="*");if(a!==-1)return this.entityManager.items[a];const l=it(this.editor.outputContainer.getResolution()),c=Math.abs(l.width/l.height),[h]=this.entityManager.items.filter(p=>p.ratio&&typeof p.ratio=="number").sort(this.closestRatioReducer(c)),[f]=this.entityManager.items.filter(p=>p.dimensions&&!p.ratio).sort(this.closestDimensionsReducer(c));if(!h||!f||!h.ratio&&!f.dimensions)return this.entityManager.items[0];if(!f||!f.dimensions)return h;if(!h||!h.ratio)return f;const d=Math.abs(f.dimensions.x/f.dimensions.y);return d===h.ratio||Math.abs(c-h.ratio)<Math.abs(c-d)?h:f},this.getTransform=s=>{let a=this.entityManager.items.find(l=>l.identifier===s);return a||(a=this.getMatchingItem()),a},this.editor=e,this.selectedCategory=dz,this.transformStore=new wt(e,this.defaults),this.transformations=new hJ(e);const o=this.config,{enableRotation:t,enableFlip:r}=o,i=To(o,["enableRotation","enableFlip"]),n=this.editor.assetProvider.getAssets("transform");this.entityManager=new Xn(n,ge(L({},i),{locale:L(L({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new Zr(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new Zr(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(e){return e*Math.PI/180}static placeCropMask(e,t){if(t.height*e>t.width)return{height:t.width/e,width:t.width,yChanged:!0};const r=t.height*e;return{height:t.height,width:r,yChanged:!1}}changeIdentifier(e,t=!1){this.transformStore.changeIdentifier(e);const r=this.getCropMask(e,this.defaults.imageSize);r&&(this.transformStore.changeRatio(r.ratio),this.changeLocalOutputSize(r),this.updatePreviewSizeWRTImageSize(),r.yChanged!==void 0&&this.updateInitialCropMaskPosition(r.yChanged),r.dimensions&&this.changeLocalOutputSize({width:r.dimensions.x,height:r.dimensions.y}),t&&this.trackChanges())}setDragMode(e){this.dragMode.set(e)}getCropMask(e,t){const r=this.getTransform(e);if(r){const{ratio:i,forceDimensions:n,lockDimensions:o,dimensions:s=null}=r;if(n&&this.transformStore.changeForceDimensions(n),o&&this.transformStore.changeLockResolution(o),i)switch(i){case"*":return this.changePosition({x:0,y:0}),ge(L({},t),{yChanged:void 0,ratio:"*",dimensions:s});default:return ge(L({},Ch.placeCropMask(r.ratio,t)),{ratio:r.ratio,dimensions:s})}else{const{x:a,y:l}=r.dimensions;return ge(L({},Ch.placeCropMask(a/l,t)),{ratio:null,dimensions:s})}}return null}setCropDefaults(e=!1){const t=this.editor.outputContainer.getResolution();this.setDefaultImageSize(t);const r=this.editor.getPreviewSize(),{position:i}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(r),this.setDefaultCropPosition({x:i.x-r.width/2,y:i.y-r.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),e||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)}setDefaultImageSize(e){this.defaults.imageSize=L({},it(e)),this.lockResolution||(this.localOutputSize=L({},it(e)))}setMaxCropSize(e){this.defaults.maxCropMaskSize.height=e.height,this.defaults.maxCropMaskSize.width=e.width}setDefaultCropPosition(e){this.defaults.cropMaskPosition.x=e.x,this.defaults.cropMaskPosition.y=e.y}resetCrop(){this.state.cropState.clear(),this.transformStore.changeIdentifier("identity")}toggleCategorySelection(e){this.selectedCategory=this.selectedCategory===e?dz:e}pureReset(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();const e=JSON.stringify(this.engineMediator.preview.container.getTransform()),t=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:e,output:t})}changePosition(e){return this.transformStore.changePosition(e,this.defaults.maxCropMaskSize)}changePositionX(e){return this.transformStore.changePositionX(e,this.defaults.maxCropMaskSize.width)}changePositionY(e){return this.transformStore.changePositionY(e,this.defaults.maxCropMaskSize.height)}changeCropAndOutputSize({width:e,height:t},r,i=!0){if(this.transformStore.changeWidth(e),this.transformStore.changeHeight(t),!this.lockResolution){const{height:n,width:o}=this.defaults.maxCropMaskSize,{height:s,width:a}=this.defaults.imageSize;let l=s/n*t;const c=a/o*e;r&&(l=c/r),i&&this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(c),height:Math.round(l)}),t>=this.minCropSize&&this.changeLocalOutputHeight(l),e>=this.minCropSize&&this.changeLocalOutputWidth(c)}}transformRender(e=!0){this.transformations.applyPreviewTransform(),e&&this.editor.render()}addSnapshot(){this.transformHistory.isEqual()||this.editor.addSnapshot({transform:this.serializableState},"edit","Transform edit")}trackChanges(){this.transformHistory.trackChanges()}get serializableState(){const{flipHorizontally:e,flipVertically:t}=this.rotateFlipState,{identifier:r,rotationInDegrees:i}=this,n=zu(i),o=uF(Cw(this.editor.engineMediator.output.container.getRotation())+i),{start:s,end:a}=this.convertUIToOperationOptions(n,o);return{flipHorizontally:e,flipVertically:t,rotation:n,start:s,end:a,identifier:r,outputRotation:o}}getStartEndForOperation(e){const{leftTop:t,rightBottom:r,maxCropMaskSize:i}=this,n=t.y,o=t.x,s=r.x,a=r.y;switch(e){case 270:return{leftTop:{x:i.height-a,y:o},rightBottom:{x:i.height-n,y:s}};case 180:return{leftTop:{x:i.width-s,y:i.height-a},rightBottom:{x:i.width-o,y:i.height-n}};case 90:return{leftTop:{x:n,y:i.width-s},rightBottom:{x:a,y:i.width-o}};default:return{leftTop:{x:o,y:n},rightBottom:{x:s,y:a}}}}getStartEndForUI(e,t,r){const{maxCropMaskSize:i}=this,n=t.y,o=t.x,s=r.x,a=r.y;switch(e){case 90:return{leftTop:{x:i.width-a,y:o},rightBottom:{x:i.width-n,y:s}};case 180:return{leftTop:{x:i.width-s,y:i.height-a},rightBottom:{x:i.width-o,y:i.height-n}};case 270:return{leftTop:{x:n,y:i.height-s},rightBottom:{x:a,y:i.height-o}};default:return{leftTop:{x:o,y:n},rightBottom:{x:s,y:a}}}}convertOperationOptionsToUI({start:e,end:t,rotation:r,outputRotation:i}){const n=i===90||i===270,o=n?G.fromSize(this.defaultImageSize).swapped:G.fromSize(this.defaultImageSize),s=Math.cos(r),a=Math.sin(r),l=this.calculateScale(r),c=new G(Math.min(e.x,t.x),Math.min(e.y,t.y)),f=new G(Math.max(e.x,t.x),Math.max(e.y,t.y)).subtract(c).divide(2),p=c.add(f).multiply(o).subtract(o.multiply(.5)),v=new G(p.x*s-p.y*a,p.x*a+p.y*s).multiply(l),m=o.multiply(.5).add(v).divide(o),y=m.subtract(f.multiply(l)),_=m.add(f.multiply(l)),b=n?G.fromSize(this.maxCropMaskSize).swapped:G.fromSize(this.maxCropMaskSize),w=y.multiply(b),S=_.multiply(b),{leftTop:C,rightBottom:D}=this.getStartEndForUI(i,w,S);return{start:new G(C),end:new G(D)}}convertUIToOperationOptions(e,t){const r=t===90||t===270,i=r?G.fromSize(this.defaultImageSize).swapped:G.fromSize(this.defaultImageSize),n=r?G.fromSize(this.maxCropMaskSize).swapped:G.fromSize(this.maxCropMaskSize),o=Math.cos(-e),s=Math.sin(-e),a=this.calculateScale(e,r),{leftTop:l,rightBottom:c}=this.getStartEndForOperation(t),h=new G(l).divide(n),d=new G(c).divide(n).subtract(h).divide(2),v=h.add(d).multiply(i).subtract(i.multiply(.5)),g=new G(v.x*o-v.y*s,v.x*s+v.y*o).divide(a),y=i.multiply(.5).add(g).divide(i),_=y.subtract(d.divide(a)),b=y.add(d.divide(a));return{start:_,end:b}}calculateScale(e,t=!1){const r=t?G.fromSize(this.defaultImageSize).swapped:G.fromSize(this.defaultImageSize),i=new G(Math.abs(r.x*Math.cos(e))+Math.abs(r.y*Math.sin(e)),Math.abs(r.x*Math.sin(e))+Math.abs(r.y*Math.cos(e))),n=r.subtract(i.clone()).divide(2).abs;return n.y>n.x?n.y*2/r.y+1:n.x*2/r.x+1}updateStateFromSerialization(e){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),this.editor.outputContainer.getRotation()!==0&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();const t=Math.round(Cw(e.rotation));if(this.transformStore.setRotation(t>180?t-360:t),this.transformations.rotateOutputContainer(zu(uF(e.outputRotation||0))),e.identifier&&this.transformStore.changeIdentifier(e.identifier),e.start&&e.end){(e.end.x===0||e.end.y===0)&&(e.end.x=1,e.end.y=1);const{start:r,end:i}=this.convertOperationOptionsToUI({start:new G(e.start),end:new G(e.end),rotation:e.rotation,outputRotation:e.outputRotation});this.changePositionX(r.x),this.changePositionY(r.y);const n=i.x-r.x,o=i.y-r.y;this.transformStore.changeSize({width:n,height:o});const{maxCropMaskSize:s,imageSize:a}=this.defaults,l={height:o*a.height/s.height,width:n*a.width/s.width};this.changeLocalOutputSize(l)}e.flipHorizontally&&this.flipHorizontally(!1),e.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip()}setDefaultAngle(e){this.defaultAngle=e}updateCanvasControls(e){const t=it(this.cropMaskPosition),r=it(this.cropMaskSize),i=it(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:i.height*r.height/e.height,width:i.width*r.width/e.width},void 0,!1),this.changePosition({y:i.height*t.y/e.height,x:i.width*t.x/e.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter(),this.transformHistory.init()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(e){this.transformStore.setRotation(e),this.transformRender()}async rotateOutputContainer(e,t=!0){this.setDragMode(!0),this.transformations.rotateOutputContainer(e,t),await this.editor.wait(),this.setDragMode(!1)}applyInitialCrop(){const{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,!1)}clickableCanvas(e){this.editor.clickableCanvas(e)}proportionalSize(e,t,r=this.defaults.maxCropMaskSize,i=this.minCropSize){let n=t.height*e,{height:o}=t;return(n>r.width||n<i||o<i)&&(n=t.width,o=t.width/e),{width:Math.round(n),height:Math.round(o)}}checkAndAddSnapshot(e){const t=it(this.localOutputSize);(e.width!==t.width||e.height!==t.height)&&this.trackChanges()}updateInitialCropMaskPosition(e){const{cropMaskSize:t}=this,r=this.defaults.maxCropMaskSize;e?this.changePosition({x:0,y:Math.abs(r.height-t.height)/2}):this.changePosition({x:Math.abs(r.width-t.width)/2,y:0})}updatePreviewSizeWRTImageSize(){const e=it(this.localOutputSize),t=it(this.defaults.imageSize),r=it(this.defaults.maxCropMaskSize),i={height:r.height*e.height/t.height,width:r.width*e.width/t.width};this.transformStore.changeSize(i)}getScaleWithFlip(e=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(e)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){const{flipHorizontally:e,flipVertically:t,rotationInDegrees:r,outputRotation:i}=this.transformStore.state;return{flipHorizontally:e,flipVertically:t,rotation:Ch.inRadians(r),outputRotation:i}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config.transform}get locale(){return this.editor.configStore.locale.transform}get isOptionSelected(){return this.identifier!=="identity"}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){const e=this.getRatio();return e==="*"||e===1?{width:this.minCropSize,height:this.minCropSize}:e>1?{width:this.minCropSize*e,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*e}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){const e=this.getTransform(this.identifier);if(e){if(Object.prototype.hasOwnProperty.call(e,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:e.ratio;const{x:t,y:r}=e.dimensions;return t/r}return"*"}},Re=Ch;x([Ye],Re.prototype,"selectedCategory",2),x([Ye],Re.prototype,"defaults",2),x([Ye],Re.prototype,"localOutputSize",2),x([P],Re.prototype,"changeIdentifier",1),x([P],Re.prototype,"setDragMode",1),x([P],Re.prototype,"setCropDefaults",1),x([P],Re.prototype,"setDefaultImageSize",1),x([P],Re.prototype,"setMaxCropSize",1),x([P],Re.prototype,"setDefaultCropPosition",1),x([P],Re.prototype,"resetCrop",1),x([P],Re.prototype,"toggleCategorySelection",1),x([P],Re.prototype,"pureReset",1),x([P],Re.prototype,"reset",2),x([P],Re.prototype,"changePosition",1),x([P],Re.prototype,"changePositionX",1),x([P],Re.prototype,"changePositionY",1),x([P],Re.prototype,"changeCropAndOutputSize",1),x([P],Re.prototype,"onLeave",1),x([P],Re.prototype,"onEnter",1),x([P],Re.prototype,"changeLocalOutputSize",2),x([P],Re.prototype,"changeDefaultScale",2),x([P],Re.prototype,"changeLocalOutputHeight",2),x([P],Re.prototype,"changeLocalOutputWidth",2),x([P],Re.prototype,"changeLockResolution",2),x([P],Re.prototype,"setRotation",1),x([P],Re.prototype,"rotateClockwise",2),x([P],Re.prototype,"rotateAntiClockwise",2),x([P],Re.prototype,"rotateOutputContainer",1),x([P],Re.prototype,"flipHorizontally",2),x([P],Re.prototype,"flipVertically",2),x([P],Re.prototype,"applyDefaultCrop",2),x([P],Re.prototype,"applyInitialCrop",1),x([P],Re.prototype,"updateCropMask",2),x([P],Re.prototype,"clickableCanvas",1),x([P],Re.prototype,"onLeftTop",2),x([P],Re.prototype,"onLeftBottom",2),x([P],Re.prototype,"onRightTop",2),x([P],Re.prototype,"onRightBottom",2),x([P],Re.prototype,"proportionalSize",1),x([P],Re.prototype,"onPixelWidth",2),x([P],Re.prototype,"onPixelHeight",2),x([P],Re.prototype,"updateInitialCropMaskPosition",1),x([P],Re.prototype,"updatePreviewSizeWRTImageSize",1),x([O],Re.prototype,"cropState",1),x([O],Re.prototype,"identifier",1),x([O],Re.prototype,"ratio",1),x([O],Re.prototype,"height",1),x([O],Re.prototype,"width",1),x([O],Re.prototype,"localOutputImageSize",1),x([O],Re.prototype,"localOutputHeight",1),x([O],Re.prototype,"localOutputWidth",1),x([O],Re.prototype,"lockResolution",1),x([O],Re.prototype,"forceDimensions",1),x([O],Re.prototype,"rotationInDegrees",1),x([O],Re.prototype,"outputRotation",1),x([O],Re.prototype,"isDragMode",1),x([O],Re.prototype,"rotateFlipState",1),x([O],Re.prototype,"selectedCategoryIdentifier",1),x([O],Re.prototype,"categories",1),x([O],Re.prototype,"items",1),x([O],Re.prototype,"config",1),x([O],Re.prototype,"locale",1),x([O],Re.prototype,"isOptionSelected",1),x([O],Re.prototype,"leftTop",1),x([O],Re.prototype,"leftBottom",1),x([O],Re.prototype,"rightTop",1),x([O],Re.prototype,"rightBottom",1),x([O],Re.prototype,"isFlippedHorizontal",1),x([O],Re.prototype,"isFlippedVertical",1),x([O],Re.prototype,"leftTopRespectFlip",1),x([O],Re.prototype,"leftBottomRespectFlip",1),x([O],Re.prototype,"rightTopRespectFlip",1),x([O],Re.prototype,"rightBottomRespectFlip",1),x([O],Re.prototype,"cropMaskPosition",1),x([O],Re.prototype,"cropMaskSize",1),x([O],Re.prototype,"state",1),x([O],Re.prototype,"defaultImageSize",1),x([O],Re.prototype,"maxCropMaskSize",1),x([O],Re.prototype,"minCropMaskSize",1),x([O],Re.prototype,"defaultCropMaskPosition",1),x([O],Re.prototype,"defaultScale",1);var fJ=ni(Hh()),pJ={},QC="none",mJ={position:{x:0,y:0},rotation:0},R_=class{constructor(e){this.state=Ye.map(pJ),this.selectedId=Ye.box(QC),this.editMode=Ye.box(!1),this.dragMode=Ye.box(!1),this.minLength=0,this.counter=0,this.addSticker=async(t,r=!0)=>{await this.addStickerAsync(t,r)},this.addStickerAsync=async({spriteId:t,state:r,transform:i},n=!0)=>new Promise((o,s)=>{i=this.getInitialTransform(i);const{identifier:a}=r,l=this.editor.orderHelper.addSprite(a);this.editor.engine.addStickerFromAssets(a,this.editor.engineMediator.image.container,l).then(async c=>{t&&c.setData({id:t});const h=c.getID();this.container[h]=c,this.editor.orderHelper.renameSprite(a,h);const f=this.getSize(h);f.width*=c.getScale().x,f.height*=c.getScale().y,c.setPivot(.5,.5);let d;if(i.scale)d=i.scale;else if(i.size)d={x:i.size.width/f.width,y:i.size.height/f.height};else{const m=this.editor.shortestOutputSide*.4,y=R_.magnitude(m)/R_.sizeMagnitude(c.getSizeInWorldSpace());d={x:y,y}}const{flipHorizontally:p,flipVertically:v}=this.editor.outputContainer.getData();c.setFlipHorizontally(p),c.setFlipVertically(v),c.setTransform({position:i.position,scale:d,rotation:i.rotation}),r.flipHorizontally!==void 0&&c.setFlipHorizontally(r.flipHorizontally!==p),r.flipVertically!==void 0&&c.setFlipVertically(r.flipVertically!==v),this.setContainerProperties(h,L({},r));const g=c.getData();this.setInitialSpriteState(h,"sticker"),this.stickerToolStore.setState(h,ge(L({},g),{identifier:a})),await this.editor.renderPromise(),n&&(this.setId(h),this.addSnapshot("add",this.stickerLocale.add)),o()}).catch(c=>{console.error(c),s()})}),this.addText=async(t,r=!0)=>{await this.addTextAsync(t,r)},this.addTextAsync=({spriteId:t,state:r,transform:i},n=!0)=>new Promise((o,s)=>{i=this.getInitialTransform(i);const a=this.editor.orderHelper.addSprite(r.identifier),l=this.editor.shortestOutputSide,c={fontIdentifier:r.identifier,text:r.text,width:r.width||l*.6,fontSize:r.fontSize||l*.1,lineHeight:r.lineHeight,alignment:r.alignment,textColor:r.textColor,backgroundColor:r.backgroundColor};this.editor.engine.addTextWithFontLoading(c,this.editor.engineMediator.image.container,a).then(async h=>{t&&h.setData({id:t});const f=h.getID();this.container[f]=h,this.editor.orderHelper.renameSprite(r.identifier,f);const{flipHorizontally:d,flipVertically:p}=this.editor.outputContainer.getData();h.setFlipHorizontally(d),h.setFlipVertically(p),h.setPivot(.5,.5),h.setPosition(i.position),h.setRotation(i.rotation),this.setInitialSpriteState(f,"text");const v=h.getData();this.textToolStore.setState(f,L({},v)),await this.editor.renderPromise(),n&&(this.setId(f),this.addSnapshot("add",this.textLocale.add)),o()}).catch(h=>{console.error(h),s()})}),this.addTextDesign=async(t,r=!0,i=!1)=>{await this.addTextDesignAsync(t,r,i)},this.addTextDesignAsync=({spriteId:t,state:r,transform:i},n=!0,o=!1)=>new Promise((s,a)=>{i=this.getInitialTransform(i);const l=this.editor.orderHelper.addSprite(r.identifier),c=this.editor.shortestOutputSide,h={width:r.width||c*.6,text:r.text,color:r.color,inverted:r.isInverted,seed:r.seed,padding:r.padding};this.editor.engine.addTextDesignAsync(r.identifier,h,this.editor.engineMediator.image.container,l).then(async f=>{t&&(o&&(this.pureRemoveSprite(t),this.textDesignToolStore.state.delete(t)),f.setData({id:t}));const d=f.getID();this.container[d]=f,this.editor.orderHelper.renameSprite(r.identifier,d);const{flipHorizontally:p,flipVertically:v}=this.editor.outputContainer.getData();f.setFlipHorizontally(p),f.setFlipVertically(v),f.setPivot(.5,.5),f.setPosition(i.position),f.setRotation(i.rotation),this.setInitialSpriteState(d,"textdesign");const g=f.getData();this.textDesignToolStore.setState(d,ge(L({},g),{identifier:r.identifier})),await this.editor.renderPromise(),n&&(this.setId(d),this.addSnapshot("add",this.textDesignLocale.add)),s()}).catch(f=>{console.error(f),a()})}),this.spriteLocalTransform=()=>({position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}),this.clickableCanvas=t=>{this.editor.clickableCanvas(t)},this.setContainerProperties=(t,r,i=!1)=>{this.container[t].setData(r),i&&this.updatePositionAndSize(),this.editor.render()},this.setContainerPosition=(t,r)=>{this.container[t].setPosition(r)},this.pureRemoveSprite=t=>(this.editor.engine.removeContainer(this.container[t]),this.container[t].getIndexInParent()===-1?(delete this.container[t],this.state.delete(t),this.editor.orderHelper.removeSprite(t),!0):!1),this.deleteSprite=(t=this.id)=>{const r=this.state.get(t);r.tool==="sticker"?this.stickerToolStore.delete():r.tool==="text"?this.textToolStore.delete():r.tool==="textdesign"&&this.textDesignToolStore.delete()},this.removeSprite=t=>{this.pureRemoveSprite(t)&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())},this.addSnapshot=(t,r)=>{this.editor.addSnapshot(void 0,t,r)},this.spriteSnapshot=t=>{this.addSnapshot("edit",this.historyLocale[t])},this.addNewText=async(t,r)=>{if(this.textToolStore.doesTextAssetExist(r.identifier))await this.addTextAsync(ge(L({},t),{state:r}),!1);else throw new Pu(r.identifier)},this.addNewTextDesign=async(t,r)=>{if(this.textDesignToolStore.doesTextDesignAssetExist(r.identifier))await this.addTextDesignAsync(ge(L({},t),{state:r}),!1);else throw new Pu(r.identifier)},this.addNewSticker=async(t,r)=>{if(this.stickerToolStore.doesStickerAssetExist(r.identifier))await this.addStickerAsync(ge(L({},t),{state:r}),!1);else throw new Pu(r.identifier)},this.getSpriteHistoryState=()=>{const t=it(this.textToolStore.state),r=it(this.textDesignToolStore.state),i={common:it(this.state),sticker:it(this.stickerToolStore.state),text:t,textdesign:r,spriteIdList:Object.keys(this.container)};return Object.keys(i.common).forEach(n=>{i.common[n].size=this.container[n].getSizeInWorldSpace(),i.common[n].position=this.container[n].getPosition(),i.common[n].order=this.container[n].getIndexInParent()}),i},this.updateStateFromSerialization=async(t,r,i)=>{if(r&&r.length)try{const n=await Promise.all(r.map(async({svg:o,raster:s,name:a,identifier:l})=>{const c=o!=null&&o.data?"image/svg+xml":s.type,h=`data:${c};base64,${(o==null?void 0:o.data)||s.data}`,f=await WC(h,150);return{stickerURI:h,thumbnailURI:f,name:a,type:c,identifier:l}}));await this.stickerToolStore.addCustomStickerAsset(n)}catch{this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}await this.updateStateByHistoryState(t.spriteIdList,t,i)},this.updateStateFromHistory=async t=>{Object.keys(this.container).filter(n=>t.spriteIdList.indexOf(n)===-1).forEach(n=>{this.pureRemoveSprite(n)}),await this.updateStateByHistoryState(t.spriteIdList,t,0)},this.serializableState=async()=>{const t=this.editor.spriteStore.getSpriteHistoryState();Object.keys(t.common).forEach(i=>{const{flipHorizontally:n,flipVertically:o}=this.editor.outputContainer.getData(),s=this.editor.outputContainer.getRotation(),a=o!==n?-t.common[i].rotation:t.common[i].rotation;t.common[i].rotation=o!==n?a+s:a-s});const r=await Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map(async({identifier:i,type:n,stickerURI:o,name:s})=>{const a={identifier:i,name:s,raster:{data:"",type:"image/jpeg"}};if(n==="image/svg+xml"&&(a.svg={data:o.split(",")[1]}),n==="image/jpeg"||n==="image/png"||n==="image/gif")[,a.raster.data]=o.split(","),a.raster.type=n;else{const l=await WC(o);[,a.raster.data]=l.split(","),a.raster.type="image/png"}return a}));return{sprite:t,customStickers:r}},this.updateCanvasControls=()=>{Object.keys(this.container).forEach(t=>{this.updatePositionAndSize(t,!0);const r=this.state.get(t);if(r){if(r.tool==="text"){const i=this.getContainerProperties(t);this.textToolStore.changeSize(t,i)}else if(r.tool==="textdesign"){const i=this.getContainerProperties(t);this.textToolStore.changeWidth(i.width)}}})},this.setEditMode=t=>{this.currentSprite&&["text","textdesign"].indexOf(this.tool)!==-1&&(t?this.editor.modalStore.showTextEditModal():this.editor.modalStore.hideModal(),this.editMode.set(t))},this.setDragMode=t=>{this.dragMode.set(t)},this.setPosition=t=>{const r=this.currentSprite,i=this.container[this.id];if(r&&i){i.setPosition(this.editor.previewToWorld(t));const{position:n}=this.getSizePositionFromContainer();r.position.x=n.x,r.position.y=n.y,this.state.set(this.id,r),this.editor.render()}},this.setSize=t=>{const r=this.currentSprite;r&&(r.size.width=t.width,r.size.height=t.height,this.state.set(this.id,r))},this.setRotation=t=>{const r=this.currentSprite;if(r){const{flipHorizontally:i,flipVertically:n}=this.editor.outputContainer.getData(),o=this.editor.outputContainer.getRotation(),s=Dw({rotation:t,outputRotation:o,flipHorizontally:i,flipVertically:n});this.container[this.id].setRotation(s),r.rotation=this.container[this.id].getRotation(),this.state.set(this.id,r),this.editor.render()}},this.onCanvasClick=t=>{this.isEditMode||this.selectHighestOrderSprite(t)},this.select=t=>{const r=this.state.get(t);r&&(this.editor.activeStore.tool!==r.tool&&this.editor.activeStore.selectTool(r.tool),this.setId(t))},this.selectLast=()=>{const t=this.editor.orderHelper.getLastSpriteId();t&&this.select(t)},this.selectNext=()=>{if(this.currentSprite){const r=this.container[this.id].getIndexInParent();if(r){const i=Object.keys(this.container).find(n=>this.container[n].getIndexInParent()===r-1);i&&this.select(i)}}},this.deselect=()=>{this.setId(QC)},this.bringToFront=async t=>{const r=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(r),this.spriteSnapshot("order"),await this.editor.render(),this.counter+=1},this.flipHorizontally=t=>{const r=this.state.get(t),i=this.container[t];i.setFlipHorizontally(!i.getFlipHorizontally()),r.flipHorizontally=i.getFlipHorizontally(),this.spriteSnapshot("flip"),this.state.set(t,r),this.editor.render()},this.pureReset=()=>{this.deselect(),Array.from(this.state.keys()).forEach(t=>{this.pureRemoveSprite(t)}),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()},this.selectHighestOrderSprite=t=>{const r=this.editor.brushToolStore.containerId();if(t=t.filter(o=>o!==r),t.length<1){this.deselect();return}let i="",n=0;t.forEach(o=>{const s=this.container[o],a=s&&s.getIndexInParent()||0;a>=n&&(n=a,i=o)}),this.select(i)},this.onCornerDrag=({x:t,y:r})=>{if(this.currentSprite){const i=new G(this.currentSprite.position),n=new G(t,r),o=n.subtract(i).magnitude,s=this.getSize(),a=o*2/R_.sizeMagnitude(s);if(o>this.minLength)if(this.isSpriteSticker)if(this.stickerToolStore.resizeMode!=="unrestricted")this.setStickerSize({width:s.width*a,height:s.height*a});else{const l=this.rotationWRTOutputRotation,c=n.subtract(i),h=Math.cos(l),f=Math.sin(l),d=Math.max(Math.abs(c.x*h*2+c.y*f*2),this.minLength),p=Math.max(Math.abs(c.x*-f*2+c.y*h*2),this.minLength);this.setStickerSize({width:d,height:p})}else this.isSpriteText?this.setTextSize(s.width*a):this.isSpriteTextDesign&&this.setTextDesignScale(a);this.editor.render()}},this.onWidthDrag=({x:t,y:r})=>{const i=new G(this.currentSprite.position),o=new G(t,r).subtract(i).magnitude,s=this.editor.previewToWorld(2*o);if(s>this.minLength&&(this.setContainerProperties(this.id,{width:s},!0),this.isSpriteText)){const a=this.getContainerProperties(this.id);this.textToolStore.changeWidth(a.width)}},this.onPaddingDrag=({x:t,y:r})=>{if(this.isSpriteTextDesign){let i=this.getContainerProperties(this.id);const n=new G(this.currentSprite.position),s=new G(t,r).subtract(n).magnitude,a=Math.max(this.editor.previewToWorld(s)-i.width/2,0);this.setContainerProperties(this.id,{padding:a},!0),this.isSpriteTextDesign&&(i=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(i.padding))}},this.correctTextFlip=()=>{const{flipHorizontally:t,flipVertically:r}=this.editor.outputContainer.getData();Object.values(this.container).forEach(i=>{(i.type==="text"||i.type==="text-design")&&(i.setFlipHorizontally(t),i.setFlipVertically(r))})},this.reverseTextHorizontally=t=>{Object.values(this.container).forEach(r=>{(r.type==="text"||r.type==="text-design")&&r.setFlipHorizontally(t)})},this.reverseTextVertically=t=>{Object.values(this.container).forEach(r=>{(r.type==="text"||r.type==="text-design")&&r.setFlipVertically(t)})},this.getOutputProperties=()=>this.editor.outputContainer.getData(),this.getContainerProperties=t=>this.container[t].getData(),this.getContainerTransform=t=>this.container[t].getTransform(),this.getDuplicateContainerTransform=t=>{const r=this.container[t].getTransform(),i=this.editor.shortestOutputSide*.1,n=new G(r.position).add(new G(i,i));return ge(L({},r),{position:n})},this.getDuplicateContainerFlip=t=>{const r=this.container[t].getFlipHorizontally(),i=this.container[t].getFlipVertically();return{flipHorizontally:r,flipVertically:i}},this.updatePositionAndSize=(t=this.id,r=!1)=>{const{position:i,size:n}=this.getSizePositionFromContainer(t),o=this.state.get(t);if(o){if(o.position.x=i.x,o.position.y=i.y,o.size.width=n.width,o.size.height=n.height,r){const s=this.container[t].getRotation();this.container[t].setRotation(s),o.rotation=this.container[t].getRotation()}this.state.set(t,o)}},this.getInitialTransform=t=>{const r=this.editor.outputToWorld(mJ.position);return t?L({position:r},t):{rotation:this.editor.outputContainer.getRotation(),position:r}},this.setInitialSpriteState=(t,r)=>{const i=this.container[t],{position:n,size:o}=this.getSizePositionFromContainer(t),s=i.getRotation(),a=r!=="sticker"?!1:i.getFlipHorizontally(),l=r!=="sticker"?!1:i.getFlipVertically();this.state.set(t,{tool:r,position:n,rotation:s,size:o,flipHorizontally:a,flipVertically:l})},this.setStickerSize=t=>{const r=this.container[this.id];r.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));const i=this.currentSprite;i&&(i.size=this.editor.worldSizeToPreview(r.getSizeInWorldSpace()),this.state.set(this.id,i))},this.setTextSize=t=>{let r=this.getContainerProperties(this.id);const i={width:this.editor.previewToWorld(t)},n=i.width/r.width,o={fontSize:Math.round(r.fontSize*n)},s=this.isSpriteText?L(L({},i),o):i;i.width>this.minLength&&o.fontSize&&(this.setContainerProperties(this.id,s,!0),r=this.getContainerProperties(this.id),this.textToolStore.changeFontSize(r.fontSize,!0),this.textToolStore.changeWidth(r.width))},this.setTextDesignScale=t=>{let r=this.getContainerProperties(this.id);const i=r.width*t;if(i>this.minLength){this.setContainerProperties(this.id,{width:i},!0);const{width:n}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(n),r=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(r.padding)}},this.getSizePositionFromContainer=(t=this.id)=>{const r=this.container[t];if(r){const i=this.editor.worldToPreview(r.getPosition()),n=this.editor.worldSizeToPreview(r.getSizeInWorldSpace());return{position:i,size:n}}return{position:{x:0,y:0},size:{height:1,width:1}}},this.getSize=(t=this.id)=>{const r=this.container[t];return r?this.editor.worldSizeToPreview(r.getSizeInWorldSpace()):{width:0,height:0}},this.editor=e,this.container={},this.stickerToolStore=new Et(e),this.textToolStore=new nt(e),this.textDesignToolStore=new Ft(e),this.rect=new Zr(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(e,t){return new G(e,t||e).magnitude}static sizeMagnitude(e){return Math.sqrt(e.width*e.width+e.height*e.height)}async updateStateByHistoryState(e,t,r){await(0,fJ.default)(e,async i=>{!t.common[i]||(this.state.get(i)?this.updateExistingItem(i,t):await this.addNewItem(i,t))}),e.forEach(i=>{const n=t.common[i],o=this.container[i];!n||!o||o.setIndexInParent(n.order+r)}),this.counter+=1}async addNewItem(e,t){const r=t.common[e],i=r.size?{width:this.editor.worldToPreview(r.size.width),height:this.editor.worldToPreview(r.size.height)}:void 0,{flipHorizontally:n,flipVertically:o}=this.editor.outputContainer.getData(),s=this.editor.outputContainer.getRotation(),a=o!==n?r.rotation-s:r.rotation+s,l=o!==n?-a:a,c={spriteId:e,transform:{size:i,position:new G(r.position),rotation:l}};if(t.text[e]){const h=t.text[e],f=this.textToolStore.validFontWithConfig(h.identifier);h.identifier=f==null?void 0:f.identifier,await this.addNewText(c,h)}t.textdesign[e]&&await this.addNewTextDesign(c,t.textdesign[e]),t.sticker[e]&&await this.addNewSticker(c,ge(L({},t.sticker[e]),{flipHorizontally:r.flipHorizontally,flipVertically:r.flipVertically}))}updateExistingItem(e,t){const r=t.common[e],i=this.state.get(e);this.state.set(e,i);const n=this.container[e];if(n.setPosition(new G(r.position)),n.setRotation(r.rotation),i.rotation=n.getRotation(),r.flipHorizontally!==void 0&&n.setFlipHorizontally(r.flipHorizontally),r.flipVertically!==void 0&&n.setFlipVertically(r.flipVertically),t.text[e]){const o=t.text[e];this.textToolStore.updateStateFromHistory(e,ge(L({},o),{fontIdentifier:o.identifier}))}if(t.textdesign[e]){const o=t.textdesign[e];this.textDesignToolStore.updateStateFromHistory(e,ge(L({},o),{inverted:o.isInverted}))}t.sticker[e]&&(n.setSizeInWorldSpace(r.size),this.stickerToolStore.updateStateFromHistory(e,t.sticker[e])),this.updatePositionAndSize(e)}get currentSprite(){if(this.isSpriteSelected)return this.state.get(this.id)}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==QC}get position(){if(this.currentSprite)return this.currentSprite.position}get tool(){if(this.currentSprite)return this.currentSprite.tool}get size(){if(this.currentSprite)return this.currentSprite.size}get rotation(){if(this.currentSprite)return this.currentSprite.rotation}get rotationWRTOutputRotation(){if(this.currentSprite){const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData(),r=this.editor.outputContainer.getRotation();return Dw({rotation:this.currentSprite.rotation-r,flipHorizontally:e,flipVertically:t})}}get flipHorizontal(){if(this.currentSprite)return this.currentSprite.flipHorizontally}get isSpriteSticker(){return this.tool==="sticker"}get isSpriteText(){return this.tool==="text"}get isSpriteTextDesign(){return this.tool==="textdesign"}get isOnTop(){return this.counter,this.editor.engine.isSpriteTop(this.id)}get spritePosition(){if(this.currentSprite){const{x:e,y:t}=this.currentSprite.position,{height:r,width:i}=this.currentSprite.size;return{x:Math.round(e-i/2),y:Math.round(t-r/2)}}}get currentRect(){if(this.currentSprite)return this.rect}get leftTopPosition(){if(this.currentSprite)return this.rect.leftTop}get leftBottomPosition(){if(this.currentSprite)return this.rect.leftBottom}get leftMidPosition(){if(this.currentSprite)return this.rect.leftMid}get leftMidPadPosition(){if(this.currentSprite){const{leftMid:e}=this.rect;return{x:e.x-this.editor.worldToPreview(this.padding),y:e.y}}}get rightTopPosition(){if(this.currentSprite)return this.rect.rightTop}get rightBottomPosition(){if(this.currentSprite)return this.rect.rightBottom}get rightMidPosition(){if(this.currentSprite)return this.rect.rightMid}get rightMidPadPosition(){if(this.currentSprite){const{rightMid:e}=this.rect;return{x:e.x+this.editor.worldToPreview(this.padding),y:e.y}}}get leftBottomHandlePosition(){if(this.currentSprite)return this.rect.leftBottomHandle}get rightBottomHandlePosition(){if(this.currentSprite)return this.rect.rightBottomHandle}get historyLocale(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale}get stickerLocale(){return this.editor.configStore.locale.sticker.history}get textLocale(){return this.editor.configStore.locale.text.history}get textDesignLocale(){return this.editor.configStore.locale.textdesign.history}setId(e){this.selectedId.set(e)}},$e=R_;x([Ye],$e.prototype,"counter",2),x([P],$e.prototype,"addSticker",2),x([P],$e.prototype,"addStickerAsync",2),x([P],$e.prototype,"addText",2),x([P],$e.prototype,"addTextAsync",2),x([P],$e.prototype,"addTextDesign",2),x([P],$e.prototype,"addTextDesignAsync",2),x([P],$e.prototype,"clickableCanvas",2),x([P],$e.prototype,"setContainerProperties",2),x([P],$e.prototype,"setContainerPosition",2),x([P],$e.prototype,"pureRemoveSprite",2),x([P],$e.prototype,"deleteSprite",2),x([P],$e.prototype,"removeSprite",2),x([P],$e.prototype,"addSnapshot",2),x([P],$e.prototype,"addNewText",2),x([P],$e.prototype,"addNewTextDesign",2),x([P],$e.prototype,"addNewSticker",2),x([P],$e.prototype,"updateStateFromSerialization",2),x([P],$e.prototype,"updateStateFromHistory",2),x([P],$e.prototype,"updateCanvasControls",2),x([P],$e.prototype,"setEditMode",2),x([P],$e.prototype,"setDragMode",2),x([P],$e.prototype,"setPosition",2),x([P],$e.prototype,"setSize",2),x([P],$e.prototype,"setRotation",2),x([P],$e.prototype,"onCanvasClick",2),x([P],$e.prototype,"select",2),x([P],$e.prototype,"selectLast",2),x([P],$e.prototype,"selectNext",2),x([P],$e.prototype,"deselect",2),x([P],$e.prototype,"bringToFront",2),x([P],$e.prototype,"flipHorizontally",2),x([P],$e.prototype,"pureReset",2),x([P],$e.prototype,"onCornerDrag",2),x([P],$e.prototype,"onWidthDrag",2),x([P],$e.prototype,"onPaddingDrag",2),x([P],$e.prototype,"correctTextFlip",2),x([P],$e.prototype,"reverseTextHorizontally",2),x([P],$e.prototype,"reverseTextVertically",2),x([O],$e.prototype,"currentSprite",1),x([O],$e.prototype,"padding",1),x([O],$e.prototype,"isEditMode",1),x([O],$e.prototype,"isDragMode",1),x([O],$e.prototype,"id",1),x([O],$e.prototype,"isSpriteSelected",1),x([O],$e.prototype,"position",1),x([O],$e.prototype,"tool",1),x([O],$e.prototype,"size",1),x([O],$e.prototype,"rotation",1),x([O],$e.prototype,"rotationWRTOutputRotation",1),x([O],$e.prototype,"flipHorizontal",1),x([O],$e.prototype,"isSpriteSticker",1),x([O],$e.prototype,"isSpriteText",1),x([O],$e.prototype,"isSpriteTextDesign",1),x([O],$e.prototype,"isOnTop",1),x([O],$e.prototype,"spritePosition",1),x([O],$e.prototype,"currentRect",1),x([O],$e.prototype,"leftTopPosition",1),x([O],$e.prototype,"leftBottomPosition",1),x([O],$e.prototype,"leftMidPosition",1),x([O],$e.prototype,"leftMidPadPosition",1),x([O],$e.prototype,"rightTopPosition",1),x([O],$e.prototype,"rightBottomPosition",1),x([O],$e.prototype,"rightMidPosition",1),x([O],$e.prototype,"rightMidPadPosition",1),x([O],$e.prototype,"leftBottomHandlePosition",1),x([O],$e.prototype,"rightBottomHandlePosition",1),x([O],$e.prototype,"historyLocale",1),x([O],$e.prototype,"stickerLocale",1),x([O],$e.prototype,"textLocale",1),x([O],$e.prototype,"textDesignLocale",1);var gJ={categories:[],query:""},go=class{constructor(e){this.initProvider=t=>{t&&(this.libraryProvider=new t)},this.fetchImages=async(t="")=>{if(this.libraryProvider){let r=null;try{const i=await this.libraryProvider.getCategories(),n=await this.libraryProvider.searchImages(t);r=i.map((o,s)=>{const a=n.filter(l=>l.category===o.name);return{identifier:o.name,name:o.name,thumbnailURI:o.coverImageUrl,items:a.map(l=>({name:l.title||`image${s}`,identifier:`${o.name}-${l.title}-${s}`,thumbnailURI:l.thumbUrl,rawUrl:l.rawUrl,authorName:l.authorName,authorAvatar:l.authorAvatar}))}}).filter(o=>o.items.length)}catch(i){console.log(i)}Vo(()=>{this.state.query=t,this.state.categories=r})}},this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory!==t?t:""},this.getRawUrl=t=>{const r=this.items.findIndex(i=>i.identifier===t);return r!==-1?this.items[r].rawUrl:t},this.configStore=e.configStore,this.state=Ye(gJ),this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map(e=>e.items).reduce((e,t)=>[...e,...t],[])}get query(){return this.state.query}get config(){return this.configStore.config.library}get locale(){return this.configStore.locale.library}};x([Ye],go.prototype,"selectedCategory",2),x([P],go.prototype,"initProvider",2),x([P],go.prototype,"fetchImages",2),x([P],go.prototype,"toggleCategorySelection",2),x([O],go.prototype,"selectedCategoryIdentifier",1),x([O],go.prototype,"categories",1),x([O],go.prototype,"items",1),x([O],go.prototype,"query",1),x([O],go.prototype,"config",1),x([O],go.prototype,"locale",1);var fz=/^data:image\/(.+?);base64,/,vJ=e=>fz.test(e),yJ=e=>e.match(/^data:([^;]+)/)[1],_J=e=>e.replace(fz,""),pz=class{constructor(e){this.applySerialization=async(t,r,i,n)=>{this.editor.resetToolStates();const o=this.editor.activeStore.tool==="transform";o||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.reset(),o||this.editor.transformToolStore.onLeave();const s="Unexpected error occured",a=r.deserializeImage(t);if(a.image&&a.image.data){const h=a.image.data;await this.editor.setImage(h),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.reset(),this.editor.activeStore.setImage(h),await this.editor.engineMediator.image.addImageToContainer(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms()}const l=r.deserializeTransformation(t);if(!l){n(s);return}await this.applyStateOnUI(l);const c=r.deserialize(t);if(!c){n(s);return}await this.applyStateOnUI(c),this.editor.historyStore.addInitialSnapshot(),o&&this.editor.transformToolStore.onEnter(),await this.editor.render(),this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),i()},this.editor=e}serialize({image:e}={image:!1}){const t=this.editor.activeStore.tool==="transform",{displaySerializationModal:r}=this.editor.configStore.config;return r&&this.editor.modalStore.showInfoModal("saving"),new Promise((i,n)=>{Promise.resolve().then(function(){return wB}).then(async({Serializer:o})=>{try{t&&this.editor.transformToolStore.onLeave(),await this.editor.wait(),this.editor.transformToolStore.applyDefaultCrop(!1);const{originalImage:s}=this.editor.imageContainer.getData(),a=this.editor.engineMediator.output.container.getResolution(),l={width:s.width,height:s.height},c=new o(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,a,l,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer()),h={adjustment:it(this.editor.adjustmentsToolStore.state),filter:it(this.editor.filterToolStore.state),focus:it(this.editor.focusToolStore.serializableState),overlay:it(this.editor.overlayToolStore.state),frame:it(this.editor.frameToolStore.state),brush:this.editor.brushToolStore.strokes||{strokes:[]}},{sprite:f,customStickers:d}=await this.editor.spriteStore.serializableState();f.spriteIdList=f.spriteIdList.sort((g,m)=>{const y=f.common[g].order,_=f.common[m].order;return y-_}),h.sprite=f,h.customStickers=d,h.transform=this.editor.transformToolStore.serializableState;let p,v;if(e){const g=pz.getDataURL(s);v=yJ(g),p=_J(g)}r&&this.editor.modalStore.hideModal(),i(c.serialise(h,p,v)),t&&this.editor.transformToolStore.onEnter()}catch(s){r&&this.editor.modalStore.hideModal(),n(s)}})})}deserialize(e){return this.editor.modalStore.showInfoModal("loading"),new Promise((t,r)=>{try{Promise.resolve().then(function(){return wB}).then(({Deserializers:i})=>{const n=e.version.match(/[0-3].[0-8].[0-9]/i);let o=null;n&&i["3.9.0"]?o=new i["3.9.0"](this.editor):i[e.version]?o=new i[e.version](this.editor):o=new i["3.12.0"](this.editor),n?(this.editor.modalStore.hideModal(),this.editor.modalStore.showActionModal({type:"warning",identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(e,o,t,r)})):this.applySerialization(e,o,t,r)})}catch(i){this.editor.modalStore.identifier==="loading"&&this.editor.modalStore.hideModal(),r(i)}})}static getDataURL(e){if(e instanceof HTMLImageElement){const{src:n}=e;if(vJ(n))return n}if(e instanceof HTMLCanvasElement)return e.toDataURL("image/png");const t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0);const i=t.toDataURL("image/png");return Nr(t),i}async applyStateOnUI(e){const t=this.editor.activeStore.tool==="transform";try{if(e.transform&&(t||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(e.transform),await this.editor.wait(),this.editor.transformToolStore.onLeave(),t||(this.editor.transformToolStore.onEnter(),await this.editor.wait(),this.editor.transformToolStore.onLeave())),e.filter&&await this.editor.filterToolStore.updateStateFromSerialization(e.filter),e.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(e.adjustment),e.focus&&await this.editor.focusToolStore.updateStateFromSerialization(e.focus),e.overlay&&await this.editor.overlayToolStore.updateStateFromSerialization(e.overlay),e.sprite){let r=Object.keys(e).length-1;e.customStickers&&(r-=1),e.sprite.spriteIdList=e.sprite.spriteIdList.sort((i,n)=>{const o=e.sprite.common[i].order,s=e.sprite.common[n].order;return o-s}),await this.editor.spriteStore.updateStateFromSerialization(e.sprite,e.customStickers,Math.max(0,r))}e.brush&&this.editor.brushToolStore.updateStateFromHistory(e.brush),e.frame&&await this.editor.frameToolStore.updateStateFromSerialization(e.frame),this.editor.outputContainer.updateChildrenContainers()}catch(r){r.name==="AssetNotFoundError"?console.error(r):(console.error(r),this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:r.message,handleConfirm:()=>{this.applyStateOnUI(e)}}))}}},bJ=e=>{const t=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),n=new Uint8Array(i);for(let o=0;o<t.length;o+=1)n[o]=t.charCodeAt(o);return new Blob([i],{type:r})},mz=bJ,gz=e=>e.split(",")[0].split(":")[1].split(";")[0],xJ=e=>typeof e=="string"?gz(e):e.src.includes(".svg")?"image/svg+xml":e.src?gz(e.src):"image/jpeg",KC=ni(Hh()),vz=class{static isImageElement(e){return e instanceof HTMLImageElement}constructor({license:e,assetProvider:t,crossOrigin:r}){this.crossOrigin=r,this.engine=new CF({license:e,crossOrigin:r,assetProvider:t,downscaleOptions:{maxDimensions:{width:100,height:100}}})}getAllFilterPreviewThumbnails(e){return new Promise((t,r)=>{const i=[],n=[];e.forEach(o=>{o.isDuotone?i.push(o.identifier):n.push(o.identifier)}),this.getAllDuotonePreview(i).then(o=>{this.getAllLutPreview(n).then(s=>{t(Object.assign(o,s))}).catch(s=>{r(s)})}).catch(o=>{r(o)})})}async getAllDuotonePreview(e){const t={};if(!e.length)return t;const r=await this.engine.addDuoToneFilterFromAssets(e[0],this.container);return await(0,KC.default)(e,async i=>{const n=this.engine.assetProvider.getDuotoneFilterAsset(i);r.filterOperation.getFilter().set({intensity:.5,lightColor:et.Color.fromHex(n.lightColor),darkColor:et.Color.fromHex(n.darkColor)});const s=await this.engine.export("data-url","image/png");t[i]=s},{concurrency:1}),this.engine.removeEffect(r),t}async loadLutAssets(e){const t={};return await(0,KC.default)(e,async r=>{t[r]=await this.getImageElement(this.engine.assetProvider.getAssetSource("filter",r))}),t}async getAllLutPreview(e){const t={};if(!e.length)return t;const r=await this.loadLutAssets(e),i=await this.engine.addLUTFilterFromAssets(e[0],this.container);return await(0,KC.default)(e,async n=>{const o=this.engine.assetProvider.getLUTFilterAsset(n),s=i.filterOperation.getFilter(),a={horizontalTileCount:o.horizontalTileCount||5,verticalTileCount:o.verticalTileCount||5,image:r[n]};s.set(ge(L({},a),{intensity:o.defaultIntensity||1})),i.setProperties({intensity:1}),s._lutPrimitive.set(a);const l=await this.engine.export("data-url","image/png");t[n]=l},{concurrency:1}),this.engine.removeEffect(i),t}addImageToContainer(e){return new Promise((t,r)=>{let i;vz.isImageElement(e)?(i=e,this.setBackgroundImage(i),t()):this.getImageElement(e).then(n=>{i=n,this.setBackgroundImage(i),t()}).catch(n=>{r({identifier:"imageLoading",message:n.message})})})}getImageElement(e){return new Promise((t,r)=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.addEventListener("error",n=>{r(n)}),i.crossOrigin=this.crossOrigin,i.src=e})}setBackgroundImage(e){this.container?this.container.setData({image:e}):this.container=this.engine.addImage({image:e,blendMode:"normal",opacity:1});const{size:t}=this.container.getBounds();this.engine.getOutputContainer().setResolution(t)}},wJ={horizontalGuides:[],verticalGuides:[],rotationGuides:[]},cl=class{constructor(e){this.previewTopLeftPosition={x:0,y:0},this.init=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()},this.getGuideValue=(t,r)=>{const{height:i,width:n}=this.editor.getPreviewSize(),{snapToLeft:o,snapToRight:s,snapToTop:a,snapToBottom:l}=this.configStore.config.snapping.position,c=Math.min(i,n);let h=0;return r==="bottom"?h=Math.round(i-c*l):r==="top"?h=Math.round(c*a):r==="right"?h=Math.round(n-c*s):r==="left"?h=Math.round(c*o):t==="vertical"&&r==="center"?h=Math.round(n/2):t==="horizontal"&&r==="center"&&(h=Math.round(i/2)),h},this.getVerticalGuidesFromConfig=()=>{const{snapToVerticalCenter:t,snapToLeft:r,snapToRight:i}=this.configStore.config.snapping.position,n=[];return t&&n.push({value:this.getGuideValue("vertical","center"),edge:"center",isVisible:!1,direction:"vertical"}),r&&n.push({value:this.getGuideValue("vertical","left"),edge:"leading",isVisible:!1,direction:"vertical"}),i&&n.push({value:this.getGuideValue("vertical","right"),edge:"trailing",isVisible:!1,direction:"vertical"}),n},this.getHorizontalGuidesFromConfig=()=>{const{snapToHorizontalCenter:t,snapToTop:r,snapToBottom:i}=this.configStore.config.snapping.position,n=[];return t&&n.push({value:this.getGuideValue("horizontal","center"),edge:"center",isVisible:!1,direction:"horizontal"}),r&&n.push({value:this.getGuideValue("horizontal","top"),edge:"leading",isVisible:!1,direction:"horizontal"}),i&&n.push({value:this.getGuideValue("horizontal","bottom"),edge:"trailing",isVisible:!1,direction:"horizontal"}),n},this.getRotationGuidesFromConfig=()=>{const{angles:t}=this.configStore.config.snapping.rotation,r=[];return t.forEach(n=>{r.push(n),r.push(n+360),r.push(n-360)}),r.filter((n,o)=>r.indexOf(n)===o).map(n=>({value:n*Math.PI/180,edge:"center",isVisible:!1,position:{x:0,y:0}}))},this.getSpriteDimensions=({leftTop:t,leftBottom:r,rightTop:i,rightBottom:n})=>{const o=Math.min(t.y,i.y,r.y,n.y),s=Math.max(t.y,i.y,r.y,n.y),a=Math.min(t.x,i.x,r.x,n.x),l=Math.max(t.x,i.x,r.x,n.x);return{height:Math.round(s-o),width:Math.round(l-a)}},this.mapRange=({value:t,fromMin:r,fromLength:i,toMin:n,toLength:o})=>(t-r)*o/i+n,this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig()},this.mapToSnapSystem=(t,r,i,n)=>{if(r.length===0)return t;if(r[0]>t)return t-i;for(let o=0;o<r.length-1;o+=1){const s=r[o],a=r[o+1];let l=s+i,c=a-i,h=0;n&&(h=o*i*2,l+=h,c+=h+i*2);const f=1e-5;if(s<=t&&t<=a)return t<=s+f?s+h:t>=a-f?a+h+(n?i*2:0):this.mapRange({value:t,fromMin:s,fromLength:a-s,toMin:l,toLength:c-l})}return n?t+(r.length-1)*i*2+i:t},this.mapFromSnapSystem=(t,r,i,n)=>{if(r.length===0)return t;if(r[0]>t)return t>=r[0]-i?r[0]:t+i;let o=t;for(let a=0;a<r.length-1;a+=1){const l=r[a],c=r[a+1],h=l+i;let f=c-i,d=c;if(n&&(f+=i*2,d+=i*2,o=t-a*i*2),l<=o&&o<=d)return h<=o&&o<=f?this.mapRange({value:o,fromMin:h,fromLength:f-h,toMin:l,toLength:c-l}):o<h?l:c}o-=i*3;const s=r[r.length-1];return o<=s?s:o},this.centerSnapValue=(t,r)=>{const i=r*.5,{value:n,edge:o}=t;let s=n;return o==="leading"?s+=i:o==="trailing"&&(s-=i),s},this.mapSnappingGuidesToCenter=(t,r)=>{const i=[];return t.forEach(n=>{i.push(this.centerSnapValue(n,r))}),i},this.calcSnapThresholdInRadians=(t,r)=>t===0?0:r/t,this.calculatePreviewTopLeftPosition=()=>{const t=this.editor.engineMediator.preview.container.getPosition(),r=this.editor.getPreviewSize(),i=ql();this.previewTopLeftPosition={x:t.x/i-r.width/2,y:t.y/i-r.height/2}},this.snapToRotation=(t,r,i)=>{const{rotationGuides:n}=this.state,{enabled:o,threshold:s}=this.configStore.config.snapping.rotation,{x:a,y:l}=this.previewTopLeftPosition,{width:c}=this.editor.getPreviewSize();let h=(t+Math.PI*2)%(Math.PI*2);if(o){const f=new G(r).magnitude,d=n.map(g=>g.value).sort((g,m)=>g-m),p=this.calcSnapThresholdInRadians(f,s);if(!this.rotationOffset){const g=this.mapToSnapSystem(t,d,p,!1);this.rotationOffset=g-h}h=this.mapFromSnapSystem(h+this.rotationOffset,d,p,!1);const v={x:i.position.x-a-c,y:i.position.y-l};return n.forEach(g=>{g.isVisible=g.value===h,g.position=v}),h}return t},this.snapToPosition=(t,r)=>{const{horizontalGuides:i,verticalGuides:n}=this.state,{enabled:o,threshold:s}=this.configStore.config.snapping.position,a=new G(this.previewTopLeftPosition),{height:l,width:c}=this.getSpriteDimensions(r),{x:h,y:f}=new G(t).subtract(a);if(o){const d=this.mapSnappingGuidesToCenter(i,l).sort((m,y)=>m-y),p=this.mapSnappingGuidesToCenter(n,c).sort((m,y)=>m-y);if(!this.positionOffset){const m=this.mapToSnapSystem(h,p,s,!0),y=this.mapToSnapSystem(f,d,s,!0);this.positionOffset=new G(m,y).subtract(new G(h,f))}let v=this.mapFromSnapSystem(h+this.positionOffset.x,p,s,!0),g=this.mapFromSnapSystem(f+this.positionOffset.y,d,s,!0);return v=Math.round(v),g=Math.round(g),i.forEach(m=>{const y=Math.round(this.centerSnapValue(m,l));m.isVisible=y===g}),n.forEach(m=>{const y=Math.round(this.centerSnapValue(m,c));m.isVisible=y===v}),new G(v,g).add(a)}return{x:h,y:f}},this.editor=e,this.configStore=e.configStore,this.state=Ye(wJ),this.rotationOffset=null,this.positionOffset=null}hidePositionGuides(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map(e=>ge(L({},e),{isVisible:!1})),this.state.horizontalGuides=this.state.horizontalGuides.map(e=>ge(L({},e),{isVisible:!1}))}hideRotationGuides(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map(e=>ge(L({},e),{isVisible:!1}))}get positionGuides(){const{verticalGuides:e,horizontalGuides:t}=this.state;return[...e,...t]}get rotationGuides(){return this.state.rotationGuides}};x([Ye],cl.prototype,"state",2),x([P],cl.prototype,"snapToRotation",2),x([P],cl.prototype,"snapToPosition",2),x([P],cl.prototype,"hidePositionGuides",1),x([P],cl.prototype,"hideRotationGuides",1),x([O],cl.prototype,"positionGuides",1),x([O],cl.prototype,"rotationGuides",1);var Ap=class{constructor(e,t){this.initWithImage=async i=>{try{if(this.modalStore.showInfoModal("loading"),this.engineMediator.init(),this.snappingStore.init(),await this.activeStore.setImage(i),this.configStore.config.displayResizeWarning&&this.checkImageResize(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){const n=this.configStore.config.engine;this.previewThumbnails=new vz(ge(L({},n),{license:this.configStore.config.license,assetProvider:this.configStore.assetProvider}))}this.engine&&this.engine.pesdk.on("context-lost",()=>{this.configStore.events.onErrorWebGLContextLost()})}catch(n){this.configStore.events.onErrorImageLoading(n),this.modalStore.hideModal(),this.modalStore.showActionModal({type:"error",identifier:n.identifier?n.identifier:"rendering",error:n,handleConfirm:()=>{this.initWithImage(i)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}},this.checkImageResize=()=>{this.engine.on("beganImageDownscaling",()=>{this.modalStore.showInfoModal("resizing")}),this.engine.on("imageDownscaled",({width:i,height:n})=>{const{maxMegaPixels:o}=this.configStore.config.engine.downscaleOptions,s=K4.isMobile()?o.mobile:o.desktop;this.modalStore.hideModal(),this.modalStore.showActionModal({type:"warning",identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${s}`,width:`${i}`,height:`${n}`}})})},this.init=i=>{this.activeStore.image?this.historyStore.isDirty()?this.modalStore.showActionModal({type:"warning",identifier:"discardChanges",handleConfirm:()=>{this.setImage(i),this.resetToolStates()},handleDismiss:()=>{this.setImage(i,!0)}}):(this.historyStore.reset(),this.setImage(i,!0).then(()=>{this.modalStore.identifier!=="imageResized"&&this.modalStore.hideModal();const{engine:o,displayCanvasRendererWarning:s}=this.configStore.config;o.preferredRenderer==="canvas"&&s&&this.modalStore.showActionModal({type:"warning",identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})}).catch(()=>null)):this.initWithImage(i)},this.setImage=async(i,n=!1)=>{try{this.activeStore.setImageLoadedToEngine(!1),this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading"),this.scale.defaultScale=1,this.scale.resetOffset(),await this.activeStore.setImage(i),await this.engineMediator.image.addImageToContainer(),this.canvasStore.resizeCanvas(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults();const{flipHorizontally:o,flipVertically:s,outputRotation:a}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:s,flipHorizontally:o}),await this.transformToolStore.rotateOutputContainer(kv(a),!1),n?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransforms(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),this.historyStore.addInitialSnapshot(),await this.renderPromise(),this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"&&this.filterToolStore.setImageAndGetPreviews(),this.activeStore.tool?this.configStore.events.onImageLoaded():this.onReady(),this.modalStore.identifier!=="imageResized"&&this.modalStore.hideModal(),this.activeStore.setImageLoadedToEngine(!0),this.resize()}catch(o){throw this.configStore.events.onErrorImageLoading(o),this.modalStore.hideModal(),this.modalStore.showActionModal({type:"error",identifier:o.identifier?o.identifier:"rendering",error:o,handleConfirm:()=>{this.setImage(i,n)},handleDismiss:()=>{this.activeStore.setImage(void 0)}}),new Error(o)}},this.onToolChange=(i,n=null,o=!0)=>{var s,a;i!==n&&(a=(s=this.engineMediator)==null?void 0:s.preview)!=null&&a.container&&([i,n].indexOf("transform")!==-1?(i==="transform"?(this.transformToolStore.onLeave(),this.transformToolStore.addSnapshot(),this.snappingStore.calculatePreviewTopLeftPosition()):n==="transform"&&this.transformToolStore.onEnter(),this.resize(n)):(this.scale.resetOffset(),this.scale.resetPosition(),this.scale.setScaleToDefault(),this.scale.scaleRender(!0)),o&&this.render())},this.resize=(i=null)=>{if(!!this.engineMediator)try{const n=this.activeStore.tool,o=i==="transform"||!i&&n==="transform";this.canvasStore.resizeCanvas(i),this.transformToolStore.applyDefaultCrop();const s=it(this.transformToolStore.maxCropMaskSize);o||this.transformToolStore.onEnter();const a=this.engineMediator.preview.container.getRotation();if(this.engineMediator.preview.updateTransform(a)){this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.transformToolStore.updateCanvasControls(s),this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls();const c=this.transformToolStore.getScaleWithFlip(a);this.engineMediator.preview.container.setScale(c),o||(this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()),this.snappingStore.calculatePreviewTopLeftPosition(),this.render()}}catch(n){this.configStore.events.onErrorImageLoading(n),this.modalStore.showActionModal({type:"error",identifier:"rendering",handleConfirm:()=>{this.resize(i)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}},this.export=(o={})=>{var s=o,{preventExportEvent:i}=s,n=To(s,["preventExportEvent"]);return new Promise((a,l)=>{this.modalStore.showInfoModal("exporting");const c=this.activeStore.tool==="transform";c&&this.transformToolStore.onLeave();const{config:h}=this.configStore,f=L(L({},h.export.image),n),{exportType:d,format:p,quality:v,enableDownload:g,transparent:m}=f;this.engineMediator.engine.export(d,p,v,m).then(y=>{g&&this.triggerFileDownload(h.export.filename,p,d,y),i||this.configStore.events.onExport(y),this.historyStore.isDirtySinceSave=!1,a(y)}).catch(y=>{l(y)}).finally(()=>{c&&(this.transformToolStore.onEnter(),this.render()),this.modalStore.hideModal()})})},this.serialize=({image:i}={image:!0})=>this.serializationMediator.serialize({image:i}),this.deserialize=i=>this.serializationMediator.deserialize(i),this.close=()=>{this.historyStore.isDirtySinceSave&&this.configStore.config.displayCloseWarning?this.modalStore.showActionModal({type:"warning",identifier:"unsavedChanges",handleConfirm:()=>{this.configStore.events.onClose()}}):this.configStore.events.onClose()},this.hasChanges=()=>this.historyStore.isDirtySinceSave,this.getImageDimensions=()=>{const{width:i,height:n}=this.engine.getOutputDimensions();return{width:i,height:n}},this.wait=(i=0)=>new Promise(n=>setTimeout(n,i)),this.clickableCanvas=async i=>{i?(await new Promise(n=>setTimeout(n,0)),this.canvasStore.enableCanvasClick()):this.canvasStore.disableCanvasClick()},this.onReady=async()=>{const{forceCrop:i}=this.configStore.config;if(this.activeStore.selectTool(this.configStore.defaultTool),i){const n=this.transformToolStore.localOutputImageSize,o=n.width/n.height,s=this.transformToolStore.entityManager.items.map(a=>a.ratio?a.ratio:a.dimensions.x/a.dimensions.y);s.indexOf("*")!==-1?console.error('ForceCrop will not work if "*" is one of the ratios'):s.indexOf(parseFloat(o.toFixed(2)))===-1&&this.activeStore.selectTool("transform")}this.configStore.events.onEditorReady()},this.addSnapshot=(i,n,o)=>{this.historyStore.addSnapshot(i,n,o)},this.resetToolStates=()=>{this.transformToolStore.pureReset(),this.filterToolStore.pureReset(),this.focusToolStore.pureReset(),this.adjustmentsToolStore.pureReset(),this.overlayToolStore.pureReset(),this.frameToolStore.pureReset(),this.brushToolStore.pureReset(),this.spriteStore.pureReset(),this.historyStore.reset(),this.render()},this.getAssetPath=i=>this.assetProvider.getPathForCategory(i),this.render=async()=>{await this.renderPromise()},this.applyFlipToPreview=i=>this.engineMediator?this.engineMediator.previewSpaceToFlippedPreviewSpace(i):{x:0,y:0},this.getPreviewSize=()=>{if(!this.engine)return{width:0,height:0};const{width:i,height:n}=this.engine.getOutputDimensions();return i&&n?{width:Math.round(this.worldToPreview(this.outputToWorld(i))),height:Math.round(this.worldToPreview(this.outputToWorld(n)))}:{height:n,width:i}},this.getImageMimeType=()=>xJ(this.activeStore.image),this.cleanUpCanvasMemory=()=>{var i,n,o;(o=(n=(i=this.engineMediator)==null?void 0:i.image)==null?void 0:n.container)==null||o.dispose()},this.triggerFileDownload=(i,n,o,s)=>{const l=i+(n==="image/jpeg"&&o!=="ms-blob"?".jpeg":".png"),c=this.blobFromExportData(s);this.triggerBlobDownload(l,c)},this.triggerBlobDownload=(i,n)=>{if(navigator.msSaveBlob)navigator.msSaveBlob(n,i);else{const o=document.createElement("a"),s=URL.createObjectURL(n);o.href=s,o.download=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),YW()||URL.revokeObjectURL(s)}},this.blobFromExportData=i=>typeof i=="string"?mz(i):i instanceof HTMLImageElement?mz(i.src):i,this.configStore=new Qn,t&&Object.entries(t).forEach(([i,n])=>{this.configStore.events.on(i,n)});const r=this.configStore.saveConfig(e);this.engineMediator=new nJ(this),this.serializationMediator=new pz(this),this.spriteStore=new $e(this),this.scale=new di(this),this.filterToolStore=new jr(this),this.adjustmentsToolStore=new Wt(this),this.focusToolStore=new bt(this),this.overlayToolStore=new hi(this),this.frameToolStore=new Ar(this),this.brushToolStore=new Dr(this),this.transformToolStore=new Re(this),this.libraryStore=new go(this),this.modalStore=new os(this),this.snappingStore=new cl(this),this.activeStore=new mo(this),this.canvasStore=new Cn(this),this.historyStore=new Pp(this),this.libraryStore.initProvider(r),this.libraryStore.fetchImages(),this.configStore.config.image?this.initWithImage(this.configStore.config.image):(this.configStore.events.onEditorReady(),(this.configStore.defaultTool==="library"||this.configStore.defaultTool==="customTool")&&this.activeStore.selectTool(this.configStore.defaultTool))}get shortestOutputSide(){const e=this.outputContainer.getBounds();return Math.min(e.width,e.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){return this.engineMediator?this.engineMediator.engine:null}get imageContainer(){return this.engineMediator?this.engineMediator.image.container:null}get orderHelper(){return this.engineMediator?this.engineMediator.orderHelper:null}renderPromise(){return this.engineMediator?this.engineMediator.render(this.engineMediator.preview.container):null}previewToWorld(e,t){return this.engineMediator?Os(e)?this.engineMediator.previewSpaceToWorldSpace(e,t):this.engineMediator.previewSpaceToWorldSpace(e,t):{x:0,y:0}}worldToPreview(e){return this.engineMediator?Os(e)?this.engineMediator.worldSpaceToPreviewSpace(e):this.engineMediator.worldSpaceToPreviewSpace(e):{x:0,y:0}}worldSizeToPreview(e){return this.engineMediator?{width:this.engineMediator.worldSpaceToPreviewSpace(e.width),height:this.engineMediator.worldSpaceToPreviewSpace(e.height)}:{width:0,height:0}}previewSizeToWorld(e,t){return this.engineMediator?{width:this.engineMediator.previewSpaceToWorldSpace(e.width,t),height:this.engineMediator.previewSpaceToWorldSpace(e.height,t)}:{width:0,height:0}}outputToWorld(e){return this.engineMediator?Os(e)?this.engineMediator.outputSpaceToWorldSpace(e):this.engineMediator.outputSpaceToWorldSpace(e):{x:0,y:0}}previewToOutput(e){return this.engineMediator?Os(e)?this.engineMediator.previewSpaceToOutputSpace(e):this.engineMediator.previewSpaceToOutputSpace(e):{x:0,y:0}}get outputContainer(){return this.engineMediator.output.container}};x([P],Ap.prototype,"resize",2),x([P],Ap.prototype,"export",2),x([P],Ap.prototype,"clickableCanvas",2);var SJ=({children:e})=>u.createElement(u.Fragment,null,e),CJ=z(bh)`
  margin: 2px;
  min-width: ${e=>e.theme.measurements.basicCard.large.width}px;
  height: ${e=>e.theme.measurements.basicCard.large.height}px;
  color: ${e=>e.theme.card.foreground};
`,kJ=z(bh)`
  margin: 2px;
  min-width: ${e=>e.theme.measurements.basicCard.medium.width}px;
  height: ${e=>e.theme.measurements.basicCard.medium.height}px;
  color: ${e=>e.theme.card.foreground};
`,TJ=r=>{var i=r,{type:e="medium"}=i,t=To(i,["type"]);const n=e==="large";let o=kJ;return n&&(o=CJ),u.createElement(o,L({type:e},t))},EJ=z(Ep).attrs(()=>({"data-test":Le.CardContainer}))`
  transition-property: width;
  transition-duration: 0.4s;
  transition-timing-function: ease-in;
  height: ${e=>e.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`,DJ=z(wn)`
  &&& {
    min-height: 32px;
    font-size: ${e=>e.theme.measurements.fontSystem.basicUICardLabel.size}px;
    letter-spacing: ${e=>e.theme.measurements.fontSystem.basicUICardLabel.letterSpacing}px;
    text-transform: ${e=>e.theme.measurements.fontSystem.basicUICardLabel.case};
  }
`,IJ=z.div`
  display: flex;
  /* This fixes an IE11 issue where the items are behind the category */
  flex: 1 0 auto;
`,yz=z.div.attrs(()=>({"data-test":Le.BasicToolControlBar}))`
  position: relative;
  display: flex;
  flex-shrink: 0;
  height: auto;
  transition: max-height 0.4s ease-in-out;
  ${e=>e.show?ne`
          max-height: 80px;
        `:ne`
          max-height: 0px;
        `}
`,RJ=yz;yz.defaultProps={show:!0};var FJ=z.div`
  text-align: -moz-center;
  text-align: center;
  text-align: -webkit-center;
  margin: 0 10vw;
  height: auto;
  box-shadow: ${e=>e.theme.toolControlBar.shadow};
  @media all and (min-width: 0) and (max-width: 599px) {
    margin: 0 5vw;
  }
`,OJ=FJ,MJ=z.div`
  width: 100px;
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 42px;
  }
`,PJ=MJ,AJ=z.div.attrs(()=>({"data-test":Le.ToolControlBarExpandableControls}))`
  position: absolute;
  left: 0%;
  transform: translateY(0%) scaleY(0);
  justify-content: center;
  padding: 0 5vw;
  width: 90%;
  height: ${e=>e.theme.measurements.basicUIToolControlBar.controlsBarHeight}px;
  display: flex;
  align-items: center;
  transition: transform 0.4s ease-in-out;
  z-index: ${e=>e.theme.measurements.zIndex.controlsBar};
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  ${({show:e})=>e&&ne`
      transform: translateY(-100%) scaleY(1);
    `}
`,zJ=z.div`
  display: flex;
  justify-content: center;
  align-items: center;
`,$J=({label:e,className:t,children:r})=>u.createElement(zJ,{"aria-label":e,className:t},r),kh=$J;function oe(){return K.exports.useContext(g_)}var BJ=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"}))),LJ=BJ,UJ=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),u.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",null,u.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),u.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"}))),NJ=UJ,jJ=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"}))),HJ=jJ,WJ=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"}))),VJ=WJ,GJ=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"}))),qJ=GJ,XJ=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"#fff"},u.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"}))),YJ=XJ,QJ=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"}))),KJ=QJ,ZJ=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"}))),JJ=ZJ,eee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"}))),tee=eee,ree=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"}))),iee=ree,nee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"}))),oee=nee,see=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"}))),aee=see,lee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),u.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"}))),cee=lee;function uee(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"#fff"},u.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),u.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))}var hee=uee,dee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),u.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"}))),fee=dee,pee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),u.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"}))),mee=pee;function gee(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"#fff"},u.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),u.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}var vee=gee,yee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"#fff"},u.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),u.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"}))),_ee=yee;function bee(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H48V48H0z"}),u.createElement("mask",{fill:"#fff"},u.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),u.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))}var xee=bee,wee=()=>u.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},u.createElement("g",{fill:"none",fillRule:"evenodd"},u.createElement("g",null,u.createElement("g",{fill:"#D8D8D8",opacity:"0"},u.createElement("rect",{width:"48",height:"48"})),u.createElement("g",{transform:"translate(12 12)"},u.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),u.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},u.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),u.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),u.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),u.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},u.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),u.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},u.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),u.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})))))),See=wee;function Cee(){return u.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},u.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),u.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),u.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),u.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),u.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}var kee=Cee,Tee=()=>u.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},u.createElement("g",{fill:"none",fillRule:"evenodd"},u.createElement("g",null,u.createElement("g",{fill:"#D8D8D8",opacity:"0"},u.createElement("rect",{width:"48",height:"48"})),u.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},u.createElement("g",null,u.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),u.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),u.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"})))))),Eee=Tee,Dee=()=>u.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},u.createElement("g",{fill:"none",fillRule:"evenodd"},u.createElement("g",null,u.createElement("g",{fill:"#D8D8D8",opacity:"0"},u.createElement("rect",{width:"48",height:"48"})),u.createElement("g",{transform:"translate(12 12)"},u.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),u.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},u.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),u.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),u.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"})))))),Iee=Dee,Ree=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},u.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},u.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),u.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),u.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),u.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"}))),Fee=Ree,Oee=()=>u.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},u.createElement("g",{fill:"none",fillRule:"evenodd"},u.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},u.createElement("g",null,u.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),u.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),u.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),u.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),u.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),u.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},u.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),u.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"})))))),Mee=Oee,Pee=()=>u.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},u.createElement("g",{fill:"none",fillRule:"evenodd"},u.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},u.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),u.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"})))),Aee=Pee,zee=()=>u.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},u.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},u.createElement("g",null,u.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},u.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},u.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),u.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),u.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),u.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"}))))),$ee=zee,Bee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},u.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),u.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),u.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"}))),Lee=Bee,Uee=()=>u.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},u.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),u.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),u.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"}))),Nee=Uee;function jee(){return u.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},u.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},u.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),u.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),u.createElement("g",{fillOpacity:"0.2"},u.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),u.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))}var Hee=jee,Wee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),u.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"}))),Vee=Wee,Gee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"})),qee=Gee,Xee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"})),Yee=Xee;function Qee(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))}var Kee=Qee,Zee=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),u.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"}))),Jee=Zee,ete=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{d:"M0 0H24V24H0z"}),u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"}))),tte=ete,rte=({highlight:e="currentColor",width:t=48,height:r=48})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",{fill:e,transform:"translate(13 13)"},u.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),u.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),u.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),u.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),u.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),u.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),u.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),u.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),u.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),u.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),u.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),u.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),u.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),u.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),u.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),u.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"})))),ite=rte,nte=({highlight:e="currentColor",width:t=48,height:r=48})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{fill:e,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"}))),ote=nte,ste=({highlight:e="currentColor",width:t=48,height:r=48})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",{fill:e,transform:"translate(13 13)"},u.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),u.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),u.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"})))),ate=ste,lte=({highlight:e="currentColor",width:t=48,height:r=48})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("path",{fill:e,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"}))),cte=lte,ute=z.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``,vc=ute,hte=({highlight:e="#565656",width:t=32,height:r=32})=>u.createElement(vc,{width:t,height:r,viewBox:"0 0 32 32"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",{fill:e,transform:"translate(-8 -8)"},u.createElement("g",{transform:"translate(8 8)"},u.createElement("g",null,u.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),u.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),u.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),u.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),u.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),u.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),u.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),u.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),u.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),u.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),u.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),u.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),u.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),u.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),u.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),u.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),u.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),u.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),u.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),u.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),u.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),u.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),u.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),u.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"})))))),dte=hte,fte=({highlight:e="#565656",width:t=32,height:r=48})=>u.createElement(vc,{width:t,height:r,viewBox:"0 0 42 32"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",{fill:e,transform:"translate(-3 -8)"},u.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"})))),pte=fte,mte=({highlight:e="#565656",width:t=26,height:r=46})=>u.createElement(vc,{width:t,height:r,viewBox:"0 0 26 46"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",{fill:e,transform:"translate(-11 -1)"},u.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"})))),gte=mte,vte=({highlight:e="#565656",width:t=26,height:r=46})=>u.createElement(vc,{width:t,height:r,viewBox:"0 0 26 46"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",{fill:e,transform:"translate(-11 -1)"},u.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"})))),yte=vte,_te=({highlight:e="#565656",mask:t="#fff",width:r=32,height:i=32})=>u.createElement(vc,{width:r,height:i,viewBox:"0 0 32 32"},u.createElement("defs",null,u.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",{transform:"translate(-8 -8)"},u.createElement("g",{transform:"translate(7.08 7.293)"},u.createElement("mask",{fill:t},u.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),u.createElement("use",{fill:e,xlinkHref:"#photoeditorsdk-square-icon"}))))),bte=_te,xte=({highlight:e="#565656",width:t=32,height:r=42})=>u.createElement(vc,{width:t,height:r,viewBox:"0 0 32 42"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",{fill:e,transform:"translate(-8 -3)"},u.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"})))),wte=xte,Ste=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),u.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),u.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),u.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),u.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),u.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:e,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),u.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}))),Cte=Ste,kte=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",null,u.createElement("path",{fill:e,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),u.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:e,rx:"1"}),u.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:e,rx:"1"}),u.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:e,rx:"1"}),u.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}),u.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:e,rx:"1"})))),Tte=kte,Ete=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("g",{transform:"translate(5 5)"},u.createElement("path",{fill:t,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),u.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:e,rx:"1"}),u.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:e,rx:"1"}),u.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:e,rx:"1"}),u.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:e,rx:"1"}),u.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:e,rx:"1"})))),Dte=Ete,Ite=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:e,rx:"1"}),u.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:e,rx:"1"}),u.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:e,rx:"1"}),u.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:e,rx:"1"}),u.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:e,rx:"1"}),u.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:t,rx:"1"}))),Rte=Ite,Fte=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:e,rx:"1"}),u.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:t,rx:"1"}),u.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:e,rx:"1"}),u.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:e,rx:"1"}),u.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:e,rx:"1"}),u.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:e,rx:"1"}))),Ote=Fte,Mte=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:e,rx:"1"}),u.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:t,rx:"1"}),u.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:e,rx:"1"}),u.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:e,rx:"1"}),u.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:e,rx:"1"}),u.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:e,rx:"1"}))),Pte=Mte,Ate=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:t,rx:"1.5"}),u.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:e,rx:"1"}))),zte=Ate,$te=({main:e="#424242",highlight:t="#565656",shadow:r="#333333",width:i="48px",height:n="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:n,viewBox:"0 0 48 48"},u.createElement("defs",null,u.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},u.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),u.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:e,rx:"0.5"}),u.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:e,rx:"0.5"}),u.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:e,rx:"0.5"}),u.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),u.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:e,rx:"0.5"}),u.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:e,rx:"0.5"}),u.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:r,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),u.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}))),Bte=$te,Lte=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),u.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:e,rx:"0.5"}),u.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:e,rx:"0.5"}),u.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:e,rx:"0.5"}),u.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),u.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:e,rx:"0.5"}),u.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:e,rx:"0.5"}),u.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}))),Ute=Lte,Nte=({main:e="#424242",highlight:t="#565656",width:r="48px",height:i="48px"})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,viewBox:"0 0 48 48"},u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),u.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:e,rx:"0.5"}),u.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:e,rx:"0.5"}),u.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:e,rx:"0.5"}),u.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),u.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:e,rx:"0.5"}),u.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:e,rx:"0.5"}),u.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}))),jte=Nte,Hte=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"}))),Wte=Hte,Vte=({height:e=3,width:t=102,x:r=-102,className:i,style:n})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 102 3",className:i,style:n},u.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},u.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),u.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),u.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),u.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),u.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),u.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),u.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),u.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),u.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),u.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:-t*1.5,y:"0",width:t*4,height:"3",transform:`translate(${r}, 0)`})),Gte=Vte,qte=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},u.createElement("mask",{fill:"currentColor"},u.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"}))),Xte=qte,Yte=()=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"})),Qte=Yte,Kte=({className:e})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:e},u.createElement("title",null,"Flip Horizontal"),u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},u.createElement("mask",{fill:"none"},u.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"}))),Zte=Kte,Jte=({className:e})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:e},u.createElement("title",null,"Flip Vertical"),u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},u.createElement("mask",{fill:"none"},u.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"}))),ere=Jte,tre=({alt:e="Rotate",className:t})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:t},u.createElement("title",null,e),u.createElement("defs",null,u.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),u.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},u.createElement("mask",{fill:"none"},u.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),u.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"}))),rre=tre,_z={adjustment:See,filter:Eee,library:Mee,overlay:Aee,focus:Iee,sticker:$ee,text:Lee,textdesign:Nee,frame:Fee,transform:Hee,brush:kee},bz={left:_ee,right:xee,center:vee},kn={addText:Vee,openWebcam:qee,reset:Yee,shuffle:Kee,uploadImage:Jee},F_={undo:mee,redo:fee,close:cee,export:hee},tr={categories:{imgly_transforms_common:ite,imgly_transforms_facebook:ote,imgly_transforms_twitter:cte,imgly_transforms_instagram:ate},crops:{imgly_transform_common_custom:dte,imgly_transform_common_square:bte,imgly_transform_common_3:wte,imgly_transform_common_4:pte,imgly_transform_common_9:gte,imgly_transform_common_16:yte,imgly_transform_facebook_post:Cte,imgly_transform_facebook_profile:Tte,imgly_transform_facebook_title:Dte,imgly_transform_instagram_landscape:Rte,imgly_transform_instagram_portrait:Ote,imgly_transform_instagram_square:Pte,imgly_transform_instagram_story:zte,imgly_transform_twitter_post:Bte,imgly_transform_twitter_profile:Ute,imgly_transform_twitter_title:jte},dots:Gte,duplicate:Xte,edit:Qte,bringToFront:tte,delete:Wte,flipHorizontal:Zte,flipVertical:ere,rotate:rre},ire={brightness:NJ,contrast:VJ,saturation:JJ,clarity:HJ,shadows:tee,highlights:KJ,exposure:qJ,gamma:YJ,blacks:LJ,whites:aee,temperature:oee,sharpness:iee},nre=z.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
  max-width: calc(100% - ${e=>e.maxWidth}px);
`,O_=({children:e})=>{const{config:t}=oe();let r=0;return t.isLayoutAdvanced&&(r=t.measurements.advancedUIToolbar.width+t.measurements.advancedUIToolControlBar.width),u.createElement(nre,{maxWidth:r},e)},ore=z.div.attrs(()=>({"data-test":Le.MainCanvasActionBar}))`
  &&& {
    display: ${e=>e.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${e=>e.theme.measurements.mainCanvasActionBar.height}px;
    color: ${e=>e.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${e=>e.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${e=>e.theme.measurements.zIndex.canvas.bar};
    background: ${e=>e.transparentBackgound?"transparent":e.theme.mainCanvasActionBar.background};
    ${e=>e.bottom?ne`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:ne`
            justify-content: space-between;
          `}
  }
`,sre=z.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,are=z.div.attrs({role:"main"})`
  background-color: ${e=>e.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin-top: ${e=>e.theme.measurements.canvas.marginTop}px;
`,lre=z.div.attrs(({height:e,width:t})=>({style:{height:`${e}px`,width:`${t}px`}}))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${e=>e.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`,cre=z.div.attrs(({radius:e})=>({style:{height:`${e*2}px`,width:`${e*2}px`}}))`
  border-radius: 50%;
  border: 2px solid ${e=>e.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`,ure=z.div`
  position: relative;
  height: inherit;
  width: inherit;
`,hre=z.div(e=>{const{desktop:t,mobile:r}=e.theme.measurements.canvasControls.corner.touchable,i=t/4,n=r/2;return ne`
    position: absolute;
    width: ${t}px;
    height: ${t}px;
    ${o=>o.vertical==="top"?ne`
            top: 0px;
          `:ne`
            bottom: 0px;
          `}
    ${o=>o.horizontal==="left"?ne`
            left: 0px;
          `:ne`
            right: 0px;
          `}
  ${o=>o.vertical==="top"?ne`
            margin-top: -${i}px;
          `:ne`
            margin-bottom: -${i}px;
          `}
  ${o=>o.horizontal==="left"?ne`
            margin-left: -${i}px;
          `:ne`
            margin-right: -${i}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${r}px;
      height: ${r}px;
      ${o=>o.vertical==="top"?ne`
              margin-top: -${n}px;
            `:ne`
              margin-bottom: -${n}px;
            `}
      ${o=>o.horizontal==="left"?ne`
              margin-left: -${n}px;
            `:ne`
              margin-right: -${n}px;
            `}
    }
  `}),xz=z(hre)(e=>{const t=e.horizontal==="right"?e.borderWidth:0,r=e.vertical==="bottom"?e.borderWidth:0,i=e.horizontal==="left"?e.borderWidth:0,o=`${e.vertical==="top"?e.borderWidth:0}px ${t}px ${r}px ${i}px`,s=e.horizontal==="left"&&e.vertical==="bottom"||e.horizontal==="right"&&e.vertical==="top"?"nesw-resize":"nwse-resize",a=e.theme.measurements.canvasControls.corner.touchable.desktop/4-e.borderWidth,l=e.theme.measurements.canvasControls.corner.touchable.mobile/4+e.borderWidth;return ne`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${c=>c.theme.measurements.canvasControls.corner.size}px;
      height: ${c=>c.theme.measurements.canvasControls.corner.size}px;
      z-index: ${c=>c.theme.measurements.zIndex.canvas.controls};
      border-color: ${c=>c.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${o};
      pointer-events: auto;
      ${e.vertical==="top"?ne`
            top: ${a}px;
          `:ne`
            bottom: ${a}px;
          `}
      ${e.horizontal==="left"?ne`
            left: ${a}px;
          `:ne`
            right: ${a}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${e.vertical==="top"?ne`
              margin-top: ${l}px;
            `:ne`
              margin-bottom: ${l}px;
            `}
        ${e.horizontal==="left"?ne`
              margin-left: ${l}px;
            `:ne`
              margin-right: ${l}px;
            `}
      }
    }
    cursor: ${s};
    pointer-events: none;
  `}),dre=z.div.attrs(()=>({"data-test":Le.Knob}))`
  position: absolute;
  height: ${e=>e.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${e=>e.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${e=>e.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${e=>e.theme.measurements.canvasControls.knob.size}px;
    height: ${e=>e.theme.measurements.canvasControls.knob.size}px;
    top: ${e=>e.theme.measurements.canvasControls.knob.size/4}px;
    left: ${e=>e.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`,fre=z.div`
  position: absolute;
  color: ${e=>e.theme.canvas.controlsOutline};
`,pre=z.div.attrs(e=>({style:{left:`${e.x}px`}}))`
  position: absolute;
  bottom: -${e=>e.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${e=>e.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${e=>e.theme.canvas.controlsOutline};
`,mre=z.div.attrs(({height:e,width:t,theme:r})=>({style:{height:`${e+r.measurements.canvasControls.sprite.controlPadding}px`,width:`${t+r.measurements.canvasControls.sprite.controlPadding}px`}}))`
  left: -${e=>e.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${e=>e.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${e=>e.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`,gre=z.div.attrs(()=>({"data-test":Le.TextWidth}))`
  position: absolute;
  height: ${e=>e.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.controls};
  background: ${e=>e.theme.canvas.controlsColor};
  cursor: pointer;
`,vre=z.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${e=>e.height}px;
  width: ${e=>e.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`,M_=XW()?ne`
      transition: unset;
    `:ne`
      transition: all 0.4s ease-in-out;
    `,yre=z.div`
  position: absolute;
  background: ${e=>e.theme.canvas.cropBackdrop};
  z-index: ${e=>e.theme.measurements.zIndex.canvas.crop.backdrop};
  ${M_}
`,_re=z.div.attrs({"data-test":Le.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${e=>e.theme.canvas.controlsOutline};
  cursor: move;
  ${M_}
`,bre=z.div`
  position: absolute;
  background: ${e=>e.theme.canvas.controlsOutline};
  z-index: ${e=>e.theme.measurements.zIndex.canvas.crop.grid};
  ${M_}
`,zp=z(xz)`
  z-index: ${e=>e.theme.measurements.zIndex.canvas.controls};
  ${M_};
`,xre=z.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,wre=z.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`,Sre=z.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${e=>e.theme.webcam.background};
`,ct={Index:sre,Area:O_,Bar:{Index:ore,ButtonGroup:xZ},Button:{TextSecondary:bZ,Float:CZ},Container:are,Element:xre,Wrapper:Sre,Webcam:wre,Controls:{Knob:dre,Circle:cre,Corner:xz,Line:fre,Area:lre,Sprite:mre,RotateHandle:pre,Container:ure,Wrapper:vre,SpriteActionsWrapper:qA,SpriteActionButton:x_,Width:gre},Crop:{Mask:_re,GridLine:bre,Backdrop:yre,Control:zp}},wz=ct.Button.TextSecondary,Sz=z.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${e=>e.theme.canvasActionBar.foreground};
  letter-spacing: ${e=>e.theme.measurements.fontSystem.button2.letterSpacing}px;
  display: flex;
  align-self: center;
`,Cre=z.div`
  display: inline-flex;
  ${e=>e.isDisabled&&ne`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`,kre=({isDisabled:e,scale:t,active:r})=>{const{canZoomIn:i}=t,{canZoomOut:n}=t,{zoomLevel:o}=t;return["transform","brush","focus","sticker","text","textdesign"].indexOf(r.tool)!==-1?null:u.createElement(Cre,{isDisabled:e},u.createElement(wz,{"data-test":Le.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!n,onClick:t.out},"-"),u.createElement(Sz,{"data-test":Le.ZoomLevel},o," %"),u.createElement(wz,{ariaLabel:"Zoom in",isDisabled:!i,onClick:t.in},"+"))},Tre=vt("scale","active")(Q(kre));Sz.defaultProps={theme:pc};var Cz=z(ct.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`,ZC=Q(function(){const{config:t,editor:r,history:i,custom:n,active:o}=oe(),s=t.locale.mainCanvasActions,{canUndo:a}=i,{canRedo:l}=i,c=t.config.mainCanvasActions,h=()=>{r.export()},f=()=>{if(r.activeStore.tool==="transform")return null;const m=n.getButton("mainCanvasActionUndo");return u.createElement(m,{key:"mainCanvasActionUndo","data-test":Le.MainBarButtonUndo,onClick:i.undo,isDisabled:!a||!o.image,label:s.buttonUndo,ariaLabel:s.buttonUndo,icon:u.createElement(F_.undo,null)})},d=()=>{if(r.activeStore.tool==="transform")return null;const m=n.getButton("mainCanvasActionRedo");return u.createElement(m,{key:"mainCanvasActionRedo","data-test":Le.MainBarButtonRedo,onClick:i.redo,isDisabled:!l||!o.image,label:s.buttonRedo,ariaLabel:s.buttonRedo,icon:u.createElement(F_.redo,null)})},p=()=>{const m=n.getButton("mainCanvasActionExport");return u.createElement(m,{key:"mainCanvasActionExport","data-test":Le.MainBarButtonExport,onClick:h,isDisabled:!o.image,label:s.buttonExport,ariaLabel:s.buttonExport,icon:u.createElement(F_.export,null)})},v=()=>{if(!t.displayCloseButton)return null;const m=n.getButton("mainCanvasActionClose");return u.createElement(m,{key:"mainCanvasActionClose","data-test":Le.MainBarButtonClose,onClick:r.close,isDisabled:!o.image,label:s.buttonClose,ariaLabel:s.buttonClose,icon:u.createElement(F_.close,null)})},g=c.map(m=>{switch(m){case"undo":return f;case"redo":return d;case"export":return p;case"close":return v;default:return null}});return u.createElement(ct.Bar.Index,null,u.createElement(Cz,null,g[0]&&g[0]()||null,g[1]&&g[1]()||null),t.config.enableZoom?u.createElement(Tre,{isDisabled:!o.image}):null,u.createElement(Cz,null,g[2]&&g[2]()||null,g[3]&&g[3]()||null))});function Ere(e){return typeof e=="string"&&e.includes("%")}function Dre(e){return typeof e=="string"&&e.includes(".")&&parseFloat(e)===1}function bi(e,t){Dre(e)&&(e="100%");const r=Ere(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function kz(e){return e=parseFloat(e),(Number.isNaN(e)||e<0||e>1)&&(e=1),e}function P_(e){return e<=1?`${Number(e)*100}%`:e}function yc(e){return e.length===1?`0${e}`:String(e)}function Tz(e,t,r){return{r:bi(e,255)*255,g:bi(t,255)*255,b:bi(r,255)*255}}function Ez(e,t,r){e=bi(e,255),t=bi(t,255),r=bi(r,255);const i=Math.max(e,t,r),n=Math.min(e,t,r);let o=0,s=0;const a=(i+n)/2;if(i===n)s=0,o=0;else{const l=i-n;switch(s=a>.5?l/(2-i-n):l/(i+n),i){case e:o=(t-r)/l+(t<r?6:0);break;case t:o=(r-e)/l+2;break;case r:o=(e-t)/l+4;break}o/=6}return{h:o,s,l:a}}function Ire(e,t,r){let i,n,o;e=bi(e,360),t=bi(t,100),r=bi(r,100);function s(a,l,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(l-a)*(6*c):c<1/2?l:c<2/3?a+(l-a)*(2/3-c)*6:a}if(t===0)n=r,o=r,i=r;else{const a=r<.5?r*(1+t):r+t-r*t,l=2*r-a;i=s(l,a,e+1/3),n=s(l,a,e),o=s(l,a,e-1/3)}return{r:i*255,g:n*255,b:o*255}}function Dz(e,t,r){e=bi(e,255),t=bi(t,255),r=bi(r,255);const i=Math.max(e,t,r),n=Math.min(e,t,r);let o=0;const s=i,a=i-n,l=i===0?0:a/i;if(i===n)o=0;else{switch(i){case e:o=(t-r)/a+(t<r?6:0);break;case t:o=(r-e)/a+2;break;case r:o=(e-t)/a+4;break}o/=6}return{h:o,s:l,v:s}}function Rre(e,t,r){e=bi(e,360)*6,t=bi(t,100),r=bi(r,100);const i=Math.floor(e),n=e-i,o=r*(1-t),s=r*(1-n*t),a=r*(1-(1-n)*t),l=i%6,c=[r,s,o,o,a,r][l],h=[a,r,r,s,o,o][l],f=[o,o,a,r,r,s][l];return{r:c*255,g:h*255,b:f*255}}function Iz(e,t,r,i){const n=[yc(Math.round(e).toString(16)),yc(Math.round(t).toString(16)),yc(Math.round(r).toString(16))];return i&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function Fre(e){return Math.round(parseFloat(e)*255).toString(16)}function Tn(e){return parseInt(e,16)}function Rz(e){return Tn(e)/255}function Ore(e,t,r,i,n){const o=[yc(Math.round(e).toString(16)),yc(Math.round(t).toString(16)),yc(Math.round(r).toString(16)),yc(Fre(i))];return n&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)&&o[3].charAt(0)===o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}var A_={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Mre="[-\\+]?\\d+%?",Pre="[-\\+]?\\d*\\.\\d+%?",ul=`(?:${Pre})|(?:${Mre})`,JC=`[\\s|\\(]+(${ul})[,|\\s]+(${ul})[,|\\s]+(${ul})\\s*\\)?`,ek=`[\\s|\\(]+(${ul})[,|\\s]+(${ul})[,|\\s]+(${ul})[,|\\s]+(${ul})\\s*\\)?`,vo={CSS_UNIT:new RegExp(ul),rgb:new RegExp(`rgb${JC}`),rgba:new RegExp(`rgba${ek}`),hsl:new RegExp(`hsl${JC}`),hsla:new RegExp(`hsla${ek}`),hsv:new RegExp(`hsv${JC}`),hsva:new RegExp(`hsva${ek}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Kn(e){return Boolean(vo.CSS_UNIT.exec(String(e)))}function Are(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(A_[e])e=A_[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let r=vo.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=vo.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=vo.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=vo.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=vo.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=vo.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=vo.hex8.exec(e),r?{r:Tn(r[1]),g:Tn(r[2]),b:Tn(r[3]),a:Rz(r[4]),format:t?"name":"hex8"}:(r=vo.hex6.exec(e),r?{r:Tn(r[1]),g:Tn(r[2]),b:Tn(r[3]),format:t?"name":"hex"}:(r=vo.hex4.exec(e),r?{r:Tn(r[1]+r[1]),g:Tn(r[2]+r[2]),b:Tn(r[3]+r[3]),a:Rz(r[4]+r[4]),format:t?"name":"hex8"}:(r=vo.hex3.exec(e),r?{r:Tn(r[1]+r[1]),g:Tn(r[2]+r[2]),b:Tn(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function zre(e){let t={r:0,g:0,b:0},r=1,i=null,n=null,o=null,s=!1,a=!1;if(typeof e=="string"&&(e=Are(e)),Array.isArray(e)){const[l,c,h]=e;Kn(l)&&Kn(c)&&Kn(h)&&(t=Tz(l*255,c*255,h*255),s=!0,a="rgb"),e.length===4&&(r=e[3])}return typeof e=="object"&&(Kn(e.r)&&Kn(e.g)&&Kn(e.b)?(t=Tz(e.r,e.g,e.b),s=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Kn(e.h)&&Kn(e.s)&&Kn(e.v)?(i=P_(e.s),n=P_(e.v),t=Rre(e.h,i,n),s=!0,a="hsv"):Kn(e.h)&&Kn(e.s)&&Kn(e.l)&&(i=P_(e.s),o=P_(e.l),t=Ire(e.h,i,o),s=!0,a="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=kz(r),{ok:s,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var hl=class{constructor(e="",t={}){if(e instanceof hl)return e;this.originalInput=e;const r=zre(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=t.format||r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}getAlpha(){return this.a}setAlpha(e){return this.a=kz(e),this.roundA=Math.round(100*this.a)/100,this}toHsv(){const e=Dz(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}}toHsvString(){const e=Dz(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?`hsv(${t}, ${r}%, ${i}%)`:`hsva(${t}, ${r}%, ${i}%, ${this.roundA})`}toHsl(){const e=Ez(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}}toHslString(){const e=Ez(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?`hsl(${t}, ${r}%, ${i}%)`:`hsla(${t}, ${r}%, ${i}%, ${this.roundA})`}toHex(e=!1){return Iz(this.r,this.g,this.b,e)}toHexString(e=!1){return`#${this.toHex(e)}`}toHex8(e=!1){return Ore(this.r,this.g,this.b,this.a,e)}toHex8String(e=!1){return`#${this.toHex8(e)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){const e=Math.round(this.r),t=Math.round(this.g),r=Math.round(this.b);return`rgba(${e}, ${t}, ${r}, ${this.roundA})`}toPercentageRgb(){const e=t=>`${Math.round(bi(t,255)*100)}%`;return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}}toPercentageRgbString(){const e=t=>Math.round(bi(t,255)*100);return this.a===1?`rgb(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%)`:`rgba(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%, ${this.roundA})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const e=`#${Iz(this.r,this.g,this.b,!1)}`;for(const t of Object.keys(A_))if(A_[t]===e)return t;return!1}toString(e){const t=Boolean(e);e=e||this.format;const r=this.a<1&&this.a>=0;if(!t&&r&&e&&(e.startsWith("hex")||e==="name"))return e==="name"&&this.a===0?this.toName():this.toRgbString();switch(e){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":return this.toHexString();case"hex3":return this.toHexString(!0);case"hex4":return this.toHex8String(!0);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName();default:return this.toHexString()}}clone(){return new hl(this.toString())}},$re=z.div`
  position: absolute;
  width: ${e=>e.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${e=>e.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${e=>e.direction==="bottom"?ne`
          bottom: 100%;
        `:ne`
          top: 100%;
        `}
  left: ${e=>e.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${e=>e.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${e=>e.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${e=>e.direction==="bottom"?ne`
            transform: translate(-50%, 50%) rotate(45deg);
          `:ne`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${e=>e.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`,Bre=$re,Lre=z.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`,Ure=z(ce.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${e=>e.theme.colorPicker.inputBorderColor};
  }
`,Nre=({value:e,label:t,onChange:r})=>u.createElement(Lre,null,u.createElement(ce.Input.Label,{label:t}),u.createElement(Ure,{min:0,max:255,value:e,onChange:r})),tk=Nre,jre=z.div`
  text-align: left;
  width: 62px;
`,Hre=z(ce.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${e=>e.theme.colorPicker.inputBorderColor};
  }
`,Wre=({value:e,label:t,onChange:r})=>u.createElement(jre,null,u.createElement(ce.Input.Label,{label:t}),u.createElement(Hre,{value:e.toUpperCase(),onChange:r})),Vre=Wre,z_=z.div.attrs(e=>({style:{left:e.position[0]||`${0}px`,top:e.position[1]||`${0}px`}}))`
  &&& {
    position: absolute;
    height: ${e=>e.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${e=>e.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${e=>e.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;z_.defaultProps={theme:pc};var Gre=ni(i_()),qre=z.div`
  position: relative;
  height: 14px;
  width: 100%;
`,Xre=e=>t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})},rk=K.exports.forwardRef(({surface:e,onChange:t,className:r,children:i},n)=>{const o=K.exports.useRef(null),s=K.exports.useRef(null),{config:a}=oe(),[l,c]=K.exports.useState(!1),h=v=>{const g=a.measurements.color.colorPicker.thumb.size/2,m=a.measurements.color.colorPicker.thumb.size;let y=0,_=0;y=v.clientX,_=v.clientY;const{top:b,left:w,width:S,height:C}=o.current.getBoundingClientRect();let D=y-w-g,E=_-b-g;D=Math.max(0,Math.min(S-m,D)),E=Math.max(0,Math.min(C-m,E)),t&&t([D,E])},f=v=>{c(!0),h(v)},d=K.exports.useCallback((0,Gre.default)(v=>{l&&h(v)},10),[l]),p=()=>{l&&c(!1)};return u.createElement(qre,{ref:Xre([o,n]),className:r},u.createElement(ce.DraggableCore,{nodeRef:s,onStart:f,onDrag:d,onStop:p},u.createElement("div",{ref:s},e)),i)}),Yre=ne`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`,$_=Yre,Qre=z.div`
  ${$_}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`,Kre=({hue:e,onChange:t})=>{const[r,i]=K.exports.useState(0),n=K.exports.useRef(null),{config:o}=oe(),s=a=>{if(n.current){const[l]=a,{offsetWidth:c}=n.current,h=c-o.measurements.color.colorPicker.thumb.size,f=l*c/h,d=Math.max(0,Math.min(360,f/c*360));t(d),i(l)}};return K.exports.useEffect(()=>{if(n.current){const{offsetWidth:a}=n.current;let l=0;const c=a-o.measurements.color.colorPicker.thumb.size;l=e*a/360,i(l*c/a)}},[e]),u.createElement(rk,{surface:u.createElement(Qre,null),ref:n,onChange:s},u.createElement(z_,{position:[r,0]}))},Zre=z.div.attrs(e=>({style:{background:`linear-gradient(to left, ${e.transparentColor} 0%, ${e.opaqueColor} 100%)`}}))`
  ${$_}
  z-index: 1;
`,Jre=z.div.attrs(e=>({style:{backgroundImage:`url(${e.url})`}}))`
  ${$_}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`,eie=({color:e,opaqueColor:t,transparentColor:r,onChange:i})=>{const{config:n}=oe(),[o,s]=K.exports.useState(0),a=K.exports.useRef(null),l=n.assetProvider.getPath("controls","/tiled-background.png"),c=h=>{if(a.current){const{offsetWidth:f}=a.current,[d]=h,p=f-n.measurements.color.colorPicker.thumb.size,v=d*f/p,g=(f-v)/f,m=Math.round((g+Number.EPSILON)*100)/100,y=Math.min(1,Math.max(0,m));i(y),s(d)}};return K.exports.useEffect(()=>{if(a.current){const{offsetWidth:h}=a.current;let f=0;const d=h-n.measurements.color.colorPicker.thumb.size;f=(1-e.toHsv().a)*h,s(f*d/h)}},[e.toString()]),u.createElement(rk,{ref:a,surface:u.createElement(Zre,{opaqueColor:t,transparentColor:r}),onChange:c},u.createElement(Jre,{url:l}),u.createElement(z_,{position:[o,0]}))},tie=z.div.attrs(e=>({style:{backgroundColor:`hsl(${e.hue}, 100%, 50%)`}}))`
  ${$_}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${e=>e.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`,rie=z(rk)`
  height: ${e=>e.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`,iie=({color:e,hue:t,onChange:r})=>{const[i,n]=K.exports.useState([0,0]),o=K.exports.useRef(null),{config:s}=oe();K.exports.useEffect(()=>{const{s:l,v:c}=e.toHsv();if(o.current){const{offsetWidth:h,offsetHeight:f}=o.current,d=h-s.measurements.color.colorPicker.thumb.size,p=f-s.measurements.color.colorPicker.thumb.size,v=l*h,g=(1-c)*f;n([v*d/h,g*p/f])}},[e.toString()]);const a=l=>{if(o.current){const[c,h]=l,{offsetHeight:f,offsetWidth:d}=o.current,p=d-s.measurements.color.colorPicker.thumb.size,v=f-s.measurements.color.colorPicker.thumb.size,g=c*d/p,m=h*f/v,y=Math.min(1,Math.max(0,g/d)),_=Math.min(1,Math.max(0,(f-m)/f));r(y,_),n([c,h])}};return u.createElement(rie,{ref:o,surface:u.createElement(tie,{hue:t}),onChange:a},u.createElement(z_,{position:i}))},nie=z.div`
  position: absolute;
  left: ${e=>e.leftOffset}px;
  top: ${e=>e.topOffset}px;
  z-index: ${e=>e.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${e=>e.show&&ne`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`,Fz=z.div`
  &&& {
    position: absolute;
    ${e=>e.direction==="top"&&ne`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${e=>e.theme.colorPicker.listShadow};
    background: ${e=>e.theme.colorPicker.listBackground};
    border-radius: ${e=>e.theme.shape.radiusMedium}px;
    width: ${e=>e.theme.measurements.color.colorPicker.width}px;
    height: ${e=>e.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`,oie=z(Kre)`
  margin-top: 8px;
`,sie=z(eie)`
  margin-top: 8px;
`,aie=z.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`,lie=z.div`
  display: flex;
`,Oz=class extends u.Component{constructor(e){super(e),this.node=u.createRef(),this.checkId=(i,n,o)=>{let s=i,a=0;for(;s.parentElement&&a<o;)if(s=s.parentElement,a+=1,s.id===n)return!0;return!1},this.handleOutsideClick=i=>{var n;const{onRequestClose:o,onAddSnapshot:s,show:a}=this.props,{color:l}=this.state;if(a){if((n=this.node.current)!=null&&n.contains(i.target))return;this.setState({hexInputValue:l.toHexString()}),o&&o(),s&&s()}},this.onChange=i=>{const{onChange:n}=this.props;n({color:i.toRgbArray(),colorString:i.toRgbString()})},this.onHexValueChange=i=>{if(i.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){const n=new hl(i);this.onChange(n),this.setState({color:n,hue:n.toHsl().h})}this.setState({hexInputValue:i})},this.onAlphaChange=i=>{const{color:n}=this.state,o=n.setAlpha(i);this.onChange(o),this.setState({color:o,hexInputValue:o.toHexString()})},this.onHueChange=i=>{const{color:n}=this.state,{s:o,v:s,a}=n.toHsv(),l=new hl({h:i,s:o,v:s,a});this.onChange(l),this.setState({color:l,hexInputValue:l.toHexString(),hue:i})},this.onSaturationBrightnessChange=(i,n)=>{const{color:o,hue:s}=this.state,{a}=o.toHsv(),l=new hl({h:s,s:i,v:n,a});this.onChange(l),this.setState({color:l,hexInputValue:l.toHexString()})},this.onInputChange=i=>n=>{const{color:o}=this.state;if(n.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!n.trim()){const s=o.toRgb();s[i]=parseInt(n,10)||0;const a=new hl(s);this.onChange(a),this.setState({color:a,hexInputValue:a.toHexString(),hue:a.toHsl().h})}};const{color:t}=this.props,r=new hl(t);this.state={color:r,hue:r.toHsl().h,hexInputValue:r.toHexString()}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1),document.addEventListener("keydown",this.handleOutsideClick,!1)}componentDidUpdate(e){const{color:t,show:r}=this.props;if(r&&!e.show){const i=new hl(t);this.setState({color:i,hue:i.toHsl().h,hexInputValue:i.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1),document.removeEventListener("keydown",this.handleOutsideClick,!1)}render(){const{show:e,showArrow:t,direction:r,arrowOffset:i,topOffset:n,leftOffset:o,labelHex:s,labelR:a,labelG:l,labelB:c,labelSliderHue:h,labelSliderOpacity:f}=this.props,{color:d,hexInputValue:p,hue:v}=this.state,{r:g,g:m,b:y}=d.toRgb(),_=d.clone().setAlpha(1).toRgbString(),b=d.clone().setAlpha(0).toRgbString();return u.createElement("div",{ref:this.node},u.createElement(nie,{show:e,direction:r,leftOffset:o,topOffset:n},u.createElement(Fz,{direction:r},t&&u.createElement(Bre,{direction:r,arrowOffset:i}),u.createElement(iie,{color:d,hue:v,onChange:this.onSaturationBrightnessChange}),u.createElement(ce.Spacer,{count:2}),u.createElement(ce.Input.Label,{label:h}),u.createElement(oie,{hue:v,onChange:this.onHueChange}),u.createElement(ce.Spacer,{count:2}),u.createElement(ce.Input.Label,{label:f}),u.createElement(sie,{color:d,opaqueColor:_,transparentColor:b,onChange:this.onAlphaChange}),u.createElement(aie,null,u.createElement(Vre,{value:p,label:s,onChange:this.onHexValueChange}),u.createElement(lie,null,u.createElement(tk,{value:g,label:a,onChange:this.onInputChange("r")}),u.createElement(tk,{value:m,label:l,onChange:this.onInputChange("g")}),u.createElement(tk,{value:y,label:c,onChange:this.onInputChange("b")}))))))}};Oz.defaultProps={direction:"bottom",showArrow:!0},Fz.defaultProps={theme:pc};var cie=z.div`
  display: flex;
  flex-wrap: wrap;
  position: relative;
`,Mz=class extends u.Component{constructor(e){super(e),this.containerRef=null,this.onClick=r=>i=>{const{onAddSnapshot:n,config:o,onChange:s,colorPickerDirection:a,rect:l}=this.props,{activeIdentifier:c,showColorPicker:h,colorList:f}=this.state,d=f.find(p=>p.identifier===r);if(c===d.identifier&&!h){const{left:p,width:v,top:g,height:m}=i.currentTarget.getBoundingClientRect(),{left:y,top:_}=this.containerRef.current.getBoundingClientRect(),{colorPicker:b}=o.measurements.color,w=b.arrow.width/2;let S=p-y+v/2-2,C=a==="bottom"?g-_+m+w:g-_-w,D=-24;const E=b.width-b.arrow.width-12;S>E&&(D+=S-E,S-=D);let I=!0;if(a==="bottom"&&l){const M=l.height,k=l.top,R=g-k,$=M-(R+m),H=o.measurements.color.colorPicker.height+w;$<H&&(C=$-H),R+C<R+m/2&&(C+=w,I=!1)}this.setState({showColorPicker:!0,showColorPickerArrow:I,arrowOffset:S,topOffset:C,leftOffset:D})}else h?this.setState({showColorPicker:!1}):(s(d.color),this.setState({activeIdentifier:r}),n&&n())},this.onChange=({color:r,colorString:i})=>{const{onChange:n}=this.props,{activeIdentifier:o,colorList:s}=this.state,a=s.findIndex(l=>l.identifier===o);if(a!==-1){const l=[...s];l[a]={identifier:s[a].identifier,colorString:i,color:r},this.setState({colorList:l})}n(r)},this.onChangeColorPicker=({color:r,colorString:i})=>{this.onChange({color:[r[0]/255,r[1]/255,r[2]/255,r[3]],colorString:i})},this.closeColorPicker=()=>{this.setState({showColorPicker:!1})},this.getColorPicker=()=>{const{activeColor:r,labelsColor:i,colorPickerDirection:n,onAddSnapshot:o}=this.props,{showColorPicker:s,showColorPickerArrow:a,arrowOffset:l,leftOffset:c,topOffset:h}=this.state;return u.createElement(Oz,{color:it(r),show:s,showArrow:a,direction:n,arrowOffset:l,leftOffset:c,topOffset:h,labelHex:i.hex,labelR:i.r,labelG:i.g,labelB:i.b,labelSliderOpacity:i.sliderOpacity,labelSliderHue:i.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:o})};const{colors:t}=this.props;this.containerRef=u.createRef(),this.state={activeIdentifier:"",activeSprite:"",colorList:[...t],showColorPicker:!1,showColorPickerArrow:!1,arrowOffset:0,leftOffset:0,topOffset:0}}static getDerivedStateFromProps({activeSprite:e,activeColor:t},{activeSprite:r,colorList:i}){if(e!==r||!e){const n=Dp(it(t)),o=i.find(({colorString:s})=>s===n);return{activeSprite:e,activeIdentifier:o?o.identifier:""}}return null}render(){const{tool:e,isDisabled:t,custom:r,config:i}=this.props,{activeIdentifier:n,colorList:o}=this.state,s=r.getColorItem(),a=i.assetProvider.getPath("controls","/tiled-background.png"),l=o.map(c=>s?u.createElement(s,{tool:e,key:`${c.colorString}-item-${c.identifier}`,isActive:c.identifier===n,isDisabled:t,onClick:this.onClick(c.identifier),color:c.colorString,label:c.identifier,tiledBackgroundUrl:a}):null);return u.createElement(cie,{"data-test":Le.ColorList,ref:this.containerRef},l,this.getColorPicker())}};Mz.defaultProps={colorPickerDirection:"bottom",isDisabled:!1};var uie=vt("config","custom")(Q(Mz)),Zn=e=>u.createElement(qP.Consumer,null,({rect:t})=>u.createElement(uie,ge(L({},e),{rect:t}))),hie=ni(i_()),die=z(ct.Controls.Container)`
  cursor: none;
`,fie=z.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
  color: ${e=>e.theme.foreground};
`,pie=class extends u.Component{constructor(e){super(e),this.INITIAL_POSITION={x:void 0,y:void 0},this.state=ge(L({},this.INITIAL_POSITION),{isDrawing:!1}),this.containerElementRef=null,this.getCursorCoordinates=t=>{let r=0,i=0;if(t.type.indexOf("touch")!==-1){const a=t;if(!a.touches.length)return ge(L({},this.INITIAL_POSITION),{height:0,width:0});r=a.touches[0].clientX,i=a.touches[0].clientY}else{const a=t;r=a.clientX,i=a.clientY}const n=this.containerElementRef.current.getBoundingClientRect(),o=r-n.left,s=i-n.top;return{x:o,y:s,height:n.height,width:n.width}},this.draw=t=>{t.preventDefault(),t.stopPropagation(),this.touchDraw(t)},this.touchDraw=t=>{const{x:r,y:i}=this.getCursorCoordinates(t);r!==void 0&&i!==void 0&&(this.setState({x:r,y:i}),this.state.isDrawing&&this.brushTool.strokePosition({x:r,y:i}))},this.touchStart=()=>{this.brushTool.clickableCanvas(!1),this.setState({isDrawing:!0}),this.brushTool.beginStroke()},this.start=t=>{t.button===0?this.touchStart():this.stop(t)},this.stop=t=>{this.state.isDrawing&&(t.preventDefault(),t.stopPropagation(),this.setState({isDrawing:!1}),this.brushTool.endStroke(),this.brushTool.clickableCanvas(!0))},this.setInitialPosition=()=>{this.setState(L({},this.INITIAL_POSITION))},this.mouseOut=t=>{const{config:r}=this.props;t.preventDefault(),t.stopPropagation();const i=this.brushTool.sizeOnScreenSpace/2,{x:n,y:o,height:s,width:a}=this.getCursorCoordinates(t);n&&o&&(n<0||o<0||n>a-i||o>s-i||o<r.measurements.mainCanvasActionBar.height)&&this.setInitialPosition()},this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();const{x:r,y:i}=this.state;r&&i&&this.setInitialPosition()},this.getCursor=()=>{const{x:t,y:r}=this.state;if(t&&r){const i=Dp(this.brushTool.color),n=`${this.brushTool.sizeOnScreenSpace}px`,o={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:i,height:n,width:n};return u.createElement(fie,{style:o,"data-test":Le.Cursor})}return null},this.containerElementRef=u.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get brushTool(){return this.props.brushTool}render(){return u.createElement(die,{ref:this.containerElementRef,"data-test":Le.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}},mie=vt("brushTool","config")(Q(pie)),Xs=(e,t)=>e!==void 0&&t!==void 0&&!Number.isNaN(e)&&!Number.isNaN(t),ik=z(ct.Controls.Knob)`
  margin-top: -${e=>e.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${e=>e.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`,{Container:gie}=ct.Controls,vie=class extends u.Component{constructor(e){super(e),this.start=(t,{x:r,y:i})=>{Xs(r,i)&&this.focusTool.setStart({x:r,y:i})},this.end=(t,{x:r,y:i})=>{Xs(r,i)&&this.focusTool.setEnd({x:r,y:i})},this.onKnob1DragStart=(t,r)=>{this.focusTool.clickableCanvas(!1),this.start(t,r)},this.onKnob1DragStop=(t,r)=>{this.addSnapshot(r,this.historyLocale.focusPosition),this.start(t,r),this.focusTool.clickableCanvas(!0)},this.onKnob2DragStart=(t,r)=>{this.focusTool.clickableCanvas(!1),this.end(t,r)},this.onKnob2DragStop=(t,r)=>{this.addSnapshot(r,this.historyLocale.focusPosition),this.end(t,r),this.focusTool.clickableCanvas(!0)},this.addSnapshot=({x:t,y:r},i)=>{Xs(t,r)&&this.focusTool.toolSnapshot(i)},this.getLine=()=>{const{height:t,width:r}=this.props.canvas.canvasSize,i=this.focusTool.startOnPreview,n=this.focusTool.endOnPreview;return u.createElement("svg",{focusable:"false",height:t,width:r},u.createElement("line",{x1:i.x,y1:i.y,x2:n.x,y2:n.y,strokeWidth:"2",stroke:"currentColor"}))},this.startRef=u.createRef(),this.endRef=u.createRef()}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return u.createElement(gie,null,u.createElement(ct.Controls.Line,null,this.getLine()),u.createElement(ce.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},u.createElement(ik,{ref:this.startRef})),u.createElement(ce.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},u.createElement(ik,{ref:this.endRef})))}};ik.defaultProps={theme:pc};var yie=vt("canvas","focusTool")(Q(vie)),nk=class extends u.Component{constructor(e){super(e),this.getKnobPosition=()=>{const{focusTool:t}=this.props,{origin:r,size:i}=t,n=i/2,o=Math.PI/2+t.rotation;return{x:r.x+n*Math.cos(o),y:r.y+n*Math.sin(o)}},this.onArea=(t,{x:r,y:i})=>{const{editor:n}=this.props,o=n.configStore.measurements.canvasControls.knob.size;if(Xs(r,i)){const{canvas:s,focusTool:a}=this.props,{size:l,mirroredAreaWidth:c}=a,h=r+c/2,f=i+l/2,d=new G(this.getKnobPosition()),v=new G({x:r,y:i}).subtract(new G(this.areaPosition)),g=d.add(v);g.x>o&&g.x<s.canvasSize.width-o&&g.y>o&&g.y<s.canvasSize.height-o&&a.setOrigin({x:h,y:f})}},this.onKnob=(t,{x:r,y:i})=>{const{focusTool:n}=this.props;if(Xs(r,i)){n.clickableCanvas(!1);const o=new G(n.origin),s=new G(r,i),a=o.subtract(s),l=a.magnitude,c=Math.PI/2+Math.atan2(a.y,a.x);n.setSize(l*2),n.setRotation(c)}},this.onAreaDragStop=(t,r)=>{const{focusTool:i}=this.props;this.addSnapshot(r,i.locale.history.focusPosition),this.onArea(t,r),i.clickableCanvas(!0)},this.onKnobDragStop=(t,r)=>{const{focusTool:i}=this.props;this.addSnapshot(r,i.locale.history.focusSize),this.onKnob(t,r),i.clickableCanvas(!0)},this.addSnapshot=({x:t,y:r},i)=>{const{focusTool:n}=this.props;Xs(t,r)&&n.toolSnapshot(i)},this.knobRef=u.createRef(),this.areaRef=u.createRef()}get areaPosition(){const{focusTool:e}=this.props,{origin:t,size:r,mirroredAreaWidth:i}=e;return{x:t.x-i/2,y:t.y-r/2}}render(){const{x:e,y:t}=this.areaPosition,{focusTool:r}=this.props;return u.createElement(ct.Controls.Container,null,u.createElement(ce.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},u.createElement(ct.Controls.Knob,{ref:this.knobRef})),u.createElement(ce.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:e,y:t},rotation:r.rotation},u.createElement(ct.Controls.Area,{ref:this.areaRef,"data-test":Le.Focus,height:r.size,width:r.mirroredAreaWidth})))}};nk=x([vt("focusTool","canvas","editor"),Q],nk);var ok=class extends u.Component{constructor(e){super(e),this.state={knobAngle:2.35},this.onCircle=(t,{x:r,y:i})=>{if(Xs(r,i)){const{focusTool:n}=this.props;n.setCenter({x:r+n.radius,y:i+n.radius})}},this.onKnob=(t,{x:r,y:i})=>{if(Xs(r,i)){const{focusTool:n}=this.props,o=new G(r,i),a=new G(n.center.x,n.center.y).subtract(o),l=a.magnitude,c=-Math.atan2(a.y,a.x);this.setState({knobAngle:c}),n.setRadius(l)}},this.onCircleDragStart=(t,r)=>{const{focusTool:i}=this.props;i.clickableCanvas(!1),this.onCircle(t,r)},this.onCircleDragStop=(t,r)=>{const{focusTool:i}=this.props;this.addSnapshot(r,i.locale.history.focusPosition),this.onCircle(t,r),i.clickableCanvas(!0)},this.onKnobDragStart=(t,r)=>{const{focusTool:i}=this.props;i.clickableCanvas(!1),this.onKnob(t,r)},this.onKnobDragStop=(t,r)=>{const{focusTool:i}=this.props;this.addSnapshot(r,i.locale.history.focusSize),this.onKnob(t,r),i.clickableCanvas(!0)},this.addSnapshot=({x:t,y:r},i)=>{const{focusTool:n}=this.props;Xs(t,r)&&n.toolSnapshot(i)},this.knobRef=u.createRef(),this.circleRef=u.createRef()}componentDidMount(){this.setState({knobAngle:2.35})}render(){const{focusTool:e}=this.props,{knobAngle:t}=this.state,{center:r,radius:i}=e,n={x:r.x-i,y:r.y-i},o=Math.PI-t,s={x:r.x+i*Math.cos(o),y:r.y+i*Math.sin(o)};return u.createElement(ct.Controls.Container,null,u.createElement(ce.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:s},u.createElement(ct.Controls.Knob,{ref:this.knobRef})),u.createElement(ce.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:n},u.createElement(ct.Controls.Circle,{ref:this.circleRef,"data-test":Le.Focus,radius:i})))}};ok=x([vt("focusTool","canvas"),Q],ok);var _ie=Q(()=>{const{focusTool:e}=oe(),{state:t}=e,i=(()=>{switch(t.identifier){case"linear":return yie;case"radial":return ok;case"mirrored":return nk;default:return null}})();return e.isOptionSelected&&i?u.createElement(i,null):null}),bie=({customButtonKey:e,onClick:t,label:r,icon:i,disabled:n})=>{const{custom:o}=oe(),s=o.getButton(e);return s?u.createElement(s,{onClick:t,label:r,ariaLabel:r,icon:i,isDisabled:n}):null},sk=({availableKeys:e,actions:t})=>u.createElement(ct.Bar.ButtonGroup,{onClick:KW},e.map(r=>{const i=t[r];return i?u.createElement(bie,L({key:r},i)):null})),xie=({sprite:e,stickerTool:t})=>{const r=t.locale.canvasActions,i={bringtofront:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:r.buttonBringToFront,icon:u.createElement(tr.bringToFront,null),disabled:e.isOnTop},flip:{customButtonKey:"canvasActionFlip",onClick:t.flipHorizontally,label:r.buttonFlipHorizontal,icon:u.createElement(tr.flipHorizontal,null)},duplicate:{customButtonKey:"canvasActionDuplicate",onClick:()=>t.duplicate(),label:r.buttonDuplicate,icon:u.createElement(tr.duplicate,null)},delete:{customButtonKey:"canvasActionDelete",onClick:t.delete,label:r.buttonDelete,icon:u.createElement(tr.delete,null)}};return t.isStickerSelected?u.createElement(sk,{availableKeys:t.config.canvasActions,actions:i}):null},wie=vt("sprite","stickerTool")(Q(xie)),Sie=({textTool:e,sprite:t})=>{const r=e.locale.canvasActions,i={edit:{customButtonKey:"canvasActionEdit",onClick:()=>e.setEditMode(!0),label:r.buttonEdit,icon:u.createElement(tr.edit,null)},bringtofront:{customButtonKey:"canvasActionBringToFront",onClick:e.bringToFront,label:r.buttonBringToFront,icon:u.createElement(tr.bringToFront,null),disabled:t.isOnTop},duplicate:{customButtonKey:"canvasActionDuplicate",onClick:e.duplicate,label:r.buttonDuplicate,icon:u.createElement(tr.duplicate,null)},delete:{customButtonKey:"canvasActionDelete",onClick:e.delete,label:r.buttonDelete,icon:u.createElement(tr.delete,null)}};return t.isSpriteText?u.createElement(sk,{availableKeys:e.config.canvasActions,actions:i}):null},Cie=vt("textTool","sprite")(Q(Sie)),kie=({sprite:e,textDesignTool:t})=>{const r=t.locale.canvasActions,i={edit:{customButtonKey:"canvasActionEdit",onClick:()=>t.setEditMode(!0),label:r.buttonEdit,icon:u.createElement(tr.edit,null)},bringtofront:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:r.buttonBringToFront,icon:u.createElement(tr.bringToFront,null),disabled:e.isOnTop},invert:{customButtonKey:"canvasActionInvert",onClick:t.invertBackground,label:r.buttonInvert,icon:u.createElement(tr.flipHorizontal,null)},duplicate:{customButtonKey:"canvasActionDuplicate",onClick:t.duplicate,label:r.buttonDuplicate,icon:u.createElement(tr.duplicate,null)},delete:{customButtonKey:"canvasActionDelete",onClick:()=>t.delete(),label:r.buttonDelete,icon:u.createElement(tr.delete,null)}};return t.isTextDesignSelected?u.createElement(sk,{availableKeys:t.config.canvasActions,actions:i}):null},Tie=vt("sprite","textDesignTool")(Q(kie)),ak=class extends u.Component{constructor(e){super(e),this.actionsRef=null,this.spriteControlPosition=()=>{const{config:t,sprite:r,canvas:{canvasSize:i}}=this.props,{controlPadding:n,controlOffset:o}=t.measurements.canvasControls.sprite,{x:s,y:a}=r.position,{height:l,width:c}=r.currentSprite.size,h=r.rotationWRTOutputRotation,f=this.actionsRef.current;let d=new G(0,0);if(f){const g=f.getBoundingClientRect();d=new G(g.width/2+o,g.height+o)}const p=Math.abs(c*Math.sin(h))+Math.abs(l*Math.cos(h)),v=new G(s,a-p/2-n-o).clamp(d,new G(i.width,i.height).subtract(d));return{left:v.x,top:v.y}},this.getSpriteControls=()=>{const{sprite:t}=this.props;switch(t.tool){case"text":return u.createElement(Cie,null);case"textdesign":return u.createElement(Tie,null);case"sticker":return u.createElement(wie,null);default:return null}},this.actionsRef=u.createRef(),this.state={isMounted:!1}}componentDidMount(){this.setState({isMounted:!0})}render(){const{sprite:e}=this.props,{isMounted:t}=this.state,r=!e.isDragMode&&!e.isEditMode,i=this.spriteControlPosition();return u.createElement(ct.Controls.SpriteActionsWrapper,{"data-test":Le.SpriteActions,ref:this.actionsRef,show:r&&t,style:L({},i)},this.getSpriteControls())}};ak=x([vt("sprite","config","editor","canvas"),Q],ak);var{Corner:B_}=ct.Controls,{Draggable:L_}=ce,lk=new G(0,0),ck=new G(0,0),Eie=Q(()=>{const e=K.exports.useRef(null),t=K.exports.useRef(null),r=K.exports.useRef(null),i=K.exports.useRef(null),{config:n,sprite:o}=oe(),{leftTopPosition:s,leftBottomPosition:a,rightTopPosition:l,rightBottomPosition:c}=o,{borderWidth:h}=n.measurements.canvasControls.corner,f=({clientX:g,clientY:m})=>{g!==void 0&&m!==void 0&&o.onCornerDrag(ck.subtract(lk.subtract(new G(g,m))))},d=g=>{switch(g){case"leftTop":return s;case"leftBottom":return a;case"rightTop":return l;case"rightBottom":return c;default:return s}},p=(g,m)=>{const{clientX:y,clientY:_}=g;lk=new G(y,_),ck=new G(d(m)),o.clickableCanvas(!1),o.setDragMode(!0)},v=()=>{o.clickableCanvas(!0),o.setDragMode(!1),o.spriteSnapshot("size"),lk=new G(0,0),ck=new G(0,0)};return u.createElement(u.Fragment,null,u.createElement(L_,{nodeRef:e,onStop:v,onDrag:f,onStart:g=>p(g,"leftTop")},u.createElement(B_,{ref:e,"data-test":Le.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:h})),u.createElement(L_,{nodeRef:r,onStop:v,onDrag:f,onStart:g=>p(g,"leftBottom")},u.createElement(B_,{ref:r,"data-test":Le.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:h})),u.createElement(L_,{nodeRef:t,onStop:v,onDrag:f,onStart:g=>p(g,"rightTop")},u.createElement(B_,{ref:t,"data-test":Le.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:h})),u.createElement(L_,{nodeRef:i,onStop:v,onDrag:f,onStart:g=>p(g,"rightBottom")},u.createElement(B_,{ref:i,"data-test":Le.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:h})))}),Die=z.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,Iie=z.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,uk=new G(0,0),hk=new G(0,0),Rie=({sprite:e,config:t})=>{const r=K.exports.useRef(null),i=K.exports.useRef(null),n=e.leftMidPosition,o=e.rightMidPosition,s=t.assetProvider.getPath("controls","/arrow-left.png"),a=t.assetProvider.getPath("controls","/arrow-right.png"),l=(f,d)=>{e.setDragMode(!0),e.clickableCanvas(!1);const{clientX:p,clientY:v}=f;uk=new G(p,v),hk=new G(d==="left"?n:o)},c=()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot("edit",e.textDesignLocale.padding),uk=new G(0,0),hk=new G(0,0)},h=({clientX:f,clientY:d})=>{if(f!==void 0&&d!==void 0){const p=hk.subtract(uk.subtract(new G(f,d)));e.onPaddingDrag(p)}};return u.createElement(u.Fragment,null,u.createElement(ce.Draggable,{nodeRef:r,onStart:f=>l(f,"left"),onDrag:h,onStop:c},u.createElement(Die,{ref:r,src:s})),u.createElement(ce.Draggable,{nodeRef:i,onStart:f=>l(f,"right"),onDrag:h,onStop:c},u.createElement(Iie,{ref:i,src:a})))},Fie=vt("sprite","config")(Q(Rie)),Pz=z(ct.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${e=>e.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${e=>e.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`,dk=new G(0,0),fk=new G(0,0),Oie=({config:e,sprite:t,snapping:r})=>{const i=K.exports.useRef(null),n=t.rightBottomHandlePosition,o=t.leftBottomHandlePosition,s={x:(n.x+o.x)/2,y:(n.y+o.y)/2},a=({clientX:d,clientY:p})=>{dk=new G(d,p),fk=new G(s),t.setDragMode(!0),t.clickableCanvas(!1)},l=()=>{t.clickableCanvas(!0),t.setDragMode(!1),t.spriteSnapshot("rotation"),r.hideRotationGuides(),dk=new G(0,0),fk=new G(0,0)},c=({clientX:d,clientY:p})=>{if(d!==void 0&&p!==void 0){const v=fk.subtract(dk.subtract(new G(d,p))),g=t.position,m=new G(g.x,g.y),y=v.subtract(m),_=Math.atan2(y.y,y.x)-Math.PI/2,b=r.snapToRotation(_,y,t.currentRect);t.setRotation(b)}},h=d=>{c(d)},f=e.assetProvider.getPath("controls",`/${qW()?"rotate-windows":"rotate-osx"}.png`);return u.createElement(ce.Draggable,{nodeRef:i,onStart:a,onDrag:h,onStop:l},u.createElement(Pz,{ref:i,url:f}))};Pz.defaultProps={theme:pc};var Mie=vt("sprite","snapping","config")(Q(Oie)),Az=z(ct.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`,zz=z(Az)`
  left: -3px;
  top: calc(
    50% - ${e=>e.theme.measurements.canvasControls.width.size/2}px
  );
`,$z=z(Az)`
  right: -3px;
  top: calc(
    50% - ${e=>e.theme.measurements.canvasControls.width.size/2}px
  );
`,pk=new G(0,0),mk=new G(0,0),Pie=({sprite:e,textTool:t})=>{const r=K.exports.useRef(null),i=K.exports.useRef(null),n=e.leftMidPadPosition,o=e.rightMidPadPosition,s=(c,h)=>{e.setDragMode(!0),e.clickableCanvas(!1);const{clientX:f,clientY:d}=c;pk=new G(f,d),mk=new G(h==="left"?n:o)},a=()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot("edit",e.textLocale.width),t.updateDefaultFontSize(),pk=new G(0,0),mk=new G(0,0)},l=({clientX:c,clientY:h})=>{if(c!==void 0&&h!==void 0){const f=mk.subtract(pk.subtract(new G(c,h)));e.onWidthDrag(f)}};return u.createElement(u.Fragment,null,u.createElement(ce.Draggable,{nodeRef:r,onStart:c=>s(c,"left"),onDrag:l,onStop:a},u.createElement(zz,{ref:r})),u.createElement(ce.Draggable,{nodeRef:i,onStart:c=>s(c,"right"),onDrag:l,onStop:a},u.createElement($z,{ref:i})))};zz.defaultProps={theme:pc},$z.defaultProps={theme:pc};var Aie=vt("sprite","textTool")(Q(Pie)),{Draggable:zie}=ce,U_=new G(0,0),gk=new G(0,0),$ie=Q(()=>{const e=K.exports.useRef(),{active:t,config:r,snapping:i,sprite:n}=oe(),o=({clientX:y,clientY:_})=>{const b=gk.subtract(U_.subtract(new G(y,_))),{x:w,y:S}=i.snapToPosition({x:b.x,y:b.y},n.currentRect);n.setPosition({x:w,y:S})},s=y=>{const{clientX:_,clientY:b}=y;U_=new G(_,b),gk=new G(n.position),n.setDragMode(!0),i.updateGuides()},a=y=>{const{clientX:_,clientY:b}=y,{x:w,y:S}=U_;U_=new G(0,0),gk=new G(0,0),n.setDragMode(!1),w!==_&&S!==b&&n.spriteSnapshot("position"),i.hidePositionGuides()},l=y=>{y.preventDefault(),y.stopPropagation(),n.setEditMode(!0)};if(!(()=>{const y=t.tool,_=n.tool;return n.isSpriteSelected&&y===_})())return null;const{isSpriteText:h}=n,f=n.isSpriteTextDesign&&n.textDesignToolStore.isInverted,{height:d,width:p}=n.size,v=n.spritePosition,g=n.rotationWRTOutputRotation,{controlPadding:m}=r.measurements.canvasControls.sprite;return u.createElement(ct.Controls.Container,null,u.createElement(zie,{nodeRef:e,onStart:s,onDrag:o,onStop:a,rotation:g,position:v},u.createElement(ct.Controls.Sprite,{ref:e,"data-test":Le.Sprite,onDoubleClick:l,height:d,width:p},h&&u.createElement(Aie,null)||null,f&&u.createElement(Fie,null)||null,u.createElement(Eie,null),u.createElement(ct.Controls.RotateHandle,{x:p/2+m/2},u.createElement(Mie,null)))),u.createElement(ak,null))}),{GridLine:N_}=ct.Crop,Bie=ct.Crop.Mask,{Draggable:$p}=ce,dl=3,Lie=z(zp)`
  left: ${dl}px;
  top: ${dl}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`,Uie=z(zp)(e=>{const{desktop:t}=e.theme.measurements.canvasControls.corner.touchable,r=t/4-e.borderWidth;return ne`
    left: ${r-t}px;
    top: ${dl}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `}),Nie=z(zp)(e=>{const{desktop:t}=e.theme.measurements.canvasControls.corner.touchable,r=t/4-e.borderWidth;return ne`
    left: ${r-t}px;
    top: ${r-t}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `}),jie=z(zp)(e=>{const{desktop:t}=e.theme.measurements.canvasControls.corner.touchable,r=t/4-e.borderWidth;return ne`
    top: ${r-t}px;
    left: ${dl}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `}),Hie=({transformTool:e})=>{const t=K.exports.useRef(null),r=K.exports.useRef(null),i=K.exports.useRef(null),n=K.exports.useRef(null),o=K.exports.useRef(null),{leftTopRespectFlip:s,leftBottomRespectFlip:a,rightTopRespectFlip:l,rightBottomRespectFlip:c}=e,{height:h,width:f}=e.cropMaskSize,{maxCropMaskSize:d,defaultCropMaskPosition:p}=e,{isFlippedHorizontal:v,isFlippedVertical:g}=e,m=d.width/2,y=d.height/2,_=ge(L({},d),{left:p.x,top:p.y}),b={height:h,width:f},w=e.isDragMode?{transition:"unset"}:{},S=fe=>v?m*2-fe:fe,C=fe=>g?y*2-fe:fe,D=(fe,te,X)=>{const le=S(fe),de=C(te);switch(Zr.getFlippedEdgeIndex(X,v,g)){case 0:e.onLeftTop({x:le,y:de});break;case 1:e.onLeftBottom({x:le,y:de});break;case 2:e.onRightTop({x:le,y:de});break;case 3:e.onRightBottom({x:le,y:de});break}},E=(fe,te,X)=>{e.setDragMode(!0),e.clickableCanvas(!1),D(fe,te,X)},I=(fe,te,X)=>{D(fe,te,X)},M=(fe,te,X)=>{e.setDragMode(!1),D(fe,te,X),e.clickableCanvas(!0),e.trackChanges()},k=(fe,{x:te,y:X})=>{E(te,X,0)},R=(fe,{x:te,y:X})=>{I(te,X,0)},$=(fe,{x:te,y:X})=>{M(te,X,0)},H=(fe,{x:te,y:X})=>{E(te,X,1)},j=(fe,{x:te,y:X})=>{I(te,X,1)},V=(fe,{x:te,y:X})=>{M(te,X,1)},J=(fe,{x:te,y:X})=>{E(te,X,2)},ae=(fe,{x:te,y:X})=>{I(te,X,2)},U=(fe,{x:te,y:X})=>{M(te,X,2)},N=(fe,{x:te,y:X})=>{E(te,X,3)},B=(fe,{x:te,y:X})=>{I(te,X,3)},W=(fe,{x:te,y:X})=>{M(te,X,3)},q=(fe,te)=>{const X=S(fe+f/2)-f/2,le=C(te+h/2)-h/2;e.changePosition({x:X,y:le})},xe=(fe,{x:te,y:X})=>{e.setDragMode(!0),e.clickableCanvas(!1),q(te,X)},Te=(fe,{x:te,y:X})=>{q(te,X)},Se=(fe,{x:te,y:X})=>{e.setDragMode(!1),q(te,X),e.clickableCanvas(!0),e.trackChanges()};return u.createElement("div",{style:ge(L({},_),{position:"absolute"})},u.createElement($p,{nodeRef:o,bounds:"parent",position:s,onStart:xe,onDrag:Te,onStop:Se},u.createElement(Bie,{ref:o,style:L(L({},b),w)})),u.createElement(N_,{style:L({left:s.x+f/3,top:s.y,height:h,width:1},w)}),u.createElement(N_,{style:L({left:s.x+f/3*2,top:s.y,height:h,width:1},w)}),u.createElement(N_,{style:L({left:s.x,top:s.y+h/3,height:1,width:f},w)}),u.createElement(N_,{style:L({left:s.x,top:s.y+h/3*2,height:1,width:f},w)}),u.createElement($p,{nodeRef:t,bounds:"parent",position:L({},s),onStart:k,onDrag:R,onStop:$},u.createElement(Lie,{ref:t,"data-test":Le.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:dl,style:w})),u.createElement($p,{nodeRef:i,bounds:"parent",position:a,onStart:H,onDrag:j,onStop:V},u.createElement(jie,{ref:i,"data-test":Le.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:dl,style:w})),u.createElement($p,{nodeRef:r,bounds:"parent",position:l,onStart:J,onDrag:ae,onStop:U},u.createElement(Uie,{ref:r,"data-test":Le.CropTopRight,vertical:"top",horizontal:"right",borderWidth:dl,style:w})),u.createElement($p,{nodeRef:n,bounds:"parent",position:c,onStart:N,onDrag:B,onStop:W},u.createElement(Nie,{ref:n,"data-test":Le.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:dl,style:w})))},Wie=vt("transformTool")(Q(Hie)),Bz=z.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${e=>e.isVisible&&ne`
      display: inline-block;
    `}

  svg {
    color: ${e=>e.theme.foreground};
  }
`,Vie=z.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`,Gie=z.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${e=>e.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${e=>e.isVisible&&ne`
      display: inline-block;
    `}
`,qie=z.div`
  transform: translate(0, 0) !important;
`,Xie=class extends u.Component{constructor(e){super(e),this.SLIDER_WIDTH=213,this.MAX_ROTATION=45,this.DEGREES_PER_PIXEL=this.MAX_ROTATION*2/this.SLIDER_WIDTH,this.drag=(t,{x:r})=>{const{flipHorizontally:i,flipVertically:n}=this.transformTool.rotateFlipState;i!==n&&(r*=-1);const o=this.transformTool.defaultAngle-r*this.DEGREES_PER_PIXEL,s=Math.min(this.MAX_ROTATION,Math.max(o,this.MAX_ROTATION*-1));this.transformTool.setRotation(parseInt(`${s}`,10))},this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees),this.transformTool.trackChanges()},this.rotateRef=u.createRef()}get transformTool(){return this.props.transformTool}render(){const{config:e,canvasWidth:t,transformTool:r}=this.props,{flipHorizontally:i,flipVertically:n}=this.transformTool.rotateFlipState,o=!e.isLayoutAdvanced||e.isLayoutAdvanced&&t>e.measurements.canvas.transform.minSliderWidth,s=!e.isLayoutAdvanced||e.isLayoutAdvanced&&t>e.measurements.canvas.transform.minValueWidth,a=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,l=i===n?a*-1:a,c=i!==n?r.rotationInDegrees*-1:r.rotationInDegrees;return u.createElement(Vie,{"data-test":Le.RotateSlider},u.createElement(ce.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!o},u.createElement(qie,{ref:this.rotateRef},u.createElement(Bz,{isVisible:o},u.createElement(tr.dots,{width:90,height:15,x:l})),u.createElement(Gie,{isVisible:s},c,"\xB0"),u.createElement(Bz,{isVisible:o},u.createElement(tr.dots,{width:90,height:15,x:l})))))}},Yie=vt("transformTool","config")(Q(Xie)),Qie=z(tr.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`,Kie=z(tr.rotate)`
  height: 16px;
  width: 16px;
`,Zie=z(tr.flipHorizontal)`
  height: 16px;
  width: 16px;
`,Jie=z(tr.flipVertical)`
  height: 16px;
  width: 16px;
`,ene=z.div`
  display: inline-flex;
  transform: scale(0.9);

  svg {
    color: ${e=>e.theme.foreground};
  }
`,tne=({transformTool:e,config:t,custom:r,canvas:i})=>{const n=e.locale.transformActions,o=i.canvasSize.width,s=!t.isLayoutAdvanced||t.isLayoutAdvanced&&o>t.measurements.canvas.transform.minFlipWidth,a=({customButtonKey:p,onClick:v,label:g,icon:m})=>{const y=r.getButton(p);return u.createElement(y,{key:g,onClick:v,label:g,ariaLabel:g,icon:m,style:{margin:"0 5px"}})},l=a({label:n.buttonFlipHorizontal,icon:u.createElement(Zie,null),onClick:()=>{e.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),c=a({label:n.buttonFlipVertical,icon:u.createElement(Jie,null),onClick:()=>{e.flipVertically()},customButtonKey:"transformActionFlipVertical"}),h=a({label:n.buttonRotateClockwise,icon:u.createElement(Qie,null),onClick:e.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),f=a({label:n.buttonRotateAntiClockwise,icon:u.createElement(Kie,null),onClick:e.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),d=t.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return u.createElement(ene,{style:d,"data-test":Le.FlipRotateControls},e.config.enableFlip&&s&&l||null,e.config.enableFlip&&s&&c||null,e.config.enableRotation&&u.createElement(Yie,{canvasWidth:o})||null,e.config.enableRotation&&f||null,e.config.enableRotation&&h||null)},Lz=vt("transformTool","config","custom","canvas")(Q(tne)),rne=ct.Bar.Index,{Backdrop:j_}=ct.Crop,ine=({transformTool:e,canvas:t,config:r})=>{const{leftTopRespectFlip:i,leftBottomRespectFlip:n,rightTopRespectFlip:o}=e,{height:s}=e.cropMaskSize,{height:a,width:l}=t.canvasSize,{defaultCropMaskPosition:c}=e,h=e.isDragMode?{transition:"unset"}:{};return u.createElement(ct.Controls.Container,null,u.createElement(j_,{style:L({left:0,top:0,width:l,height:i.y+c.y},h)}),u.createElement(j_,{style:L({left:0,top:i.y+c.y,width:c.x+i.x,height:s},h)}),u.createElement(j_,{style:L({left:o.x+c.x,top:o.y+c.y,width:l-o.x-c.x,height:s},h)}),u.createElement(j_,{style:L({left:0,top:n.y+c.y,width:l,height:a-n.y-c.y+r.measurements.basicUIToolControlBar.controlsBarHeight},h)}),u.createElement(Wie,null),r.isLayoutAdvanced?u.createElement(rne,{bottom:!0},u.createElement(Lz,null)):null)},nne=vt("transformTool","canvas","config")(Q(ine)),one=z(ct.Controls.Container)`
  ${e=>e.activeCursor?ne`
          cursor: move;
        `:""}
  z-index: ${e=>e.theme.measurements.zIndex.canvas.crop.dragImage};
`,sne=class extends u.Component{constructor(e){super(e),this.INITIAL_POSITION={x:void 0,y:void 0},this.state=ge(L({},this.INITIAL_POSITION),{isDragging:!1}),this.containerRef=null,this.getCursorCoordinates=t=>{let r=0,i=0;if(t.type.indexOf("touch")!==-1){const a=t;if(!a.touches.length)return this.INITIAL_POSITION;r=a.touches[0].clientX,i=a.touches[0].clientY}else{const a=t;r=a.clientX,i=a.clientY}const n=this.containerRef.current.getBoundingClientRect(),o=r-n.left,s=i-n.top;return{x:o,y:s}},this.move=t=>{if(this.scale.canDrag){const{x:r,y:i}=this.getCursorCoordinates(t);if(r!==void 0&&i!==void 0&&this.state.isDragging){const n={x:this.state.x-r,y:this.state.y-i};this.scale.setOffset(n)}}},this.touchDrag=t=>{if(this.scale.canDrag){const{x:r,y:i}=this.getCursorCoordinates(t);r!==void 0&&i!==void 0&&this.setState({x:r,y:i,isDragging:!0})}},this.drag=t=>{t.preventDefault(),this.touchDrag(t)},this.stop=()=>{this.scale.canDrag&&(this.scale.savePosition(),this.setState(ge(L({},this.INITIAL_POSITION),{isDragging:!1})))},this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();const{x:r,y:i}=this.state;r&&i&&this.setState(ge(L({},this.INITIAL_POSITION),{isDragging:!1}))},this.containerRef=u.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get scale(){return this.props.scale}render(){return u.createElement(one,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}},ane=vt("scale")(Q(sne)),lne=Q(({children:e})=>{const t=K.exports.useRef(null),{active:r,sprite:i,canvas:n}=oe(),o=()=>{switch(r.tool){case"focus":return u.createElement(_ie,null);case"text":case"textdesign":case"sticker":return u.createElement($ie,null);case"brush":return u.createElement(mie,null);case"transform":return u.createElement(nne,null);default:return u.createElement(ct.Controls.Container,null,u.createElement(ane,null))}},s=c=>{if(c.preventDefault(),c.stopPropagation(),n!=null&&n.isCanvasClickable){let{clientX:h}=c,{clientY:f}=c;if(c.type.indexOf("touch")!==-1){const g=c;if(!g.touches.length)return;h=g.touches[0].clientX,f=g.touches[0].clientY}const d=t.current.getBoundingClientRect(),p=h-d.left,v=f-d.top;n.getContainersAtPreviewPoint({x:p,y:v})}},a=c=>{c.code==="Tab"&&i.selectLast()},{canvasSize:l}=n;return u.createElement(ct.Controls.Wrapper,{"aria-hidden":!0,ref:t,onClick:s,onKeyDown:a,height:l.height,width:l.width},e,o())}),cne=z.div`
  display: ${({isVisible:e})=>e?"block":"none"};
  position: absolute;
  z-index: ${e=>e.theme.measurements.zIndex.canvas.snappingGuide};
`,une=({isVisible:e,className:t})=>u.createElement(cne,{isVisible:e,className:t}),Uz=une,hne=z(Uz)`
  background: ${e=>e.theme.snapping.positionGuideColor};
  ${e=>e.direction==="horizontal"?ne`
        width: 100%;
        height: 2px;
        top: ${()=>e.position}px;
      `:ne`
      width: 2px;
      height: 100%;
      left: ${()=>e.position}px;
    `}
`,dne=z(Uz)`
  border: none;
  border-top: 2px dashed ${e=>e.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:e})=>e.x}px;
  top: ${({position:e})=>e.y}px;
  transform: rotate(${({rotation:e})=>e}rad);
  width: 200%;
`,fne=z.div`
  position: absolute;
  width: ${({width:e})=>e}px;
  height: ${({height:e})=>e}px;
  top: ${({top:e})=>e}px;
  left: ${({left:e})=>e}px;
  overflow: hidden;
`,pne=({snapping:e,editor:t})=>{const{width:r,height:i}=t.getPreviewSize(),{x:n,y:o}=e.previewTopLeftPosition,s=e.positionGuides.map(({direction:l,value:c,isVisible:h},f)=>u.createElement(hne,{key:`positionGuide-${f}`,direction:l,position:c,isVisible:h})),a=e.rotationGuides.find(({isVisible:l})=>l);return u.createElement(fne,{"data-test":Le.SnappingLine,width:r,height:i,left:n,top:o},s,u.createElement(dne,{key:"rotationGuide",rotation:a?a.value:0,position:a?a.position:{x:0,y:0},isVisible:!!a}))},mne=vt("snapping","editor")(Q(pne)),gne=z.img`
  z-index: 5;
  position: absolute;
  width: 100px;
  bottom: 30px;
  right: 30px;
`,vne=()=>u.createElement(gne,{alt:"watermark","data-test":Le.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="}),vk=Q(function(){const t=K.exports.useRef(null),{canvas:r,config:i}=oe(),n=(a=!0)=>{if(t!=null&&t.current){const{clientWidth:l,clientHeight:c}=t.current,h=ql();t.current.width=l*h,t.current.height=c*h,r.saveDimensions({width:l,height:c,render:a})}},o=new fC((0,hie.default)(()=>n(),100,{trailing:!0}));K.exports.useEffect(()=>{const a=t.current;return r.setCanvasElement(a),()=>{o.disconnect()}},[]),K.exports.useLayoutEffect(()=>{n(!1),o.observe(t.current)});const{licenseChecker:s}=i;return u.createElement(u.Fragment,null,s&&s.isWhiteLabel()?null:u.createElement(vne,null),u.createElement(ct.Element,{ref:t,"aria-label":"Canvas","data-test":Le.Canvas}),u.createElement(lne,null,u.createElement(mne,null)))}),Nz=class{constructor(e={},t={}){this.getAdvancedCategoryCard=()=>this.components.advancedUICategoryCard,this.getAdvancedItemCard=()=>this.components.advancedUIItemCard,this.getAdvancedToolbarItem=()=>this.components.advancedUIToolbarItem,this.getAdvancedToolbar=()=>this.components.advancedUIToolbar,this.getAdvancedToolControlBar=()=>this.components.advancedUIToolControlBar,this.getBasicToolbar=()=>this.components.basicUIToolbar,this.getBasicToolControlBar=()=>this.components.basicUIToolControlBar,this.getBasicToolItemsBar=()=>this.components.basicUIToolItemsBar,this.getDialog=()=>this.components.dialog,this.getButton=i=>this.components.buttons[i],this.getColorItem=()=>this.components.colorItem,this.getCheckbox=()=>this.components.checkbox,this.getWindowContainer=()=>this.components.windowContainer;const r={dialog:ce.Dialog,colorItem:ce.ColorItem,checkbox:ce.Input.Checkbox,buttons:{mainCanvasActionUndo:ct.Button.TextSecondary,mainCanvasActionRedo:ct.Button.TextSecondary,mainCanvasActionExport:IP,mainCanvasActionClose:lC,canvasActionEdit:ct.Controls.SpriteActionButton,canvasActionBringToFront:ct.Controls.SpriteActionButton,canvasActionDuplicate:ct.Controls.SpriteActionButton,canvasActionDelete:ct.Controls.SpriteActionButton,canvasActionInvert:ct.Controls.SpriteActionButton,canvasActionFlip:ct.Controls.SpriteActionButton,transformActionFlipHorizontal:xp,transformActionFlipVertical:xp,transformActionRotateClockwise:xp,transformActionRotateAntiClockwise:xp,textAlignment:xp,toolControlBarPrimaryButton:SY,toolControlBarSecondaryButton:lC},windowContainer:SJ};this.components=Gs([r,t,e])}},yne=({modal:e,textTool:t,textDesignTool:r,custom:i})=>{const{type:n,identifier:o,isVisible:s,modalProps:a,positionOffset:l}=e,{headerLabel:c,bodyLabel:h,confirmLabel:f,dismissLabel:d,handleClose:p,handleConfirm:v,handleDismiss:g}=a,m=i.getDialog();if(n==="info")return u.createElement(ce.InfoModal,{headerLabel:c,bodyLabel:h},u.createElement(m,{type:n,isVisible:s,identifier:o,position:l,handleClose:p,headerLabel:c,bodyLabel:h}));if(n==="textEdit"){const{buttonSave:y,buttonClose:_}=t.locale.canvasControls,b={type:n,isVisible:e.isVisible,confirmLabel:y,dismissLabel:_,headerLabel:t.locale.canvasControls.inputText};if(t.isTextSelected)return u.createElement(ce.TextEditModal,ge(L({},b),{defaultText:nt.defaultText(),handleConfirm:t.changeText,handleDismiss:t.setEditMode,text:t.text,maxLength:t.config.maxCharacterLimit,allowEmojis:t.config.allowEmojis}),u.createElement(m,{type:n,isVisible:s,identifier:o,position:l,handleClose:p,confirmLabel:y,dismissLabel:_,headerLabel:t.locale.canvasControls.inputText}));if(r.isTextDesignSelected)return u.createElement(ce.TextEditModal,ge(L({},b),{defaultText:Ft.defaultText(),handleConfirm:r.changeText,handleDismiss:r.setEditMode,text:r.text,maxLength:r.config.maxCharacterLimit,allowEmojis:r.config.allowEmojis}),u.createElement(m,{type:n,isVisible:s,identifier:o,position:l,handleClose:p,confirmLabel:y,dismissLabel:_,headerLabel:t.locale.canvasControls.inputText}))}return u.createElement(ce.ActionModal,{type:n,headerLabel:c,bodyLabel:h,confirmLabel:f,dismissLabel:d,handleClose:p,handleConfirm:v,handleDismiss:g},u.createElement(m,{type:n,isVisible:s,identifier:o,position:l,confirmLabel:f,dismissLabel:d,headerLabel:c,bodyLabel:h,handleClose:p}))},yk=vt("textTool","textDesignTool","modal","custom")(Q(yne)),_ne=z.div`
  position: absolute;
  right: 8px;
  top: 8px;
`,bne=class extends u.Component{constructor(e){super(e),this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:!1})},this.onSubmit=()=>{const{getCorrectValue:t}=this.props,{isSubmitted:r,value:i}=this.state;r||this.setState({value:t(parseInt(i,10)||0).toString(),isSubmitted:!0})},this.state={isSubmitted:!1,value:e.value.toString()}}componentDidUpdate(e){const{value:t}=this.props;e.value!==t&&this.setState({value:t.toString()})}render(){const{id:e,isDisabled:t,label:r}=this.props,{value:i}=this.state;return u.createElement(ce.Input.Text,{id:e,value:i,isDisabled:t,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:tV(this.onSubmit)},u.createElement(_ne,null,u.createElement(ce.Input.Label,{label:r,htmlFor:e})))}},jz=bne,xne=z.div`
  display: inline-flex;
  justify-content: space-between;
  max-width: ${e=>e.theme.measurements.inputs.cropSize.maxWidth}px;
`,wne=z.span`
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  color: ${e=>e.theme.textInput.foreground};
  margin-top: 10px;
  margin-right: 13px;
`,Sne="photoeditorsdk-transformScaleWidth",Cne="photoeditorsdk-transformScaleHeight",kne=({showLabel:e=!0,label:t,isDisabled:r,valueHeight:i,valueWidth:n,labelWidth:o,labelHeight:s,onSubmitWidth:a,onSubmitHeight:l})=>u.createElement("div",null,u.createElement(ce.Input.Label,{label:t,show:e}),u.createElement(xne,null,u.createElement(jz,{id:Sne,value:n,getCorrectValue:a,label:o,isDisabled:r}),u.createElement(wne,null,"x"),u.createElement(jz,{id:Cne,value:i,getCorrectValue:l,label:s,isDisabled:r}))),Hz=kne,Tne=z.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${_Z.scale} 0.2s linear;
  animation-fill-mode: both;
  height: 40px;
  min-width: 350px;
  @media all and (min-width: 0) and (max-width: 599px) {
    min-width: 280px;
  }
`,Ene=Tne,Wz=ne`
  background: ${e=>e.theme.tabTitle.activeBackground};
  color: ${e=>e.theme.tabTitle.activeForeground};
  border-bottom: 1px solid ${e=>e.theme.tabTitle.activeBorderColor};
`,Dne=z(x_)`
  display: inline-flex;
  align-items: center;
  font-size: ${e=>e.theme.measurements.fontSystem.basicUITabLabel.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.basicUITabLabel.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.basicUITabLabel.case};
  color: ${e=>e.theme.tabTitle.foreground};
  border-radius: 0px;
  padding: 1px 12px 2px;
  background: ${e=>e.theme.tabTitle.background};

  ${({isActive:e})=>e&&Wz}

  &:active {
    ${Wz}
  }

  @media all and (min-width: 0) and (max-width: 599px) {
    max-width: 150px;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`,Ine=class extends u.Component{constructor(){super(...arguments),this.onClick=()=>{const{label:e,onClick:t}=this.props;t(e)}}render(){const{activeTab:e,label:t}=this.props;return u.createElement(Dne,{ariaLabel:t,isActive:e===t,onClick:this.onClick},t)}},Rne=z(s_)`
  display: inline-flex;
  padding: 0 4px;
  height: 20px;
  font-size: 16px;
`,Fne=z(qA)`
  display: inline-flex;
  justify-content: center;
  transform: translate(-100%, -100%);
  @media all and (min-width: 0) and (max-width: 499px) {
    left: 0;
    right: 0;
    transform: translateY(-120%);
    background: transparent;
    button {
      &:first-child {
        border-bottom-right-radius: 0;
        border-top-right-radius: 0;
      }
      &:last-child {
        border-bottom-left-radius: 0;
        border-top-left-radius: 0;
      }
      &:not(:first-child):not(:last-child) {
        border-radius: 0;
      }
    }
  }
`,One=class extends u.Component{constructor(e){super(e),this.onTabClick=i=>{this.setState({activeTab:i,toggleExtend:!1})},this.getDropUp=()=>{const{length:i}=this.props,{toggleExtend:n}=this.state,o=u.Children.toArray(this.props.children),s=u.Children.count(this.props.children),a=o.slice(i,s);return u.createElement(Fne,{show:n},a.map(l=>{const c=l.props.label||"";return u.createElement(x_,{onClick:()=>this.onTabClick(c),key:c,ariaLabel:"More Options"},c)}))},this.extend=()=>{this.setState(({toggleExtend:i})=>({toggleExtend:!i}))},this.getExtension=()=>u.createElement(Rne,{onClick:this.extend,ariaLabel:"Select Next"},"...");const t=u.Children.count(this.props.children),r=u.Children.toArray(this.props.children);this.state={activeTab:t&&r[0].props&&r[0].props.label||"",toggleExtend:!1}}render(){const{length:e}=this.props,{activeTab:t,toggleExtend:r}=this.state,i=u.Children.toArray(this.props.children).slice(0,e),n=u.Children.count(this.props.children)>e;return u.createElement("div",null,i.map(o=>{if(o){const s=o.props.label||"";return u.createElement(Ine,{activeTab:t,key:s,label:s,onClick:this.onTabClick})}return null}),n?this.getExtension():null,r?this.getDropUp():null,u.Children.map(this.props.children,o=>!o||o.props&&o.props.label!==t?null:u.createElement(Ene,{key:o.props.label},o.props.children)))}},Vz=One,Mne=z.div`
  position: relative;
  white-space: nowrap;
  display: flex;
  transition: all 0.2s linear;
`,_k=class extends u.Component{constructor(e){super(e),this.updateLength=()=>{const{maxWidth:t,children:r}=this.props;let i=0;if(t)i=t;else{const s=window.innerWidth,a=s>600?300:200;i=s-a}const n=u.Children.count(r),o=i-n*_k.TAB_WIDTH;if(o<0){const s=Math.round(Math.abs(o/_k.TAB_WIDTH));this.setState({length:n-s})}},this.state={length:u.Children.count(this.props.children)}}componentDidMount(){window.addEventListener("resize",this.updateLength),this.updateLength()}componentWillUnmount(){window.removeEventListener("resize",this.updateLength)}render(){const{children:e}=this.props,{length:t}=this.state;return t?u.createElement(Mne,null,u.createElement(Vz,{length:t},e)):null}},Gz=_k;Gz.TAB_WIDTH=120;var Pne=z.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${e=>e.full?ne`
            left: -24px;
            width: calc(100% + 48px);
          `:`
      left: 24px;
      width: calc(100% - 48px);
    `}
    border-bottom: 1px solid ${e=>e.theme.toolControlBar.separatorColor};
  }
`,Ane=Pne,zne=z(ce.Input.Slider).attrs(()=>({centerSlider:!0}))`
  max-width: 224px;
`,$ne=zne,Bne=z.div.attrs(()=>({"data-test":Le.CategoryItemsContainer}))`
  visibility: hidden;
  opacity: 0;
  display: none;

  ${({show:e})=>e&&ne`
      opacity: 1;
      visibility: visible;
      display: flex;
    `}
`,Lne=Bne,qz=z.div.attrs(()=>({"data-test":Le.ToolControlBar}))`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  z-index: ${e=>e.theme.measurements.zIndex.toolControlBar};

  ${e=>e.show?ne`
          transition-timing-function: ease-in;
          transition-duration: 0.3s;
          transition-property: all;
          padding: 2px 0px;
          background: ${e.theme.toolControlBar.background};
          color: ${e.theme.toolControlBar.inputLabelForeground};
        `:ne`
          max-height: 0px;
        `}
`;qz.defaultProps={show:!0};var Une=z.div`
  height: ${e=>e.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
  width: 2px;
  margin: 0 10px;
  display: inline-flex;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${e=>e.theme.toolControlBar.separatorColor};
  }
`,Nne=Une,jne=z.span`
  display: flex;
  cursor: pointer;
  z-index: ${e=>e.theme.measurements.zIndex.label};
  transition: bottom 0.3s linear;

  color: ${e=>e.theme.toolbar.foreground};
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing};
  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;

  ${({isActive:e})=>e&&ne`
      color: ${t=>t.theme.toolbar.activeForeground};
    `}

  &:active {
    color: ${e=>e.theme.toolbar.activeForeground};
  }
`,Xz=ne`
  background-color: ${e=>e.theme.toolbar.activeBackground};
  color: ${e=>e.theme.toolbar.activeForeground};

  svg {
    color: ${e=>e.theme.toolbar.activeForeground};
  }
`,Yz=z(ol)`
  display: block;
  height: 100%;
  width: 100%;
  color: ${e=>e.theme.toolbar.foreground};
  background-color: ${e=>e.theme.toolbar.background};
  border: unset;
  box-shadow: unset;
  font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;

  ${({isActive:e})=>e&&Xz}
  ${({isDisabled:e})=>e&&ne`
      &:disabled {
        cursor: default;
        pointer-events: none;
        opacity: ${t=>t.theme.button.textInactiveOpacity};
      }
    `}

  &:active {
    ${Xz}
  }

  svg {
    display: flex;
    transition: visibility 0s, opacity 0.5s linear;
    visibility: visible;
    opacity: 1;
  }
`,Hne=z.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  svg {
    color: ${e=>e.theme.toolbar.foreground};
  }
`,Qz=z.div.attrs({role:"none"})`
  display: flex;
  height: ${e=>e.theme.measurements.basicUIToolbar.openHeight-2}px;
  text-align: center;
  min-width: 100px;
  /* Allow the text to grow in this limit */
  max-width: 150px;
  position: relative;
  /* Position inline-block box at the top of the line box */
  vertical-align: top;
  /* Allow text to wrap again, overwriting the Toolbar style */
  white-space: normal;
  margin: 1px;
`,Wne=z.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  transition: height 0.2s ease-out, display 0.1s fade-out;
  background-color: ${e=>e.theme.toolbar.background};
  color: ${e=>e.theme.toolbar.foreground};
  z-index: ${e=>e.theme.measurements.zIndex.toolbar};

  ${e=>e.show?ne`
          height: ${e.theme.measurements.basicUIToolbar.closeHeight}px;
          ${Yz} {
            svg {
              visibility: hidden;
              opacity: 0;
              height: 0;
            }
          }
          ${Qz} {
            height: ${e.theme.measurements.basicUIToolbar.closeHeight}px;
          }
        `:ne`
          height: ${e.theme.measurements.basicUIToolbar.openHeight}px;
        `}
`,Vne=({show:e=!1,className:t,style:r,children:i})=>u.createElement(Wne,{"data-test":Le.Toolbar,show:e,className:t,style:r},u.createElement(Ep,null,i)),Gne=({children:e,label:t,isActive:r,isDisabled:i,onClick:n})=>u.createElement(Qz,{"aria-haspopup":!0,"aria-expanded":r},u.createElement(Yz,{"data-test":Le.ToolbarItem,ariaLabel:t,onClick:n,isActive:r,isDisabled:i},u.createElement(Hne,null,e,u.createElement(jne,{isActive:r},t)))),qne=z.li.attrs({role:"none"})`
  ${e=>e.active?ne`
          height: ${e.theme.measurements.basicUIToolbar.closeHeight}px;
        `:ne`
          height: ${e.theme.measurements.basicUIToolbar.openHeight}px;
        `}
  width: 2px;
  display: inline-block;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${e=>e.theme.toolControlBar.separatorColor};
  }
`,Xne=qne,se={CardContainer:EJ,ExpandableContainer:Lne,CategoryContainer:IJ,Card:TJ,CardAvatar:RP,CardLabel:DJ,Toolbar:{Index:Vne,Item:Gne,Separator:Xne},BarSeparator:Ane,ItemsSeparator:Nne,Itemsbar:qz,Controlsbar:RJ,ControlsbarContainer:AJ,ResponsiveTabWrapper:Gz,Slider:$ne,TabWrapper:Vz,Tab:kh,Other:{ControlsWrapper:OJ,EmptyDiv:PJ}},Yne=ni(i_()),bk=24,xk=Q(function(){const{active:t,modal:r,editor:i}=oe(),n=K.exports.useRef(null),o=K.exports.useRef(null),[s,a]=K.exports.useState(0),[l,c]=K.exports.useState(null),[h,f]=K.exports.useState(0),[d,p]=K.exports.useState(0);K.exports.useLayoutEffect(()=>{const y=()=>{const{measurements:w}=i.configStore,{height:S,width:C}=o.current.getBoundingClientRect(),D=S*.95,E=C*.95,I=(S-D)/2;a(I<bk+w.buttons.float.size?S-bk*2-w.buttons.float.size/2:S-I+bk),f(D),p(E)},_=new fC((0,Yne.default)(()=>y(),100,{trailing:!0}));navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(w=>{n.current.srcObject=w}).catch(()=>{r.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(!1)}})}):r.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(!1)}}),y(),_.observe(o.current);const b=document.createElement("canvas");return c(b),()=>{Nr(b),_.disconnect()}},[i,r,t]);const v=()=>{n.current.srcObject.getTracks().forEach(b=>{b.stop()}),n.current.srcObject=null,t.selectWebcam(!1)},g=()=>{l&&(l.width=n.current.videoWidth,l.height=n.current.videoHeight,l.getContext("2d").drawImage(n.current,0,0),t.newImage(l.toDataURL("image/webp")),v())},m=t.webcamLabel;return u.createElement(ct.Wrapper,{ref:o},u.createElement(ct.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},u.createElement(ct.Bar.ButtonGroup,null,u.createElement(lC,{ariaLabel:m,onClick:v},m))),u.createElement(ct.Webcam,{style:{height:h,width:d},autoPlay:!0,ref:n}),u.createElement(ct.Button.Float,{ariaLabel:"Click and Save",style:{top:s},onClick:g}))}),wk=({children:e})=>u.createElement(ct.Container,{"data-test":Le.CanvasContainer},e),Qne=()=>{const[e,t]=K.exports.useState([]);return K.exports.useEffect(()=>{var r;if(typeof window!==void 0&&((r=window.navigator)==null?void 0:r.mediaDevices)){let i=!0;const n=()=>{window.navigator.mediaDevices.enumerateDevices().then(o=>{i&&t(o.map(({deviceId:s,groupId:a,kind:l,label:c})=>({deviceId:s,groupId:a,kind:l,label:c})))}).catch(()=>null)};return window.navigator.mediaDevices.addEventListener("devicechange",n),n(),()=>{i=!1,window.navigator.mediaDevices.removeEventListener("devicechange",n)}}return null},[]),e},Kz=Q(({tool:e,fullWidth:t=!1,icon:r,label:i,onClick:n})=>{const{custom:o}=oe();if(!Qne().some(({kind:l})=>l==="videoinput"))return null;const a=o.getButton("toolControlBarSecondaryButton");return a?u.createElement(a,{"data-test":Le.LibraryWebcamButton,tool:e,label:i,ariaLabel:i,onClick:n,fullWidth:t,icon:r}):null}),Sk={exports:{}},Th={};/** @license React v17.0.1
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Fw,Ys=K.exports;function Ir(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ck=60106,H_=60107,kk=60108,Tk=60114,W_=60109,Ek=60110,Dk=60112,V_=60113,Ik=60120,Rk=60115,Fk=60116,Zz=60121,Jz=60117,e6=60119,t6=60129,r6=60131;if(typeof Symbol=="function"&&Symbol.for){var Ai=Symbol.for;Ck=Ai("react.portal"),H_=Ai("react.fragment"),kk=Ai("react.strict_mode"),Tk=Ai("react.profiler"),W_=Ai("react.provider"),Ek=Ai("react.context"),Dk=Ai("react.forward_ref"),V_=Ai("react.suspense"),Ik=Ai("react.suspense_list"),Rk=Ai("react.memo"),Fk=Ai("react.lazy"),Zz=Ai("react.block"),Jz=Ai("react.fundamental"),e6=Ai("react.scope"),t6=Ai("react.debug_trace_mode"),r6=Ai("react.legacy_hidden")}function Bp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H_:return"Fragment";case Ck:return"Portal";case Tk:return"Profiler";case kk:return"StrictMode";case V_:return"Suspense";case Ik:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ek:return(e.displayName||"Context")+".Consumer";case W_:return(e._context.displayName||"Context")+".Provider";case Dk:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Rk:return Bp(e.type);case Zz:return Bp(e._render);case Fk:t=e._payload,e=e._init;try{return Bp(e(t))}catch{}}return null}var Kne=Ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,i6={};function Lp(e,t){for(var r=e._threadCount|0;r<=t;r++)e[r]=e._currentValue2,e._threadCount=r+1}function Zne(e,t,r,i){if(i&&(i=e.contextType,typeof i=="object"&&i!==null))return Lp(i,r),i[r];if(e=e.contextTypes){r={};for(var n in e)r[n]=t[n];t=r}else t=i6;return t}for(var zi=new Uint16Array(16),G_=0;15>G_;G_++)zi[G_]=G_+1;zi[15]=0;var Jne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n6=Object.prototype.hasOwnProperty,o6={},s6={};function a6(e){return n6.call(s6,e)?!0:n6.call(o6,e)?!1:Jne.test(e)?s6[e]=!0:(o6[e]=!0,!1)}function eoe(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function toe(e,t,r,i){if(t===null||typeof t=="undefined"||eoe(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qi(e,t,r,i,n,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xi[e]=new qi(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xi[t]=new qi(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){xi[e]=new qi(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xi[e]=new qi(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xi[e]=new qi(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){xi[e]=new qi(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){xi[e]=new qi(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){xi[e]=new qi(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){xi[e]=new qi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ok=/[\-:]([a-z])/g;function Mk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ok,Mk);xi[t]=new qi(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ok,Mk);xi[t]=new qi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ok,Mk);xi[t]=new qi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){xi[e]=new qi(e,1,!1,e.toLowerCase(),null,!1,!1)}),xi.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){xi[e]=new qi(e,1,!1,e.toLowerCase(),null,!0,!0)});var roe=/["'&<>]/;function _c(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=roe.exec(e);if(t){var r="",i,n=0;for(i=t.index;i<e.length;i++){switch(e.charCodeAt(i)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}n!==i&&(r+=e.substring(n,i)),n=i+1,r+=t}e=n!==i?r+e.substring(n,i):r}return e}function ioe(e,t){var r=xi.hasOwnProperty(e)?xi[e]:null,i;return(i=e!=="style")&&(i=r!==null?r.type===0:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")),i||toe(e,t,r,!1)?"":r!==null?(e=r.attributeName,i=r.type,i===3||i===4&&t===!0?e+'=""':(r.sanitizeURL&&(t=""+t),e+'="'+(_c(t)+'"'))):a6(e)?e+'="'+(_c(t)+'"'):""}function noe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ooe=typeof Object.is=="function"?Object.is:noe,ss=null,q_=null,sr=null,Up=!1,X_=!1,fl=null,Y_=0;function bc(){if(ss===null)throw Error(Ir(321));return ss}function l6(){if(0<Y_)throw Error(Ir(312));return{memoizedState:null,queue:null,next:null}}function Pk(){return sr===null?q_===null?(Up=!1,q_=sr=l6()):(Up=!0,sr=q_):sr.next===null?(Up=!1,sr=sr.next=l6()):(Up=!0,sr=sr.next),sr}function c6(e,t,r,i){for(;X_;)X_=!1,Y_+=1,sr=null,r=e(t,i);return u6(),r}function u6(){ss=null,X_=!1,q_=null,Y_=0,sr=fl=null}function h6(e,t){return typeof t=="function"?t(e):t}function d6(e,t,r){if(ss=bc(),sr=Pk(),Up){var i=sr.queue;if(t=i.dispatch,fl!==null&&(r=fl.get(i),r!==void 0)){fl.delete(i),i=sr.memoizedState;do i=e(i,r.action),r=r.next;while(r!==null);return sr.memoizedState=i,[i,t]}return[sr.memoizedState,t]}return e=e===h6?typeof t=="function"?t():t:r!==void 0?r(t):t,sr.memoizedState=e,e=sr.queue={last:null,dispatch:null},e=e.dispatch=soe.bind(null,ss,e),[sr.memoizedState,e]}function f6(e,t){if(ss=bc(),sr=Pk(),t=t===void 0?null:t,sr!==null){var r=sr.memoizedState;if(r!==null&&t!==null){var i=r[1];e:if(i===null)i=!1;else{for(var n=0;n<i.length&&n<t.length;n++)if(!ooe(t[n],i[n])){i=!1;break e}i=!0}if(i)return r[0]}}return e=e(),sr.memoizedState=[e,t],e}function soe(e,t,r){if(!(25>Y_))throw Error(Ir(301));if(e===ss)if(X_=!0,e={action:r,next:null},fl===null&&(fl=new Map),r=fl.get(t),r===void 0)fl.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function Ak(){}var xc=null,aoe={readContext:function(e){var t=xc.threadID;return Lp(e,t),e[t]},useContext:function(e){bc();var t=xc.threadID;return Lp(e,t),e[t]},useMemo:f6,useReducer:d6,useRef:function(e){ss=bc(),sr=Pk();var t=sr.memoizedState;return t===null?(e={current:e},sr.memoizedState=e):t},useState:function(e){return d6(h6,e)},useLayoutEffect:function(){},useCallback:function(e,t){return f6(function(){return e},t)},useImperativeHandle:Ak,useEffect:Ak,useDebugValue:Ak,useDeferredValue:function(e){return bc(),e},useTransition:function(){return bc(),[function(e){e()},!1]},useOpaqueIdentifier:function(){return(xc.identifierPrefix||"")+"R:"+(xc.uniqueID++).toString(36)},useMutableSource:function(e,t){return bc(),t(e._source)}},loe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function coe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var p6={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},uoe=yo({menuitem:!0},p6),Np={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hoe=["Webkit","ms","Moz","O"];Object.keys(Np).forEach(function(e){hoe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Np[t]=Np[e]})});var doe=/([A-Z])/g,foe=/^ms-/,pl=Ys.Children.toArray,zk=Kne.ReactCurrentDispatcher,poe={listing:!0,pre:!0,textarea:!0},moe=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,m6={},$k={};function goe(e){if(e==null)return e;var t="";return Ys.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}var voe=Object.prototype.hasOwnProperty,yoe={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function g6(e,t){if(e===void 0)throw Error(Ir(152,Bp(t)||"Component"))}function _oe(e,t,r){function i(s,a){var l=a.prototype&&a.prototype.isReactComponent,c=Zne(a,t,r,l),h=[],f=!1,d={isMounted:function(){return!1},enqueueForceUpdate:function(){if(h===null)return null},enqueueReplaceState:function(b,w){f=!0,h=[w]},enqueueSetState:function(b,w){if(h===null)return null;h.push(w)}};if(l){if(l=new a(s.props,c,d),typeof a.getDerivedStateFromProps=="function"){var p=a.getDerivedStateFromProps.call(null,s.props,l.state);p!=null&&(l.state=yo({},l.state,p))}}else if(ss={},l=a(s.props,c,d),l=c6(a,s.props,l,c),l==null||l.render==null){e=l,g6(e,a);return}if(l.props=s.props,l.context=c,l.updater=d,d=l.state,d===void 0&&(l.state=d=null),typeof l.UNSAFE_componentWillMount=="function"||typeof l.componentWillMount=="function")if(typeof l.componentWillMount=="function"&&typeof a.getDerivedStateFromProps!="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&typeof a.getDerivedStateFromProps!="function"&&l.UNSAFE_componentWillMount(),h.length){d=h;var v=f;if(h=null,f=!1,v&&d.length===1)l.state=d[0];else{p=v?d[0]:l.state;var g=!0;for(v=v?1:0;v<d.length;v++){var m=d[v];m=typeof m=="function"?m.call(l,p,s.props,c):m,m!=null&&(g?(g=!1,p=yo({},p,m)):yo(p,m))}l.state=p}}else h=null;if(e=l.render(),g6(e,a),typeof l.getChildContext=="function"&&(s=a.childContextTypes,typeof s=="object")){var y=l.getChildContext();for(var _ in y)if(!(_ in s))throw Error(Ir(108,Bp(a)||"Unknown",_))}y&&(t=yo({},t,y))}for(;Ys.isValidElement(e);){var n=e,o=n.type;if(typeof o!="function")break;i(n,o)}return{child:e,context:t}}var v6=function(){function e(r,i,n){Ys.isValidElement(r)?r.type!==H_?r=[r]:(r=r.props.children,r=Ys.isValidElement(r)?[r]:pl(r)):r=pl(r),r={type:null,domNamespace:loe.html,children:r,childIndex:0,context:i6,footer:""};var o=zi[0];if(o===0){var s=zi;o=s.length;var a=2*o;if(!(65536>=a))throw Error(Ir(304));var l=new Uint16Array(a);for(l.set(s),zi=l,zi[0]=o+1,s=o;s<a-1;s++)zi[s]=s+1;zi[a-1]=0}else zi[0]=zi[o];this.threadID=o,this.stack=[r],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=i,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=n&&n.identifierPrefix||""}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var r=this.threadID;zi[r]=zi[0],zi[0]=r}},t.pushProvider=function(r){var i=++this.contextIndex,n=r.type._context,o=this.threadID;Lp(n,o);var s=n[o];this.contextStack[i]=n,this.contextValueStack[i]=s,n[o]=r.props.value},t.popProvider=function(){var r=this.contextIndex,i=this.contextStack[r],n=this.contextValueStack[r];this.contextStack[r]=null,this.contextValueStack[r]=null,this.contextIndex--,i[this.threadID]=n},t.clearProviders=function(){for(var r=this.contextIndex;0<=r;r--)this.contextStack[r][this.threadID]=this.contextValueStack[r]},t.read=function(r){if(this.exhausted)return null;var i=xc;xc=this;var n=zk.current;zk.current=aoe;try{for(var o=[""],s=!1;o[0].length<r;){if(this.stack.length===0){this.exhausted=!0;var a=this.threadID;zi[a]=zi[0],zi[0]=a;break}var l=this.stack[this.stack.length-1];if(s||l.childIndex>=l.children.length){var c=l.footer;if(c!==""&&(this.previousWasTextNode=!1),this.stack.pop(),l.type==="select")this.currentSelectValue=null;else if(l.type!=null&&l.type.type!=null&&l.type.type.$$typeof===W_)this.popProvider(l.type);else if(l.type===V_){this.suspenseDepth--;var h=o.pop();if(s){s=!1;var f=l.fallbackFrame;if(!f)throw Error(Ir(303));this.stack.push(f),o[this.suspenseDepth]+="<!--$!-->";continue}else o[this.suspenseDepth]+=h}o[this.suspenseDepth]+=c}else{var d=l.children[l.childIndex++],p="";try{p+=this.render(d,l.context,l.domNamespace)}catch(v){throw v!=null&&typeof v.then=="function"?Error(Ir(294)):v}finally{}o.length<=this.suspenseDepth&&o.push(""),o[this.suspenseDepth]+=p}}return o[0]}finally{zk.current=n,xc=i,u6()}},t.render=function(r,i,n){if(typeof r=="string"||typeof r=="number")return n=""+r,n===""?"":this.makeStaticMarkup?_c(n):this.previousWasTextNode?"<!-- -->"+_c(n):(this.previousWasTextNode=!0,_c(n));if(i=_oe(r,i,this.threadID),r=i.child,i=i.context,r===null||r===!1)return"";if(!Ys.isValidElement(r)){if(r!=null&&r.$$typeof!=null)throw n=r.$$typeof,Error(n===Ck?Ir(257):Ir(258,n.toString()));return r=pl(r),this.stack.push({type:null,domNamespace:n,children:r,childIndex:0,context:i,footer:""}),""}var o=r.type;if(typeof o=="string")return this.renderDOM(r,i,n);switch(o){case r6:case t6:case kk:case Tk:case Ik:case H_:return r=pl(r.props.children),this.stack.push({type:null,domNamespace:n,children:r,childIndex:0,context:i,footer:""}),"";case V_:throw Error(Ir(294));case e6:throw Error(Ir(343))}if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Dk:ss={};var s=o.render(r.props,r.ref);return s=c6(o.render,r.props,s,r.ref),s=pl(s),this.stack.push({type:null,domNamespace:n,children:s,childIndex:0,context:i,footer:""}),"";case Rk:return r=[Ys.createElement(o.type,yo({ref:r.ref},r.props))],this.stack.push({type:null,domNamespace:n,children:r,childIndex:0,context:i,footer:""}),"";case W_:return o=pl(r.props.children),n={type:r,domNamespace:n,children:o,childIndex:0,context:i,footer:""},this.pushProvider(r),this.stack.push(n),"";case Ek:o=r.type,s=r.props;var a=this.threadID;return Lp(o,a),o=pl(s.children(o[a])),this.stack.push({type:r,domNamespace:n,children:o,childIndex:0,context:i,footer:""}),"";case Jz:throw Error(Ir(338));case Fk:return o=r.type,s=o._init,o=s(o._payload),r=[Ys.createElement(o,yo({ref:r.ref},r.props))],this.stack.push({type:null,domNamespace:n,children:r,childIndex:0,context:i,footer:""}),""}throw Error(Ir(130,o==null?o:typeof o,""))},t.renderDOM=function(r,i,n){var o=r.type.toLowerCase();if(!m6.hasOwnProperty(o)){if(!moe.test(o))throw Error(Ir(65,o));m6[o]=!0}var s=r.props;if(o==="input")s=yo({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:s.value!=null?s.value:s.defaultValue,checked:s.checked!=null?s.checked:s.defaultChecked});else if(o==="textarea"){var a=s.value;if(a==null){a=s.defaultValue;var l=s.children;if(l!=null){if(a!=null)throw Error(Ir(92));if(Array.isArray(l)){if(!(1>=l.length))throw Error(Ir(93));l=l[0]}a=""+l}a==null&&(a="")}s=yo({},s,{value:void 0,children:""+a})}else if(o==="select")this.currentSelectValue=s.value!=null?s.value:s.defaultValue,s=yo({},s,{value:void 0});else if(o==="option"){l=this.currentSelectValue;var c=goe(s.children);if(l!=null){var h=s.value!=null?s.value+"":c;if(a=!1,Array.isArray(l)){for(var f=0;f<l.length;f++)if(""+l[f]===h){a=!0;break}}else a=""+l===h;s=yo({selected:void 0,children:void 0},s,{selected:a,children:c})}}if(a=s){if(uoe[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(Ir(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(Ir(60));if(!(typeof a.dangerouslySetInnerHTML=="object"&&"__html"in a.dangerouslySetInnerHTML))throw Error(Ir(61))}if(a.style!=null&&typeof a.style!="object")throw Error(Ir(62))}a=s,l=this.makeStaticMarkup,c=this.stack.length===1,h="<"+r.type;e:if(o.indexOf("-")===-1)f=typeof a.is=="string";else switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":f=!1;break e;default:f=!0}for(w in a)if(voe.call(a,w)){var d=a[w];if(d!=null){if(w==="style"){var p=void 0,v="",g="";for(p in d)if(d.hasOwnProperty(p)){var m=p.indexOf("--")===0,y=d[p];if(y!=null){if(m)var _=p;else if(_=p,$k.hasOwnProperty(_))_=$k[_];else{var b=_.replace(doe,"-$1").toLowerCase().replace(foe,"-ms-");_=$k[_]=b}v+=g+_+":",g=p,m=y==null||typeof y=="boolean"||y===""?"":m||typeof y!="number"||y===0||Np.hasOwnProperty(g)&&Np[g]?(""+y).trim():y+"px",v+=m,g=";"}}d=v||null}p=null,f?yoe.hasOwnProperty(w)||(p=w,p=a6(p)&&d!=null?p+'="'+(_c(d)+'"'):""):p=ioe(w,d),p&&(h+=" "+p)}}l||c&&(h+=' data-reactroot=""');var w=h;a="",p6.hasOwnProperty(o)?w+="/>":(w+=">",a="</"+r.type+">");e:{if(l=s.dangerouslySetInnerHTML,l!=null){if(l.__html!=null){l=l.__html;break e}}else if(l=s.children,typeof l=="string"||typeof l=="number"){l=_c(l);break e}l=null}return l!=null?(s=[],poe.hasOwnProperty(o)&&l.charAt(0)===`
`&&(w+=`
`),w+=l):s=pl(s.children),r=r.type,n=n==null||n==="http://www.w3.org/1999/xhtml"?coe(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:o,children:s,childIndex:0,context:i,footer:a}),this.previousWasTextNode=!1,w},e}();Th.renderToNodeStream=function(){throw Error(Ir(207))},Th.renderToStaticMarkup=function(e,t){e=new v6(e,!0,t);try{return e.read(1/0)}finally{e.destroy()}},Th.renderToStaticNodeStream=function(){throw Error(Ir(208))},Th.renderToString=function(e,t){e=new v6(e,!1,t);try{return e.read(1/0)}finally{e.destroy()}},Th.version="17.0.1",Sk.exports=Th;var boe=T((e,t)=>{var r=function(){};t.exports=r}),xoe=T((e,t)=>{var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=r}),woe=T((e,t)=>{var r=xoe();function i(){}function n(){}n.resetWarningCache=i,t.exports=function(){function o(l,c,h,f,d,p){if(p!==r){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}o.isRequired=o;function s(){return o}var a={array:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:s,element:o,elementType:o,instanceOf:s,node:o,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:i};return a.PropTypes=a,a}}),Soe=T((e,t)=>{t.exports=woe()()}),Coe=z(bh)`
  width: ${e=>e.theme.measurements.advancedUICard.large.width}px;
  height: ${e=>e.theme.measurements.advancedUICard.large.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedUISpacer}px;
  color: ${e=>e.theme.card.foreground};
`,koe=r=>{var i=r,{isActive:e}=i,t=To(i,["isActive"]);return u.createElement(Coe,L({},t))},Toe=koe,Eoe=z(bh)`
  width: ${e=>e.theme.measurements.advancedUICard.medium.width}px;
  height: ${e=>e.theme.measurements.advancedUICard.medium.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedUISpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(2n + 1) {
    margin-right: ${e=>e.theme.measurements.advancedUISpacer}px;
  }
`,Doe=z(bh)`
  width: ${e=>e.theme.measurements.advancedUICard.small.width}px;
  height: ${e=>e.theme.measurements.advancedUICard.small.height}px;
  margin-bottom: ${e=>e.theme.measurements.advancedUISpacer}px;
  color: ${e=>e.theme.card.foreground};
  &:nth-child(3n + 1),
  &:nth-child(3n + 2) {
    margin-right: ${e=>e.theme.measurements.advancedUISpacer}px;
  }
`,y6=r=>{var i=r,{type:e}=i,t=To(i,["type"]);const n=e==="large",o=e==="small";let s=Eoe;return n?s=Toe:o&&(s=Doe),u.createElement(s,L({type:e},t))},_6=z.div.attrs(e=>({"data-test":e["data-test"]||Le.CardContainer}))`
  display: flex;
  flex-wrap: wrap;
  /* width - padding on both sides */
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width-48}px;
`,Ioe=z.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;

  position: relative;
  width: ${e=>e.theme.measurements.advancedUIToolControlBar.width}px;
  /* for Firefox */
  min-height: 0;
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.marginBottom}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolControlBar};

  background: ${e=>e.theme.toolControlBar.background};
  transition: width 0.4s ease-in;
  ${e=>e.reverse?ne`
          border-left: 1px solid ${e.theme.toolControlBar.borderColor};
        `:ne`
          border-right: 1px solid ${e.theme.toolControlBar.borderColor};
        `}
`,Roe=({reverse:e=!1,style:t,className:r,children:i})=>u.createElement(Ioe,{"data-test":Le.ToolControlBar,reverse:e,className:r,style:t},i),Foe=z.div.attrs(()=>({"data-test":Le.CategoryItemsContainer}))`
  transition: max-height 0.8s ease-out, transform 0.8s ease-out;
  background: ${e=>e.theme.toolControlBar.background};
  visibility: hidden;
  opacity: 0;
  transform-origin: 0 0;
  display: none;
  flex-wrap: wrap;

  ${({show:e})=>e&&ne`
      opacity: 1;
      visibility: visible;
      ${yn()?ne`
            display: block;
          `:ne`
            display: flex;
          `}
    `}
`,Ooe=z(yZ)`
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  /* the padding and margin should only be applied to the children */
  margin: 0 !important;
  padding: 0 !important;
`,Moe=z.div`
  display: flex;
  flex-direction: column;

  > * {
    margin-left: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingRight}px;
    margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`,Poe=({show:e,children:t})=>u.createElement(Ooe,{duration:300,height:e?"auto":0,easing:"ease-in-out",animateOpacity:!0},u.createElement(Moe,{"data-test":Le.ToolControlBarExpandableControls},t)),Bk=z(Ep)`
  position: relative;

  box-sizing: border-box;

  /* for Firefox */
  min-height: 0;

  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  color: ${e=>e.theme.toolControlBar.inputLabelForeground};

  /* compensate the padding in IE and Edge */
  ${()=>yn()||Gl()?ne`
        > ul {
          padding-right: 34px;
          margin-right: -34px;
        }
      `:""}
`;Bk.defaultProps={direction:"vertical"};var Aoe=z.div`
  position: relative;
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${e=>e.full?ne`
            left: -${3*e.theme.measurements.advancedUISpacer/2}px;
            width: calc(
              100% + ${3*e.theme.measurements.advancedUISpacer}px
            );
          `:`
      left: ${3*e.theme.measurements.advancedUISpacer/2}px;
      width: calc(100% - ${3*e.theme.measurements.advancedUISpacer}px);
    `}
    border-bottom: 2px solid ${e=>e.theme.toolControlBar.separatorColor};
  }
`,b6=Aoe,zoe=z.h2`
  color: ${e=>e.theme.toolControlBar.titleForeground};
  font-size: ${e=>e.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline2.case};
  font-weight: 500;
  min-height: ${e=>2*e.theme.measurements.advancedUISpacer}px;
  margin-top: 0;
`,x6=zoe,$oe=z.div`
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  flex: 1 0 auto;
`,Boe=({name:e,isFirstCategory:t,isLastCategory:r,children:i})=>u.createElement($oe,null,!t&&u.createElement(ce.Spacer,{count:2}),u.createElement(x6,{"data-test":e},e),u.createElement(_6,{"data-test":Le.CategoryItemsContainer},i),!r&&u.createElement(u.Fragment,null,u.createElement(ce.Spacer,{count:2}),u.createElement(b6,{full:!0}))),Loe=z.h1`
  /* Center text horizontally and vertically */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 0;
  padding: 0 4px;
  margin: 0;
  min-height: ${e=>e.theme.measurements.mainCanvasActionBar.height-2}px;
  font-size: ${e=>e.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline1.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.headline1.case};
  background: ${e=>e.theme.toolControlBar.background};
  color: ${e=>e.theme.toolControlBar.titleForeground};
  border-bottom: 1px solid ${e=>e.theme.toolControlBar.separatorColor};
  font-weight: 500;
  text-align: center;
  /* prevent the padding from leaving the width of the parent  */
  box-sizing: border-box;
`,Uoe=Loe,Noe=z.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;

  overflow-y: auto;
  overflow-x: hidden;

  /* calculate the max-height based on the padding and if the heading is used */
  max-height: calc(
    100% -
      ${e=>e.theme.measurements.advancedUIToolControlBar.paddingBottom+e.theme.measurements.advancedUIToolControlBar.paddingTop}px -
      ${e=>e.displayTitle?e.theme.measurements.mainCanvasActionBar.height-2:"0"}px
  );

  padding-top: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingTop}px;
  padding-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingBottom}px;

  > * {
    margin-left: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  /* The scrollable content needs a padding for the scrollbar position */
  > ${Bk} {
    margin-left: 0px;
    margin-right: 0px;
    padding-left: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    padding-right: ${e=>e.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  > :not(:last-child) {
    margin-bottom: ${e=>e.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`,joe=({children:e})=>{const{config:t}=oe(),r=t.config.displayToolControlBarTitle;return u.createElement(Noe,{displayTitle:r},e)},Hoe=z.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;
  align-items: center;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width}px;

  z-index: ${e=>e.theme.measurements.zIndex.toolbar};

  background-color: ${e=>e.theme.toolbar.background};
  color: ${e=>e.theme.toolbar.foreground};
  ${e=>{const t=e.theme.toolbar.border?e.theme.toolbar.border:ne`
          1px solid ${e.theme.toolbar.borderColor};
        `;return e.reverse?ne`
          border-left: ${t};
        `:ne`
          border-right: ${t};
        `}}
  margin-bottom: ${e=>e.theme.measurements.advancedUIToolbar.marginBottom}px;
`,Woe=({reverse:e,style:t,className:r,children:i})=>u.createElement(Hoe,{reverse:e,"data-test":Le.Toolbar,className:r,style:t},u.createElement(Ep,{direction:"vertical"},i)),Voe=z(s_)`
  width: inherit;
  height: inherit;
  padding: 0;
  margin: 0;
  ${yn()?ne`
        background-color: transparent;
      `:ne`
        background-color: inherit;
      `}

  ${e=>e.isActive&&ne`
      background-color: ${e.theme.toolbar.activeBackground};
      color: ${e.theme.toolbar.activeForeground};

      svg {
        color: ${e.theme.toolbar.activeForeground};
      }
    `}
`,Goe=z.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.itemHeight}px;
  cursor: pointer;
  position: relative;
`,qoe=e=>u.createElement(Goe,null,u.createElement(Voe,ge(L({},e),{"data-test":Le.ToolbarItem}))),Xoe=z.li.attrs({role:"none"})`
  height: ${e=>e.theme.measurements.advancedUIToolbar.seperatorHeight}px;
  cursor: pointer;
  position: relative;
`,Yoe=Xoe;ni(boe());var Qoe=Koe()?K.exports.useLayoutEffect:K.exports.useEffect;typeof window!="undefined"&&window.Math==Math||typeof self!="undefined"&&self.Math==Math||Function("return this")();function Koe(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}function Zoe(){var e=K.exports.useState(Object.create(null)),t=e[1];return K.exports.useCallback(function(){t(Object.create(null))},[])}var Joe=function(t){var r=t.children,i=t.type,n=i===void 0?"reach-portal":i,o=K.exports.useRef(null),s=K.exports.useRef(null),a=Zoe();return Qoe(function(){if(!!o.current){var l=o.current.ownerDocument;return s.current=l==null?void 0:l.createElement(n),l.body.appendChild(s.current),a(),function(){s.current&&s.current.ownerDocument&&s.current.ownerDocument.body.removeChild(s.current)}}},[n,a]),s.current?Zv.exports.createPortal(r,s.current):K.exports.createElement("span",{ref:o})},ese=Joe;function tse(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,o;for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function rse(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}ni(Soe());var w6={disabled:!1},S6=u.createContext(null),jp="unmounted",wc="exited",Sc="entering",Eh="entered",Lk="exiting",Qs=function(e){rse(t,e);function t(i,n){var o;o=e.call(this,i,n)||this;var s=n,a=s&&!s.isMounting?i.enter:i.appear,l;return o.appearStatus=null,i.in?a?(l=wc,o.appearStatus=Sc):l=Eh:i.unmountOnExit||i.mountOnEnter?l=jp:l=wc,o.state={status:l},o.nextCallback=null,o}t.getDerivedStateFromProps=function(n,o){var s=n.in;return s&&o.status===jp?{status:wc}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(n){var o=null;if(n!==this.props){var s=this.state.status;this.props.in?s!==Sc&&s!==Eh&&(o=Sc):(s===Sc||s===Eh)&&(o=Lk)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var n=this.props.timeout,o,s,a;return o=s=a=n,n!=null&&typeof n!="number"&&(o=n.exit,s=n.enter,a=n.appear!==void 0?n.appear:s),{exit:o,enter:s,appear:a}},r.updateStatus=function(n,o){n===void 0&&(n=!1),o!==null?(this.cancelNextCallback(),o===Sc?this.performEnter(n):this.performExit()):this.props.unmountOnExit&&this.state.status===wc&&this.setState({status:jp})},r.performEnter=function(n){var o=this,s=this.props.enter,a=this.context?this.context.isMounting:n,l=this.props.nodeRef?[a]:[_p.findDOMNode(this),a],c=l[0],h=l[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!n&&!s||w6.disabled){this.safeSetState({status:Eh},function(){o.props.onEntered(c)});return}this.props.onEnter(c,h),this.safeSetState({status:Sc},function(){o.props.onEntering(c,h),o.onTransitionEnd(d,function(){o.safeSetState({status:Eh},function(){o.props.onEntered(c,h)})})})},r.performExit=function(){var n=this,o=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:_p.findDOMNode(this);if(!o||w6.disabled){this.safeSetState({status:wc},function(){n.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Lk},function(){n.props.onExiting(a),n.onTransitionEnd(s.exit,function(){n.safeSetState({status:wc},function(){n.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(n,o){o=this.setNextCallback(o),this.setState(n,o)},r.setNextCallback=function(n){var o=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,o.nextCallback=null,n(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},r.onTransitionEnd=function(n,o){this.setNextCallback(o);var s=this.props.nodeRef?this.props.nodeRef.current:_p.findDOMNode(this),a=n==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],c=l[0],h=l[1];this.props.addEndListener(c,h)}n!=null&&setTimeout(this.nextCallback,n)},r.render=function(){var n=this.state.status;if(n===jp)return null;var o=this.props,s=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=tse(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return u.createElement(S6.Provider,{value:null},typeof s=="function"?s(n,a):u.cloneElement(u.Children.only(s),a))},t}(u.Component);Qs.contextType=S6,Qs.propTypes={};function Dh(){}Qs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Dh,onEntering:Dh,onEntered:Dh,onExit:Dh,onExiting:Dh,onExited:Dh},Qs.UNMOUNTED=jp,Qs.EXITED=wc,Qs.ENTERING=Sc,Qs.ENTERED=Eh,Qs.EXITING=Lk;var ise=Qs,nse=z.div`
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* added line-height reset from appContainer */
  font-family: '${e=>e.theme.typography.fontFamily}', sans-serif;

  ${yn()?ne`
        position: -ms-device-fixed;
      `:ne`
        position: fixed;
      `}
  top: ${e=>e.position.y-5}px;
  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,
    right 0.25s ease-in-out;
  z-index: ${e=>e.theme.measurements.zIndex.toolbar};
  pointer-events: none;
  cursor: pointer;

  &:before {
    content: ' ';
    position: absolute;
    top: 10px;
    left: -8px;
    width: 0;
    height: 0;
    border-right: 8px solid ${e=>e.theme.tooltip.background};
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
  }

  &:after {
    content: '${e=>e.label}';
    position: absolute;
    color: ${e=>e.theme.tooltip.foreground};
    background: ${e=>e.theme.tooltip.background};
    padding: 8px 12px;
    text-align: center;
    vertical-align: super;
    font-size: ${e=>e.theme.measurements.fontSystem.label.size}px;
    letter-spacing: ${e=>e.theme.measurements.fontSystem.label.letterSpacing}px;
    text-transform: ${e=>e.theme.measurements.fontSystem.label.case};
    border-radius: ${e=>e.theme.shape.radiusSmall}px;
    white-space: nowrap;
  }

  ${e=>e.reverse&&ne`
      direction: rtl;

      &:before {
        border-left: 8px solid ${e.theme.tooltip.background};
        border-right: none;
        right: -8px;
        left: unset;
        top: 10px;
      }
    `}
`,ose=z.span`
  display: none;
`,sse=({show:e=!0,reverse:t,position:r,children:i})=>{const n=K.exports.useRef(null),{config:o}=oe(),{measurements:s}=o,a=typeof i=="string"?i:"",l=r.x+s.advancedUIToolbar.width-10,c=r.x+s.advancedUIToolbar.width+16,h=t?"right":"left",f={entering:{opacity:0,[h]:`${l}px`},entered:{opacity:1,[h]:`${c}px`},exiting:{opacity:0,[h]:`${l}px`},exited:{opacity:0,[h]:`${l}px`}};return u.createElement(ise,{nodeRef:n,in:e,timeout:{exit:500}},d=>d!=="exited"&&u.createElement(ese,null,u.createElement(nse,{ref:n,style:f[d],"data-test":Le.Tooltip,reverse:t,position:r,label:a},u.createElement(ose,null,a))))},Ae={Card:y6,CardContainer:_6,Toolbar:{Index:Woe,Item:qoe,Separator:Yoe,Tooltip:sse},Itemsbar:Bk,BarSeparator:"",ItemsSeparator:b6,Controlsbar:Poe,ToolControlBarItems:joe,Sidebar:{Index:Roe,Heading:Uoe,SubHeading:x6,TextCategory:Boe,ExpandableContainer:Foe}},Uk=class extends u.Component{constructor(){super(...arguments),this.renderIcon=e=>{const{tool:t,config:r}=this.props,i=r.state.config[t];if("icon"in i){const o=i.icon;return u.createElement(o,null)}const n=_z[e];return u.createElement(n,null)||null},this.update=e=>{const{active:t}=this.props;t.selectTool(e)}}getToolTitle(e){const{config:t}=this.props;return t.locale[e].title}render(){const{tool:e,disabled:t,custom:r,active:i,isReverse:n}=this.props,o=i.tool;if(e){const s=r.getAdvancedToolbarItem();return s?u.createElement(s,{key:e,isDisabled:t,isActive:e===o,isReverse:n,icon:this.renderIcon(e),onClick:()=>this.update(e),tool:e,label:this.getToolTitle(e)}):null}return u.createElement(Ae.Toolbar.Separator,null)}};Uk=x([vt("active","config","custom"),Q],Uk);var ase=Uk,C6=Q(function(){const{custom:t,config:r,active:i}=oe(),n=r.config.order==="reverse",o=t.getAdvancedToolbar();return o?u.createElement(o,{reverse:n},r.tools.map((s,a)=>u.createElement(ase,{key:s||a,tool:s,isReverse:n,disabled:!(i.image||s==="library"||s==="customTool")}))):null}),lse=z(ce.Input.Slider)`
  padding-bottom: 16px;
`,cse=Q(()=>{const{adjustmentsTool:e}=oe(),{categories:t,items:r,config:i,locale:n}=e,o=K.exports.useRef(!1),s=l=>{const c=e[l.identifier],h=K.exports.useRef(c),f=e.locale.categories[l.identifier]||l.name,d=p=>{o.current&&p!==h.current&&(e.toolSnapshot(),o.current=!1,h.current=p)};return u.createElement(lse,{identifier:l.identifier,adjust:!0,key:l.identifier,label:f,value:c,onChange:p=>{e.editAdjustments({type:l.identifier,value:p}),o.current=c!==p},onMouseUp:d,onTouchEnd:d,snap:0})},a=(l,c)=>{const h=n.categories[l.identifier]||l.name;return l.items?u.createElement(Ae.Sidebar.TextCategory,{key:l.identifier,name:h,isFirstCategory:c===0,isLastCategory:c===t.length-1},l.items.map(s)):null};return i.flattenCategories?u.createElement(u.Fragment,null,r.map(s)):u.createElement(u.Fragment,null,t.map(a))}),use=()=>u.createElement(Ae.Itemsbar,null,u.createElement(cse,null)),hse=Q(()=>{const{adjustmentsTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.reset()};return i?u.createElement(i,{tool:"adjustment",label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isDirty,onClick:n}):null}),dse=Q(()=>{const{adjustmentsTool:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{if(typeof n=="string")switch(n){case"items":return u.createElement(use,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"removeAdjustmentButton":return u.createElement(hse,{key:n});default:return null}else if(typeof n=="object")return u.createElement(Ae.Controlsbar,{key:n.type,show:e.isDirty},n.children.map(o=>i(o)));return null};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),fse=Q(({displayTitle:e})=>{const{adjustmentsTool:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(dse,null))}),pse=Q(()=>{const{brushTool:e}=oe(),t=e.locale.controls,r=e.localeColor.colorPicker,{colorList:i}=e;return u.createElement(ce.Input.Selection,{label:t.selectColor},u.createElement(Zn,{tool:"brush",activeColor:e.color,colors:i,labelsColor:r,onChange:e.changeColor}))}),mse=Q(()=>{const{brushTool:e}=oe(),t=e.locale.controls;return u.createElement(ce.Input.Slider,{"data-test":Le.BrushHardness,label:t.sliderHardness,value:e.hardness,min:0,max:1,onChange:e.changeHardness})}),gse=Q(()=>{const{brushTool:e}=oe(),t=e.locale.controls;return u.createElement(ce.Input.Slider,{"data-test":Le.BrushSize,label:t.sliderSize,value:e.relativeSize,min:1,max:100,divider:1,onChange:e.changeRelativeSize})}),vse=Q(()=>{const{brushTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.reset()};return i?u.createElement(i,{tool:"brush",label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isDirty,onClick:n}):null}),yse=Q(()=>{const{brushTool:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{if(typeof n=="string")switch(n){case"brushColorList":return u.createElement(pse,{key:n});case"brushHardnessSlider":return u.createElement(mse,{key:n});case"brushSizeSlider":return u.createElement(gse,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"removeBrushButton":return u.createElement(vse,{key:n});default:return null}else if(typeof n=="object")return u.createElement(Ae.Controlsbar,{key:n.type,show:e.isDirty},n.children.map(o=>i(o)));return null};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),_se=({brushTool:e,displayTitle:t})=>u.createElement(u.Fragment,null,t&&u.createElement(Ae.Sidebar.Heading,null,e.locale.title),u.createElement(yse,null)),bse=vt("brushTool")(Q(_se)),xse=({displayTitle:e})=>{const{config:t}=oe(),r=t.state.config.customTool.toolControlBar,{title:i}=t.state.locale.customTool;return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,i),u.createElement(r,{language:t.state.locale.customTool}))},wse=Q(()=>{const{filterTool:e}=oe(),t=e.locale.controls,r=e.state,i=()=>{e.toolSnapshot()};return u.createElement(ce.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderIntensity,value:r.intensity,min:0,max:1,onChange:e.changeIntensity,onMouseUp:i,onTouchEnd:i,snap:r.isDuotone?.5:null,isDisabled:!e.isOptionSelected})}),Sse=Q(()=>{const{filterTool:e,custom:t}=oe(),{categories:r,config:i,items:n,locale:o}=e,s=t.getAdvancedItemCard(),a=t.getAdvancedCategoryCard(),l=(f,d)=>{const p=o.items[f.identifier]||f.name;return s?u.createElement(s,{tool:"filter",type:"medium",onClick:()=>e.selectFilter(f.identifier,f.defaultIntensity),key:f.identifier,image:f.thumbnailURI,label:p,style:{animationDelay:`${wr(d)}s`},isActive:e.identifier===f.identifier},u.createElement(wn,{withBackground:!0},p)):null},c=(f,d)=>{const{selectedCategoryIdentifier:p}=e,v=p===f.identifier,g=o.categories[f.identifier]||f.name;return!f.items||!a?null:u.createElement("div",{key:f.identifier},u.createElement(a,{isActive:v,tool:"filter",type:"large",onClick:()=>e.toggleCategorySelection(f.identifier),image:f.thumbnailURI,label:g,style:{animationDelay:`${wr(d)}s`}},u.createElement(wn,{withBackground:!0,caret:!0,isActive:v},g)),u.createElement(Ae.Sidebar.ExpandableContainer,{show:v},f.items.map(l)))},h=(f,d)=>{const p=o.categories[f.identifier]||f.name;return f.items?u.createElement(Ae.Sidebar.TextCategory,{key:f.identifier,name:p,isFirstCategory:d===0,isLastCategory:d===r.length-1},f.items.map(l)):null};return i.flattenCategories?u.createElement(u.Fragment,null,n.map(l)):i.categoryHeaderType==="card"?u.createElement(u.Fragment,null,r.map(c)):i.categoryHeaderType==="text"?u.createElement(u.Fragment,null,r.map(h)):null}),Cse=()=>u.createElement(Ae.Itemsbar,null,u.createElement(Ae.CardContainer,null,u.createElement(Sse,null))),kse=Q(()=>{const{filterTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.reset()};return i?u.createElement(i,{tool:"filter",label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isOptionSelected,onClick:n}):null}),Tse=Q(()=>{const{filterTool:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{if(typeof n=="string")switch(n){case"items":return u.createElement(Cse,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"removeFilterButton":return u.createElement(kse,{key:n});case"filterIntensitySlider":return u.createElement(wse,{key:n});default:return null}else if(typeof n=="object")return u.createElement(Ae.Controlsbar,{key:n.type,show:e.isOptionSelected},n.children.map(o=>i(o)));return null};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),Ese=Q(({displayTitle:e})=>{const{filterTool:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(Tse,null))}),Dse=Q(()=>{const{focusTool:e}=oe(),t=e.locale.controls,r=()=>{e.toolSnapshot(t.sliderIntensity)};return u.createElement(ce.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderIntensity,value:e.relativeIntensity,min:0,max:100,divider:1,onChange:e.changeRelativeIntensity,onMouseUp:r,onTouchEnd:r,isDisabled:!e.isOptionSelected})}),Ise=Q(()=>{const{focusTool:e,custom:t}=oe(),{items:r}=e,i=(n,o)=>{const s=e.locale.items[n.identifier]||n.name,a=t.getAdvancedItemCard();return a?u.createElement(a,{tool:"focus",type:"large",onClick:()=>e.selectFocus(n.identifier),key:n.identifier,image:n.thumbnailURI,label:s,style:{animationDelay:`${wr(o)}s`},isActive:n.identifier===e.identifier},u.createElement(wn,{withBackground:!0},s)):null};return u.createElement(u.Fragment,null,r.map(i))}),Rse=()=>u.createElement(Ae.Itemsbar,null,u.createElement(Ae.CardContainer,null,u.createElement(Ise,null))),Fse=Q(()=>{const{focusTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.reset()};return i?u.createElement(i,{tool:"focus",label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isOptionSelected,onClick:n}):null}),Ose=Q(()=>{const{focusTool:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{if(typeof n=="string")switch(n){case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"removeFocusButton":return u.createElement(Fse,{key:n});case"focusIntensitySlider":return u.createElement(Dse,{key:n});case"items":return u.createElement(Rse,{key:n});default:return null}else if(typeof n=="object")return u.createElement(Ae.Controlsbar,{key:n.type,show:e.isOptionSelected},n.children.map(o=>i(o)));return null};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),Mse=Q(({displayTitle:e})=>{const{focusTool:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(Ose,null))}),Pse=Q(()=>{const{frameTool:e}=oe(),t=e.locale.controls,r=e.localeColor.colorPicker,{colorList:i,tintable:n}=e;return u.createElement(ce.Input.Selection,{isDisabled:!n,label:t.selectColor},u.createElement(Zn,{tool:"frame",activeColor:e.color,colors:i,labelsColor:r,isDisabled:!n,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))}),Ase=Q(()=>{const{frameTool:e,custom:t}=oe(),{items:r}=e,i=e.state?e.state.identifier:null,n=(o,s)=>{const a=e.locale.items[o.identifier]||o.name,l=t.getAdvancedItemCard();return l?u.createElement(l,{tool:"frame",type:"medium",onClick:()=>e.selectFrame(o.identifier),key:o.identifier,image:o.thumbnailURI,label:a,style:{backgroundSize:"75%",animationDelay:`${wr(s)}s`},isActive:o.identifier===i},u.createElement(wn,{hidden:!0},a)):null};return u.createElement(Ae.Itemsbar,null,u.createElement(Ae.CardContainer,null,r.map(n)))}),zse=Q(()=>{const{frameTool:e}=oe(),t=e.locale.controls,r=i=>{e.toolSnapshot(i)};return u.createElement(ce.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:()=>{r(t.sliderOpacity)},onTouchEnd:()=>{r(t.sliderOpacity)},isDisabled:!e.isOptionSelected})}),$se=Q(()=>{const{frameTool:e}=oe(),t=e.locale.controls,r=i=>{e.toolSnapshot(i)};return u.createElement(ce.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderSize,value:e.size,min:e.minSize,max:e.maxSize,divider:1,onChange:e.changeWidth,onMouseUp:()=>{r(t.sliderSize)},onTouchEnd:()=>{r(t.sliderSize)},isDisabled:!e.isOptionSelected})}),Bse=Q(()=>{const{frameTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.reset()};return i?u.createElement(i,{tool:"frame",ariaLabel:r.buttonReset,onClick:n,isDisabled:!e.isOptionSelected,label:r.buttonReset}):null}),Lse=Q(()=>{const{frameTool:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{if(typeof n=="string")switch(n){case"items":return u.createElement(Ase,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"frameOpacitySlider":return u.createElement(zse,{key:n});case"frameSizeSlider":return u.createElement($se,{key:n});case"frameColorList":return u.createElement(Pse,{key:n});case"removeFrameButton":return u.createElement(Bse,{key:n});default:return null}else if(typeof n=="object")return u.createElement(Ae.Controlsbar,{key:n.type,show:e.isOptionSelected},n.children.map(o=>i(o)));return null};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),Use=Q(({displayTitle:e})=>{const{frameTool:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(Lse,null))}),Nse=Q(()=>{const{active:e,library:t,custom:r}=oe(),{query:i,config:n,selectedCategoryIdentifier:o,categories:s,items:a}=t,l=r.getAdvancedCategoryCard(),c=r.getAdvancedItemCard(),h=(p,v)=>c?u.createElement(c,{tool:"library",type:"medium",onClick:()=>e.newImage(p.rawUrl),key:`${p.identifier}-${v}`,image:p.thumbnailURI,label:p.name,style:{animationDelay:`${wr(v)}s`},authorAvatar:p.authorAvatar,authorName:p.authorName},p.authorAvatar&&u.createElement(RP,{url:p.authorAvatar}),p.authorName&&u.createElement(wn,{withBackground:!0},p.authorName)):null,f=(p,v)=>{const g=o===p.identifier;return!p.items||!l?null:u.createElement("div",{key:p.identifier},u.createElement(l,{isActive:g,tool:"library",type:"large",onClick:()=>t.toggleCategorySelection(p.identifier),image:p.thumbnailURI,label:p.name,style:{animationDelay:`${wr(v)}s`}},u.createElement(wn,{withBackground:!0,caret:!0,isActive:g},p.name)),u.createElement(Ae.Sidebar.ExpandableContainer,{show:g},p.items.map(h)))},d=(p,v)=>p.items?u.createElement(Ae.Sidebar.TextCategory,{key:p.identifier,name:p.name,isFirstCategory:v===0,isLastCategory:v===s.length-1},p.items.map(h)):null;return i?a.length?u.createElement(u.Fragment,null,a.map(h)):u.createElement("p",{"data-test":Le.NoResult},t.locale.controls.noResults):n.flattenCategories?u.createElement(u.Fragment,null,a.map(h)):n.categoryHeaderType==="card"?u.createElement(u.Fragment,null,s.map(f)):n.categoryHeaderType==="text"?u.createElement(u.Fragment,null,s.map(d)):null}),jse=()=>u.createElement(Ae.Itemsbar,null,u.createElement(Ae.CardContainer,null,u.createElement(Nse,null))),Hse=Q(()=>{const{library:e,active:t}=oe(),{config:r}=e,i=e.locale.controls,n=()=>{t.selectWebcam(!0)};return r.enableWebcam?u.createElement(Kz,{tool:"library",onClick:n,label:i.buttonWebcamOpen}):null}),Wse=Q(()=>{const{library:e}=oe(),{libraryProvider:t}=e,r=e.locale.controls,i=n=>{e.fetchImages(n)};return t?u.createElement(ce.Input.Search,{onChange:i,placeholder:r.placeholderSearch}):null}),Vse=Q(()=>{const{library:e,active:t,custom:r}=oe(),{config:i}=e,n=e.locale.controls,o=r.getButton("toolControlBarPrimaryButton"),s=l=>{const{files:c}=l.target;if(c.length){const h=new FileReader;h.onload=f=>{t.newImage(f.target.result)},h.readAsDataURL(c[0])}},a=()=>{const l=document.getElementById("fileUpload");l&&l.click()};return i.enableUpload&&o?u.createElement(o,{"data-test":Le.LibraryUploadButton,tool:"library",ariaLabel:n.buttonUpload,onClick:a,label:n.buttonUpload},u.createElement(ce.Input.File,{onChange:s})):null}),Gse=Q(()=>{const{library:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{switch(n){case"items":return u.createElement(jse,{key:n});case"openWebcamButton":return u.createElement(Hse,{key:n});case"searchFieldInput":return u.createElement(Wse,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"uploadImageButton":return u.createElement(Vse,{key:n});default:return null}};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),qse=Q(({displayTitle:e})=>{const{library:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(Gse,null))}),Xse=Q(()=>{const{overlayTool:e}=oe(),{allBlendModes:t,blendMode:r}=e,i=e.locale.controls,n=o=>{e.changeBlendMode(o)};return u.createElement(ce.Input.CarouselSlider,{label:i.carouselBlendMode,defaultIdentifier:r,onSelect:n,list:t})}),Yse=Q(()=>{const{overlayTool:e,custom:t}=oe(),{items:r,locale:i,identifier:n,selectOverlay:o}=e,s=(a,l)=>{const c=i.items[a.identifier]||a.name,h=t.getAdvancedItemCard();return h?u.createElement(h,{tool:"overlay",type:"medium",onClick:()=>o(a.identifier),key:a.identifier,image:a.thumbnailURI,label:c,style:{animationDelay:`${wr(l)}s`},isActive:a.identifier===n},u.createElement(wn,{withBackground:!0},c)):null};return u.createElement(u.Fragment,null,r.map(s))}),Qse=()=>u.createElement(Ae.Itemsbar,null,u.createElement(Ae.CardContainer,null,u.createElement(Yse,null))),Kse=Q(()=>{const{overlayTool:e}=oe(),t=e.locale.controls,r=()=>{e.toolSnapshot()};return u.createElement(ce.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:r,onTouchEnd:r,isDisabled:!e.isOptionSelected})}),Zse=Q(()=>{const{overlayTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.reset()};return i?u.createElement(i,{tool:"overlay",label:r.buttonReset,ariaLabel:r.buttonReset,isDisabled:!e.isOptionSelected,onClick:n}):null}),Jse=Q(()=>{const{overlayTool:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{if(typeof n=="string")switch(n){case"items":return u.createElement(Qse,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"overlayBlendModeCarousel":return u.createElement(Xse,{key:n});case"overlayOpacitySlider":return u.createElement(Kse,{key:n});case"removeOverlayButton":return u.createElement(Zse,{key:n});default:return null}else if(typeof n=="object")return u.createElement(Ae.Controlsbar,{key:n.type,show:e.isOptionSelected},n.children.map(o=>i(o)));return null};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),eae=Q(({displayTitle:e})=>{const{overlayTool:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(Jse,null))}),tae=Q(()=>{const{stickerTool:e}=oe(),{colorList:t}=e,r=e.locale.controls,i=e.localeColor.colorPicker,n=!e.isStickerSelected||!e.tintable&&e.isStickerSelected;return u.createElement(ce.Input.Selection,{isDisabled:n,label:r.selectColor},u.createElement(Zn,{tool:"sticker",activeSprite:e.id,activeColor:e.tintColor,colors:t,labelsColor:i,isDisabled:n,onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot}))}),rae=Q(()=>{const{stickerTool:e,custom:t}=oe(),{categories:r,selectedCategoryIdentifier:i,config:n,items:o,locale:s}=e,a=t.getAdvancedCategoryCard(),l=t.getAdvancedItemCard(),c=(d,p)=>{const v=s.items[d.identifier]||d.name;return l?u.createElement(l,{key:d.identifier,tool:"sticker",type:"small",onClick:()=>e.add(d.identifier),image:d.thumbnailURI,label:v,style:{backgroundSize:"75%",animationDelay:`${tF(p)}s`}},u.createElement(wn,{hidden:!0},v)):null},h=(d,p)=>{const v=i===d.identifier,g=s.categories[d.identifier]||d.name;return!d.items||!a?null:u.createElement("div",{key:d.identifier},u.createElement(a,{isActive:v,tool:"sticker",type:"large",onClick:()=>e.toggleCategorySelection(d.identifier),image:d.thumbnailURI,label:g,style:{animationDelay:`${wr(p)}s`}},u.createElement(wn,{withBackground:!0,caret:!0,isActive:v},g)),u.createElement(Ae.Sidebar.ExpandableContainer,{show:v,key:`${d.identifier}-items`},d.items.map(c)))},f=(d,p)=>{const v=s.categories[d.identifier]||d.name;return d.items?u.createElement(Ae.Sidebar.TextCategory,{key:d.identifier,name:v,isFirstCategory:p===0,isLastCategory:p===r.length-1},d.items.map(c)):null};return n.flattenCategories?u.createElement(u.Fragment,null,o.map(c)):n.categoryHeaderType==="card"?u.createElement(u.Fragment,null,r.map(h)):n.categoryHeaderType==="text"?u.createElement(u.Fragment,null,r.map(f)):null}),iae=()=>u.createElement(Ae.Itemsbar,null,u.createElement(Ae.CardContainer,null,u.createElement(rae,null))),nae=Q(()=>{const{stickerTool:e}=oe(),t=e.locale.controls,r=()=>{e.toolSnapshot()};return u.createElement(ce.Input.Slider,{isDisabled:!e.isStickerSelected,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:r,onTouchEnd:r})}),oae=z.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${GA.VisuallyHidden}
`,sae=Q(()=>{const{stickerTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarPrimaryButton"),n=()=>{const s=document.getElementById("fileUpload");s&&(s.value=null,s.click())},o=s=>{const{files:a}=s.target;e.addFiles(a)};return e.isCustomStickerEnabled&&i?u.createElement(i,{tool:"sticker",ariaLabel:r.buttonUpload,onClick:n,label:r.buttonUpload},u.createElement(oae,{onChange:o})):null}),aae=Q(()=>{const{stickerTool:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{switch(n){case"items":return u.createElement(iae,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"uploadStickerButton":return u.createElement(sae,{key:n});case"stickerColorList":return u.createElement(tae,{key:n});case"stickerOpacitySlider":return u.createElement(nae,{key:n});default:return null}};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),lae=Q(({displayTitle:e})=>{const{stickerTool:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(aae,null))}),cae=Q(()=>{const{textTool:e}=oe(),t=e.locale.controls,r=e.localeColor.colorPicker,{isTextSelected:i,backgroundColorList:n}=e;return u.createElement(ce.Input.Selection,{isDisabled:!i,label:t.selectBackgroundColor},u.createElement(Zn,{tool:"text",activeSprite:e.id,activeColor:e.backgroundColor,colors:n,labelsColor:r,isDisabled:!i,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot}))}),uae=Q(()=>{const{textTool:e}=oe(),t=e.locale.controls,{fontFamily:r,fontStyle:i,fontWeight:n,fontFamilies:o,isTextSelected:s}=e,a=o.map(c=>({label:`${c.fontFamily} ${nt.getDisplayFontStyle(c)}`,fontWeight:c.fontWeight,fontStyle:c.fontStyle,fontFamily:c.fontFamily,value:c.identifier})),l=a.filter(({value:c})=>c===e.identifier)[0];return u.createElement(ce.Input.Dropdown,{isDisabled:!s,style:{fontFamily:r,fontStyle:i,fontWeight:n},itemStyle:c=>({fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight}),label:t.dropdownFontFamily,list:a,onSelect:e.changeFont,selectedItem:l.label})}),hae=z(ce.Input.NumericInput)`
  max-width: 50%;
  margin-right: 16px;
`,dae=Q(()=>{const{textTool:e}=oe(),t=e.locale.controls,{isTextSelected:r}=e,i=n=>{const o=n?parseFloat(n):0;e.setFontSize(Math.max(10,Math.min(690,o)))};return u.createElement(hae,{value:e.fontSize.toFixed(0),onSubmit:i,label:t.textFontSize,isDisabled:!r})}),fae=Q(()=>{const{textTool:e}=oe(),t=e.locale.controls,{isTextSelected:r}=e,i=()=>{e.toolSnapshot()};return u.createElement(ce.Input.Slider,{isDisabled:!r,label:t.sliderLineSpacing,value:e.lineHeight,min:.5,max:3,onChange:e.changeLineHeight,onMouseUp:i,onTouchEnd:i,snap:1,divider:1,decimal:1})}),pae=Q(()=>{const{textTool:e,custom:t}=oe(),r=e.locale.controls,i=()=>{e.add()},n=t.getButton("toolControlBarPrimaryButton");return n?u.createElement(n,{tool:"text",ariaLabel:r.buttonNew,onClick:i,label:r.buttonNew}):null}),mae=z(ce.Input.Selection)`
  width: 50%;
`,gae=Q(()=>{const{textTool:e,custom:t}=oe(),r=e.locale.controls,{isTextSelected:i,alignment:n}=e,o=["left","center","right"],s=t.getButton("textAlignment");return u.createElement(mae,{isDisabled:!i,inline:!0,label:r.selectAlignment,"data-test":Le.TextAlignment},o.map(a=>{const l=bz[a];return u.createElement(s,{tool:a,isDisabled:!i,ariaLabel:`Align ${a}`,isActive:a===n,key:a,style:{padding:"1px 3px 2px"},icon:u.createElement(l,null),onClick:()=>e.changeAlignment(a)})}))}),vae=Q(()=>{const{textTool:e}=oe(),t=e.locale.controls,r=e.localeColor.colorPicker,{isTextSelected:i,colorList:n}=e;return u.createElement(ce.Input.Selection,{isDisabled:!i,label:t.selectFontColor},u.createElement(Zn,{tool:"text",activeSprite:e.id,activeColor:e.textColor,colors:n,labelsColor:r,isDisabled:!i,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))}),yae=z.div`
  display: flex;
  justify-content: space-between;
`,_ae=({textTool:e})=>{const{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{if(typeof n=="string")switch(n){case"newTextButton":return u.createElement(pae,{key:n});case"fontFamilyDropdown":return u.createElement(uae,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"textColorList":return u.createElement(vae,{key:n});case"backgroundColorList":return u.createElement(cae,{key:n});case"lineSpacingSlider":return u.createElement(fae,{key:n});case"textAlignmentList":return u.createElement(gae,{key:n});case"fontSizeInput":return u.createElement(dae,{key:n});default:return null}else if(typeof n=="object")return u.createElement(yae,{key:n.type},n.children.map(o=>i(o)));return null};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))},bae=vt("textTool")(Q(_ae)),xae=Q(({displayTitle:e})=>{const{textTool:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(bae,null))}),wae=Q(()=>{const{textDesignTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarPrimaryButton"),n=()=>{e.add()};return i?u.createElement(i,{tool:"textdesign",ariaLabel:r.buttonNew,onClick:n,label:r.buttonNew}):null}),Sae=Q(()=>{const{textDesignTool:e,custom:t}=oe(),r=e.locale.controls,{isTextDesignSelected:i}=e,n=t.getButton("toolControlBarSecondaryButton"),o=()=>{e.changeSeed()};return n?u.createElement(n,{tool:"textdesign",ariaLabel:r.buttonShuffle,isDisabled:!i,onClick:o,label:r.buttonShuffle}):null}),Cae=Q(()=>{const{textDesignTool:e}=oe(),t=e.locale.controls,r=e.localeColor.colorPicker,{isTextDesignSelected:i,colorList:n}=e;return u.createElement(ce.Input.Selection,{isDisabled:!i,label:t.selectColor},u.createElement(Zn,{tool:"textdesign",activeSprite:e.id,activeColor:e.color,colors:n,labelsColor:r,isDisabled:!i,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))}),kae=Q(()=>{const{textDesignTool:e,custom:t}=oe(),{items:r,identifier:i}=e,n=s=>{e.changeIdentifier(s)},o=(s,a)=>{const l=t.getAdvancedItemCard();return l?u.createElement(l,{key:s.identifier,tool:"textdesign",type:"medium",onClick:()=>n(s.identifier),image:s.thumbnailURI,label:s.name||"",style:{animationDelay:`${wr(a)}s`,backgroundSize:"60%"},isDisabled:!e.isTextDesignSelected,isActive:i===s.identifier},u.createElement(wn,{hidden:!0},s.name)):null};return u.createElement(u.Fragment,null,r.map(o))}),Tae=()=>u.createElement(Ae.Itemsbar,null,u.createElement(Ae.CardContainer,null,u.createElement(kae,null))),Eae=Q(()=>{const{textDesignTool:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{switch(n){case"items":return u.createElement(Tae,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"newTextDesignButton":return u.createElement(wae,{key:n});case"shuffleLayoutButton":return u.createElement(Sae,{key:n});case"textDesignColorList":return u.createElement(Cae,{key:n});default:return null}};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),Dae=Q(({displayTitle:e})=>{const{textDesignTool:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(Eae,null))}),Iae=Q(()=>{const{transformTool:e}=oe(),t=e.locale.controls,{forceDimensions:r,localOutputHeight:i,localOutputWidth:n}=e;return u.createElement(Hz,{isDisabled:r,showLabel:!0,valueHeight:i,valueWidth:n,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:t.inputCropSize,labelHeight:t.inputHeight,labelWidth:t.inputWidth})}),Rae=Q(()=>{const{transformTool:e,custom:t}=oe(),r=e.locale.controls,{forceDimensions:i,lockResolution:n}=e,o=t.getCheckbox();return o?u.createElement(o,{tool:"transform",isDisabled:i,value:n,label:r.checkboxKeepResolution,checkMarkPosition:"right",onClick:e.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}}):null}),Fae=Q(()=>{const{transformTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.reset()};return i?u.createElement(i,{tool:"transform",ariaLabel:r.buttonReset,onClick:n,label:r.buttonReset}):null}),Oae=Q(()=>{const{transformTool:e,custom:t,editor:r}=oe(),{categories:i,items:n,identifier:o,config:s,locale:a}=e,l=t.getAdvancedItemCard(),c=t.getAdvancedCategoryCard(),h=(p,v)=>{const{theme:g,measurements:m}=r.configStore,y=a.items[p.identifier]||p.name;let _=p.thumbnailURI||"",b="80%";if(!e.checkIfTransformThumbnailExits(p.thumbnailURI)){const w=p.identifier.includes("imgly_transform_common"),S=tr.crops[p.identifier]||tr.crops.imgly_transform_common_custom,C=u.createElement(S,{width:m.advancedUICard.medium.width-(w?42:0),height:m.advancedUICard.medium.height-(w?42:0),main:g.transform.crops.main,highlight:g.transform.crops.highlight,shadow:g.transform.crops.shadow});_=`'data:image/svg+xml,${encodeURIComponent(Sk.exports.renderToStaticMarkup(C))}'`,b=yn()||Gl()?"auto":"unset"}return l?u.createElement(l,{key:p.identifier,tool:"transform",type:"medium",onClick:()=>e.changeIdentifier(p.identifier,!0),image:_,label:y,style:{backgroundSize:b,animationDelay:`${wr(v)}s`},isActive:p.identifier===o},u.createElement(wn,null,y)):null},f=(p,v)=>{const{theme:g,measurements:m}=r.configStore,y=e.selectedCategoryIdentifier===p.identifier,_=a.categories[p.identifier]||p.name;let b=p.thumbnailURI||"";if(!p.items||!c)return null;if(!e.checkIfTransformThumbnailExits(p.thumbnailURI)){const w=tr.categories[p.identifier]||tr.crops.imgly_transform_common_custom,S=u.createElement(w,{width:m.advancedUICard.large.width-42,height:m.advancedUICard.large.height-42,main:g.transform.crops.main,highlight:g.transform.crops.highlight,shadow:g.transform.crops.shadow});b=`'data:image/svg+xml,${encodeURIComponent(Sk.exports.renderToStaticMarkup(S))}'`}return u.createElement("div",{key:p.identifier},u.createElement(c,{type:"large",onClick:()=>e.toggleCategorySelection(p.identifier),key:p.identifier,image:b,style:{animationDelay:`${wr(v)}s`},label:p.name,tool:"transform"},u.createElement(wn,{caret:!0,isActive:y},_)),u.createElement(Ae.Sidebar.ExpandableContainer,{show:y},p.items.map(h)))},d=(p,v)=>{const g=a.categories[p.identifier]||p.name;return p.items?u.createElement(Ae.Sidebar.TextCategory,{key:p.identifier,name:g,isFirstCategory:v===0,isLastCategory:v===i.length-1},p.items.map(h)):null};return s.flattenCategories?u.createElement(u.Fragment,null,n.map(h)):s.categoryHeaderType==="card"?u.createElement(u.Fragment,null,i.map(f)):s.categoryHeaderType==="text"?u.createElement(u.Fragment,null,i.map(d)):null}),Mae=()=>u.createElement(Ae.Itemsbar,null,u.createElement(Ae.CardContainer,null,u.createElement(Oae,null))),Pae=Q(()=>{const{transformTool:e}=oe(),{config:t}=e,{advancedUIToolControlBarOrder:r}=t,i=n=>{switch(n){case"items":return u.createElement(Mae,{key:n});case"separator":return u.createElement(Ae.ItemsSeparator,{full:!0,key:gi()});case"resetTransformButton":return u.createElement(Fae,{key:n});case"keepResolutionCheckbox":return u.createElement(Rae,{key:n});case"cropSizeInput":return u.createElement(Iae,{key:n});default:return null}};return u.createElement(Ae.ToolControlBarItems,null,r.map(n=>i(n)))}),Aae=Q(({displayTitle:e})=>{const{transformTool:t}=oe();return u.createElement(u.Fragment,null,e&&u.createElement(Ae.Sidebar.Heading,null,t.locale.title),u.createElement(Pae,null))}),k6=Q(function(){const{active:t,config:r,custom:i}=oe(),n=t.tool,o=r.config.displayToolControlBarTitle,s=i.getAdvancedToolControlBar();return s?u.createElement(s,{reverse:r.config.order==="reverse",tool:n},u.createElement(ce.Switch.Index,{type:n},u.createElement(ce.Switch.Case,{value:"library"},u.createElement(qse,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"filter"},u.createElement(Ese,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"focus"},u.createElement(Mse,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"adjustment"},u.createElement(fse,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"overlay"},u.createElement(eae,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"sticker"},u.createElement(lae,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"text"},u.createElement(xae,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"textdesign"},u.createElement(Dae,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"frame"},u.createElement(Use,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"brush"},u.createElement(bse,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"transform"},u.createElement(Aae,{displayTitle:o})),u.createElement(ce.Switch.Case,{value:"customTool"},u.createElement(xse,{displayTitle:o})))):null}),T6=z.div`
  position: absolute;
  height: 100%;
  width: ${e=>e.theme.measurements.advancedUIToolbar.width+e.theme.measurements.advancedUIToolControlBar.width}px;
  top: 0;
  background: ${e=>e.theme.webcam.backdrop};
  z-index: ${e=>e.theme.measurements.zIndex.disable};
`,Nk=class extends u.Component{static getDerivedStateFromError(e){return console.error(e),{hasError:!0}}render(){const{config:e,active:t,canvas:r,custom:i}=this.props,n=i.getWindowContainer();return e.isOrderDefault?u.createElement(ce.Container,null,t.isWebcam?u.createElement(T6,{style:{left:0}}):null,u.createElement(yk,null),u.createElement(C6,null),u.createElement(k6,null),u.createElement(O_,null,u.createElement(ZC,null),n&&u.createElement(n,{tool:t.tool},u.createElement(wk,null,t.isWebcam?u.createElement(xk,null):null,t.image&&r&&u.createElement(vk,null))))):u.createElement(ce.Container,null,t.isWebcam?u.createElement(T6,{style:{right:0}}):null,u.createElement(yk,null),u.createElement(O_,null,u.createElement(ZC,null),n&&u.createElement(n,{tool:t.tool},u.createElement(wk,null,t.isWebcam?u.createElement(xk,null):null,t.image&&r&&u.createElement(vk,null)))),u.createElement(k6,null),u.createElement(C6,null))}};Nk=x([vt("config","active","canvas","custom"),Q],Nk);var zae=class extends u.Component{constructor(e){super(e),this.ref=null,this.updatePosition=()=>{const{isReverse:t}=this.props,r={x:0,y:0};if(this.ref.current){const{top:i,height:n,left:o,right:s}=this.ref.current.getBoundingClientRect();r.y=i+n/4,r.x=t?window.innerWidth-s:o}this.setState({tooltipPosition:r})},this.mouseOver=t=>{this.updatePosition(),this.setState({hoverTool:t})},this.mouseOut=()=>{this.setState({hoverTool:null})},this.state={hoverTool:null,tooltipPosition:{x:0,y:0}},this.ref=u.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(e){const{isReverse:t}=this.props;t!==e.isReverse&&this.updatePosition()}render(){const{tool:e,isActive:t,isReverse:r,isDisabled:i,icon:n,label:o,onClick:s,className:a,children:l}=this.props,{hoverTool:c,tooltipPosition:h}=this.state;return u.createElement(Bae,{ref:this.ref,onMouseOver:()=>this.mouseOver(e),onMouseOut:()=>this.mouseOut(),onFocus:()=>this.mouseOver(e),onBlur:()=>this.mouseOut(),className:a},u.createElement(Ae.Toolbar.Item,{ariaLabel:o,isActive:t,isDisabled:i,onClick:()=>s(e)},n,l),u.createElement(Ae.Toolbar.Tooltip,{position:h,reverse:r,show:c===e},o))}},$ae=zae,Bae=z.div`
  position: relative;
`,Lae=class extends u.Component{constructor(){super(...arguments),this.componentWillUnmount=()=>{this.editor.cleanUpCanvasMemory()}}componentDidMount(){const{editor:e,storeProps:t}=this.props;this.editor=e,this.storeProps=t;const r=new Nz(this.editor.configStore.config.custom.components,{advancedUICategoryCard:Ae.Card,advancedUIItemCard:Ae.Card,advancedUIToolbarItem:$ae,advancedUIToolbar:Ae.Toolbar.Index,advancedUIToolControlBar:Ae.Sidebar.Index}),i={getAdvancedCategoryCard:r.getAdvancedCategoryCard,getAdvancedItemCard:r.getAdvancedItemCard,getAdvancedToolbarItem:r.getAdvancedToolbarItem,getAdvancedToolbar:r.getAdvancedToolbar,getAdvancedToolControlBar:r.getAdvancedToolControlBar,getDialog:r.getDialog,getButton:r.getButton,getColorItem:r.getColorItem,getCheckbox:r.getCheckbox,getWindowContainer:r.getWindowContainer};this.storeProps.custom=i,this.forceUpdate()}render(){return this.storeProps?u.createElement(bC,L({},this.storeProps),u.createElement(IO,{theme:ge(L({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},u.createElement(Nk,null))):null}},Uae=u.lazy(()=>Promise.resolve().then(function(){return tme})),Nae=e=>({filterTool:e.filterToolStore,focusTool:e.focusToolStore,adjustmentsTool:e.adjustmentsToolStore,overlayTool:e.overlayToolStore,frameTool:e.frameToolStore,brushTool:e.brushToolStore,transformTool:e.transformToolStore,scale:e.scale,sprite:e.spriteStore,stickerTool:e.spriteStore.stickerToolStore,textTool:e.spriteStore.textToolStore,textDesignTool:e.spriteStore.textDesignToolStore,library:e.libraryStore,modal:e.modalStore,snapping:e.snappingStore,config:e.configStore,active:e.activeStore,canvas:e.canvasStore,history:e.historyStore,editor:e}),E6=({editor:e})=>{const t=K.exports.useMemo(()=>Nae(e),[e]);return e.configStore.config.layout==="basic"?u.createElement(K.exports.Suspense,{fallback:u.createElement("div",null)},u.createElement(Uae,{editor:e,storeProps:t})):u.createElement(Lae,{editor:e,storeProps:t})},jae=class extends ff{constructor(e,t,r){super(),this.dispose=()=>{this.container&&(_p.unmountComponentAtNode(this.container),this.removeAllListeners("export"),this.removeAllListeners("historyUndo"),this.removeAllListeners("historyRedo"),this.removeAllListeners("historyChange"),this.removeAllListeners("editorReady"),this.removeAllListeners("errorImageLoading"),this.removeAllListeners("imageLoad"),this.removeAllListeners("toolEnter"),this.removeAllListeners("stickerUploadAdd"),this.removeAllListeners("errorWebGLContextLost"),this.removeAllListeners("cropDimensionsChange"))},this.serialize=n=>this.editor.serialize(n),this.deserialize=n=>this.editor.deserialize(n),this.export=n=>this.editor.export(n),this.close=()=>this.editor.close(),this.setImage=n=>this.editor.setImage(n,!0),this.getImageDimensions=()=>this.editor.getImageDimensions(),this.getImageMimeType=()=>this.editor.getImageMimeType(),this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()},this.container=t;const i={export:n=>{this.emit("export",n)},close:()=>{this.dispose(),this.emit("close")},historyUndo:()=>{this.emit("historyUndo")},historyRedo:()=>{this.emit("historyRedo")},historyChange:()=>{this.emit("historyChange")},stickerUploadAdd:n=>{this.emit("stickerUploadAdd",n)},cropDimensionsChange:n=>{this.emit("cropDimensionsChange",n)}};r&&Object.entries(r).forEach(([n,o])=>{i[n]=o(this)}),this.editor=new Ap(L({},e),i)}hasChanges(){return this.editor.hasChanges()}},Hae=class{constructor(){this.container=null}init(e){return new Promise((t,r)=>{if(typeof window=="undefined"){t();return}this.container=typeof e.container=="string"?document.querySelector(e.container):e.container,this.container?(this.editorApi=new jae(e,this.container,{editorReady:i=>()=>{setTimeout(()=>{i.emit("editorReady")},0),t(i)},errorImageLoading:i=>n=>{setTimeout(()=>{i.emit("errorImageLoading",n)},0),t(i)},errorWebGLContextLost:i=>n=>{setTimeout(()=>{i.emit("errorWebGLContextLost",n)},0),t(i)},imageLoad:i=>()=>{setTimeout(()=>{i.emit("imageLoad")},0),t(i)},toolEnter:i=>n=>{setTimeout(()=>{i.emit("toolEnter",n)},0),t(i)}}),_p.render(u.createElement(Wae,{editor:this.editorApi.editor}),this.container)):r(new Error("Provide a container"))})}},Wae=({editor:e})=>(K.exports.useEffect(()=>()=>{e.engine&&e.engine.dispose(),e.configStore.events.removeAllListeners("export"),e.configStore.events.removeAllListeners("close"),e.configStore.events.removeAllListeners("historyUndo"),e.configStore.events.removeAllListeners("historyRedo"),e.configStore.events.removeAllListeners("historyChange"),e.configStore.events.removeAllListeners("editorReady"),e.configStore.events.removeAllListeners("errorImageLoading"),e.configStore.events.removeAllListeners("imageLoad"),e.configStore.events.removeAllListeners("toolEnter"),e.configStore.events.removeAllListeners("stickerUploadAdd"),e.configStore.events.removeAllListeners("errorWebGLContextLost"),e.configStore.events.removeAllListeners("cropDimensionsChange")},[]),u.createElement(E6,{editor:e})),Vae={init:e=>new Hae().init(e)};(class extends u.Component{constructor(e){super(e),this.ui=new ff,this.serialize=t=>this.editor.serialize(t),this.deserialize=t=>this.editor.deserialize(t),this.export=t=>this.editor.export(t),this.close=()=>this.editor.close(),this.setImage=t=>this.editor.setImage(t,!0),this.getImageDimensions=()=>this.editor.getImageDimensions(),this.dispose=()=>{this.ui.removeAllListeners("export"),this.ui.removeAllListeners("historyUndo"),this.ui.removeAllListeners("historyRedo"),this.ui.removeAllListeners("historyChange"),this.ui.removeAllListeners("editorReady"),this.ui.removeAllListeners("errorImageLoading"),this.ui.removeAllListeners("imageLoad"),this.ui.removeAllListeners("toolEnter"),this.ui.removeAllListeners("stickerUploadAdd"),this.ui.removeAllListeners("errorWebGLContextLost"),this.ui.removeAllListeners("cropDimensionsChange")},this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()},this.editor=new Ap(L({},e),{export:t=>{this.ui.emit("export",t)},close:()=>{this.componentWillUnmount(),this.ui.emit("close")},historyUndo:()=>{this.ui.emit("historyUndo")},historyRedo:()=>{this.ui.emit("historyRedo")},historyChange:()=>{this.ui.emit("historyChange")},editorReady:()=>{this.ui.emit("editorReady")},errorImageLoading:t=>{this.ui.emit("errorImageLoading",t)},imageLoad:()=>{this.ui.emit("imageLoad")},toolEnter:t=>{this.ui.emit("toolEnter",t)},stickerUploadAdd:t=>{this.ui.emit("stickerUploadAdd",t)},cropDimensionsChange:t=>{this.ui.emit("cropDimensionsChange",t)},errorWebGLContextLost:()=>{this.ui.emit("errorWebGLContextLost")}})}componentWillUnmount(){this.dispose()}hasChanges(){return this.editor.hasChanges()}render(){return u.createElement(E6,{editor:this.editor})}});var D6=()=>{const{active:e}=oe();return e.newImage},Gae=()=>{const{active:e}=oe();return e.image},qae=()=>oe().config.isLayoutAdvanced;M4({isolateGlobalState:!0});var{Container:ome,Input:Xae,ColorItem:sme,ColorItemBase:ame,ColorItemBackground:lme,ColorItemTiledBackground:cme,ColorItemActiveOverlay:ume,Dialog:hme,DialogBase:dme,DialogContainer:fme,DialogBackdrop:pme,DialogHeader:mme,DialogBody:gme,DialogFooter:vme,DialogSpinner:I6}=ce,{Search:Yae,Label:Qae,Checkbox:yme,CheckboxBase:_me,CheckboxInput:bme,CheckboxCheckMark:xme,Dropdown:jk}=Xae,R6=y6,F6=Yae,O6=Ae.Sidebar.Index,Kae=Ae.Controlsbar;se.Toolbar.Index;var Zae=T((e,t)=>{t.exports=r;function r(d){i.length||n(),i[i.length]=d}var i=[],n,o=0,s=1024;function a(){for(;o<i.length;){var d=o;if(o=o+1,i[d].call(),o>s){for(var p=0,v=i.length-o;p<v;p++)i[p]=i[p+o];i.length-=o,o=0}}i.length=0,o=0}var l=typeof global!="undefined"?global:self,c=l.MutationObserver||l.WebKitMutationObserver;typeof c=="function"?n=h(a):n=f(a),r.requestFlush=n;function h(d){var p=1,v=new c(d),g=document.createTextNode("");return v.observe(g,{characterData:!0}),function(){p=-p,g.data=p}}function f(d){return function(){var v=setTimeout(m,0),g=setInterval(m,50);function m(){clearTimeout(v),clearInterval(g),d()}}}r.makeRequestCallFromTimer=f}),M6=T((e,t)=>{var r=Zae();function i(){}var n=null,o={};function s(_){try{return _.then}catch(b){return n=b,o}}function a(_,b){try{return _(b)}catch(w){return n=w,o}}function l(_,b,w){try{_(b,w)}catch(S){return n=S,o}}t.exports=c;function c(_){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof _!="function")throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,_!==i&&y(_,this)}c._Y=null,c._Z=null,c._0=i,c.prototype.then=function(_,b){if(this.constructor!==c)return h(this,_,b);var w=new c(i);return f(this,new m(_,b,w)),w};function h(_,b,w){return new _.constructor(function(S,C){var D=new c(i);D.then(S,C),f(_,new m(b,w,D))})}function f(_,b){for(;_._V===3;)_=_._W;if(c._Y&&c._Y(_),_._V===0){if(_._U===0){_._U=1,_._X=b;return}if(_._U===1){_._U=2,_._X=[_._X,b];return}_._X.push(b);return}d(_,b)}function d(_,b){r(function(){var w=_._V===1?b.onFulfilled:b.onRejected;if(w===null){_._V===1?p(b.promise,_._W):v(b.promise,_._W);return}var S=a(w,_._W);S===o?v(b.promise,n):p(b.promise,S)})}function p(_,b){if(b===_)return v(_,new TypeError("A promise cannot be resolved with itself."));if(b&&(typeof b=="object"||typeof b=="function")){var w=s(b);if(w===o)return v(_,n);if(w===_.then&&b instanceof c){_._V=3,_._W=b,g(_);return}else if(typeof w=="function"){y(w.bind(b),_);return}}_._V=1,_._W=b,g(_)}function v(_,b){_._V=2,_._W=b,c._Z&&c._Z(_,b),g(_)}function g(_){if(_._U===1&&(f(_,_._X),_._X=null),_._U===2){for(var b=0;b<_._X.length;b++)f(_,_._X[b]);_._X=null}}function m(_,b,w){this.onFulfilled=typeof _=="function"?_:null,this.onRejected=typeof b=="function"?b:null,this.promise=w}function y(_,b){var w=!1,S=l(_,function(C){w||(w=!0,p(b,C))},function(C){w||(w=!0,v(b,C))});!w&&S===o&&(w=!0,v(b,n))}}),Jae=T(e=>{var t=M6(),r=[ReferenceError,TypeError,RangeError],i=!1;e.disable=n;function n(){i=!1,t._Y=null,t._Z=null}e.enable=o;function o(l){l=l||{},i&&n(),i=!0;var c=0,h=0,f={};t._Y=function(v){v._V===2&&f[v._1]&&(f[v._1].logged?p(v._1):clearTimeout(f[v._1].timeout),delete f[v._1])},t._Z=function(v,g){v._U===0&&(v._1=c++,f[v._1]={displayId:null,error:g,timeout:setTimeout(d.bind(null,v._1),a(g,r)?100:2e3),logged:!1})};function d(v){(l.allRejections||a(f[v].error,l.whitelist||r))&&(f[v].displayId=h++,l.onUnhandled?(f[v].logged=!0,l.onUnhandled(f[v].displayId,f[v].error)):(f[v].logged=!0,s(f[v].displayId,f[v].error)))}function p(v){f[v].logged&&(l.onHandled?l.onHandled(f[v].displayId,f[v].error):f[v].onUnhandled||(console.warn("Promise Rejection Handled (id: "+f[v].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+f[v].displayId+".")))}}function s(l,c){console.warn("Possible Unhandled Promise Rejection (id: "+l+"):");var h=(c&&(c.stack||c))+"";h.split(`
`).forEach(function(f){console.warn("  "+f)})}function a(l,c){return c.some(function(h){return l instanceof h})}}),ele=T((e,t)=>{var r=M6();t.exports=r;var i=c(!0),n=c(!1),o=c(null),s=c(void 0),a=c(0),l=c("");function c(f){var d=new r(r._0);return d._V=1,d._W=f,d}r.resolve=function(f){if(f instanceof r)return f;if(f===null)return o;if(f===void 0)return s;if(f===!0)return i;if(f===!1)return n;if(f===0)return a;if(f==="")return l;if(typeof f=="object"||typeof f=="function")try{var d=f.then;if(typeof d=="function")return new r(d.bind(f))}catch(p){return new r(function(v,g){g(p)})}return c(f)};var h=function(f){return typeof Array.from=="function"?(h=Array.from,Array.from(f)):(h=function(d){return Array.prototype.slice.call(d)},Array.prototype.slice.call(f))};r.all=function(f){var d=h(f);return new r(function(p,v){if(d.length===0)return p([]);var g=d.length;function m(_,b){if(b&&(typeof b=="object"||typeof b=="function"))if(b instanceof r&&b.then===r.prototype.then){for(;b._V===3;)b=b._W;if(b._V===1)return m(_,b._W);b._V===2&&v(b._W),b.then(function(C){m(_,C)},v);return}else{var w=b.then;if(typeof w=="function"){var S=new r(w.bind(b));S.then(function(C){m(_,C)},v);return}}d[_]=b,--g===0&&p(d)}for(var y=0;y<d.length;y++)m(y,d[y])})},r.reject=function(f){return new r(function(d,p){p(f)})},r.race=function(f){return new r(function(d,p){h(f).forEach(function(v){r.resolve(v).then(d,p)})})},r.prototype.catch=function(f){return this.then(null,f)}}),tle=T((e,t)=>{(function(r,i){typeof e=="object"&&typeof t!="undefined"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i(r.WHATWGFetch={})})(e,function(r){var i=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof i!="undefined"&&i,n={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function o(k){return k&&DataView.prototype.isPrototypeOf(k)}if(n.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(k){return k&&s.indexOf(Object.prototype.toString.call(k))>-1};function l(k){if(typeof k!="string"&&(k=String(k)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(k)||k==="")throw new TypeError("Invalid character in header field name");return k.toLowerCase()}function c(k){return typeof k!="string"&&(k=String(k)),k}function h(k){var R={next:function(){var $=k.shift();return{done:$===void 0,value:$}}};return n.iterable&&(R[Symbol.iterator]=function(){return R}),R}function f(k){this.map={},k instanceof f?k.forEach(function(R,$){this.append($,R)},this):Array.isArray(k)?k.forEach(function(R){this.append(R[0],R[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(R){this.append(R,k[R])},this)}f.prototype.append=function(k,R){k=l(k),R=c(R);var $=this.map[k];this.map[k]=$?$+", "+R:R},f.prototype.delete=function(k){delete this.map[l(k)]},f.prototype.get=function(k){return k=l(k),this.has(k)?this.map[k]:null},f.prototype.has=function(k){return this.map.hasOwnProperty(l(k))},f.prototype.set=function(k,R){this.map[l(k)]=c(R)},f.prototype.forEach=function(k,R){for(var $ in this.map)this.map.hasOwnProperty($)&&k.call(R,this.map[$],$,this)},f.prototype.keys=function(){var k=[];return this.forEach(function(R,$){k.push($)}),h(k)},f.prototype.values=function(){var k=[];return this.forEach(function(R){k.push(R)}),h(k)},f.prototype.entries=function(){var k=[];return this.forEach(function(R,$){k.push([$,R])}),h(k)},n.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);function d(k){if(k.bodyUsed)return Promise.reject(new TypeError("Already read"));k.bodyUsed=!0}function p(k){return new Promise(function(R,$){k.onload=function(){R(k.result)},k.onerror=function(){$(k.error)}})}function v(k){var R=new FileReader,$=p(R);return R.readAsArrayBuffer(k),$}function g(k){var R=new FileReader,$=p(R);return R.readAsText(k),$}function m(k){for(var R=new Uint8Array(k),$=new Array(R.length),H=0;H<R.length;H++)$[H]=String.fromCharCode(R[H]);return $.join("")}function y(k){if(k.slice)return k.slice(0);var R=new Uint8Array(k.byteLength);return R.set(new Uint8Array(k)),R.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(k){this.bodyUsed=this.bodyUsed,this._bodyInit=k,k?typeof k=="string"?this._bodyText=k:n.blob&&Blob.prototype.isPrototypeOf(k)?this._bodyBlob=k:n.formData&&FormData.prototype.isPrototypeOf(k)?this._bodyFormData=k:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)?this._bodyText=k.toString():n.arrayBuffer&&n.blob&&o(k)?(this._bodyArrayBuffer=y(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(k)||a(k))?this._bodyArrayBuffer=y(k):this._bodyText=k=Object.prototype.toString.call(k):this._bodyText="",this.headers.get("content-type")||(typeof k=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var k=d(this);if(k)return k;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var k=d(this);return k||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(v)}),this.text=function(){var k=d(this);if(k)return k;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(m(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(k){var R=k.toUpperCase();return b.indexOf(R)>-1?R:k}function S(k,R){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var $=R.body;if(k instanceof S){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url,this.credentials=k.credentials,R.headers||(this.headers=new f(k.headers)),this.method=k.method,this.mode=k.mode,this.signal=k.signal,!$&&k._bodyInit!=null&&($=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new f(R.headers)),this.method=w(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var H=/([?&])_=[^&]*/;if(H.test(this.url))this.url=this.url.replace(H,"$1_="+new Date().getTime());else{var j=/\?/;this.url+=(j.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function C(k){var R=new FormData;return k.trim().split("&").forEach(function($){if($){var H=$.split("="),j=H.shift().replace(/\+/g," "),V=H.join("=").replace(/\+/g," ");R.append(decodeURIComponent(j),decodeURIComponent(V))}}),R}function D(k){var R=new f,$=k.replace(/\r?\n[\t ]+/g," ");return $.split(/\r?\n/).forEach(function(H){var j=H.split(":"),V=j.shift().trim();if(V){var J=j.join(":").trim();R.append(V,J)}}),R}_.call(S.prototype);function E(k,R){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in R?R.statusText:"",this.headers=new f(R.headers),this.url=R.url||"",this._initBody(k)}_.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},E.error=function(){var k=new E(null,{status:0,statusText:""});return k.type="error",k};var I=[301,302,303,307,308];E.redirect=function(k,R){if(I.indexOf(R)===-1)throw new RangeError("Invalid status code");return new E(null,{status:R,headers:{location:k}})},r.DOMException=i.DOMException;try{new r.DOMException}catch{r.DOMException=function(R,$){this.message=R,this.name=$;var H=Error(R);this.stack=H.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function M(k,R){return new Promise(function($,H){var j=new S(k,R);if(j.signal&&j.signal.aborted)return H(new r.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function J(){V.abort()}V.onload=function(){var U={status:V.status,statusText:V.statusText,headers:D(V.getAllResponseHeaders()||"")};U.url="responseURL"in V?V.responseURL:U.headers.get("X-Request-URL");var N="response"in V?V.response:V.responseText;setTimeout(function(){$(new E(N,U))},0)},V.onerror=function(){setTimeout(function(){H(new TypeError("Network request failed"))},0)},V.ontimeout=function(){setTimeout(function(){H(new TypeError("Network request failed"))},0)},V.onabort=function(){setTimeout(function(){H(new r.DOMException("Aborted","AbortError"))},0)};function ae(U){try{return U===""&&i.location.href?i.location.href:U}catch{return U}}V.open(j.method,ae(j.url),!0),j.credentials==="include"?V.withCredentials=!0:j.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&(n.blob?V.responseType="blob":n.arrayBuffer&&j.headers.get("Content-Type")&&j.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(V.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof f)?Object.getOwnPropertyNames(R.headers).forEach(function(U){V.setRequestHeader(U,c(R.headers[U]))}):j.headers.forEach(function(U,N){V.setRequestHeader(N,U)}),j.signal&&(j.signal.addEventListener("abort",J),V.onreadystatechange=function(){V.readyState===4&&j.signal.removeEventListener("abort",J)}),V.send(typeof j._bodyInit=="undefined"?null:j._bodyInit)})}M.polyfill=!0,i.fetch||(i.fetch=M,i.Headers=f,i.Request=S,i.Response=E),r.Headers=f,r.Request=S,r.Response=E,r.fetch=M,Object.defineProperty(r,"__esModule",{value:!0})})}),rle=T((e,t)=>{var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function s(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var l={},c=0;c<10;c++)l["_"+String.fromCharCode(c)]=c;var h=Object.getOwnPropertyNames(l).map(function(d){return l[d]});if(h.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(d){f[d]=d}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}t.exports=s()?Object.assign:function(a,l){for(var c,h=o(a),f,d=1;d<arguments.length;d++){c=Object(arguments[d]);for(var p in c)i.call(c,p)&&(h[p]=c[p]);if(r){f=r(c);for(var v=0;v<f.length;v++)n.call(c,f[v])&&(h[f[v]]=c[f[v]])}}return h}}),ht=T((e,t)=>{var r=function(i){return i&&i.Math==Math&&i};t.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof global=="object"&&global)||Function("return this")()}),tt=T((e,t)=>{t.exports=function(r){try{return!!r()}catch{return!0}}}),Ut=T((e,t)=>{var r=tt();t.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})}),Q_=T(e=>{var t={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!t.call({1:2},1);e.f=i?function(o){var s=r(this,o);return!!s&&s.enumerable}:t}),ml=T((e,t)=>{t.exports=function(r,i){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:i}}}),Jn=T((e,t)=>{var r={}.toString;t.exports=function(i){return r.call(i).slice(8,-1)}}),Hp=T((e,t)=>{var r=tt(),i=Jn(),n="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(o){return i(o)=="String"?n.call(o,""):Object(o)}:Object}),Xi=T((e,t)=>{t.exports=function(r){if(r==null)throw TypeError("Can't call method on "+r);return r}}),En=T((e,t)=>{var r=Hp(),i=Xi();t.exports=function(n){return r(i(n))}}),Ot=T((e,t)=>{t.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}}),_o=T((e,t)=>{var r=Ot();t.exports=function(i,n){if(!r(i))return i;var o,s;if(n&&typeof(o=i.toString)=="function"&&!r(s=o.call(i))||typeof(o=i.valueOf)=="function"&&!r(s=o.call(i))||!n&&typeof(o=i.toString)=="function"&&!r(s=o.call(i)))return s;throw TypeError("Can't convert object to primitive value")}}),zr=T((e,t)=>{var r={}.hasOwnProperty;t.exports=function(i,n){return r.call(i,n)}}),Hk=T((e,t)=>{var r=ht(),i=Ot(),n=r.document,o=i(n)&&i(n.createElement);t.exports=function(s){return o?n.createElement(s):{}}}),P6=T((e,t)=>{var r=Ut(),i=tt(),n=Hk();t.exports=!r&&!i(function(){return Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a!=7})}),$i=T(e=>{var t=Ut(),r=Q_(),i=ml(),n=En(),o=_o(),s=zr(),a=P6(),l=Object.getOwnPropertyDescriptor;e.f=t?l:function(h,f){if(h=n(h),f=o(f,!0),a)try{return l(h,f)}catch{}if(s(h,f))return i(!r.f.call(h,f),h[f])}}),$t=T((e,t)=>{var r=Ot();t.exports=function(i){if(!r(i))throw TypeError(String(i)+" is not an object");return i}}),ar=T(e=>{var t=Ut(),r=P6(),i=$t(),n=_o(),o=Object.defineProperty;e.f=t?o:function(a,l,c){if(i(a),l=n(l,!0),i(c),r)try{return o(a,l,c)}catch{}if("get"in c||"set"in c)throw TypeError("Accessors not supported");return"value"in c&&(a[l]=c.value),a}}),Yi=T((e,t)=>{var r=Ut(),i=ar(),n=ml();t.exports=r?function(o,s,a){return i.f(o,s,n(1,a))}:function(o,s,a){return o[s]=a,o}}),Wk=T((e,t)=>{var r=ht(),i=Yi();t.exports=function(n,o){try{i(r,n,o)}catch{r[n]=o}return o}}),A6=T((e,t)=>{var r=ht(),i=Wk(),n="__core-js_shared__",o=r[n]||i(n,{});t.exports=o}),Vk=T((e,t)=>{var r=A6(),i=Function.toString;typeof r.inspectSource!="function"&&(r.inspectSource=function(n){return i.call(n)}),t.exports=r.inspectSource}),z6=T((e,t)=>{var r=ht(),i=Vk(),n=r.WeakMap;t.exports=typeof n=="function"&&/native code/.test(i(n))}),bo=T((e,t)=>{t.exports=!1}),Gk=T((e,t)=>{var r=bo(),i=A6();(t.exports=function(n,o){return i[n]||(i[n]=o!==void 0?o:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),Wp=T((e,t)=>{var r=0,i=Math.random();t.exports=function(n){return"Symbol("+String(n===void 0?"":n)+")_"+(++r+i).toString(36)}}),K_=T((e,t)=>{var r=Gk(),i=Wp(),n=r("keys");t.exports=function(o){return n[o]||(n[o]=i(o))}}),Vp=T((e,t)=>{t.exports={}}),Qi=T((e,t)=>{var r=z6(),i=ht(),n=Ot(),o=Yi(),s=zr(),a=K_(),l=Vp(),c=i.WeakMap,h,f,d,p=function(w){return d(w)?f(w):h(w,{})},v=function(w){return function(S){var C;if(!n(S)||(C=f(S)).type!==w)throw TypeError("Incompatible receiver, "+w+" required");return C}};r?(g=new c,m=g.get,y=g.has,_=g.set,h=function(w,S){return _.call(g,w,S),S},f=function(w){return m.call(g,w)||{}},d=function(w){return y.call(g,w)}):(b=a("state"),l[b]=!0,h=function(w,S){return o(w,b,S),S},f=function(w){return s(w,b)?w[b]:{}},d=function(w){return s(w,b)});var g,m,y,_,b;t.exports={set:h,get:f,has:d,enforce:p,getterFor:v}}),Bi=T((e,t)=>{var r=ht(),i=Yi(),n=zr(),o=Wk(),s=Vk(),a=Qi(),l=a.get,c=a.enforce,h=String(String).split("String");(t.exports=function(f,d,p,v){var g=v?!!v.unsafe:!1,m=v?!!v.enumerable:!1,y=v?!!v.noTargetGet:!1;if(typeof p=="function"&&(typeof d=="string"&&!n(p,"name")&&i(p,"name",d),c(p).source=h.join(typeof d=="string"?d:"")),f===r){m?f[d]=p:o(d,p);return}else g?!y&&f[d]&&(m=!0):delete f[d];m?f[d]=p:i(f,d,p)})(Function.prototype,"toString",function(){return typeof this=="function"&&l(this).source||s(this)})}),Cc=T((e,t)=>{var r=ht();t.exports=r}),eo=T((e,t)=>{var r=Cc(),i=ht(),n=function(o){return typeof o=="function"?o:void 0};t.exports=function(o,s){return arguments.length<2?n(r[o])||n(i[o]):r[o]&&r[o][s]||i[o]&&i[o][s]}}),to=T((e,t)=>{var r=Math.ceil,i=Math.floor;t.exports=function(n){return isNaN(n=+n)?0:(n>0?i:r)(n)}}),Kt=T((e,t)=>{var r=to(),i=Math.min;t.exports=function(n){return n>0?i(r(n),9007199254740991):0}}),gl=T((e,t)=>{var r=to(),i=Math.max,n=Math.min;t.exports=function(o,s){var a=r(o);return a<0?i(a+s,0):n(a,s)}}),Gp=T((e,t)=>{var r=En(),i=Kt(),n=gl(),o=function(s){return function(a,l,c){var h=r(a),f=i(h.length),d=n(c,f),p;if(s&&l!=l){for(;f>d;)if(p=h[d++],p!=p)return!0}else for(;f>d;d++)if((s||d in h)&&h[d]===l)return s||d||0;return!s&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}}),$6=T((e,t)=>{var r=zr(),i=En(),n=Gp().indexOf,o=Vp();t.exports=function(s,a){var l=i(s),c=0,h=[],f;for(f in l)!r(o,f)&&r(l,f)&&h.push(f);for(;a.length>c;)r(l,f=a[c++])&&(~n(h,f)||h.push(f));return h}}),qk=T((e,t)=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),kc=T(e=>{var t=$6(),r=qk(),i=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(o){return t(o,i)}}),Xk=T(e=>{e.f=Object.getOwnPropertySymbols}),Yk=T((e,t)=>{var r=eo(),i=kc(),n=Xk(),o=$t();t.exports=r("Reflect","ownKeys")||function(a){var l=i.f(o(a)),c=n.f;return c?l.concat(c(a)):l}}),B6=T((e,t)=>{var r=zr(),i=Yk(),n=$i(),o=ar();t.exports=function(s,a){for(var l=i(a),c=o.f,h=n.f,f=0;f<l.length;f++){var d=l[f];r(s,d)||c(s,d,h(a,d))}}}),qp=T((e,t)=>{var r=tt(),i=/#|\.prototype\./,n=function(c,h){var f=s[o(c)];return f==l?!0:f==a?!1:typeof h=="function"?r(h):!!h},o=n.normalize=function(c){return String(c).replace(i,".").toLowerCase()},s=n.data={},a=n.NATIVE="N",l=n.POLYFILL="P";t.exports=n}),Y=T((e,t)=>{var r=ht(),i=$i().f,n=Yi(),o=Bi(),s=Wk(),a=B6(),l=qp();t.exports=function(c,h){var f=c.target,d=c.global,p=c.stat,v,g,m,y,_,b;if(d?g=r:p?g=r[f]||s(f,{}):g=(r[f]||{}).prototype,g)for(m in h){if(_=h[m],c.noTargetGet?(b=i(g,m),y=b&&b.value):y=g[m],v=l(d?m:f+(p?".":"#")+m,c.forced),!v&&y!==void 0){if(typeof _==typeof y)continue;a(_,y)}(c.sham||y&&y.sham)&&n(_,"sham",!0),o(g,m,_,c)}}}),Tc=T((e,t)=>{var r=Jn();t.exports=Array.isArray||function(n){return r(n)=="Array"}}),Rr=T((e,t)=>{var r=Xi();t.exports=function(i){return Object(r(i))}}),Ec=T((e,t)=>{var r=_o(),i=ar(),n=ml();t.exports=function(o,s,a){var l=r(s);l in o?i.f(o,l,n(0,a)):o[l]=a}}),Qk=T((e,t)=>{var r=tt();t.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})}),L6=T((e,t)=>{var r=Qk();t.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),Gt=T((e,t)=>{var r=ht(),i=Gk(),n=zr(),o=Wp(),s=Qk(),a=L6(),l=i("wks"),c=r.Symbol,h=a?c:c&&c.withoutSetter||o;t.exports=function(f){return n(l,f)||(s&&n(c,f)?l[f]=c[f]:l[f]=h("Symbol."+f)),l[f]}}),Xp=T((e,t)=>{var r=Ot(),i=Tc(),n=Gt(),o=n("species");t.exports=function(s,a){var l;return i(s)&&(l=s.constructor,typeof l=="function"&&(l===Array||i(l.prototype))?l=void 0:r(l)&&(l=l[o],l===null&&(l=void 0))),new(l===void 0?Array:l)(a===0?0:a)}}),Z_=T((e,t)=>{var r=eo();t.exports=r("navigator","userAgent")||""}),Kk=T((e,t)=>{var r=ht(),i=Z_(),n=r.process,o=n&&n.versions,s=o&&o.v8,a,l;s?(a=s.split("."),l=a[0]+a[1]):i&&(a=i.match(/Edge\/(\d+)/),(!a||a[1]>=74)&&(a=i.match(/Chrome\/(\d+)/),a&&(l=a[1]))),t.exports=l&&+l}),Yp=T((e,t)=>{var r=tt(),i=Gt(),n=Kk(),o=i("species");t.exports=function(s){return n>=51||!r(function(){var a=[],l=a.constructor={};return l[o]=function(){return{foo:1}},a[s](Boolean).foo!==1})}}),U6=T(()=>{var e=Y(),t=tt(),r=Tc(),i=Ot(),n=Rr(),o=Kt(),s=Ec(),a=Xp(),l=Yp(),c=Gt(),h=Kk(),f=c("isConcatSpreadable"),d=9007199254740991,p="Maximum allowed index exceeded",v=h>=51||!t(function(){var _=[];return _[f]=!1,_.concat()[0]!==_}),g=l("concat"),m=function(_){if(!i(_))return!1;var b=_[f];return b!==void 0?!!b:r(_)},y=!v||!g;e({target:"Array",proto:!0,forced:y},{concat:function(b){var w=n(this),S=a(w,0),C=0,D,E,I,M,k;for(D=-1,I=arguments.length;D<I;D++)if(k=D===-1?w:arguments[D],m(k)){if(M=o(k.length),C+M>d)throw TypeError(p);for(E=0;E<M;E++,C++)E in k&&s(S,C,k[E])}else{if(C>=d)throw TypeError(p);s(S,C++,k)}return S.length=C,S}})}),Zk=T((e,t)=>{var r=Gt(),i=r("toStringTag"),n={};n[i]="z",t.exports=String(n)==="[object z]"}),Qp=T((e,t)=>{var r=Zk(),i=Jn(),n=Gt(),o=n("toStringTag"),s=i(function(){return arguments}())=="Arguments",a=function(l,c){try{return l[c]}catch{}};t.exports=r?i:function(l){var c,h,f;return l===void 0?"Undefined":l===null?"Null":typeof(h=a(c=Object(l),o))=="string"?h:s?i(c):(f=i(c))=="Object"&&typeof c.callee=="function"?"Arguments":f}}),ile=T((e,t)=>{var r=Zk(),i=Qp();t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}}),N6=T(()=>{var e=Zk(),t=Bi(),r=ile();e||t(Object.prototype,"toString",r,{unsafe:!0})}),Kp=T((e,t)=>{var r=$6(),i=qk();t.exports=Object.keys||function(o){return r(o,i)}}),Jk=T((e,t)=>{var r=Ut(),i=ar(),n=$t(),o=Kp();t.exports=r?Object.defineProperties:function(a,l){n(a);for(var c=o(l),h=c.length,f=0,d;h>f;)i.f(a,d=c[f++],l[d]);return a}}),j6=T((e,t)=>{var r=eo();t.exports=r("document","documentElement")}),Ks=T((e,t)=>{var r=$t(),i=Jk(),n=qk(),o=Vp(),s=j6(),a=Hk(),l=K_(),c=">",h="<",f="prototype",d="script",p=l("IE_PROTO"),v=function(){},g=function(w){return h+d+c+w+h+"/"+d+c},m=function(w){w.write(g("")),w.close();var S=w.parentWindow.Object;return w=null,S},y=function(){var w=a("iframe"),S="java"+d+":",C;return w.style.display="none",s.appendChild(w),w.src=String(S),C=w.contentWindow.document,C.open(),C.write(g("document.F=Object")),C.close(),C.F},_,b=function(){try{_=document.domain&&new ActiveXObject("htmlfile")}catch{}b=_?m(_):y();for(var w=n.length;w--;)delete b[f][n[w]];return b()};o[p]=!0,t.exports=Object.create||function(S,C){var D;return S!==null?(v[f]=r(S),D=new v,v[f]=null,D[p]=S):D=b(),C===void 0?D:i(D,C)}}),H6=T((e,t)=>{var r=En(),i=kc().f,n={}.toString,o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(a){try{return i(a)}catch{return o.slice()}};t.exports.f=function(l){return o&&n.call(l)=="[object Window]"?s(l):i(r(l))}}),W6=T(e=>{var t=Gt();e.f=t}),Jr=T((e,t)=>{var r=Cc(),i=zr(),n=W6(),o=ar().f;t.exports=function(s){var a=r.Symbol||(r.Symbol={});i(a,s)||o(a,s,{value:n.f(s)})}}),as=T((e,t)=>{var r=ar().f,i=zr(),n=Gt(),o=n("toStringTag");t.exports=function(s,a,l){s&&!i(s=l?s:s.prototype,o)&&r(s,o,{configurable:!0,value:a})}}),hn=T((e,t)=>{t.exports=function(r){if(typeof r!="function")throw TypeError(String(r)+" is not a function");return r}}),Zs=T((e,t)=>{var r=hn();t.exports=function(i,n,o){if(r(i),n===void 0)return i;switch(o){case 0:return function(){return i.call(n)};case 1:return function(s){return i.call(n,s)};case 2:return function(s,a){return i.call(n,s,a)};case 3:return function(s,a,l){return i.call(n,s,a,l)}}return function(){return i.apply(n,arguments)}}}),wi=T((e,t)=>{var r=Zs(),i=Hp(),n=Rr(),o=Kt(),s=Xp(),a=[].push,l=function(c){var h=c==1,f=c==2,d=c==3,p=c==4,v=c==6,g=c==5||v;return function(m,y,_,b){for(var w=n(m),S=i(w),C=r(y,_,3),D=o(S.length),E=0,I=b||s,M=h?I(m,D):f?I(m,0):void 0,k,R;D>E;E++)if((g||E in S)&&(k=S[E],R=C(k,E,w),c)){if(h)M[E]=R;else if(R)switch(c){case 3:return!0;case 5:return k;case 6:return E;case 2:a.call(M,k)}else if(p)return!1}return v?-1:d||p?p:M}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}}),V6=T(()=>{var e=Y(),t=ht(),r=eo(),i=bo(),n=Ut(),o=Qk(),s=L6(),a=tt(),l=zr(),c=Tc(),h=Ot(),f=$t(),d=Rr(),p=En(),v=_o(),g=ml(),m=Ks(),y=Kp(),_=kc(),b=H6(),w=Xk(),S=$i(),C=ar(),D=Q_(),E=Yi(),I=Bi(),M=Gk(),k=K_(),R=Vp(),$=Wp(),H=Gt(),j=W6(),V=Jr(),J=as(),ae=Qi(),U=wi().forEach,N=k("hidden"),B="Symbol",W="prototype",q=H("toPrimitive"),xe=ae.set,Te=ae.getterFor(B),Se=Object[W],fe=t.Symbol,te=r("JSON","stringify"),X=S.f,le=C.f,de=b.f,Fe=D.f,Ee=M("symbols"),ye=M("op-symbols"),he=M("string-to-symbol-registry"),De=M("symbol-to-string-registry"),Ze=M("wks"),dt=t.QObject,Nt=!dt||!dt[W]||!dt[W].findChild,gr=n&&a(function(){return m(le({},"a",{get:function(){return le(this,"a",{value:7}).a}})).a!=7})?function(Ie,Oe,qe){var Xe=X(Se,Oe);Xe&&delete Se[Oe],le(Ie,Oe,qe),Xe&&Ie!==Se&&le(Se,Oe,Xe)}:le,Xt=function(Ie,Oe){var qe=Ee[Ie]=m(fe[W]);return xe(qe,{type:B,tag:Ie,description:Oe}),n||(qe.description=Oe),qe},ft=s?function(Ie){return typeof Ie=="symbol"}:function(Ie){return Object(Ie)instanceof fe},Fr=function(Oe,qe,Xe){Oe===Se&&Fr(ye,qe,Xe),f(Oe);var Je=v(qe,!0);return f(Xe),l(Ee,Je)?(Xe.enumerable?(l(Oe,N)&&Oe[N][Je]&&(Oe[N][Je]=!1),Xe=m(Xe,{enumerable:g(0,!1)})):(l(Oe,N)||le(Oe,N,g(1,{})),Oe[N][Je]=!0),gr(Oe,Je,Xe)):le(Oe,Je,Xe)},ri=function(Oe,qe){f(Oe);var Xe=p(qe),Je=y(Xe).concat(Me(Xe));return U(Je,function(yt){(!n||Si.call(Xe,yt))&&Fr(Oe,yt,Xe[yt])}),Oe},Cr=function(Oe,qe){return qe===void 0?m(Oe):ri(m(Oe),qe)},Si=function(Oe){var qe=v(Oe,!0),Xe=Fe.call(this,qe);return this===Se&&l(Ee,qe)&&!l(ye,qe)?!1:Xe||!l(this,qe)||!l(Ee,qe)||l(this,N)&&this[N][qe]?Xe:!0},Ge=function(Oe,qe){var Xe=p(Oe),Je=v(qe,!0);if(!(Xe===Se&&l(Ee,Je)&&!l(ye,Je))){var yt=X(Xe,Je);return yt&&l(Ee,Je)&&!(l(Xe,N)&&Xe[N][Je])&&(yt.enumerable=!0),yt}},be=function(Oe){var qe=de(p(Oe)),Xe=[];return U(qe,function(Je){!l(Ee,Je)&&!l(R,Je)&&Xe.push(Je)}),Xe},Me=function(Oe){var qe=Oe===Se,Xe=de(qe?ye:p(Oe)),Je=[];return U(Xe,function(yt){l(Ee,yt)&&(!qe||l(Se,yt))&&Je.push(Ee[yt])}),Je};o||(fe=function(){if(this instanceof fe)throw TypeError("Symbol is not a constructor");var Oe=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),qe=$(Oe),Xe=function(Je){this===Se&&Xe.call(ye,Je),l(this,N)&&l(this[N],qe)&&(this[N][qe]=!1),gr(this,qe,g(1,Je))};return n&&Nt&&gr(Se,qe,{configurable:!0,set:Xe}),Xt(qe,Oe)},I(fe[W],"toString",function(){return Te(this).tag}),I(fe,"withoutSetter",function(Ie){return Xt($(Ie),Ie)}),D.f=Si,C.f=Fr,S.f=Ge,_.f=b.f=be,w.f=Me,j.f=function(Ie){return Xt(H(Ie),Ie)},n&&(le(fe[W],"description",{configurable:!0,get:function(){return Te(this).description}}),i||I(Se,"propertyIsEnumerable",Si,{unsafe:!0}))),e({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:fe}),U(y(Ze),function(Ie){V(Ie)}),e({target:B,stat:!0,forced:!o},{for:function(Ie){var Oe=String(Ie);if(l(he,Oe))return he[Oe];var qe=fe(Oe);return he[Oe]=qe,De[qe]=Oe,qe},keyFor:function(Oe){if(!ft(Oe))throw TypeError(Oe+" is not a symbol");if(l(De,Oe))return De[Oe]},useSetter:function(){Nt=!0},useSimple:function(){Nt=!1}}),e({target:"Object",stat:!0,forced:!o,sham:!n},{create:Cr,defineProperty:Fr,defineProperties:ri,getOwnPropertyDescriptor:Ge}),e({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:be,getOwnPropertySymbols:Me}),e({target:"Object",stat:!0,forced:a(function(){w.f(1)})},{getOwnPropertySymbols:function(Oe){return w.f(d(Oe))}}),te&&(je=!o||a(function(){var Ie=fe();return te([Ie])!="[null]"||te({a:Ie})!="{}"||te(Object(Ie))!="{}"}),e({target:"JSON",stat:!0,forced:je},{stringify:function(Oe,qe,Xe){for(var Je=[Oe],yt=1,Mt;arguments.length>yt;)Je.push(arguments[yt++]);if(Mt=qe,!(!h(qe)&&Oe===void 0||ft(Oe)))return c(qe)||(qe=function(Bt,Wr){if(typeof Mt=="function"&&(Wr=Mt.call(this,Bt,Wr)),!ft(Wr))return Wr}),Je[1]=qe,te.apply(null,Je)}}));var je;fe[W][q]||E(fe[W],q,fe[W].valueOf),J(fe,B),R[N]=!0}),G6=T(()=>{var e=Jr();e("asyncIterator")}),q6=T(()=>{var e=Y(),t=Ut(),r=ht(),i=zr(),n=Ot(),o=ar().f,s=B6(),a=r.Symbol;t&&typeof a=="function"&&(!("description"in a.prototype)||a().description!==void 0)&&(l={},c=function(){var g=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),m=this instanceof c?new a(g):g===void 0?a():a(g);return g===""&&(l[m]=!0),m},s(c,a),h=c.prototype=a.prototype,h.constructor=c,f=h.toString,d=String(a("test"))=="Symbol(test)",p=/^Symbol\((.*)\)[^)]+$/,o(h,"description",{configurable:!0,get:function(){var g=n(this)?this.valueOf():this,m=f.call(g);if(i(l,g))return"";var y=d?m.slice(7,-1):m.replace(p,"$1");return y===""?void 0:y}}),e({global:!0,forced:!0},{Symbol:c}));var l,c,h,f,d,p}),X6=T(()=>{var e=Jr();e("hasInstance")}),Y6=T(()=>{var e=Jr();e("isConcatSpreadable")}),Q6=T(()=>{var e=Jr();e("iterator")}),K6=T(()=>{var e=Jr();e("match")}),Z6=T(()=>{var e=Jr();e("matchAll")}),J6=T(()=>{var e=Jr();e("replace")}),e$=T(()=>{var e=Jr();e("search")}),t$=T(()=>{var e=Jr();e("species")}),r$=T(()=>{var e=Jr();e("split")}),i$=T(()=>{var e=Jr();e("toPrimitive")}),n$=T(()=>{var e=Jr();e("toStringTag")}),o$=T(()=>{var e=Jr();e("unscopables")}),s$=T(()=>{var e=as();e(Math,"Math",!0)}),a$=T(()=>{var e=ht(),t=as();t(e.JSON,"JSON",!0)}),nle=T((e,t)=>{U6(),N6(),V6(),G6(),q6(),X6(),Y6(),Q6(),K6(),Z6(),J6(),e$(),t$(),r$(),i$(),n$(),o$(),s$(),a$();var r=Cc();t.exports=r.Symbol}),ole=T(()=>{var e=Jr();e("asyncDispose")}),sle=T(()=>{var e=Jr();e("dispose")}),ale=T(()=>{var e=Jr();e("observable")}),lle=T(()=>{var e=Jr();e("patternMatch")}),cle=T(()=>{var e=Jr();e("replaceAll")}),ule=T((e,t)=>{var r=nle();ole(),sle(),ale(),lle(),cle(),t.exports=r}),J_=T((e,t)=>{var r=to(),i=Xi(),n=function(o){return function(s,a){var l=String(i(s)),c=r(a),h=l.length,f,d;return c<0||c>=h?o?"":void 0:(f=l.charCodeAt(c),f<55296||f>56319||c+1===h||(d=l.charCodeAt(c+1))<56320||d>57343?o?l.charAt(c):f:o?l.slice(c,c+2):(f-55296<<10)+(d-56320)+65536)}};t.exports={codeAt:n(!1),charAt:n(!0)}}),eT=T((e,t)=>{var r=tt();t.exports=!r(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})}),xo=T((e,t)=>{var r=zr(),i=Rr(),n=K_(),o=eT(),s=n("IE_PROTO"),a=Object.prototype;t.exports=o?Object.getPrototypeOf:function(l){return l=i(l),r(l,s)?l[s]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?a:null}}),l$=T((e,t)=>{var r=xo(),i=Yi(),n=zr(),o=Gt(),s=bo(),a=o("iterator"),l=!1,c=function(){return this},h,f,d;[].keys&&(d=[].keys(),"next"in d?(f=r(r(d)),f!==Object.prototype&&(h=f)):l=!0),h==null&&(h={}),!s&&!n(h,a)&&i(h,a,c),t.exports={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:l}}),Zp=T((e,t)=>{t.exports={}}),tT=T((e,t)=>{var r=l$().IteratorPrototype,i=Ks(),n=ml(),o=as(),s=Zp(),a=function(){return this};t.exports=function(l,c,h){var f=c+" Iterator";return l.prototype=i(r,{next:n(1,h)}),o(l,f,!1,!0),s[f]=a,l}}),c$=T((e,t)=>{var r=Ot();t.exports=function(i){if(!r(i)&&i!==null)throw TypeError("Can't set "+String(i)+" as a prototype");return i}}),Dc=T((e,t)=>{var r=$t(),i=c$();t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,o={},s;try{s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,s.call(o,[]),n=o instanceof Array}catch{}return function(l,c){return r(l),i(c),n?s.call(l,c):l.__proto__=c,l}}():void 0)}),rT=T((e,t)=>{var r=Y(),i=tT(),n=xo(),o=Dc(),s=as(),a=Yi(),l=Bi(),c=Gt(),h=bo(),f=Zp(),d=l$(),p=d.IteratorPrototype,v=d.BUGGY_SAFARI_ITERATORS,g=c("iterator"),m="keys",y="values",_="entries",b=function(){return this};t.exports=function(w,S,C,D,E,I,M){i(C,S,D);var k=function(B){if(B===E&&V)return V;if(!v&&B in H)return H[B];switch(B){case m:return function(){return new C(this,B)};case y:return function(){return new C(this,B)};case _:return function(){return new C(this,B)}}return function(){return new C(this)}},R=S+" Iterator",$=!1,H=w.prototype,j=H[g]||H["@@iterator"]||E&&H[E],V=!v&&j||k(E),J=S=="Array"&&H.entries||j,ae,U,N;if(J&&(ae=n(J.call(new w)),p!==Object.prototype&&ae.next&&(!h&&n(ae)!==p&&(o?o(ae,p):typeof ae[g]!="function"&&a(ae,g,b)),s(ae,R,!0,!0),h&&(f[R]=b))),E==y&&j&&j.name!==y&&($=!0,V=function(){return j.call(this)}),(!h||M)&&H[g]!==V&&a(H,g,V),f[S]=V,E)if(U={values:k(y),keys:I?V:k(m),entries:k(_)},M)for(N in U)(v||$||!(N in H))&&l(H,N,U[N]);else r({target:S,proto:!0,forced:v||$},U);return U}}),iT=T(()=>{var e=J_().charAt,t=Qi(),r=rT(),i="String Iterator",n=t.set,o=t.getterFor(i);r(String,"String",function(s){n(this,{type:i,string:String(s),index:0})},function(){var a=o(this),l=a.string,c=a.index,h;return c>=l.length?{value:void 0,done:!0}:(h=e(l,c),a.index+=h.length,{value:h,done:!1})})}),u$=T((e,t)=>{var r=$t();t.exports=function(i,n,o,s){try{return s?n(r(o)[0],o[1]):n(o)}catch(l){var a=i.return;throw a!==void 0&&r(a.call(i)),l}}}),nT=T((e,t)=>{var r=Gt(),i=Zp(),n=r("iterator"),o=Array.prototype;t.exports=function(s){return s!==void 0&&(i.Array===s||o[n]===s)}}),Jp=T((e,t)=>{var r=Qp(),i=Zp(),n=Gt(),o=n("iterator");t.exports=function(s){if(s!=null)return s[o]||s["@@iterator"]||i[r(s)]}}),h$=T((e,t)=>{var r=Zs(),i=Rr(),n=u$(),o=nT(),s=Kt(),a=Ec(),l=Jp();t.exports=function(h){var f=i(h),d=typeof this=="function"?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=v!==void 0,m=l(f),y=0,_,b,w,S,C,D;if(g&&(v=r(v,p>2?arguments[2]:void 0,2)),m!=null&&!(d==Array&&o(m)))for(S=m.call(f),C=S.next,b=new d;!(w=C.call(S)).done;y++)D=g?n(S,v,[w.value,y],!0):w.value,a(b,y,D);else for(_=s(f.length),b=new d(_);_>y;y++)D=g?v(f[y],y):f[y],a(b,y,D);return b.length=y,b}}),e0=T((e,t)=>{var r=Gt(),i=r("iterator"),n=!1;try{o=0,s={next:function(){return{done:!!o++}},return:function(){n=!0}},s[i]=function(){return this},Array.from(s,function(){throw 2})}catch{}var o,s;t.exports=function(a,l){if(!l&&!n)return!1;var c=!1;try{var h={};h[i]=function(){return{next:function(){return{done:c=!0}}}},a(h)}catch{}return c}}),d$=T(()=>{var e=Y(),t=h$(),r=e0(),i=!r(function(n){Array.from(n)});e({target:"Array",stat:!0,forced:i},{from:t})}),hle=T((e,t)=>{iT(),d$();var r=Cc();t.exports=r.Array.from}),dle=T((e,t)=>{var r=hle();t.exports=r}),f$=T((e,t)=>{var r=Ut(),i=tt(),n=Kp(),o=Xk(),s=Q_(),a=Rr(),l=Hp(),c=Object.assign,h=Object.defineProperty;t.exports=!c||i(function(){if(r&&c({b:1},c(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},d={},p=Symbol(),v="abcdefghijklmnopqrst";return f[p]=7,v.split("").forEach(function(g){d[g]=g}),c({},f)[p]!=7||n(c({},d)).join("")!=v})?function(d,p){for(var v=a(d),g=arguments.length,m=1,y=o.f,_=s.f;g>m;)for(var b=l(arguments[m++]),w=y?n(b).concat(y(b)):n(b),S=w.length,C=0,D;S>C;)D=w[C++],(!r||_.call(b,D))&&(v[D]=b[D]);return v}:c}),fle=T(()=>{var e=Y(),t=f$();e({target:"Object",stat:!0,forced:Object.assign!==t},{assign:t})}),ple=T(()=>{var e=Y(),t=Ut(),r=Ks();e({target:"Object",stat:!0,sham:!t},{create:r})}),mle=T(()=>{var e=Y(),t=Ut(),r=ar();e({target:"Object",stat:!0,forced:!t,sham:!t},{defineProperty:r.f})}),gle=T(()=>{var e=Y(),t=Ut(),r=Jk();e({target:"Object",stat:!0,forced:!t,sham:!t},{defineProperties:r})}),p$=T((e,t)=>{var r=Ut(),i=Kp(),n=En(),o=Q_().f,s=function(a){return function(l){for(var c=n(l),h=i(c),f=h.length,d=0,p=[],v;f>d;)v=h[d++],(!r||o.call(c,v))&&p.push(a?[v,c[v]]:c[v]);return p}};t.exports={entries:s(!0),values:s(!1)}}),vle=T(()=>{var e=Y(),t=p$().entries;e({target:"Object",stat:!0},{entries:function(i){return t(i)}})}),em=T((e,t)=>{var r=tt();t.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})}),Ic=T((e,t)=>{var r=Vp(),i=Ot(),n=zr(),o=ar().f,s=Wp(),a=em(),l=s("meta"),c=0,h=Object.isExtensible||function(){return!0},f=function(m){o(m,l,{value:{objectID:"O"+ ++c,weakData:{}}})},d=function(m,y){if(!i(m))return typeof m=="symbol"?m:(typeof m=="string"?"S":"P")+m;if(!n(m,l)){if(!h(m))return"F";if(!y)return"E";f(m)}return m[l].objectID},p=function(m,y){if(!n(m,l)){if(!h(m))return!0;if(!y)return!1;f(m)}return m[l].weakData},v=function(m){return a&&g.REQUIRED&&h(m)&&!n(m,l)&&f(m),m},g=t.exports={REQUIRED:!1,fastKey:d,getWeakData:p,onFreeze:v};r[l]=!0}),yle=T(()=>{var e=Y(),t=em(),r=tt(),i=Ot(),n=Ic().onFreeze,o=Object.freeze,s=r(function(){o(1)});e({target:"Object",stat:!0,forced:s,sham:!t},{freeze:function(l){return o&&i(l)?o(n(l)):l}})}),Ih=T((e,t)=>{var r=$t(),i=nT(),n=Kt(),o=Zs(),s=Jp(),a=u$(),l=function(h,f){this.stopped=h,this.result=f},c=t.exports=function(h,f,d,p,v){var g=o(f,d,p?2:1),m,y,_,b,w,S,C;if(v)m=h;else{if(y=s(h),typeof y!="function")throw TypeError("Target is not iterable");if(i(y)){for(_=0,b=n(h.length);b>_;_++)if(w=p?g(r(C=h[_])[0],C[1]):g(h[_]),w&&w instanceof l)return w;return new l(!1)}m=y.call(h)}for(S=m.next;!(C=S.call(m)).done;)if(w=a(m,g,C.value,p),typeof w=="object"&&w&&w instanceof l)return w;return new l(!1)};c.stop=function(h){return new l(!0,h)}}),_le=T(()=>{var e=Y(),t=Ih(),r=Ec();e({target:"Object",stat:!0},{fromEntries:function(n){var o={};return t(n,function(s,a){r(o,s,a)},void 0,!0),o}})}),ble=T(()=>{var e=Y(),t=tt(),r=En(),i=$i().f,n=Ut(),o=t(function(){i(1)}),s=!n||o;e({target:"Object",stat:!0,forced:s,sham:!n},{getOwnPropertyDescriptor:function(l,c){return i(r(l),c)}})}),xle=T(()=>{var e=Y(),t=Ut(),r=Yk(),i=En(),n=$i(),o=Ec();e({target:"Object",stat:!0,sham:!t},{getOwnPropertyDescriptors:function(a){for(var l=i(a),c=n.f,h=r(l),f={},d=0,p,v;h.length>d;)v=c(l,p=h[d++]),v!==void 0&&o(f,p,v);return f}})}),wle=T(()=>{var e=Y(),t=tt(),r=H6().f,i=t(function(){return!Object.getOwnPropertyNames(1)});e({target:"Object",stat:!0,forced:i},{getOwnPropertyNames:r})}),Sle=T(()=>{var e=Y(),t=tt(),r=Rr(),i=xo(),n=eT(),o=t(function(){i(1)});e({target:"Object",stat:!0,forced:o,sham:!n},{getPrototypeOf:function(a){return i(r(a))}})}),m$=T((e,t)=>{t.exports=Object.is||function(i,n){return i===n?i!==0||1/i===1/n:i!=i&&n!=n}}),Cle=T(()=>{var e=Y(),t=m$();e({target:"Object",stat:!0},{is:t})}),kle=T(()=>{var e=Y(),t=tt(),r=Ot(),i=Object.isExtensible,n=t(function(){});e({target:"Object",stat:!0,forced:n},{isExtensible:function(s){return r(s)?i?i(s):!0:!1}})}),Tle=T(()=>{var e=Y(),t=tt(),r=Ot(),i=Object.isFrozen,n=t(function(){});e({target:"Object",stat:!0,forced:n},{isFrozen:function(s){return r(s)?i?i(s):!1:!0}})}),Ele=T(()=>{var e=Y(),t=tt(),r=Ot(),i=Object.isSealed,n=t(function(){});e({target:"Object",stat:!0,forced:n},{isSealed:function(s){return r(s)?i?i(s):!1:!0}})}),Dle=T(()=>{var e=Y(),t=Rr(),r=Kp(),i=tt(),n=i(function(){r(1)});e({target:"Object",stat:!0,forced:n},{keys:function(s){return r(t(s))}})}),Ile=T(()=>{var e=Y(),t=Ot(),r=Ic().onFreeze,i=em(),n=tt(),o=Object.preventExtensions,s=n(function(){o(1)});e({target:"Object",stat:!0,forced:s,sham:!i},{preventExtensions:function(l){return o&&t(l)?o(r(l)):l}})}),Rle=T(()=>{var e=Y(),t=Ot(),r=Ic().onFreeze,i=em(),n=tt(),o=Object.seal,s=n(function(){o(1)});e({target:"Object",stat:!0,forced:s,sham:!i},{seal:function(l){return o&&t(l)?o(r(l)):l}})}),Fle=T(()=>{var e=Y(),t=Dc();e({target:"Object",stat:!0},{setPrototypeOf:t})}),Ole=T(()=>{var e=Y(),t=p$().values;e({target:"Object",stat:!0},{values:function(i){return t(i)}})}),t0=T((e,t)=>{var r=bo(),i=ht(),n=tt();t.exports=r||!n(function(){var o=Math.random();__defineSetter__.call(null,o,function(){}),delete i[o]})}),Mle=T(()=>{var e=Y(),t=Ut(),r=t0(),i=Rr(),n=hn(),o=ar();t&&e({target:"Object",proto:!0,forced:r},{__defineGetter__:function(a,l){o.f(i(this),a,{get:n(l),enumerable:!0,configurable:!0})}})}),Ple=T(()=>{var e=Y(),t=Ut(),r=t0(),i=Rr(),n=hn(),o=ar();t&&e({target:"Object",proto:!0,forced:r},{__defineSetter__:function(a,l){o.f(i(this),a,{set:n(l),enumerable:!0,configurable:!0})}})}),Ale=T(()=>{var e=Y(),t=Ut(),r=t0(),i=Rr(),n=_o(),o=xo(),s=$i().f;t&&e({target:"Object",proto:!0,forced:r},{__lookupGetter__:function(l){var c=i(this),h=n(l,!0),f;do if(f=s(c,h))return f.get;while(c=o(c))}})}),zle=T(()=>{var e=Y(),t=Ut(),r=t0(),i=Rr(),n=_o(),o=xo(),s=$i().f;t&&e({target:"Object",proto:!0,forced:r},{__lookupSetter__:function(l){var c=i(this),h=n(l,!0),f;do if(f=s(c,h))return f.set;while(c=o(c))}})}),g$=T((e,t)=>{var r=hn(),i=Ot(),n=[].slice,o={},s=function(a,l,c){if(!(l in o)){for(var h=[],f=0;f<l;f++)h[f]="a["+f+"]";o[l]=Function("C,a","return new C("+h.join(",")+")")}return o[l](a,c)};t.exports=Function.bind||function(l){var c=r(this),h=n.call(arguments,1),f=function(){var p=h.concat(n.call(arguments));return this instanceof f?s(c,p.length,p):c.apply(l,p)};return i(c.prototype)&&(f.prototype=c.prototype),f}}),$le=T(()=>{var e=Y(),t=g$();e({target:"Function",proto:!0},{bind:t})}),Ble=T(()=>{var e=Ut(),t=ar().f,r=Function.prototype,i=r.toString,n=/^\s*function ([^ (]*)/,o="name";e&&!(o in r)&&t(r,o,{configurable:!0,get:function(){try{return i.call(this).match(n)[1]}catch{return""}}})}),Lle=T(()=>{var e=Ot(),t=ar(),r=xo(),i=Gt(),n=i("hasInstance"),o=Function.prototype;n in o||t.f(o,n,{value:function(s){if(typeof this!="function"||!e(s))return!1;if(!e(this.prototype))return s instanceof this;for(;s=r(s);)if(this.prototype===s)return!0;return!1}})}),Ule=T(()=>{var e=Y(),t=ht();e({global:!0},{globalThis:t})}),Nle=T(()=>{var e=Y(),t=Tc();e({target:"Array",stat:!0},{isArray:t})}),jle=T(()=>{var e=Y(),t=tt(),r=Ec(),i=t(function(){function n(){}return!(Array.of.call(n)instanceof n)});e({target:"Array",stat:!0,forced:i},{of:function(){for(var o=0,s=arguments.length,a=new(typeof this=="function"?this:Array)(s);s>o;)r(a,o,arguments[o++]);return a.length=s,a}})}),v$=T((e,t)=>{var r=Rr(),i=gl(),n=Kt(),o=Math.min;t.exports=[].copyWithin||function(a,l){var c=r(this),h=n(c.length),f=i(a,h),d=i(l,h),p=arguments.length>2?arguments[2]:void 0,v=o((p===void 0?h:i(p,h))-d,h-f),g=1;for(d<f&&f<d+v&&(g=-1,d+=v-1,f+=v-1);v-- >0;)d in c?c[f]=c[d]:delete c[f],f+=g,d+=g;return c}}),vl=T((e,t)=>{var r=Gt(),i=Ks(),n=ar(),o=r("unscopables"),s=Array.prototype;s[o]==null&&n.f(s,o,{configurable:!0,value:i(null)}),t.exports=function(a){s[o][a]=!0}}),Hle=T(()=>{var e=Y(),t=v$(),r=vl();e({target:"Array",proto:!0},{copyWithin:t}),r("copyWithin")}),Js=T((e,t)=>{var r=tt();t.exports=function(i,n){var o=[][i];return!!o&&r(function(){o.call(null,n||function(){throw 1},1)})}}),dn=T((e,t)=>{var r=Ut(),i=tt(),n=zr(),o=Object.defineProperty,s={},a=function(l){throw l};t.exports=function(l,c){if(n(s,l))return s[l];c||(c={});var h=[][l],f=n(c,"ACCESSORS")?c.ACCESSORS:!1,d=n(c,0)?c[0]:a,p=n(c,1)?c[1]:void 0;return s[l]=!!h&&!i(function(){if(f&&!r)return!0;var v={length:-1};f?o(v,1,{enumerable:!0,get:a}):v[1]=1,h.call(v,d,p)})}}),Wle=T(()=>{var e=Y(),t=wi().every,r=Js(),i=dn(),n=r("every"),o=i("every");e({target:"Array",proto:!0,forced:!n||!o},{every:function(a){return t(this,a,arguments.length>1?arguments[1]:void 0)}})}),oT=T((e,t)=>{var r=Rr(),i=gl(),n=Kt();t.exports=function(s){for(var a=r(this),l=n(a.length),c=arguments.length,h=i(c>1?arguments[1]:void 0,l),f=c>2?arguments[2]:void 0,d=f===void 0?l:i(f,l);d>h;)a[h++]=s;return a}}),Vle=T(()=>{var e=Y(),t=oT(),r=vl();e({target:"Array",proto:!0},{fill:t}),r("fill")}),Gle=T(()=>{var e=Y(),t=wi().filter,r=Yp(),i=dn(),n=r("filter"),o=i("filter");e({target:"Array",proto:!0,forced:!n||!o},{filter:function(a){return t(this,a,arguments.length>1?arguments[1]:void 0)}})}),y$=T(()=>{var e=Y(),t=wi().find,r=vl(),i=dn(),n="find",o=!0,s=i(n);n in[]&&Array(1)[n](function(){o=!1}),e({target:"Array",proto:!0,forced:o||!s},{find:function(l){return t(this,l,arguments.length>1?arguments[1]:void 0)}}),r(n)}),qle=T(()=>{var e=Y(),t=wi().findIndex,r=vl(),i=dn(),n="findIndex",o=!0,s=i(n);n in[]&&Array(1)[n](function(){o=!1}),e({target:"Array",proto:!0,forced:o||!s},{findIndex:function(l){return t(this,l,arguments.length>1?arguments[1]:void 0)}}),r(n)}),_$=T((e,t)=>{var r=Tc(),i=Kt(),n=Zs(),o=function(s,a,l,c,h,f,d,p){for(var v=h,g=0,m=d?n(d,p,3):!1,y;g<c;){if(g in l){if(y=m?m(l[g],g,a):l[g],f>0&&r(y))v=o(s,a,y,i(y.length),v,f-1)-1;else{if(v>=9007199254740991)throw TypeError("Exceed the acceptable array length");s[v]=y}v++}g++}return v};t.exports=o}),Xle=T(()=>{var e=Y(),t=_$(),r=Rr(),i=Kt(),n=to(),o=Xp();e({target:"Array",proto:!0},{flat:function(){var a=arguments.length?arguments[0]:void 0,l=r(this),c=i(l.length),h=o(l,0);return h.length=t(h,l,l,c,0,a===void 0?1:n(a)),h}})}),Yle=T(()=>{var e=Y(),t=_$(),r=Rr(),i=Kt(),n=hn(),o=Xp();e({target:"Array",proto:!0},{flatMap:function(a){var l=r(this),c=i(l.length),h;return n(a),h=o(l,0),h.length=t(h,l,l,c,0,1,a,arguments.length>1?arguments[1]:void 0),h}})}),b$=T((e,t)=>{var r=wi().forEach,i=Js(),n=dn(),o=i("forEach"),s=n("forEach");t.exports=!o||!s?function(l){return r(this,l,arguments.length>1?arguments[1]:void 0)}:[].forEach}),Qle=T(()=>{var e=Y(),t=b$();e({target:"Array",proto:!0,forced:[].forEach!=t},{forEach:t})}),Kle=T(()=>{var e=Y(),t=Gp().includes,r=vl(),i=dn(),n=i("indexOf",{ACCESSORS:!0,1:0});e({target:"Array",proto:!0,forced:!n},{includes:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),r("includes")}),Zle=T(()=>{var e=Y(),t=Gp().indexOf,r=Js(),i=dn(),n=[].indexOf,o=!!n&&1/[1].indexOf(1,-0)<0,s=r("indexOf"),a=i("indexOf",{ACCESSORS:!0,1:0});e({target:"Array",proto:!0,forced:o||!s||!a},{indexOf:function(c){return o?n.apply(this,arguments)||0:t(this,c,arguments.length>1?arguments[1]:void 0)}})}),Jle=T(()=>{var e=Y(),t=Hp(),r=En(),i=Js(),n=[].join,o=t!=Object,s=i("join",",");e({target:"Array",proto:!0,forced:o||!s},{join:function(l){return n.call(r(this),l===void 0?",":l)}})}),x$=T((e,t)=>{var r=En(),i=to(),n=Kt(),o=Js(),s=dn(),a=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,h=o("lastIndexOf"),f=s("indexOf",{ACCESSORS:!0,1:0}),d=c||!h||!f;t.exports=d?function(v){if(c)return l.apply(this,arguments)||0;var g=r(this),m=n(g.length),y=m-1;for(arguments.length>1&&(y=a(y,i(arguments[1]))),y<0&&(y=m+y);y>=0;y--)if(y in g&&g[y]===v)return y||0;return-1}:l}),ece=T(()=>{var e=Y(),t=x$();e({target:"Array",proto:!0,forced:t!==[].lastIndexOf},{lastIndexOf:t})}),w$=T(()=>{var e=Y(),t=wi().map,r=Yp(),i=dn(),n=r("map"),o=i("map");e({target:"Array",proto:!0,forced:!n||!o},{map:function(a){return t(this,a,arguments.length>1?arguments[1]:void 0)}})}),r0=T((e,t)=>{var r=hn(),i=Rr(),n=Hp(),o=Kt(),s=function(a){return function(l,c,h,f){r(c);var d=i(l),p=n(d),v=o(d.length),g=a?v-1:0,m=a?-1:1;if(h<2)for(;;){if(g in p){f=p[g],g+=m;break}if(g+=m,a?g<0:v<=g)throw TypeError("Reduce of empty array with no initial value")}for(;a?g>=0:v>g;g+=m)g in p&&(f=c(f,p[g],g,d));return f}};t.exports={left:s(!1),right:s(!0)}}),tce=T(()=>{var e=Y(),t=r0().left,r=Js(),i=dn(),n=r("reduce"),o=i("reduce",{1:0});e({target:"Array",proto:!0,forced:!n||!o},{reduce:function(a){return t(this,a,arguments.length,arguments.length>1?arguments[1]:void 0)}})}),rce=T(()=>{var e=Y(),t=r0().right,r=Js(),i=dn(),n=r("reduceRight"),o=i("reduce",{1:0});e({target:"Array",proto:!0,forced:!n||!o},{reduceRight:function(a){return t(this,a,arguments.length,arguments.length>1?arguments[1]:void 0)}})}),ice=T(()=>{var e=Y(),t=Tc(),r=[].reverse,i=[1,2];e({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return t(this)&&(this.length=this.length),r.call(this)}})}),nce=T(()=>{var e=Y(),t=Ot(),r=Tc(),i=gl(),n=Kt(),o=En(),s=Ec(),a=Gt(),l=Yp(),c=dn(),h=l("slice"),f=c("slice",{ACCESSORS:!0,0:0,1:2}),d=a("species"),p=[].slice,v=Math.max;e({target:"Array",proto:!0,forced:!h||!f},{slice:function(m,y){var _=o(this),b=n(_.length),w=i(m,b),S=i(y===void 0?b:y,b),C,D,E;if(r(_)&&(C=_.constructor,typeof C=="function"&&(C===Array||r(C.prototype))?C=void 0:t(C)&&(C=C[d],C===null&&(C=void 0)),C===Array||C===void 0))return p.call(_,w,S);for(D=new(C===void 0?Array:C)(v(S-w,0)),E=0;w<S;w++,E++)w in _&&s(D,E,_[w]);return D.length=E,D}})}),oce=T(()=>{var e=Y(),t=wi().some,r=Js(),i=dn(),n=r("some"),o=i("some");e({target:"Array",proto:!0,forced:!n||!o},{some:function(a){return t(this,a,arguments.length>1?arguments[1]:void 0)}})}),sce=T(()=>{var e=Y(),t=hn(),r=Rr(),i=tt(),n=Js(),o=[],s=o.sort,a=i(function(){o.sort(void 0)}),l=i(function(){o.sort(null)}),c=n("sort"),h=a||!l||!c;e({target:"Array",proto:!0,forced:h},{sort:function(d){return d===void 0?s.call(r(this)):s.call(r(this),t(d))}})}),ace=T(()=>{var e=Y(),t=gl(),r=to(),i=Kt(),n=Rr(),o=Xp(),s=Ec(),a=Yp(),l=dn(),c=a("splice"),h=l("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,d=Math.min,p=9007199254740991,v="Maximum allowed length exceeded";e({target:"Array",proto:!0,forced:!c||!h},{splice:function(m,y){var _=n(this),b=i(_.length),w=t(m,b),S=arguments.length,C,D,E,I,M,k;if(S===0?C=D=0:S===1?(C=0,D=b-w):(C=S-2,D=d(f(r(y),0),b-w)),b+C-D>p)throw TypeError(v);for(E=o(_,D),I=0;I<D;I++)M=w+I,M in _&&s(E,I,_[M]);if(E.length=D,C<D){for(I=w;I<b-D;I++)M=I+D,k=I+C,M in _?_[k]=_[M]:delete _[k];for(I=b;I>b-D+C;I--)delete _[I-1]}else if(C>D)for(I=b-D;I>w;I--)M=I+D-1,k=I+C-1,M in _?_[k]=_[M]:delete _[k];for(I=0;I<C;I++)_[I+w]=arguments[I+2];return _.length=b-D+C,E}})}),Rh=T((e,t)=>{var r=eo(),i=ar(),n=Gt(),o=Ut(),s=n("species");t.exports=function(a){var l=r(a),c=i.f;o&&l&&!l[s]&&c(l,s,{configurable:!0,get:function(){return this}})}}),lce=T(()=>{var e=Rh();e("Array")}),cce=T(()=>{var e=vl();e("flat")}),uce=T(()=>{var e=vl();e("flatMap")}),i0=T((e,t)=>{var r=En(),i=vl(),n=Zp(),o=Qi(),s=rT(),a="Array Iterator",l=o.set,c=o.getterFor(a);t.exports=s(Array,"Array",function(h,f){l(this,{type:a,target:r(h),index:0,kind:f})},function(){var h=c(this),f=h.target,d=h.kind,p=h.index++;return!f||p>=f.length?(h.target=void 0,{value:void 0,done:!0}):d=="keys"?{value:p,done:!1}:d=="values"?{value:f[p],done:!1}:{value:[p,f[p]],done:!1}},"values"),n.Arguments=n.Array,i("keys"),i("values"),i("entries")}),hce=T(()=>{var e=Y(),t=gl(),r=String.fromCharCode,i=String.fromCodePoint,n=!!i&&i.length!=1;e({target:"String",stat:!0,forced:n},{fromCodePoint:function(s){for(var a=[],l=arguments.length,c=0,h;l>c;){if(h=+arguments[c++],t(h,1114111)!==h)throw RangeError(h+" is not a valid code point");a.push(h<65536?r(h):r(((h-=65536)>>10)+55296,h%1024+56320))}return a.join("")}})}),dce=T(()=>{var e=Y(),t=En(),r=Kt();e({target:"String",stat:!0},{raw:function(n){for(var o=t(n.raw),s=r(o.length),a=arguments.length,l=[],c=0;s>c;)l.push(String(o[c++])),c<a&&l.push(String(arguments[c]));return l.join("")}})}),fce=T(()=>{var e=Y(),t=J_().codeAt;e({target:"String",proto:!0},{codePointAt:function(i){return t(this,i)}})}),n0=T((e,t)=>{var r=Ot(),i=Jn(),n=Gt(),o=n("match");t.exports=function(s){var a;return r(s)&&((a=s[o])!==void 0?!!a:i(s)=="RegExp")}}),sT=T((e,t)=>{var r=n0();t.exports=function(i){if(r(i))throw TypeError("The method doesn't accept regular expressions");return i}}),aT=T((e,t)=>{var r=Gt(),i=r("match");t.exports=function(n){var o=/./;try{"/./"[n](o)}catch{try{return o[i]=!1,"/./"[n](o)}catch{}}return!1}}),pce=T(()=>{var e=Y(),t=$i().f,r=Kt(),i=sT(),n=Xi(),o=aT(),s=bo(),a="".endsWith,l=Math.min,c=o("endsWith"),h=!s&&!c&&!!function(){var f=t(String.prototype,"endsWith");return f&&!f.writable}();e({target:"String",proto:!0,forced:!h&&!c},{endsWith:function(d){var p=String(n(this));i(d);var v=arguments.length>1?arguments[1]:void 0,g=r(p.length),m=v===void 0?g:l(r(v),g),y=String(d);return a?a.call(p,y,m):p.slice(m-y.length,m)===y}})}),mce=T(()=>{var e=Y(),t=sT(),r=Xi(),i=aT();e({target:"String",proto:!0,forced:!i("includes")},{includes:function(o){return!!~String(r(this)).indexOf(t(o),arguments.length>1?arguments[1]:void 0)}})}),tm=T((e,t)=>{var r=$t();t.exports=function(){var i=r(this),n="";return i.global&&(n+="g"),i.ignoreCase&&(n+="i"),i.multiline&&(n+="m"),i.dotAll&&(n+="s"),i.unicode&&(n+="u"),i.sticky&&(n+="y"),n}}),o0=T(e=>{var t=tt();function r(i,n){return RegExp(i,n)}e.UNSUPPORTED_Y=t(function(){var i=r("a","y");return i.lastIndex=2,i.exec("abcd")!=null}),e.BROKEN_CARET=t(function(){var i=r("^r","gy");return i.lastIndex=2,i.exec("str")!=null})}),s0=T((e,t)=>{var r=tm(),i=o0(),n=RegExp.prototype.exec,o=String.prototype.replace,s=n,a=function(){var f=/a/,d=/b*/g;return n.call(f,"a"),n.call(d,"a"),f.lastIndex!==0||d.lastIndex!==0}(),l=i.UNSUPPORTED_Y||i.BROKEN_CARET,c=/()??/.exec("")[1]!==void 0,h=a||c||l;h&&(s=function(d){var p=this,v,g,m,y,_=l&&p.sticky,b=r.call(p),w=p.source,S=0,C=d;return _&&(b=b.replace("y",""),b.indexOf("g")===-1&&(b+="g"),C=String(d).slice(p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&d[p.lastIndex-1]!==`
`)&&(w="(?: "+w+")",C=" "+C,S++),g=new RegExp("^(?:"+w+")",b)),c&&(g=new RegExp("^"+w+"$(?!\\s)",b)),a&&(v=p.lastIndex),m=n.call(_?g:p,C),_?m?(m.input=m.input.slice(S),m[0]=m[0].slice(S),m.index=p.lastIndex,p.lastIndex+=m[0].length):p.lastIndex=0:a&&m&&(p.lastIndex=p.global?m.index+m[0].length:v),c&&m&&m.length>1&&o.call(m[0],g,function(){for(y=1;y<arguments.length-2;y++)arguments[y]===void 0&&(m[y]=void 0)}),m}),t.exports=s}),lT=T(()=>{var e=Y(),t=s0();e({target:"RegExp",proto:!0,forced:/./.exec!==t},{exec:t})}),a0=T((e,t)=>{lT();var r=Bi(),i=tt(),n=Gt(),o=s0(),s=Yi(),a=n("species"),l=!i(function(){var p=/./;return p.exec=function(){var v=[];return v.groups={a:"7"},v},"".replace(p,"$<a>")!=="7"}),c=function(){return"a".replace(/./,"$0")==="$0"}(),h=n("replace"),f=function(){return/./[h]?/./[h]("a","$0")==="":!1}(),d=!i(function(){var p=/(?:)/,v=p.exec;p.exec=function(){return v.apply(this,arguments)};var g="ab".split(p);return g.length!==2||g[0]!=="a"||g[1]!=="b"});t.exports=function(p,v,g,m){var y=n(p),_=!i(function(){var E={};return E[y]=function(){return 7},""[p](E)!=7}),b=_&&!i(function(){var E=!1,I=/a/;return p==="split"&&(I={},I.constructor={},I.constructor[a]=function(){return I},I.flags="",I[y]=/./[y]),I.exec=function(){return E=!0,null},I[y](""),!E});if(!_||!b||p==="replace"&&!(l&&c&&!f)||p==="split"&&!d){var w=/./[y],S=g(y,""[p],function(E,I,M,k,R){return I.exec===o?_&&!R?{done:!0,value:w.call(I,M,k)}:{done:!0,value:E.call(M,I,k)}:{done:!1}},{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),C=S[0],D=S[1];r(String.prototype,p,C),r(RegExp.prototype,y,v==2?function(E,I){return D.call(E,this,I)}:function(E){return D.call(E,this)})}m&&s(RegExp.prototype[y],"sham",!0)}}),l0=T((e,t)=>{var r=J_().charAt;t.exports=function(i,n,o){return n+(o?r(i,n).length:1)}}),c0=T((e,t)=>{var r=Jn(),i=s0();t.exports=function(n,o){var s=n.exec;if(typeof s=="function"){var a=s.call(n,o);if(typeof a!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return a}if(r(n)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return i.call(n,o)}}),gce=T(()=>{var e=a0(),t=$t(),r=Kt(),i=Xi(),n=l0(),o=c0();e("match",1,function(s,a,l){return[function(h){var f=i(this),d=h==null?void 0:h[s];return d!==void 0?d.call(h,f):new RegExp(h)[s](String(f))},function(c){var h=l(a,c,this);if(h.done)return h.value;var f=t(c),d=String(this);if(!f.global)return o(f,d);var p=f.unicode;f.lastIndex=0;for(var v=[],g=0,m;(m=o(f,d))!==null;){var y=String(m[0]);v[g]=y,y===""&&(f.lastIndex=n(d,r(f.lastIndex),p)),g++}return g===0?null:v}]})}),ea=T((e,t)=>{var r=$t(),i=hn(),n=Gt(),o=n("species");t.exports=function(s,a){var l=r(s).constructor,c;return l===void 0||(c=r(l)[o])==null?a:i(c)}}),vce=T(()=>{var e=Y(),t=tT(),r=Xi(),i=Kt(),n=hn(),o=$t(),s=Jn(),a=n0(),l=tm(),c=Yi(),h=tt(),f=Gt(),d=ea(),p=l0(),v=Qi(),g=bo(),m=f("matchAll"),y="RegExp String",_=y+" Iterator",b=v.set,w=v.getterFor(_),S=RegExp.prototype,C=S.exec,D="".matchAll,E=!!D&&!h(function(){}),I=function(R,$){var H=R.exec,j;if(typeof H=="function"){if(j=H.call(R,$),typeof j!="object")throw TypeError("Incorrect exec result");return j}return C.call(R,$)},M=t(function($,H,j,V){b(this,{type:_,regexp:$,string:H,global:j,unicode:V,done:!1})},y,function(){var $=w(this);if($.done)return{value:void 0,done:!0};var H=$.regexp,j=$.string,V=I(H,j);return V===null?{value:void 0,done:$.done=!0}:$.global?(String(V[0])==""&&(H.lastIndex=p(j,i(H.lastIndex),$.unicode)),{value:V,done:!1}):($.done=!0,{value:V,done:!1})}),k=function(R){var $=o(this),H=String(R),j,V,J,ae,U,N;return j=d($,RegExp),V=$.flags,V===void 0&&$ instanceof RegExp&&!("flags"in S)&&(V=l.call($)),J=V===void 0?"":String(V),ae=new j(j===RegExp?$.source:$,J),U=!!~J.indexOf("g"),N=!!~J.indexOf("u"),ae.lastIndex=i($.lastIndex),new M(ae,H,U,N)};e({target:"String",proto:!0,forced:E},{matchAll:function($){var H=r(this),j,V,J,ae;if($!=null){if(a($)&&(j=String(r("flags"in S?$.flags:l.call($))),!~j.indexOf("g")))throw TypeError("`.matchAll` does not allow non-global regexes");if(E)return D.apply(H,arguments);if(J=$[m],J===void 0&&g&&s($)=="RegExp"&&(J=k),J!=null)return n(J).call($,H)}else if(E)return D.apply(H,arguments);return V=String(H),ae=new RegExp($,"g"),g?k.call(ae,V):ae[m](V)}}),g||m in S||c(S,m,k)}),cT=T((e,t)=>{var r=to(),i=Xi();t.exports="".repeat||function(o){var s=String(i(this)),a="",l=r(o);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(s+=s))l&1&&(a+=s);return a}}),uT=T((e,t)=>{var r=Kt(),i=cT(),n=Xi(),o=Math.ceil,s=function(a){return function(l,c,h){var f=String(n(l)),d=f.length,p=h===void 0?" ":String(h),v=r(c),g,m;return v<=d||p==""?f:(g=v-d,m=i.call(p,o(g/p.length)),m.length>g&&(m=m.slice(0,g)),a?f+m:m+f)}};t.exports={start:s(!1),end:s(!0)}}),S$=T((e,t)=>{var r=Z_();t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)}),yce=T(()=>{var e=Y(),t=uT().end,r=S$();e({target:"String",proto:!0,forced:r},{padEnd:function(n){return t(this,n,arguments.length>1?arguments[1]:void 0)}})}),_ce=T(()=>{var e=Y(),t=uT().start,r=S$();e({target:"String",proto:!0,forced:r},{padStart:function(n){return t(this,n,arguments.length>1?arguments[1]:void 0)}})}),bce=T(()=>{var e=Y(),t=cT();e({target:"String",proto:!0},{repeat:t})}),xce=T(()=>{var e=a0(),t=$t(),r=Rr(),i=Kt(),n=to(),o=Xi(),s=l0(),a=c0(),l=Math.max,c=Math.min,h=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,d=/\$([$&'`]|\d\d?)/g,p=function(v){return v===void 0?v:String(v)};e("replace",2,function(v,g,m,y){var _=y.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=y.REPLACE_KEEPS_$0,w=_?"$":"$0";return[function(D,E){var I=o(this),M=D==null?void 0:D[v];return M!==void 0?M.call(D,I,E):g.call(String(I),D,E)},function(C,D){if(!_&&b||typeof D=="string"&&D.indexOf(w)===-1){var E=m(g,C,this,D);if(E.done)return E.value}var I=t(C),M=String(this),k=typeof D=="function";k||(D=String(D));var R=I.global;if(R){var $=I.unicode;I.lastIndex=0}for(var H=[];;){var j=a(I,M);if(j===null||(H.push(j),!R))break;var V=String(j[0]);V===""&&(I.lastIndex=s(M,i(I.lastIndex),$))}for(var J="",ae=0,U=0;U<H.length;U++){j=H[U];for(var N=String(j[0]),B=l(c(n(j.index),M.length),0),W=[],q=1;q<j.length;q++)W.push(p(j[q]));var xe=j.groups;if(k){var Te=[N].concat(W,B,M);xe!==void 0&&Te.push(xe);var Se=String(D.apply(void 0,Te))}else Se=S(N,M,B,W,xe,D);B>=ae&&(J+=M.slice(ae,B)+Se,ae=B+N.length)}return J+M.slice(ae)}];function S(C,D,E,I,M,k){var R=E+C.length,$=I.length,H=d;return M!==void 0&&(M=r(M),H=f),g.call(k,H,function(j,V){var J;switch(V.charAt(0)){case"$":return"$";case"&":return C;case"`":return D.slice(0,E);case"'":return D.slice(R);case"<":J=M[V.slice(1,-1)];break;default:var ae=+V;if(ae===0)return j;if(ae>$){var U=h(ae/10);return U===0?j:U<=$?I[U-1]===void 0?V.charAt(1):I[U-1]+V.charAt(1):j}J=I[ae-1]}return J===void 0?"":J})}})}),wce=T(()=>{var e=a0(),t=$t(),r=Xi(),i=m$(),n=c0();e("search",1,function(o,s,a){return[function(c){var h=r(this),f=c==null?void 0:c[o];return f!==void 0?f.call(c,h):new RegExp(c)[o](String(h))},function(l){var c=a(s,l,this);if(c.done)return c.value;var h=t(l),f=String(this),d=h.lastIndex;i(d,0)||(h.lastIndex=0);var p=n(h,f);return i(h.lastIndex,d)||(h.lastIndex=d),p===null?-1:p.index}]})}),Sce=T(()=>{var e=a0(),t=n0(),r=$t(),i=Xi(),n=ea(),o=l0(),s=Kt(),a=c0(),l=s0(),c=tt(),h=[].push,f=Math.min,d=4294967295,p=!c(function(){return!RegExp(d,"y")});e("split",2,function(v,g,m){var y;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?y=function(_,b){var w=String(i(this)),S=b===void 0?d:b>>>0;if(S===0)return[];if(_===void 0)return[w];if(!t(_))return g.call(w,_,S);for(var C=[],D=(_.ignoreCase?"i":"")+(_.multiline?"m":"")+(_.unicode?"u":"")+(_.sticky?"y":""),E=0,I=new RegExp(_.source,D+"g"),M,k,R;(M=l.call(I,w))&&(k=I.lastIndex,!(k>E&&(C.push(w.slice(E,M.index)),M.length>1&&M.index<w.length&&h.apply(C,M.slice(1)),R=M[0].length,E=k,C.length>=S)));)I.lastIndex===M.index&&I.lastIndex++;return E===w.length?(R||!I.test(""))&&C.push(""):C.push(w.slice(E)),C.length>S?C.slice(0,S):C}:"0".split(void 0,0).length?y=function(_,b){return _===void 0&&b===0?[]:g.call(this,_,b)}:y=g,[function(b,w){var S=i(this),C=b==null?void 0:b[v];return C!==void 0?C.call(b,S,w):y.call(String(S),b,w)},function(_,b){var w=m(y,_,this,b,y!==g);if(w.done)return w.value;var S=r(_),C=String(this),D=n(S,RegExp),E=S.unicode,I=(S.ignoreCase?"i":"")+(S.multiline?"m":"")+(S.unicode?"u":"")+(p?"y":"g"),M=new D(p?S:"^(?:"+S.source+")",I),k=b===void 0?d:b>>>0;if(k===0)return[];if(C.length===0)return a(M,C)===null?[C]:[];for(var R=0,$=0,H=[];$<C.length;){M.lastIndex=p?$:0;var j=a(M,p?C:C.slice($)),V;if(j===null||(V=f(s(M.lastIndex+(p?0:$)),C.length))===R)$=o(C,$,E);else{if(H.push(C.slice(R,$)),H.length===k)return H;for(var J=1;J<=j.length-1;J++)if(H.push(j[J]),H.length===k)return H;$=R=V}}return H.push(C.slice(R)),H}]},!p)}),Cce=T(()=>{var e=Y(),t=$i().f,r=Kt(),i=sT(),n=Xi(),o=aT(),s=bo(),a="".startsWith,l=Math.min,c=o("startsWith"),h=!s&&!c&&!!function(){var f=t(String.prototype,"startsWith");return f&&!f.writable}();e({target:"String",proto:!0,forced:!h&&!c},{startsWith:function(d){var p=String(n(this));i(d);var v=r(l(arguments.length>1?arguments[1]:void 0,p.length)),g=String(d);return a?a.call(p,g,v):p.slice(v,v+g.length)===g}})}),u0=T((e,t)=>{t.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`}),Fh=T((e,t)=>{var r=Xi(),i=u0(),n="["+i+"]",o=RegExp("^"+n+n+"*"),s=RegExp(n+n+"*$"),a=function(l){return function(c){var h=String(r(c));return l&1&&(h=h.replace(o,"")),l&2&&(h=h.replace(s,"")),h}};t.exports={start:a(1),end:a(2),trim:a(3)}}),hT=T((e,t)=>{var r=tt(),i=u0(),n="\u200B\x85\u180E";t.exports=function(o){return r(function(){return!!i[o]()||n[o]()!=n||i[o].name!==o})}}),kce=T(()=>{var e=Y(),t=Fh().trim,r=hT();e({target:"String",proto:!0,forced:r("trim")},{trim:function(){return t(this)}})}),Tce=T(()=>{var e=Y(),t=Fh().start,r=hT(),i=r("trimStart"),n=i?function(){return t(this)}:"".trimStart;e({target:"String",proto:!0,forced:i},{trimStart:n,trimLeft:n})}),Ece=T(()=>{var e=Y(),t=Fh().end,r=hT(),i=r("trimEnd"),n=i?function(){return t(this)}:"".trimEnd;e({target:"String",proto:!0,forced:i},{trimEnd:n,trimRight:n})}),Dn=T((e,t)=>{var r=Xi(),i=/"/g;t.exports=function(n,o,s,a){var l=String(r(n)),c="<"+o;return s!==""&&(c+=" "+s+'="'+String(a).replace(i,"&quot;")+'"'),c+">"+l+"</"+o+">"}}),In=T((e,t)=>{var r=tt();t.exports=function(i){return r(function(){var n=""[i]('"');return n!==n.toLowerCase()||n.split('"').length>3})}}),Dce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("anchor")},{anchor:function(n){return t(this,"a","name",n)}})}),Ice=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("big")},{big:function(){return t(this,"big","","")}})}),Rce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("blink")},{blink:function(){return t(this,"blink","","")}})}),Fce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("bold")},{bold:function(){return t(this,"b","","")}})}),Oce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("fixed")},{fixed:function(){return t(this,"tt","","")}})}),Mce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("fontcolor")},{fontcolor:function(n){return t(this,"font","color",n)}})}),Pce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("fontsize")},{fontsize:function(n){return t(this,"font","size",n)}})}),Ace=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("italics")},{italics:function(){return t(this,"i","","")}})}),zce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("link")},{link:function(n){return t(this,"a","href",n)}})}),$ce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("small")},{small:function(){return t(this,"small","","")}})}),Bce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("strike")},{strike:function(){return t(this,"strike","","")}})}),Lce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("sub")},{sub:function(){return t(this,"sub","","")}})}),Uce=T(()=>{var e=Y(),t=Dn(),r=In();e({target:"String",proto:!0,forced:r("sup")},{sup:function(){return t(this,"sup","","")}})}),h0=T((e,t)=>{var r=Ot(),i=Dc();t.exports=function(n,o,s){var a,l;return i&&typeof(a=o.constructor)=="function"&&a!==s&&r(l=a.prototype)&&l!==s.prototype&&i(n,l),n}}),Nce=T(()=>{var e=Ut(),t=ht(),r=qp(),i=h0(),n=ar().f,o=kc().f,s=n0(),a=tm(),l=o0(),c=Bi(),h=tt(),f=Qi().set,d=Rh(),p=Gt(),v=p("match"),g=t.RegExp,m=g.prototype,y=/a/g,_=/a/g,b=new g(y)!==y,w=l.UNSUPPORTED_Y,S=e&&r("RegExp",!b||w||h(function(){return _[v]=!1,g(y)!=y||g(_)==_||g(y,"i")!="/a/i"}));if(S){for(C=function(k,R){var $=this instanceof C,H=s(k),j=R===void 0,V;if(!$&&H&&k.constructor===C&&j)return k;b?H&&!j&&(k=k.source):k instanceof C&&(j&&(R=a.call(k)),k=k.source),w&&(V=!!R&&R.indexOf("y")>-1,V&&(R=R.replace(/y/g,"")));var J=i(b?new g(k,R):g(k,R),$?this:m,C);return w&&V&&f(J,{sticky:V}),J},D=function(M){M in C||n(C,M,{configurable:!0,get:function(){return g[M]},set:function(k){g[M]=k}})},E=o(g),I=0;E.length>I;)D(E[I++]);m.constructor=C,C.prototype=m,c(t,"RegExp",C)}var C,D,E,I;d("RegExp")}),jce=T(()=>{var e=Ut(),t=ar(),r=tm(),i=o0().UNSUPPORTED_Y;e&&(/./g.flags!="g"||i)&&t.f(RegExp.prototype,"flags",{configurable:!0,get:r})}),Hce=T(()=>{var e=Ut(),t=o0().UNSUPPORTED_Y,r=ar().f,i=Qi().get,n=RegExp.prototype;e&&t&&r(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==n){if(this instanceof RegExp)return!!i(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})}),Wce=T(()=>{lT();var e=Y(),t=Ot(),r=function(){var n=!1,o=/[ac]/;return o.exec=function(){return n=!0,/./.exec.apply(this,arguments)},o.test("abc")===!0&&n}(),i=/./.test;e({target:"RegExp",proto:!0,forced:!r},{test:function(n){if(typeof this.exec!="function")return i.call(this,n);var o=this.exec(n);if(o!==null&&!t(o))throw new Error("RegExp exec method returned something other than an Object or null");return!!o}})}),Vce=T(()=>{var e=Bi(),t=$t(),r=tt(),i=tm(),n="toString",o=RegExp.prototype,s=o[n],a=r(function(){return s.call({source:"a",flags:"b"})!="/a/b"}),l=s.name!=n;(a||l)&&e(RegExp.prototype,n,function(){var h=t(this),f=String(h.source),d=h.flags,p=String(d===void 0&&h instanceof RegExp&&!("flags"in o)?i.call(h):d);return"/"+f+"/"+p},{unsafe:!0})}),C$=T((e,t)=>{var r=ht(),i=Fh().trim,n=u0(),o=r.parseInt,s=/^[+-]?0[Xx]/,a=o(n+"08")!==8||o(n+"0x16")!==22;t.exports=a?function(c,h){var f=i(String(c));return o(f,h>>>0||(s.test(f)?16:10))}:o}),Gce=T(()=>{var e=Y(),t=C$();e({global:!0,forced:parseInt!=t},{parseInt:t})}),k$=T((e,t)=>{var r=ht(),i=Fh().trim,n=u0(),o=r.parseFloat,s=1/o(n+"-0")!==-1/0;t.exports=s?function(l){var c=i(String(l)),h=o(c);return h===0&&c.charAt(0)=="-"?-0:h}:o}),qce=T(()=>{var e=Y(),t=k$();e({global:!0,forced:parseFloat!=t},{parseFloat:t})}),Xce=T(()=>{var e=Ut(),t=ht(),r=qp(),i=Bi(),n=zr(),o=Jn(),s=h0(),a=_o(),l=tt(),c=Ks(),h=kc().f,f=$i().f,d=ar().f,p=Fh().trim,v="Number",g=t[v],m=g.prototype,y=o(c(m))==v,_=function(D){var E=a(D,!1),I,M,k,R,$,H,j,V;if(typeof E=="string"&&E.length>2){if(E=p(E),I=E.charCodeAt(0),I===43||I===45){if(M=E.charCodeAt(2),M===88||M===120)return NaN}else if(I===48){switch(E.charCodeAt(1)){case 66:case 98:k=2,R=49;break;case 79:case 111:k=8,R=55;break;default:return+E}for($=E.slice(2),H=$.length,j=0;j<H;j++)if(V=$.charCodeAt(j),V<48||V>R)return NaN;return parseInt($,k)}}return+E};if(r(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(b=function(E){var I=arguments.length<1?0:E,M=this;return M instanceof b&&(y?l(function(){m.valueOf.call(M)}):o(M)!=v)?s(new g(_(I)),M,b):_(I)},w=e?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)n(g,C=w[S])&&!n(b,C)&&d(b,C,f(g,C));b.prototype=m,m.constructor=b,i(t,v,b)}var b,w,S,C}),Yce=T(()=>{var e=Y();e({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})}),Qce=T((e,t)=>{var r=ht(),i=r.isFinite;t.exports=Number.isFinite||function(o){return typeof o=="number"&&i(o)}}),Kce=T(()=>{var e=Y(),t=Qce();e({target:"Number",stat:!0},{isFinite:t})}),T$=T((e,t)=>{var r=Ot(),i=Math.floor;t.exports=function(o){return!r(o)&&isFinite(o)&&i(o)===o}}),Zce=T(()=>{var e=Y(),t=T$();e({target:"Number",stat:!0},{isInteger:t})}),Jce=T(()=>{var e=Y();e({target:"Number",stat:!0},{isNaN:function(r){return r!=r}})}),eue=T(()=>{var e=Y(),t=T$(),r=Math.abs;e({target:"Number",stat:!0},{isSafeInteger:function(n){return t(n)&&r(n)<=9007199254740991}})}),tue=T(()=>{var e=Y();e({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})}),rue=T(()=>{var e=Y();e({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})}),iue=T(()=>{var e=Y(),t=k$();e({target:"Number",stat:!0,forced:Number.parseFloat!=t},{parseFloat:t})}),nue=T(()=>{var e=Y(),t=C$();e({target:"Number",stat:!0,forced:Number.parseInt!=t},{parseInt:t})}),E$=T((e,t)=>{var r=Jn();t.exports=function(i){if(typeof i!="number"&&r(i)!="Number")throw TypeError("Incorrect invocation");return+i}}),oue=T(()=>{var e=Y(),t=to(),r=E$(),i=cT(),n=tt(),o=1 .toFixed,s=Math.floor,a=function(h,f,d){return f===0?d:f%2===1?a(h,f-1,d*h):a(h*h,f/2,d)},l=function(h){for(var f=0,d=h;d>=4096;)f+=12,d/=4096;for(;d>=2;)f+=1,d/=2;return f},c=o&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!n(function(){o.call({})});e({target:"Number",proto:!0,forced:c},{toFixed:function(f){var d=r(this),p=t(f),v=[0,0,0,0,0,0],g="",m="0",y,_,b,w,S=function(E,I){for(var M=-1,k=I;++M<6;)k+=E*v[M],v[M]=k%1e7,k=s(k/1e7)},C=function(E){for(var I=6,M=0;--I>=0;)M+=v[I],v[I]=s(M/E),M=M%E*1e7},D=function(){for(var E=6,I="";--E>=0;)if(I!==""||E===0||v[E]!==0){var M=String(v[E]);I=I===""?M:I+i.call("0",7-M.length)+M}return I};if(p<0||p>20)throw RangeError("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return String(d);if(d<0&&(g="-",d=-d),d>1e-21)if(y=l(d*a(2,69,1))-69,_=y<0?d*a(2,-y,1):d/a(2,y,1),_*=4503599627370496,y=52-y,y>0){for(S(0,_),b=p;b>=7;)S(1e7,0),b-=7;for(S(a(10,b,1),0),b=y-1;b>=23;)C(1<<23),b-=23;C(1<<b),S(1,1),C(2),m=D()}else S(0,_),S(1<<-y,0),m=D()+i.call("0",p);return p>0?(w=m.length,m=g+(w<=p?"0."+i.call("0",p-w)+m:m.slice(0,w-p)+"."+m.slice(w-p))):m=g+m,m}})}),sue=T(()=>{var e=Y(),t=tt(),r=E$(),i=1 .toPrecision,n=t(function(){return i.call(1,void 0)!=="1"})||!t(function(){i.call({})});e({target:"Number",proto:!0,forced:n},{toPrecision:function(s){return s===void 0?i.call(r(this)):i.call(r(this),s)}})}),D$=T((e,t)=>{var r=Math.log;t.exports=Math.log1p||function(n){return(n=+n)>-1e-8&&n<1e-8?n-n*n/2:r(1+n)}}),aue=T(()=>{var e=Y(),t=D$(),r=Math.acosh,i=Math.log,n=Math.sqrt,o=Math.LN2,s=!r||Math.floor(r(Number.MAX_VALUE))!=710||r(1/0)!=1/0;e({target:"Math",stat:!0,forced:s},{acosh:function(l){return(l=+l)<1?NaN:l>9490626562425156e-8?i(l)+o:t(l-1+n(l-1)*n(l+1))}})}),lue=T(()=>{var e=Y(),t=Math.asinh,r=Math.log,i=Math.sqrt;function n(o){return!isFinite(o=+o)||o==0?o:o<0?-n(-o):r(o+i(o*o+1))}e({target:"Math",stat:!0,forced:!(t&&1/t(0)>0)},{asinh:n})}),cue=T(()=>{var e=Y(),t=Math.atanh,r=Math.log;e({target:"Math",stat:!0,forced:!(t&&1/t(-0)<0)},{atanh:function(n){return(n=+n)==0?n:r((1+n)/(1-n))/2}})}),dT=T((e,t)=>{t.exports=Math.sign||function(i){return(i=+i)==0||i!=i?i:i<0?-1:1}}),uue=T(()=>{var e=Y(),t=dT(),r=Math.abs,i=Math.pow;e({target:"Math",stat:!0},{cbrt:function(o){return t(o=+o)*i(r(o),1/3)}})}),hue=T(()=>{var e=Y(),t=Math.floor,r=Math.log,i=Math.LOG2E;e({target:"Math",stat:!0},{clz32:function(o){return(o>>>=0)?31-t(r(o+.5)*i):32}})}),d0=T((e,t)=>{var r=Math.expm1,i=Math.exp;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||r(-2e-17)!=-2e-17?function(o){return(o=+o)==0?o:o>-1e-6&&o<1e-6?o+o*o/2:i(o)-1}:r}),due=T(()=>{var e=Y(),t=d0(),r=Math.cosh,i=Math.abs,n=Math.E;e({target:"Math",stat:!0,forced:!r||r(710)===1/0},{cosh:function(s){var a=t(i(s)-1)+1;return(a+1/(a*n*n))*(n/2)}})}),fue=T(()=>{var e=Y(),t=d0();e({target:"Math",stat:!0,forced:t!=Math.expm1},{expm1:t})}),pue=T((e,t)=>{var r=dT(),i=Math.abs,n=Math.pow,o=n(2,-52),s=n(2,-23),a=n(2,127)*(2-s),l=n(2,-126),c=function(h){return h+1/o-1/o};t.exports=Math.fround||function(f){var d=i(f),p=r(f),v,g;return d<l?p*c(d/l/s)*l*s:(v=(1+s/o)*d,g=v-(v-d),g>a||g!=g?p*(1/0):p*g)}}),mue=T(()=>{var e=Y(),t=pue();e({target:"Math",stat:!0},{fround:t})}),gue=T(()=>{var e=Y(),t=Math.hypot,r=Math.abs,i=Math.sqrt,n=!!t&&t(1/0,NaN)!==1/0;e({target:"Math",stat:!0,forced:n},{hypot:function(s,a){for(var l=0,c=0,h=arguments.length,f=0,d,p;c<h;)d=r(arguments[c++]),f<d?(p=f/d,l=l*p*p+1,f=d):d>0?(p=d/f,l+=p*p):l+=d;return f===1/0?1/0:f*i(l)}})}),vue=T(()=>{var e=Y(),t=tt(),r=Math.imul,i=t(function(){return r(4294967295,5)!=-5||r.length!=2});e({target:"Math",stat:!0,forced:i},{imul:function(o,s){var a=65535,l=+o,c=+s,h=a&l,f=a&c;return 0|h*f+((a&l>>>16)*f+h*(a&c>>>16)<<16>>>0)}})}),yue=T(()=>{var e=Y(),t=Math.log,r=Math.LOG10E;e({target:"Math",stat:!0},{log10:function(n){return t(n)*r}})}),_ue=T(()=>{var e=Y(),t=D$();e({target:"Math",stat:!0},{log1p:t})}),bue=T(()=>{var e=Y(),t=Math.log,r=Math.LN2;e({target:"Math",stat:!0},{log2:function(n){return t(n)/r}})}),xue=T(()=>{var e=Y(),t=dT();e({target:"Math",stat:!0},{sign:t})}),wue=T(()=>{var e=Y(),t=tt(),r=d0(),i=Math.abs,n=Math.exp,o=Math.E,s=t(function(){return Math.sinh(-2e-17)!=-2e-17});e({target:"Math",stat:!0,forced:s},{sinh:function(l){return i(l=+l)<1?(r(l)-r(-l))/2:(n(l-1)-n(-l-1))*(o/2)}})}),Sue=T(()=>{var e=Y(),t=d0(),r=Math.exp;e({target:"Math",stat:!0},{tanh:function(n){var o=t(n=+n),s=t(-n);return o==1/0?1:s==1/0?-1:(o-s)/(r(n)+r(-n))}})}),Cue=T(()=>{var e=Y(),t=Math.ceil,r=Math.floor;e({target:"Math",stat:!0},{trunc:function(n){return(n>0?r:t)(n)}})}),kue=T(()=>{var e=Y();e({target:"Date",stat:!0},{now:function(){return new Date().getTime()}})}),Tue=T(()=>{var e=Y(),t=tt(),r=Rr(),i=_o(),n=t(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});e({target:"Date",proto:!0,forced:n},{toJSON:function(s){var a=r(this),l=i(a);return typeof l=="number"&&!isFinite(l)?null:a.toISOString()}})}),Eue=T((e,t)=>{var r=tt(),i=uT().start,n=Math.abs,o=Date.prototype,s=o.getTime,a=o.toISOString;t.exports=r(function(){return a.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!r(function(){a.call(new Date(NaN))})?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var c=this,h=c.getUTCFullYear(),f=c.getUTCMilliseconds(),d=h<0?"-":h>9999?"+":"";return d+i(n(h),d?6:4,0)+"-"+i(c.getUTCMonth()+1,2,0)+"-"+i(c.getUTCDate(),2,0)+"T"+i(c.getUTCHours(),2,0)+":"+i(c.getUTCMinutes(),2,0)+":"+i(c.getUTCSeconds(),2,0)+"."+i(f,3,0)+"Z"}:a}),Due=T(()=>{var e=Y(),t=Eue();e({target:"Date",proto:!0,forced:Date.prototype.toISOString!==t},{toISOString:t})}),Iue=T(()=>{var e=Bi(),t=Date.prototype,r="Invalid Date",i="toString",n=t[i],o=t.getTime;new Date(NaN)+""!=r&&e(t,i,function(){var a=o.call(this);return a===a?n.call(this):r})}),Rue=T((e,t)=>{var r=$t(),i=_o();t.exports=function(n){if(n!=="string"&&n!=="number"&&n!=="default")throw TypeError("Incorrect hint");return i(r(this),n!=="number")}}),Fue=T(()=>{var e=Yi(),t=Rue(),r=Gt(),i=r("toPrimitive"),n=Date.prototype;i in n||e(n,i,t)}),Oue=T(()=>{var e=Y(),t=eo(),r=tt(),i=t("JSON","stringify"),n=/[\uD800-\uDFFF]/g,o=/^[\uD800-\uDBFF]$/,s=/^[\uDC00-\uDFFF]$/,a=function(c,h,f){var d=f.charAt(h-1),p=f.charAt(h+1);return o.test(c)&&!s.test(p)||s.test(c)&&!o.test(d)?"\\u"+c.charCodeAt(0).toString(16):c},l=r(function(){return i("\uDF06\uD834")!=='"\\udf06\\ud834"'||i("\uDEAD")!=='"\\udead"'});i&&e({target:"JSON",stat:!0,forced:l},{stringify:function(h,f,d){var p=i.apply(null,arguments);return typeof p=="string"?p.replace(n,a):p}})}),I$=T((e,t)=>{var r=ht();t.exports=r.Promise}),Oh=T((e,t)=>{var r=Bi();t.exports=function(i,n,o){for(var s in n)r(i,s,n[s],o);return i}}),yl=T((e,t)=>{t.exports=function(r,i,n){if(!(r instanceof i))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return r}}),R$=T((e,t)=>{var r=Z_();t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)}),fT=T((e,t)=>{var r=ht(),i=tt(),n=Jn(),o=Zs(),s=j6(),a=Hk(),l=R$(),c=r.location,h=r.setImmediate,f=r.clearImmediate,d=r.process,p=r.MessageChannel,v=r.Dispatch,g=0,m={},y="onreadystatechange",_,b,w,S=function(I){if(m.hasOwnProperty(I)){var M=m[I];delete m[I],M()}},C=function(I){return function(){S(I)}},D=function(I){S(I.data)},E=function(I){r.postMessage(I+"",c.protocol+"//"+c.host)};(!h||!f)&&(h=function(M){for(var k=[],R=1;arguments.length>R;)k.push(arguments[R++]);return m[++g]=function(){(typeof M=="function"?M:Function(M)).apply(void 0,k)},_(g),g},f=function(M){delete m[M]},n(d)=="process"?_=function(I){d.nextTick(C(I))}:v&&v.now?_=function(I){v.now(C(I))}:p&&!l?(b=new p,w=b.port2,b.port1.onmessage=D,_=o(w.postMessage,w,1)):r.addEventListener&&typeof postMessage=="function"&&!r.importScripts&&!i(E)&&c.protocol!=="file:"?(_=E,r.addEventListener("message",D,!1)):y in a("script")?_=function(I){s.appendChild(a("script"))[y]=function(){s.removeChild(this),S(I)}}:_=function(I){setTimeout(C(I),0)}),t.exports={set:h,clear:f}}),F$=T((e,t)=>{var r=ht(),i=$i().f,n=Jn(),o=fT().set,s=R$(),a=r.MutationObserver||r.WebKitMutationObserver,l=r.process,c=r.Promise,h=n(l)=="process",f=i(r,"queueMicrotask"),d=f&&f.value,p,v,g,m,y,_,b,w;d||(p=function(){var S,C;for(h&&(S=l.domain)&&S.exit();v;){C=v.fn,v=v.next;try{C()}catch(D){throw v?m():g=void 0,D}}g=void 0,S&&S.enter()},h?m=function(){l.nextTick(p)}:a&&!s?(y=!0,_=document.createTextNode(""),new a(p).observe(_,{characterData:!0}),m=function(){_.data=y=!y}):c&&c.resolve?(b=c.resolve(void 0),w=b.then,m=function(){w.call(b,p)}):m=function(){o.call(r,p)}),t.exports=d||function(S){var C={fn:S,next:void 0};g&&(g.next=C),v||(v=C,m()),g=C}}),pT=T((e,t)=>{var r=hn(),i=function(n){var o,s;this.promise=new n(function(a,l){if(o!==void 0||s!==void 0)throw TypeError("Bad Promise constructor");o=a,s=l}),this.resolve=r(o),this.reject=r(s)};t.exports.f=function(n){return new i(n)}}),O$=T((e,t)=>{var r=$t(),i=Ot(),n=pT();t.exports=function(o,s){if(r(o),i(s)&&s.constructor===o)return s;var a=n.f(o),l=a.resolve;return l(s),a.promise}}),Mue=T((e,t)=>{var r=ht();t.exports=function(i,n){var o=r.console;o&&o.error&&(arguments.length===1?o.error(i):o.error(i,n))}}),M$=T((e,t)=>{t.exports=function(r){try{return{error:!1,value:r()}}catch(i){return{error:!0,value:i}}}}),Pue=T(()=>{var e=Y(),t=bo(),r=ht(),i=eo(),n=I$(),o=Bi(),s=Oh(),a=as(),l=Rh(),c=Ot(),h=hn(),f=yl(),d=Jn(),p=Vk(),v=Ih(),g=e0(),m=ea(),y=fT().set,_=F$(),b=O$(),w=Mue(),S=pT(),C=M$(),D=Qi(),E=qp(),I=Gt(),M=Kk(),k=I("species"),R="Promise",$=D.get,H=D.set,j=D.getterFor(R),V=n,J=r.TypeError,ae=r.document,U=r.process,N=i("fetch"),B=S.f,W=B,q=d(U)=="process",xe=!!(ae&&ae.createEvent&&r.dispatchEvent),Te="unhandledrejection",Se="rejectionhandled",fe=0,te=1,X=2,le=1,de=2,Fe,Ee,ye,he,De=E(R,function(){var Ge=p(V)!==String(V);if(!Ge&&(M===66||!q&&typeof PromiseRejectionEvent!="function")||t&&!V.prototype.finally)return!0;if(M>=51&&/native code/.test(V))return!1;var be=V.resolve(1),Me=function(Ie){Ie(function(){},function(){})},je=be.constructor={};return je[k]=Me,!(be.then(function(){})instanceof Me)}),Ze=De||!g(function(Ge){V.all(Ge).catch(function(){})}),dt=function(Ge){var be;return c(Ge)&&typeof(be=Ge.then)=="function"?be:!1},Nt=function(Ge,be,Me){if(!be.notified){be.notified=!0;var je=be.reactions;_(function(){for(var Ie=be.value,Oe=be.state==te,qe=0;je.length>qe;){var Xe=je[qe++],Je=Oe?Xe.ok:Xe.fail,yt=Xe.resolve,Mt=Xe.reject,Bt=Xe.domain,Wr,Li,Ci;try{Je?(Oe||(be.rejection===de&&Fr(Ge,be),be.rejection=le),Je===!0?Wr=Ie:(Bt&&Bt.enter(),Wr=Je(Ie),Bt&&(Bt.exit(),Ci=!0)),Wr===Xe.promise?Mt(J("Promise-chain cycle")):(Li=dt(Wr))?Li.call(Wr,yt,Mt):yt(Wr)):Mt(Ie)}catch(Ui){Bt&&!Ci&&Bt.exit(),Mt(Ui)}}be.reactions=[],be.notified=!1,Me&&!be.rejection&&Xt(Ge,be)})}},gr=function(Ge,be,Me){var je,Ie;xe?(je=ae.createEvent("Event"),je.promise=be,je.reason=Me,je.initEvent(Ge,!1,!0),r.dispatchEvent(je)):je={promise:be,reason:Me},(Ie=r["on"+Ge])?Ie(je):Ge===Te&&w("Unhandled promise rejection",Me)},Xt=function(Ge,be){y.call(r,function(){var Me=be.value,je=ft(be),Ie;if(je&&(Ie=C(function(){q?U.emit("unhandledRejection",Me,Ge):gr(Te,Ge,Me)}),be.rejection=q||ft(be)?de:le,Ie.error))throw Ie.value})},ft=function(Ge){return Ge.rejection!==le&&!Ge.parent},Fr=function(Ge,be){y.call(r,function(){q?U.emit("rejectionHandled",Ge):gr(Se,Ge,be.value)})},ri=function(Ge,be,Me,je){return function(Ie){Ge(be,Me,Ie,je)}},Cr=function(Ge,be,Me,je){be.done||(be.done=!0,je&&(be=je),be.value=Me,be.state=X,Nt(Ge,be,!0))},Si=function(Ge,be,Me,je){if(!be.done){be.done=!0,je&&(be=je);try{if(Ge===Me)throw J("Promise can't be resolved itself");var Ie=dt(Me);Ie?_(function(){var Oe={done:!1};try{Ie.call(Me,ri(Si,Ge,Oe,be),ri(Cr,Ge,Oe,be))}catch(qe){Cr(Ge,Oe,qe,be)}}):(be.value=Me,be.state=te,Nt(Ge,be,!1))}catch(Oe){Cr(Ge,{done:!1},Oe,be)}}};De&&(V=function(be){f(this,V,R),h(be),Fe.call(this);var Me=$(this);try{be(ri(Si,this,Me),ri(Cr,this,Me))}catch(je){Cr(this,Me,je)}},Fe=function(be){H(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:fe,value:void 0})},Fe.prototype=s(V.prototype,{then:function(be,Me){var je=j(this),Ie=B(m(this,V));return Ie.ok=typeof be=="function"?be:!0,Ie.fail=typeof Me=="function"&&Me,Ie.domain=q?U.domain:void 0,je.parent=!0,je.reactions.push(Ie),je.state!=fe&&Nt(this,je,!1),Ie.promise},catch:function(Ge){return this.then(void 0,Ge)}}),Ee=function(){var Ge=new Fe,be=$(Ge);this.promise=Ge,this.resolve=ri(Si,Ge,be),this.reject=ri(Cr,Ge,be)},S.f=B=function(Ge){return Ge===V||Ge===ye?new Ee(Ge):W(Ge)},!t&&typeof n=="function"&&(he=n.prototype.then,o(n.prototype,"then",function(be,Me){var je=this;return new V(function(Ie,Oe){he.call(je,Ie,Oe)}).then(be,Me)},{unsafe:!0}),typeof N=="function"&&e({global:!0,enumerable:!0,forced:!0},{fetch:function(be){return b(V,N.apply(r,arguments))}}))),e({global:!0,wrap:!0,forced:De},{Promise:V}),a(V,R,!1,!0),l(R),ye=i(R),e({target:R,stat:!0,forced:De},{reject:function(be){var Me=B(this);return Me.reject.call(void 0,be),Me.promise}}),e({target:R,stat:!0,forced:t||De},{resolve:function(be){return b(t&&this===ye?V:this,be)}}),e({target:R,stat:!0,forced:Ze},{all:function(be){var Me=this,je=B(Me),Ie=je.resolve,Oe=je.reject,qe=C(function(){var Xe=h(Me.resolve),Je=[],yt=0,Mt=1;v(be,function(Bt){var Wr=yt++,Li=!1;Je.push(void 0),Mt++,Xe.call(Me,Bt).then(function(Ci){Li||(Li=!0,Je[Wr]=Ci,--Mt||Ie(Je))},Oe)}),--Mt||Ie(Je)});return qe.error&&Oe(qe.value),je.promise},race:function(be){var Me=this,je=B(Me),Ie=je.reject,Oe=C(function(){var qe=h(Me.resolve);v(be,function(Xe){qe.call(Me,Xe).then(je.resolve,Ie)})});return Oe.error&&Ie(Oe.value),je.promise}})}),Aue=T(()=>{var e=Y(),t=hn(),r=pT(),i=M$(),n=Ih();e({target:"Promise",stat:!0},{allSettled:function(s){var a=this,l=r.f(a),c=l.resolve,h=l.reject,f=i(function(){var d=t(a.resolve),p=[],v=0,g=1;n(s,function(m){var y=v++,_=!1;p.push(void 0),g++,d.call(a,m).then(function(b){_||(_=!0,p[y]={status:"fulfilled",value:b},--g||c(p))},function(b){_||(_=!0,p[y]={status:"rejected",reason:b},--g||c(p))})}),--g||c(p)});return f.error&&h(f.value),l.promise}})}),zue=T(()=>{var e=Y(),t=bo(),r=I$(),i=tt(),n=eo(),o=ea(),s=O$(),a=Bi(),l=!!r&&i(function(){r.prototype.finally.call({then:function(){}},function(){})});e({target:"Promise",proto:!0,real:!0,forced:l},{finally:function(c){var h=o(this,n("Promise")),f=typeof c=="function";return this.then(f?function(d){return s(h,c()).then(function(){return d})}:c,f?function(d){return s(h,c()).then(function(){throw d})}:c)}}),!t&&typeof r=="function"&&!r.prototype.finally&&a(r.prototype,"finally",n("Promise").prototype.finally)}),f0=T((e,t)=>{var r=Y(),i=ht(),n=qp(),o=Bi(),s=Ic(),a=Ih(),l=yl(),c=Ot(),h=tt(),f=e0(),d=as(),p=h0();t.exports=function(v,g,m){var y=v.indexOf("Map")!==-1,_=v.indexOf("Weak")!==-1,b=y?"set":"add",w=i[v],S=w&&w.prototype,C=w,D={},E=function(H){var j=S[H];o(S,H,H=="add"?function(J){return j.call(this,J===0?0:J),this}:H=="delete"?function(V){return _&&!c(V)?!1:j.call(this,V===0?0:V)}:H=="get"?function(J){return _&&!c(J)?void 0:j.call(this,J===0?0:J)}:H=="has"?function(J){return _&&!c(J)?!1:j.call(this,J===0?0:J)}:function(J,ae){return j.call(this,J===0?0:J,ae),this})};if(n(v,typeof w!="function"||!(_||S.forEach&&!h(function(){new w().entries().next()}))))C=m.getConstructor(g,v,y,b),s.REQUIRED=!0;else if(n(v,!0)){var I=new C,M=I[b](_?{}:-0,1)!=I,k=h(function(){I.has(1)}),R=f(function(H){new w(H)}),$=!_&&h(function(){for(var H=new w,j=5;j--;)H[b](j,j);return!H.has(-0)});R||(C=g(function(H,j){l(H,C,v);var V=p(new w,H,C);return j!=null&&a(j,V[b],V,y),V}),C.prototype=S,S.constructor=C),(k||$)&&(E("delete"),E("has"),y&&E("get")),($||M)&&E(b),_&&S.clear&&delete S.clear}return D[v]=C,r({global:!0,forced:C!=w},D),d(C,v),_||m.setStrong(C,v,y),C}}),P$=T((e,t)=>{var r=ar().f,i=Ks(),n=Oh(),o=Zs(),s=yl(),a=Ih(),l=rT(),c=Rh(),h=Ut(),f=Ic().fastKey,d=Qi(),p=d.set,v=d.getterFor;t.exports={getConstructor:function(g,m,y,_){var b=g(function(D,E){s(D,b,m),p(D,{type:m,index:i(null),first:void 0,last:void 0,size:0}),h||(D.size=0),E!=null&&a(E,D[_],D,y)}),w=v(m),S=function(D,E,I){var M=w(D),k=C(D,E),R,$;return k?k.value=I:(M.last=k={index:$=f(E,!0),key:E,value:I,previous:R=M.last,next:void 0,removed:!1},M.first||(M.first=k),R&&(R.next=k),h?M.size++:D.size++,$!=="F"&&(M.index[$]=k)),D},C=function(D,E){var I=w(D),M=f(E),k;if(M!=="F")return I.index[M];for(k=I.first;k;k=k.next)if(k.key==E)return k};return n(b.prototype,{clear:function(){for(var E=this,I=w(E),M=I.index,k=I.first;k;)k.removed=!0,k.previous&&(k.previous=k.previous.next=void 0),delete M[k.index],k=k.next;I.first=I.last=void 0,h?I.size=0:E.size=0},delete:function(D){var E=this,I=w(E),M=C(E,D);if(M){var k=M.next,R=M.previous;delete I.index[M.index],M.removed=!0,R&&(R.next=k),k&&(k.previous=R),I.first==M&&(I.first=k),I.last==M&&(I.last=R),h?I.size--:E.size--}return!!M},forEach:function(E){for(var I=w(this),M=o(E,arguments.length>1?arguments[1]:void 0,3),k;k=k?k.next:I.first;)for(M(k.value,k.key,this);k&&k.removed;)k=k.previous},has:function(E){return!!C(this,E)}}),n(b.prototype,y?{get:function(E){var I=C(this,E);return I&&I.value},set:function(E,I){return S(this,E===0?0:E,I)}}:{add:function(E){return S(this,E=E===0?0:E,E)}}),h&&r(b.prototype,"size",{get:function(){return w(this).size}}),b},setStrong:function(g,m,y){var _=m+" Iterator",b=v(m),w=v(_);l(g,m,function(S,C){p(this,{type:_,target:S,state:b(S),kind:C,last:void 0})},function(){for(var S=w(this),C=S.kind,D=S.last;D&&D.removed;)D=D.previous;return!S.target||!(S.last=D=D?D.next:S.state.first)?(S.target=void 0,{value:void 0,done:!0}):C=="keys"?{value:D.key,done:!1}:C=="values"?{value:D.value,done:!1}:{value:[D.key,D.value],done:!1}},y?"entries":"values",!y,!0),c(m)}}}),$ue=T((e,t)=>{var r=f0(),i=P$();t.exports=r("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},i)}),Bue=T((e,t)=>{var r=f0(),i=P$();t.exports=r("Set",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},i)}),A$=T((e,t)=>{var r=Oh(),i=Ic().getWeakData,n=$t(),o=Ot(),s=yl(),a=Ih(),l=wi(),c=zr(),h=Qi(),f=h.set,d=h.getterFor,p=l.find,v=l.findIndex,g=0,m=function(b){return b.frozen||(b.frozen=new y)},y=function(){this.entries=[]},_=function(b,w){return p(b.entries,function(S){return S[0]===w})};y.prototype={get:function(b){var w=_(this,b);if(w)return w[1]},has:function(b){return!!_(this,b)},set:function(b,w){var S=_(this,b);S?S[1]=w:this.entries.push([b,w])},delete:function(b){var w=v(this.entries,function(S){return S[0]===b});return~w&&this.entries.splice(w,1),!!~w}},t.exports={getConstructor:function(b,w,S,C){var D=b(function(M,k){s(M,D,w),f(M,{type:w,id:g++,frozen:void 0}),k!=null&&a(k,M[C],M,S)}),E=d(w),I=function(M,k,R){var $=E(M),H=i(n(k),!0);return H===!0?m($).set(k,R):H[$.id]=R,M};return r(D.prototype,{delete:function(M){var k=E(this);if(!o(M))return!1;var R=i(M);return R===!0?m(k).delete(M):R&&c(R,k.id)&&delete R[k.id]},has:function(k){var R=E(this);if(!o(k))return!1;var $=i(k);return $===!0?m(R).has(k):$&&c($,R.id)}}),r(D.prototype,S?{get:function(k){var R=E(this);if(o(k)){var $=i(k);return $===!0?m(R).get(k):$?$[R.id]:void 0}},set:function(k,R){return I(this,k,R)}}:{add:function(k){return I(this,k,!0)}}),D}}}),Lue=T((e,t)=>{var r=ht(),i=Oh(),n=Ic(),o=f0(),s=A$(),a=Ot(),l=Qi().enforce,c=z6(),h=!r.ActiveXObject&&"ActiveXObject"in r,f=Object.isExtensible,d,p=function(w){return function(){return w(this,arguments.length?arguments[0]:void 0)}},v=t.exports=o("WeakMap",p,s);c&&h&&(d=s.getConstructor(p,"WeakMap",!0),n.REQUIRED=!0,g=v.prototype,m=g.delete,y=g.has,_=g.get,b=g.set,i(g,{delete:function(w){if(a(w)&&!f(w)){var S=l(this);return S.frozen||(S.frozen=new d),m.call(this,w)||S.frozen.delete(w)}return m.call(this,w)},has:function(S){if(a(S)&&!f(S)){var C=l(this);return C.frozen||(C.frozen=new d),y.call(this,S)||C.frozen.has(S)}return y.call(this,S)},get:function(S){if(a(S)&&!f(S)){var C=l(this);return C.frozen||(C.frozen=new d),y.call(this,S)?_.call(this,S):C.frozen.get(S)}return _.call(this,S)},set:function(S,C){if(a(S)&&!f(S)){var D=l(this);D.frozen||(D.frozen=new d),y.call(this,S)?b.call(this,S,C):D.frozen.set(S,C)}else b.call(this,S,C);return this}}));var g,m,y,_,b}),Uue=T(()=>{var e=f0(),t=A$();e("WeakSet",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},t)}),mT=T((e,t)=>{t.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"}),z$=T((e,t)=>{var r=to(),i=Kt();t.exports=function(n){if(n===void 0)return 0;var o=r(n),s=i(o);if(o!==s)throw RangeError("Wrong length or index");return s}}),Nue=T((e,t)=>{var r=1/0,i=Math.abs,n=Math.pow,o=Math.floor,s=Math.log,a=Math.LN2,l=function(h,f,d){var p=new Array(d),v=d*8-f-1,g=(1<<v)-1,m=g>>1,y=f===23?n(2,-24)-n(2,-77):0,_=h<0||h===0&&1/h<0?1:0,b=0,w,S,C;for(h=i(h),h!=h||h===r?(S=h!=h?1:0,w=g):(w=o(s(h)/a),h*(C=n(2,-w))<1&&(w--,C*=2),w+m>=1?h+=y/C:h+=y*n(2,1-m),h*C>=2&&(w++,C/=2),w+m>=g?(S=0,w=g):w+m>=1?(S=(h*C-1)*n(2,f),w=w+m):(S=h*n(2,m-1)*n(2,f),w=0));f>=8;p[b++]=S&255,S/=256,f-=8);for(w=w<<f|S,v+=f;v>0;p[b++]=w&255,w/=256,v-=8);return p[--b]|=_*128,p},c=function(h,f){var d=h.length,p=d*8-f-1,v=(1<<p)-1,g=v>>1,m=p-7,y=d-1,_=h[y--],b=_&127,w;for(_>>=7;m>0;b=b*256+h[y],y--,m-=8);for(w=b&(1<<-m)-1,b>>=-m,m+=f;m>0;w=w*256+h[y],y--,m-=8);if(b===0)b=1-g;else{if(b===v)return w?NaN:_?-r:r;w=w+n(2,f),b=b-g}return(_?-1:1)*w*n(2,b-f)};t.exports={pack:l,unpack:c}}),p0=T((e,t)=>{var r=ht(),i=Ut(),n=mT(),o=Yi(),s=Oh(),a=tt(),l=yl(),c=to(),h=Kt(),f=z$(),d=Nue(),p=xo(),v=Dc(),g=kc().f,m=ar().f,y=oT(),_=as(),b=Qi(),w=b.get,S=b.set,C="ArrayBuffer",D="DataView",E="prototype",I="Wrong length",M="Wrong index",k=r[C],R=k,$=r[D],H=$&&$[E],j=Object.prototype,V=r.RangeError,J=d.pack,ae=d.unpack,U=function(ye){return[ye&255]},N=function(ye){return[ye&255,ye>>8&255]},B=function(ye){return[ye&255,ye>>8&255,ye>>16&255,ye>>24&255]},W=function(ye){return ye[3]<<24|ye[2]<<16|ye[1]<<8|ye[0]},q=function(ye){return J(ye,23,4)},xe=function(ye){return J(ye,52,8)},Te=function(ye,he){m(ye[E],he,{get:function(){return w(this)[he]}})},Se=function(ye,he,De,Ze){var dt=f(De),Nt=w(ye);if(dt+he>Nt.byteLength)throw V(M);var gr=w(Nt.buffer).bytes,Xt=dt+Nt.byteOffset,ft=gr.slice(Xt,Xt+he);return Ze?ft:ft.reverse()},fe=function(ye,he,De,Ze,dt,Nt){var gr=f(De),Xt=w(ye);if(gr+he>Xt.byteLength)throw V(M);for(var ft=w(Xt.buffer).bytes,Fr=gr+Xt.byteOffset,ri=Ze(+dt),Cr=0;Cr<he;Cr++)ft[Fr+Cr]=ri[Nt?Cr:he-Cr-1]};if(!n)R=function(he){l(this,R,C);var De=f(he);S(this,{bytes:y.call(new Array(De),0),byteLength:De}),i||(this.byteLength=De)},$=function(he,De,Ze){l(this,$,D),l(he,R,D);var dt=w(he).byteLength,Nt=c(De);if(Nt<0||Nt>dt)throw V("Wrong offset");if(Ze=Ze===void 0?dt-Nt:h(Ze),Nt+Ze>dt)throw V(I);S(this,{buffer:he,byteLength:Ze,byteOffset:Nt}),i||(this.buffer=he,this.byteLength=Ze,this.byteOffset=Nt)},i&&(Te(R,"byteLength"),Te($,"buffer"),Te($,"byteLength"),Te($,"byteOffset")),s($[E],{getInt8:function(he){return Se(this,1,he)[0]<<24>>24},getUint8:function(he){return Se(this,1,he)[0]},getInt16:function(he){var De=Se(this,2,he,arguments.length>1?arguments[1]:void 0);return(De[1]<<8|De[0])<<16>>16},getUint16:function(he){var De=Se(this,2,he,arguments.length>1?arguments[1]:void 0);return De[1]<<8|De[0]},getInt32:function(he){return W(Se(this,4,he,arguments.length>1?arguments[1]:void 0))},getUint32:function(he){return W(Se(this,4,he,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(he){return ae(Se(this,4,he,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(he){return ae(Se(this,8,he,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(he,De){fe(this,1,he,U,De)},setUint8:function(he,De){fe(this,1,he,U,De)},setInt16:function(he,De){fe(this,2,he,N,De,arguments.length>2?arguments[2]:void 0)},setUint16:function(he,De){fe(this,2,he,N,De,arguments.length>2?arguments[2]:void 0)},setInt32:function(he,De){fe(this,4,he,B,De,arguments.length>2?arguments[2]:void 0)},setUint32:function(he,De){fe(this,4,he,B,De,arguments.length>2?arguments[2]:void 0)},setFloat32:function(he,De){fe(this,4,he,q,De,arguments.length>2?arguments[2]:void 0)},setFloat64:function(he,De){fe(this,8,he,xe,De,arguments.length>2?arguments[2]:void 0)}});else{if(!a(function(){k(1)})||!a(function(){new k(-1)})||a(function(){return new k,new k(1.5),new k(NaN),k.name!=C})){for(R=function(he){return l(this,R),new k(f(he))},te=R[E]=k[E],X=g(k),le=0;X.length>le;)(de=X[le++])in R||o(R,de,k[de]);te.constructor=R}v&&p(H)!==j&&v(H,j),Fe=new $(new R(2)),Ee=H.setInt8,Fe.setInt8(0,2147483648),Fe.setInt8(1,2147483649),(Fe.getInt8(0)||!Fe.getInt8(1))&&s(H,{setInt8:function(he,De){Ee.call(this,he,De<<24>>24)},setUint8:function(he,De){Ee.call(this,he,De<<24>>24)}},{unsafe:!0})}var te,X,le,de,Fe,Ee;_(R,C),_($,D),t.exports={ArrayBuffer:R,DataView:$}}),jue=T(()=>{var e=Y(),t=ht(),r=p0(),i=Rh(),n="ArrayBuffer",o=r[n],s=t[n];e({global:!0,forced:s!==o},{ArrayBuffer:o}),i(n)}),Zt=T((e,t)=>{var r=mT(),i=Ut(),n=ht(),o=Ot(),s=zr(),a=Qp(),l=Yi(),c=Bi(),h=ar().f,f=xo(),d=Dc(),p=Gt(),v=Wp(),g=n.Int8Array,m=g&&g.prototype,y=n.Uint8ClampedArray,_=y&&y.prototype,b=g&&f(g),w=m&&f(m),S=Object.prototype,C=S.isPrototypeOf,D=p("toStringTag"),E=v("TYPED_ARRAY_TAG"),I=r&&!!d&&a(n.opera)!=="Opera",M=!1,k,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},$=function(N){var B=a(N);return B==="DataView"||s(R,B)},H=function(U){return o(U)&&s(R,a(U))},j=function(U){if(H(U))return U;throw TypeError("Target is not a typed array")},V=function(U){if(d){if(C.call(b,U))return U}else for(var N in R)if(s(R,k)){var B=n[N];if(B&&(U===B||C.call(B,U)))return U}throw TypeError("Target is not a typed array constructor")},J=function(U,N,B){if(!!i){if(B)for(var W in R){var q=n[W];q&&s(q.prototype,U)&&delete q.prototype[U]}(!w[U]||B)&&c(w,U,B?N:I&&m[U]||N)}},ae=function(U,N,B){var W,q;if(!!i){if(d){if(B)for(W in R)q=n[W],q&&s(q,U)&&delete q[U];if(!b[U]||B)try{return c(b,U,B?N:I&&g[U]||N)}catch{}else return}for(W in R)q=n[W],q&&(!q[U]||B)&&c(q,U,N)}};for(k in R)n[k]||(I=!1);if((!I||typeof b!="function"||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},I))for(k in R)n[k]&&d(n[k],b);if((!I||!w||w===S)&&(w=b.prototype,I))for(k in R)n[k]&&d(n[k].prototype,w);if(I&&f(_)!==w&&d(_,w),i&&!s(w,D)){M=!0,h(w,D,{get:function(){return o(this)?this[E]:void 0}});for(k in R)n[k]&&l(n[k],E,k)}t.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:M&&E,aTypedArray:j,aTypedArrayConstructor:V,exportTypedArrayMethod:J,exportTypedArrayStaticMethod:ae,isView:$,isTypedArray:H,TypedArray:b,TypedArrayPrototype:w}}),Hue=T(()=>{var e=Y(),t=Zt(),r=t.NATIVE_ARRAY_BUFFER_VIEWS;e({target:"ArrayBuffer",stat:!0,forced:!r},{isView:t.isView})}),Wue=T(()=>{var e=Y(),t=tt(),r=p0(),i=$t(),n=gl(),o=Kt(),s=ea(),a=r.ArrayBuffer,l=r.DataView,c=a.prototype.slice,h=t(function(){return!new a(2).slice(1,void 0).byteLength});e({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:h},{slice:function(d,p){if(c!==void 0&&p===void 0)return c.call(i(this),d);for(var v=i(this).byteLength,g=n(d,v),m=n(p===void 0?v:p,v),y=new(s(this,a))(o(m-g)),_=new l(this),b=new l(y),w=0;g<m;)b.setUint8(w++,_.getUint8(g++));return y}})}),Vue=T(()=>{var e=Y(),t=p0(),r=mT();e({global:!0,forced:!r},{DataView:t.DataView})}),gT=T((e,t)=>{var r=ht(),i=tt(),n=e0(),o=Zt().NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,a=r.Int8Array;t.exports=!o||!i(function(){a(1)})||!i(function(){new a(-1)})||!n(function(l){new a,new a(null),new a(1.5),new a(l)},!0)||i(function(){return new a(new s(2),1,void 0).length!==1})}),Gue=T((e,t)=>{var r=to();t.exports=function(i){var n=r(i);if(n<0)throw RangeError("The argument can't be less than 0");return n}}),$$=T((e,t)=>{var r=Gue();t.exports=function(i,n){var o=r(i);if(o%n)throw RangeError("Wrong offset");return o}}),B$=T((e,t)=>{var r=Rr(),i=Kt(),n=Jp(),o=nT(),s=Zs(),a=Zt().aTypedArrayConstructor;t.exports=function(c){var h=r(c),f=arguments.length,d=f>1?arguments[1]:void 0,p=d!==void 0,v=n(h),g,m,y,_,b,w;if(v!=null&&!o(v))for(b=v.call(h),w=b.next,h=[];!(_=w.call(b)).done;)h.push(_.value);for(p&&f>2&&(d=s(d,arguments[2],2)),m=i(h.length),y=new(a(this))(m),g=0;m>g;g++)y[g]=p?d(h[g],g):h[g];return y}}),ta=T((e,t)=>{var r=Y(),i=ht(),n=Ut(),o=gT(),s=Zt(),a=p0(),l=yl(),c=ml(),h=Yi(),f=Kt(),d=z$(),p=$$(),v=_o(),g=zr(),m=Qp(),y=Ot(),_=Ks(),b=Dc(),w=kc().f,S=B$(),C=wi().forEach,D=Rh(),E=ar(),I=$i(),M=Qi(),k=h0(),R=M.get,$=M.set,H=E.f,j=I.f,V=Math.round,J=i.RangeError,ae=a.ArrayBuffer,U=a.DataView,N=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,W=s.TypedArray,q=s.TypedArrayPrototype,xe=s.aTypedArrayConstructor,Te=s.isTypedArray,Se="BYTES_PER_ELEMENT",fe="Wrong length",te=function(ye,he){for(var De=0,Ze=he.length,dt=new(xe(ye))(Ze);Ze>De;)dt[De]=he[De++];return dt},X=function(ye,he){H(ye,he,{get:function(){return R(this)[he]}})},le=function(ye){var he;return ye instanceof ae||(he=m(ye))=="ArrayBuffer"||he=="SharedArrayBuffer"},de=function(ye,he){return Te(ye)&&typeof he!="symbol"&&he in ye&&String(+he)==String(he)},Fe=function(he,De){return de(he,De=v(De,!0))?c(2,he[De]):j(he,De)},Ee=function(he,De,Ze){return de(he,De=v(De,!0))&&y(Ze)&&g(Ze,"value")&&!g(Ze,"get")&&!g(Ze,"set")&&!Ze.configurable&&(!g(Ze,"writable")||Ze.writable)&&(!g(Ze,"enumerable")||Ze.enumerable)?(he[De]=Ze.value,he):H(he,De,Ze)};n?(N||(I.f=Fe,E.f=Ee,X(q,"buffer"),X(q,"byteOffset"),X(q,"byteLength"),X(q,"length")),r({target:"Object",stat:!0,forced:!N},{getOwnPropertyDescriptor:Fe,defineProperty:Ee}),t.exports=function(ye,he,De){var Ze=ye.match(/\d+$/)[0]/8,dt=ye+(De?"Clamped":"")+"Array",Nt="get"+ye,gr="set"+ye,Xt=i[dt],ft=Xt,Fr=ft&&ft.prototype,ri={},Cr=function(be,Me){var je=R(be);return je.view[Nt](Me*Ze+je.byteOffset,!0)},Si=function(be,Me,je){var Ie=R(be);De&&(je=(je=V(je))<0?0:je>255?255:je&255),Ie.view[gr](Me*Ze+Ie.byteOffset,je,!0)},Ge=function(be,Me){H(be,Me,{get:function(){return Cr(this,Me)},set:function(je){return Si(this,Me,je)},enumerable:!0})};N?o&&(ft=he(function(be,Me,je,Ie){return l(be,ft,dt),k(function(){return y(Me)?le(Me)?Ie!==void 0?new Xt(Me,p(je,Ze),Ie):je!==void 0?new Xt(Me,p(je,Ze)):new Xt(Me):Te(Me)?te(ft,Me):S.call(ft,Me):new Xt(d(Me))}(),be,ft)}),b&&b(ft,W),C(w(Xt),function(be){be in ft||h(ft,be,Xt[be])}),ft.prototype=Fr):(ft=he(function(be,Me,je,Ie){l(be,ft,dt);var Oe=0,qe=0,Xe,Je,yt;if(!y(Me))yt=d(Me),Je=yt*Ze,Xe=new ae(Je);else if(le(Me)){Xe=Me,qe=p(je,Ze);var Mt=Me.byteLength;if(Ie===void 0){if(Mt%Ze||(Je=Mt-qe,Je<0))throw J(fe)}else if(Je=f(Ie)*Ze,Je+qe>Mt)throw J(fe);yt=Je/Ze}else return Te(Me)?te(ft,Me):S.call(ft,Me);for($(be,{buffer:Xe,byteOffset:qe,byteLength:Je,length:yt,view:new U(Xe)});Oe<yt;)Ge(be,Oe++)}),b&&b(ft,W),Fr=ft.prototype=_(q)),Fr.constructor!==ft&&h(Fr,"constructor",ft),B&&h(Fr,B,dt),ri[dt]=ft,r({global:!0,forced:ft!=Xt,sham:!N},ri),Se in ft||h(ft,Se,Ze),Se in Fr||h(Fr,Se,Ze),D(dt)}):t.exports=function(){}}),que=T(()=>{var e=ta();e("Int8",function(t){return function(i,n,o){return t(this,i,n,o)}})}),Xue=T(()=>{var e=ta();e("Uint8",function(t){return function(i,n,o){return t(this,i,n,o)}})}),Yue=T(()=>{var e=ta();e("Uint8",function(t){return function(i,n,o){return t(this,i,n,o)}},!0)}),Que=T(()=>{var e=ta();e("Int16",function(t){return function(i,n,o){return t(this,i,n,o)}})}),Kue=T(()=>{var e=ta();e("Uint16",function(t){return function(i,n,o){return t(this,i,n,o)}})}),Zue=T(()=>{var e=ta();e("Int32",function(t){return function(i,n,o){return t(this,i,n,o)}})}),Jue=T(()=>{var e=ta();e("Uint32",function(t){return function(i,n,o){return t(this,i,n,o)}})}),ehe=T(()=>{var e=ta();e("Float32",function(t){return function(i,n,o){return t(this,i,n,o)}})}),the=T(()=>{var e=ta();e("Float64",function(t){return function(i,n,o){return t(this,i,n,o)}})}),rhe=T(()=>{var e=gT(),t=Zt().exportTypedArrayStaticMethod,r=B$();t("from",r,e)}),ihe=T(()=>{var e=Zt(),t=gT(),r=e.aTypedArrayConstructor,i=e.exportTypedArrayStaticMethod;i("of",function(){for(var o=0,s=arguments.length,a=new(r(this))(s);s>o;)a[o]=arguments[o++];return a},t)}),nhe=T(()=>{var e=Zt(),t=v$(),r=e.aTypedArray,i=e.exportTypedArrayMethod;i("copyWithin",function(o,s){return t.call(r(this),o,s,arguments.length>2?arguments[2]:void 0)})}),ohe=T(()=>{var e=Zt(),t=wi().every,r=e.aTypedArray,i=e.exportTypedArrayMethod;i("every",function(o){return t(r(this),o,arguments.length>1?arguments[1]:void 0)})}),she=T(()=>{var e=Zt(),t=oT(),r=e.aTypedArray,i=e.exportTypedArrayMethod;i("fill",function(o){return t.apply(r(this),arguments)})}),ahe=T(()=>{var e=Zt(),t=wi().filter,r=ea(),i=e.aTypedArray,n=e.aTypedArrayConstructor,o=e.exportTypedArrayMethod;o("filter",function(a){for(var l=t(i(this),a,arguments.length>1?arguments[1]:void 0),c=r(this,this.constructor),h=0,f=l.length,d=new(n(c))(f);f>h;)d[h]=l[h++];return d})}),lhe=T(()=>{var e=Zt(),t=wi().find,r=e.aTypedArray,i=e.exportTypedArrayMethod;i("find",function(o){return t(r(this),o,arguments.length>1?arguments[1]:void 0)})}),che=T(()=>{var e=Zt(),t=wi().findIndex,r=e.aTypedArray,i=e.exportTypedArrayMethod;i("findIndex",function(o){return t(r(this),o,arguments.length>1?arguments[1]:void 0)})}),uhe=T(()=>{var e=Zt(),t=wi().forEach,r=e.aTypedArray,i=e.exportTypedArrayMethod;i("forEach",function(o){t(r(this),o,arguments.length>1?arguments[1]:void 0)})}),hhe=T(()=>{var e=Zt(),t=Gp().includes,r=e.aTypedArray,i=e.exportTypedArrayMethod;i("includes",function(o){return t(r(this),o,arguments.length>1?arguments[1]:void 0)})}),dhe=T(()=>{var e=Zt(),t=Gp().indexOf,r=e.aTypedArray,i=e.exportTypedArrayMethod;i("indexOf",function(o){return t(r(this),o,arguments.length>1?arguments[1]:void 0)})}),fhe=T(()=>{var e=ht(),t=Zt(),r=i0(),i=Gt(),n=i("iterator"),o=e.Uint8Array,s=r.values,a=r.keys,l=r.entries,c=t.aTypedArray,h=t.exportTypedArrayMethod,f=o&&o.prototype[n],d=!!f&&(f.name=="values"||f.name==null),p=function(){return s.call(c(this))};h("entries",function(){return l.call(c(this))}),h("keys",function(){return a.call(c(this))}),h("values",p,!d),h(n,p,!d)}),phe=T(()=>{var e=Zt(),t=e.aTypedArray,r=e.exportTypedArrayMethod,i=[].join;r("join",function(o){return i.apply(t(this),arguments)})}),mhe=T(()=>{var e=Zt(),t=x$(),r=e.aTypedArray,i=e.exportTypedArrayMethod;i("lastIndexOf",function(o){return t.apply(r(this),arguments)})}),ghe=T(()=>{var e=Zt(),t=wi().map,r=ea(),i=e.aTypedArray,n=e.aTypedArrayConstructor,o=e.exportTypedArrayMethod;o("map",function(a){return t(i(this),a,arguments.length>1?arguments[1]:void 0,function(l,c){return new(n(r(l,l.constructor)))(c)})})}),vhe=T(()=>{var e=Zt(),t=r0().left,r=e.aTypedArray,i=e.exportTypedArrayMethod;i("reduce",function(o){return t(r(this),o,arguments.length,arguments.length>1?arguments[1]:void 0)})}),yhe=T(()=>{var e=Zt(),t=r0().right,r=e.aTypedArray,i=e.exportTypedArrayMethod;i("reduceRight",function(o){return t(r(this),o,arguments.length,arguments.length>1?arguments[1]:void 0)})}),_he=T(()=>{var e=Zt(),t=e.aTypedArray,r=e.exportTypedArrayMethod,i=Math.floor;r("reverse",function(){for(var o=this,s=t(o).length,a=i(s/2),l=0,c;l<a;)c=o[l],o[l++]=o[--s],o[s]=c;return o})}),bhe=T(()=>{var e=Zt(),t=Kt(),r=$$(),i=Rr(),n=tt(),o=e.aTypedArray,s=e.exportTypedArrayMethod,a=n(function(){new Int8Array(1).set({})});s("set",function(c){o(this);var h=r(arguments.length>1?arguments[1]:void 0,1),f=this.length,d=i(c),p=t(d.length),v=0;if(p+h>f)throw RangeError("Wrong length");for(;v<p;)this[h+v]=d[v++]},a)}),xhe=T(()=>{var e=Zt(),t=ea(),r=tt(),i=e.aTypedArray,n=e.aTypedArrayConstructor,o=e.exportTypedArrayMethod,s=[].slice,a=r(function(){new Int8Array(1).slice()});o("slice",function(c,h){for(var f=s.call(i(this),c,h),d=t(this,this.constructor),p=0,v=f.length,g=new(n(d))(v);v>p;)g[p]=f[p++];return g},a)}),whe=T(()=>{var e=Zt(),t=wi().some,r=e.aTypedArray,i=e.exportTypedArrayMethod;i("some",function(o){return t(r(this),o,arguments.length>1?arguments[1]:void 0)})}),She=T(()=>{var e=Zt(),t=e.aTypedArray,r=e.exportTypedArrayMethod,i=[].sort;r("sort",function(o){return i.call(t(this),o)})}),Che=T(()=>{var e=Zt(),t=Kt(),r=gl(),i=ea(),n=e.aTypedArray,o=e.exportTypedArrayMethod;o("subarray",function(a,l){var c=n(this),h=c.length,f=r(a,h);return new(i(c,c.constructor))(c.buffer,c.byteOffset+f*c.BYTES_PER_ELEMENT,t((l===void 0?h:r(l,h))-f))})}),khe=T(()=>{var e=ht(),t=Zt(),r=tt(),i=e.Int8Array,n=t.aTypedArray,o=t.exportTypedArrayMethod,s=[].toLocaleString,a=[].slice,l=!!i&&r(function(){s.call(new i(1))}),c=r(function(){return[1,2].toLocaleString()!=new i([1,2]).toLocaleString()})||!r(function(){i.prototype.toLocaleString.call([1,2])});o("toLocaleString",function(){return s.apply(l?a.call(n(this)):n(this),arguments)},c)}),The=T(()=>{var e=Zt().exportTypedArrayMethod,t=tt(),r=ht(),i=r.Uint8Array,n=i&&i.prototype||{},o=[].toString,s=[].join;t(function(){o.call({})})&&(o=function(){return s.call(this)});var a=n.toString!=o;e("toString",o,a)}),Ehe=T(()=>{var e=Y(),t=eo(),r=hn(),i=$t(),n=tt(),o=t("Reflect","apply"),s=Function.apply,a=!n(function(){o(function(){})});e({target:"Reflect",stat:!0,forced:a},{apply:function(c,h,f){return r(c),i(f),o?o(c,h,f):s.call(c,h,f)}})}),Dhe=T(()=>{var e=Y(),t=eo(),r=hn(),i=$t(),n=Ot(),o=Ks(),s=g$(),a=tt(),l=t("Reflect","construct"),c=a(function(){function d(){}return!(l(function(){},[],d)instanceof d)}),h=!a(function(){l(function(){})}),f=c||h;e({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(p,v){r(p),i(v);var g=arguments.length<3?p:r(arguments[2]);if(h&&!c)return l(p,v,g);if(p==g){switch(v.length){case 0:return new p;case 1:return new p(v[0]);case 2:return new p(v[0],v[1]);case 3:return new p(v[0],v[1],v[2]);case 4:return new p(v[0],v[1],v[2],v[3])}var m=[null];return m.push.apply(m,v),new(s.apply(p,m))}var y=g.prototype,_=o(n(y)?y:Object.prototype),b=Function.apply.call(p,_,v);return n(b)?b:_}})}),Ihe=T(()=>{var e=Y(),t=Ut(),r=$t(),i=_o(),n=ar(),o=tt(),s=o(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})});e({target:"Reflect",stat:!0,forced:s,sham:!t},{defineProperty:function(l,c,h){r(l);var f=i(c,!0);r(h);try{return n.f(l,f,h),!0}catch{return!1}}})}),Rhe=T(()=>{var e=Y(),t=$t(),r=$i().f;e({target:"Reflect",stat:!0},{deleteProperty:function(n,o){var s=r(t(n),o);return s&&!s.configurable?!1:delete n[o]}})}),Fhe=T(()=>{var e=Y(),t=Ot(),r=$t(),i=zr(),n=$i(),o=xo();function s(a,l){var c=arguments.length<3?a:arguments[2],h,f;if(r(a)===c)return a[l];if(h=n.f(a,l))return i(h,"value")?h.value:h.get===void 0?void 0:h.get.call(c);if(t(f=o(a)))return s(f,l,c)}e({target:"Reflect",stat:!0},{get:s})}),Ohe=T(()=>{var e=Y(),t=Ut(),r=$t(),i=$i();e({target:"Reflect",stat:!0,sham:!t},{getOwnPropertyDescriptor:function(o,s){return i.f(r(o),s)}})}),Mhe=T(()=>{var e=Y(),t=$t(),r=xo(),i=eT();e({target:"Reflect",stat:!0,sham:!i},{getPrototypeOf:function(o){return r(t(o))}})}),Phe=T(()=>{var e=Y();e({target:"Reflect",stat:!0},{has:function(r,i){return i in r}})}),Ahe=T(()=>{var e=Y(),t=$t(),r=Object.isExtensible;e({target:"Reflect",stat:!0},{isExtensible:function(n){return t(n),r?r(n):!0}})}),zhe=T(()=>{var e=Y(),t=Yk();e({target:"Reflect",stat:!0},{ownKeys:t})}),$he=T(()=>{var e=Y(),t=eo(),r=$t(),i=em();e({target:"Reflect",stat:!0,sham:!i},{preventExtensions:function(o){r(o);try{var s=t("Object","preventExtensions");return s&&s(o),!0}catch{return!1}}})}),Bhe=T(()=>{var e=Y(),t=$t(),r=Ot(),i=zr(),n=tt(),o=ar(),s=$i(),a=xo(),l=ml();function c(f,d,p){var v=arguments.length<4?f:arguments[3],g=s.f(t(f),d),m,y;if(!g){if(r(y=a(f)))return c(y,d,p,v);g=l(0)}if(i(g,"value")){if(g.writable===!1||!r(v))return!1;if(m=s.f(v,d)){if(m.get||m.set||m.writable===!1)return!1;m.value=p,o.f(v,d,m)}else o.f(v,d,l(0,p));return!0}return g.set===void 0?!1:(g.set.call(v,p),!0)}var h=n(function(){var f=o.f({},"a",{configurable:!0});return Reflect.set(a(f),"a",1,f)!==!1});e({target:"Reflect",stat:!0,forced:h},{set:c})}),Lhe=T(()=>{var e=Y(),t=$t(),r=c$(),i=Dc();i&&e({target:"Reflect",stat:!0},{setPrototypeOf:function(o,s){t(o),r(s);try{return i(o,s),!0}catch{return!1}}})}),Uhe=T((e,t)=>{V6(),G6(),q6(),X6(),Y6(),Q6(),K6(),Z6(),J6(),e$(),t$(),r$(),i$(),n$(),o$(),fle(),ple(),mle(),gle(),vle(),yle(),_le(),ble(),xle(),wle(),Sle(),Cle(),kle(),Tle(),Ele(),Dle(),Ile(),Rle(),Fle(),Ole(),N6(),Mle(),Ple(),Ale(),zle(),$le(),Ble(),Lle(),Ule(),d$(),Nle(),jle(),U6(),Hle(),Wle(),Vle(),Gle(),y$(),qle(),Xle(),Yle(),Qle(),Kle(),Zle(),Jle(),ece(),w$(),tce(),rce(),ice(),nce(),oce(),sce(),ace(),lce(),cce(),uce(),i0(),hce(),dce(),fce(),pce(),mce(),gce(),vce(),yce(),_ce(),bce(),xce(),wce(),Sce(),Cce(),kce(),Tce(),Ece(),iT(),Dce(),Ice(),Rce(),Fce(),Oce(),Mce(),Pce(),Ace(),zce(),$ce(),Bce(),Lce(),Uce(),Nce(),lT(),jce(),Hce(),Wce(),Vce(),Gce(),qce(),Xce(),Yce(),Kce(),Zce(),Jce(),eue(),tue(),rue(),iue(),nue(),oue(),sue(),aue(),lue(),cue(),uue(),hue(),due(),fue(),mue(),gue(),vue(),yue(),_ue(),bue(),xue(),wue(),Sue(),s$(),Cue(),kue(),Tue(),Due(),Iue(),Fue(),Oue(),a$(),Pue(),Aue(),zue(),$ue(),Bue(),Lue(),Uue(),jue(),Hue(),Wue(),Vue(),que(),Xue(),Yue(),Que(),Kue(),Zue(),Jue(),ehe(),the(),rhe(),ihe(),nhe(),ohe(),she(),ahe(),lhe(),che(),uhe(),hhe(),dhe(),fhe(),phe(),mhe(),ghe(),vhe(),yhe(),_he(),bhe(),xhe(),whe(),She(),Che(),khe(),The(),Ehe(),Dhe(),Ihe(),Rhe(),Fhe(),Ohe(),Mhe(),Phe(),Ahe(),zhe(),$he(),Bhe(),Lhe();var r=Cc();t.exports=r}),L$=T((e,t)=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),Nhe=T(()=>{var e=ht(),t=L$(),r=b$(),i=Yi();for(s in t)if(n=e[s],o=n&&n.prototype,o&&o.forEach!==r)try{i(o,"forEach",r)}catch{o.forEach=r}var n,o,s}),jhe=T(()=>{var e=ht(),t=L$(),r=i0(),i=Yi(),n=Gt(),o=n("iterator"),s=n("toStringTag"),a=r.values;for(f in t)if(l=e[f],c=l&&l.prototype,c){if(c[o]!==a)try{i(c,o,a)}catch{c[o]=a}if(c[s]||i(c,s,f),t[f]){for(h in r)if(c[h]!==r[h])try{i(c,h,r[h])}catch{c[h]=r[h]}}}var l,c,h,f}),Hhe=T(()=>{var e=Y(),t=ht(),r=fT(),i=!t.setImmediate||!t.clearImmediate;e({global:!0,bind:!0,enumerable:!0,forced:i},{setImmediate:r.set,clearImmediate:r.clear})}),Whe=T(()=>{var e=Y(),t=ht(),r=F$(),i=Jn(),n=t.process,o=i(n)=="process";e({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(a){var l=o&&n.domain;r(l?l.bind(a):a)}})}),Vhe=T(()=>{var e=Y(),t=ht(),r=Z_(),i=[].slice,n=/MSIE .\./.test(r),o=function(s){return function(a,l){var c=arguments.length>2,h=c?i.call(arguments,2):void 0;return s(c?function(){(typeof a=="function"?a:Function(a)).apply(this,h)}:a,l)}};e({global:!0,bind:!0,forced:n},{setTimeout:o(t.setTimeout),setInterval:o(t.setInterval)})}),U$=T((e,t)=>{var r=tt(),i=Gt(),n=bo(),o=i("iterator");t.exports=!r(function(){var s=new URL("b?a=1&b=2&c=3","http://a"),a=s.searchParams,l="";return s.pathname="c%20d",a.forEach(function(c,h){a.delete("b"),l+=h+c}),n&&!s.toJSON||!a.sort||s.href!=="http://a/c%20d?a=1&c=3"||a.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!a[o]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||l!=="a1c3"||new URL("http://x",void 0).host!=="x"})}),Ghe=T((e,t)=>{var r=2147483647,i=36,n=1,o=26,s=38,a=700,l=72,c=128,h="-",f=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",v=i-n,g=Math.floor,m=String.fromCharCode,y=function(S){for(var C=[],D=0,E=S.length;D<E;){var I=S.charCodeAt(D++);if(I>=55296&&I<=56319&&D<E){var M=S.charCodeAt(D++);(M&64512)==56320?C.push(((I&1023)<<10)+(M&1023)+65536):(C.push(I),D--)}else C.push(I)}return C},_=function(S){return S+22+75*(S<26)},b=function(S,C,D){var E=0;for(S=D?g(S/a):S>>1,S+=g(S/C);S>v*o>>1;E+=i)S=g(S/v);return g(E+(v+1)*S/(S+s))},w=function(S){var C=[];S=y(S);var D=S.length,E=c,I=0,M=l,k,R;for(k=0;k<S.length;k++)R=S[k],R<128&&C.push(m(R));var $=C.length,H=$;for($&&C.push(h);H<D;){var j=r;for(k=0;k<S.length;k++)R=S[k],R>=E&&R<j&&(j=R);var V=H+1;if(j-E>g((r-I)/V))throw RangeError(p);for(I+=(j-E)*V,E=j,k=0;k<S.length;k++){if(R=S[k],R<E&&++I>r)throw RangeError(p);if(R==E){for(var J=I,ae=i;;ae+=i){var U=ae<=M?n:ae>=M+o?o:ae-M;if(J<U)break;var N=J-U,B=i-U;C.push(m(_(U+N%B))),J=g(N/B)}C.push(m(_(J))),M=b(I,V,H==$),I=0,++H}}++I,++E}return C.join("")};t.exports=function(S){var C=[],D=S.toLowerCase().replace(d,".").split("."),E,I;for(E=0;E<D.length;E++)I=D[E],C.push(f.test(I)?"xn--"+w(I):I);return C.join(".")}}),qhe=T((e,t)=>{var r=$t(),i=Jp();t.exports=function(n){var o=i(n);if(typeof o!="function")throw TypeError(String(n)+" is not iterable");return r(o.call(n))}}),N$=T((e,t)=>{i0();var r=Y(),i=eo(),n=U$(),o=Bi(),s=Oh(),a=as(),l=tT(),c=Qi(),h=yl(),f=zr(),d=Zs(),p=Qp(),v=$t(),g=Ot(),m=Ks(),y=ml(),_=qhe(),b=Jp(),w=Gt(),S=i("fetch"),C=i("Headers"),D=w("iterator"),E="URLSearchParams",I=E+"Iterator",M=c.set,k=c.getterFor(E),R=c.getterFor(I),$=/\+/g,H=Array(4),j=function(te){return H[te-1]||(H[te-1]=RegExp("((?:%[\\da-f]{2}){"+te+"})","gi"))},V=function(te){try{return decodeURIComponent(te)}catch{return te}},J=function(te){var X=te.replace($," "),le=4;try{return decodeURIComponent(X)}catch{for(;le;)X=X.replace(j(le--),V);return X}},ae=/[!'()~]|%20/g,U={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},N=function(te){return U[te]},B=function(te){return encodeURIComponent(te).replace(ae,N)},W=function(te,X){if(X)for(var le=X.split("&"),de=0,Fe,Ee;de<le.length;)Fe=le[de++],Fe.length&&(Ee=Fe.split("="),te.push({key:J(Ee.shift()),value:J(Ee.join("="))}))},q=function(te){this.entries.length=0,W(this.entries,te)},xe=function(te,X){if(te<X)throw TypeError("Not enough arguments")},Te=l(function(X,le){M(this,{type:I,iterator:_(k(X).entries),kind:le})},"Iterator",function(){var X=R(this),le=X.kind,de=X.iterator.next(),Fe=de.value;return de.done||(de.value=le==="keys"?Fe.key:le==="values"?Fe.value:[Fe.key,Fe.value]),de}),Se=function(){h(this,Se,E);var X=arguments.length>0?arguments[0]:void 0,le=this,de=[],Fe,Ee,ye,he,De,Ze,dt,Nt,gr;if(M(le,{type:E,entries:de,updateURL:function(){},updateSearchParams:q}),X!==void 0)if(g(X))if(Fe=b(X),typeof Fe=="function")for(Ee=Fe.call(X),ye=Ee.next;!(he=ye.call(Ee)).done;){if(De=_(v(he.value)),Ze=De.next,(dt=Ze.call(De)).done||(Nt=Ze.call(De)).done||!Ze.call(De).done)throw TypeError("Expected sequence with length 2");de.push({key:dt.value+"",value:Nt.value+""})}else for(gr in X)f(X,gr)&&de.push({key:gr,value:X[gr]+""});else W(de,typeof X=="string"?X.charAt(0)==="?"?X.slice(1):X:X+"")},fe=Se.prototype;s(fe,{append:function(X,le){xe(arguments.length,2);var de=k(this);de.entries.push({key:X+"",value:le+""}),de.updateURL()},delete:function(te){xe(arguments.length,1);for(var X=k(this),le=X.entries,de=te+"",Fe=0;Fe<le.length;)le[Fe].key===de?le.splice(Fe,1):Fe++;X.updateURL()},get:function(X){xe(arguments.length,1);for(var le=k(this).entries,de=X+"",Fe=0;Fe<le.length;Fe++)if(le[Fe].key===de)return le[Fe].value;return null},getAll:function(X){xe(arguments.length,1);for(var le=k(this).entries,de=X+"",Fe=[],Ee=0;Ee<le.length;Ee++)le[Ee].key===de&&Fe.push(le[Ee].value);return Fe},has:function(X){xe(arguments.length,1);for(var le=k(this).entries,de=X+"",Fe=0;Fe<le.length;)if(le[Fe++].key===de)return!0;return!1},set:function(X,le){xe(arguments.length,1);for(var de=k(this),Fe=de.entries,Ee=!1,ye=X+"",he=le+"",De=0,Ze;De<Fe.length;De++)Ze=Fe[De],Ze.key===ye&&(Ee?Fe.splice(De--,1):(Ee=!0,Ze.value=he));Ee||Fe.push({key:ye,value:he}),de.updateURL()},sort:function(){var X=k(this),le=X.entries,de=le.slice(),Fe,Ee,ye;for(le.length=0,ye=0;ye<de.length;ye++){for(Fe=de[ye],Ee=0;Ee<ye;Ee++)if(le[Ee].key>Fe.key){le.splice(Ee,0,Fe);break}Ee===ye&&le.push(Fe)}X.updateURL()},forEach:function(X){for(var le=k(this).entries,de=d(X,arguments.length>1?arguments[1]:void 0,3),Fe=0,Ee;Fe<le.length;)Ee=le[Fe++],de(Ee.value,Ee.key,this)},keys:function(){return new Te(this,"keys")},values:function(){return new Te(this,"values")},entries:function(){return new Te(this,"entries")}},{enumerable:!0}),o(fe,D,fe.entries),o(fe,"toString",function(){for(var X=k(this).entries,le=[],de=0,Fe;de<X.length;)Fe=X[de++],le.push(B(Fe.key)+"="+B(Fe.value));return le.join("&")},{enumerable:!0}),a(Se,E),r({global:!0,forced:!n},{URLSearchParams:Se}),!n&&typeof S=="function"&&typeof C=="function"&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(X){var le=[X],de,Fe,Ee;return arguments.length>1&&(de=arguments[1],g(de)&&(Fe=de.body,p(Fe)===E&&(Ee=de.headers?new C(de.headers):new C,Ee.has("content-type")||Ee.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),de=m(de,{body:y(0,String(Fe)),headers:y(0,Ee)}))),le.push(de)),S.apply(this,le)}}),t.exports={URLSearchParams:Se,getState:k}}),Xhe=T(()=>{iT();var e=Y(),t=Ut(),r=U$(),i=ht(),n=Jk(),o=Bi(),s=yl(),a=zr(),l=f$(),c=h$(),h=J_().codeAt,f=Ghe(),d=as(),p=N$(),v=Qi(),g=i.URL,m=p.URLSearchParams,y=p.getState,_=v.set,b=v.getterFor("URL"),w=Math.floor,S=Math.pow,C="Invalid authority",D="Invalid scheme",E="Invalid host",I="Invalid port",M=/[A-Za-z]/,k=/[\d+-.A-Za-z]/,R=/\d/,$=/^(0x|0X)/,H=/^[0-7]+$/,j=/^\d+$/,V=/^[\dA-Fa-f]+$/,J=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ae=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,U=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,N=/[\u0009\u000A\u000D]/g,B,W=function(A,ie){var re,pe,ve;if(ie.charAt(0)=="["){if(ie.charAt(ie.length-1)!="]"||(re=xe(ie.slice(1,-1)),!re))return E;A.host=re}else if(Ee(A)){if(ie=f(ie),J.test(ie)||(re=q(ie),re===null))return E;A.host=re}else{if(ae.test(ie))return E;for(re="",pe=c(ie),ve=0;ve<pe.length;ve++)re+=de(pe[ve],fe);A.host=re}},q=function(A){var ie=A.split("."),re,pe,ve,ut,He,Pt,We;if(ie.length&&ie[ie.length-1]==""&&ie.pop(),re=ie.length,re>4)return A;for(pe=[],ve=0;ve<re;ve++){if(ut=ie[ve],ut=="")return A;if(He=10,ut.length>1&&ut.charAt(0)=="0"&&(He=$.test(ut)?16:8,ut=ut.slice(He==8?1:2)),ut==="")Pt=0;else{if(!(He==10?j:He==8?H:V).test(ut))return A;Pt=parseInt(ut,He)}pe.push(Pt)}for(ve=0;ve<re;ve++)if(Pt=pe[ve],ve==re-1){if(Pt>=S(256,5-re))return null}else if(Pt>255)return null;for(We=pe.pop(),ve=0;ve<pe.length;ve++)We+=pe[ve]*S(256,3-ve);return We},xe=function(A){var ie=[0,0,0,0,0,0,0,0],re=0,pe=null,ve=0,ut,He,Pt,We,ze,Be,Z,we=function(){return A.charAt(ve)};if(we()==":"){if(A.charAt(1)!=":")return;ve+=2,re++,pe=re}for(;we();){if(re==8)return;if(we()==":"){if(pe!==null)return;ve++,re++,pe=re;continue}for(ut=He=0;He<4&&V.test(we());)ut=ut*16+parseInt(we(),16),ve++,He++;if(we()=="."){if(He==0||(ve-=He,re>6))return;for(Pt=0;we();){if(We=null,Pt>0)if(we()=="."&&Pt<4)ve++;else return;if(!R.test(we()))return;for(;R.test(we());){if(ze=parseInt(we(),10),We===null)We=ze;else{if(We==0)return;We=We*10+ze}if(We>255)return;ve++}ie[re]=ie[re]*256+We,Pt++,(Pt==2||Pt==4)&&re++}if(Pt!=4)return;break}else if(we()==":"){if(ve++,!we())return}else if(we())return;ie[re++]=ut}if(pe!==null)for(Be=re-pe,re=7;re!=0&&Be>0;)Z=ie[re],ie[re--]=ie[pe+Be-1],ie[pe+--Be]=Z;else if(re!=8)return;return ie},Te=function(A){for(var ie=null,re=1,pe=null,ve=0,ut=0;ut<8;ut++)A[ut]!==0?(ve>re&&(ie=pe,re=ve),pe=null,ve=0):(pe===null&&(pe=ut),++ve);return ve>re&&(ie=pe,re=ve),ie},Se=function(A){var ie,re,pe,ve;if(typeof A=="number"){for(ie=[],re=0;re<4;re++)ie.unshift(A%256),A=w(A/256);return ie.join(".")}else if(typeof A=="object"){for(ie="",pe=Te(A),re=0;re<8;re++)ve&&A[re]===0||(ve&&(ve=!1),pe===re?(ie+=re?":":"::",ve=!0):(ie+=A[re].toString(16),re<7&&(ie+=":")));return"["+ie+"]"}return A},fe={},te=l({},fe,{" ":1,'"':1,"<":1,">":1,"`":1}),X=l({},te,{"#":1,"?":1,"{":1,"}":1}),le=l({},X,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),de=function(A,ie){var re=h(A,0);return re>32&&re<127&&!a(ie,A)?A:encodeURIComponent(A)},Fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ee=function(A){return a(Fe,A.scheme)},ye=function(A){return A.username!=""||A.password!=""},he=function(A){return!A.host||A.cannotBeABaseURL||A.scheme=="file"},De=function(A,ie){var re;return A.length==2&&M.test(A.charAt(0))&&((re=A.charAt(1))==":"||!ie&&re=="|")},Ze=function(A){var ie;return A.length>1&&De(A.slice(0,2))&&(A.length==2||(ie=A.charAt(2))==="/"||ie==="\\"||ie==="?"||ie==="#")},dt=function(A){var ie=A.path,re=ie.length;re&&(A.scheme!="file"||re!=1||!De(ie[0],!0))&&ie.pop()},Nt=function(A){return A==="."||A.toLowerCase()==="%2e"},gr=function(A){return A=A.toLowerCase(),A===".."||A==="%2e."||A===".%2e"||A==="%2e%2e"},Xt={},ft={},Fr={},ri={},Cr={},Si={},Ge={},be={},Me={},je={},Ie={},Oe={},qe={},Xe={},Je={},yt={},Mt={},Bt={},Wr={},Li={},Ci={},Ui=function(A,ie,re,pe){var ve=re||Xt,ut=0,He="",Pt=!1,We=!1,ze=!1,Be,Z,we,mt;for(re||(A.scheme="",A.username="",A.password="",A.host=null,A.port=null,A.path=[],A.query=null,A.fragment=null,A.cannotBeABaseURL=!1,ie=ie.replace(U,"")),ie=ie.replace(N,""),Be=c(ie);ut<=Be.length;){switch(Z=Be[ut],ve){case Xt:if(Z&&M.test(Z))He+=Z.toLowerCase(),ve=ft;else{if(re)return D;ve=Fr;continue}break;case ft:if(Z&&(k.test(Z)||Z=="+"||Z=="-"||Z=="."))He+=Z.toLowerCase();else if(Z==":"){if(re&&(Ee(A)!=a(Fe,He)||He=="file"&&(ye(A)||A.port!==null)||A.scheme=="file"&&!A.host))return;if(A.scheme=He,re){Ee(A)&&Fe[A.scheme]==A.port&&(A.port=null);return}He="",A.scheme=="file"?ve=Xe:Ee(A)&&pe&&pe.scheme==A.scheme?ve=ri:Ee(A)?ve=be:Be[ut+1]=="/"?(ve=Cr,ut++):(A.cannotBeABaseURL=!0,A.path.push(""),ve=Wr)}else{if(re)return D;He="",ve=Fr,ut=0;continue}break;case Fr:if(!pe||pe.cannotBeABaseURL&&Z!="#")return D;if(pe.cannotBeABaseURL&&Z=="#"){A.scheme=pe.scheme,A.path=pe.path.slice(),A.query=pe.query,A.fragment="",A.cannotBeABaseURL=!0,ve=Ci;break}ve=pe.scheme=="file"?Xe:Si;continue;case ri:if(Z=="/"&&Be[ut+1]=="/")ve=Me,ut++;else{ve=Si;continue}break;case Cr:if(Z=="/"){ve=je;break}else{ve=Bt;continue}case Si:if(A.scheme=pe.scheme,Z==B)A.username=pe.username,A.password=pe.password,A.host=pe.host,A.port=pe.port,A.path=pe.path.slice(),A.query=pe.query;else if(Z=="/"||Z=="\\"&&Ee(A))ve=Ge;else if(Z=="?")A.username=pe.username,A.password=pe.password,A.host=pe.host,A.port=pe.port,A.path=pe.path.slice(),A.query="",ve=Li;else if(Z=="#")A.username=pe.username,A.password=pe.password,A.host=pe.host,A.port=pe.port,A.path=pe.path.slice(),A.query=pe.query,A.fragment="",ve=Ci;else{A.username=pe.username,A.password=pe.password,A.host=pe.host,A.port=pe.port,A.path=pe.path.slice(),A.path.pop(),ve=Bt;continue}break;case Ge:if(Ee(A)&&(Z=="/"||Z=="\\"))ve=Me;else if(Z=="/")ve=je;else{A.username=pe.username,A.password=pe.password,A.host=pe.host,A.port=pe.port,ve=Bt;continue}break;case be:if(ve=Me,Z!="/"||He.charAt(ut+1)!="/")continue;ut++;break;case Me:if(Z!="/"&&Z!="\\"){ve=je;continue}break;case je:if(Z=="@"){Pt&&(He="%40"+He),Pt=!0,we=c(He);for(var ee=0;ee<we.length;ee++){var St=we[ee];if(St==":"&&!ze){ze=!0;continue}var _t=de(St,le);ze?A.password+=_t:A.username+=_t}He=""}else if(Z==B||Z=="/"||Z=="?"||Z=="#"||Z=="\\"&&Ee(A)){if(Pt&&He=="")return C;ut-=c(He).length+1,He="",ve=Ie}else He+=Z;break;case Ie:case Oe:if(re&&A.scheme=="file"){ve=yt;continue}else if(Z==":"&&!We){if(He=="")return E;if(mt=W(A,He),mt)return mt;if(He="",ve=qe,re==Oe)return}else if(Z==B||Z=="/"||Z=="?"||Z=="#"||Z=="\\"&&Ee(A)){if(Ee(A)&&He=="")return E;if(re&&He==""&&(ye(A)||A.port!==null))return;if(mt=W(A,He),mt)return mt;if(He="",ve=Mt,re)return;continue}else Z=="["?We=!0:Z=="]"&&(We=!1),He+=Z;break;case qe:if(R.test(Z))He+=Z;else if(Z==B||Z=="/"||Z=="?"||Z=="#"||Z=="\\"&&Ee(A)||re){if(He!=""){var kr=parseInt(He,10);if(kr>65535)return I;A.port=Ee(A)&&kr===Fe[A.scheme]?null:kr,He=""}if(re)return;ve=Mt;continue}else return I;break;case Xe:if(A.scheme="file",Z=="/"||Z=="\\")ve=Je;else if(pe&&pe.scheme=="file")if(Z==B)A.host=pe.host,A.path=pe.path.slice(),A.query=pe.query;else if(Z=="?")A.host=pe.host,A.path=pe.path.slice(),A.query="",ve=Li;else if(Z=="#")A.host=pe.host,A.path=pe.path.slice(),A.query=pe.query,A.fragment="",ve=Ci;else{Ze(Be.slice(ut).join(""))||(A.host=pe.host,A.path=pe.path.slice(),dt(A)),ve=Bt;continue}else{ve=Bt;continue}break;case Je:if(Z=="/"||Z=="\\"){ve=yt;break}pe&&pe.scheme=="file"&&!Ze(Be.slice(ut).join(""))&&(De(pe.path[0],!0)?A.path.push(pe.path[0]):A.host=pe.host),ve=Bt;continue;case yt:if(Z==B||Z=="/"||Z=="\\"||Z=="?"||Z=="#"){if(!re&&De(He))ve=Bt;else if(He==""){if(A.host="",re)return;ve=Mt}else{if(mt=W(A,He),mt)return mt;if(A.host=="localhost"&&(A.host=""),re)return;He="",ve=Mt}continue}else He+=Z;break;case Mt:if(Ee(A)){if(ve=Bt,Z!="/"&&Z!="\\")continue}else if(!re&&Z=="?")A.query="",ve=Li;else if(!re&&Z=="#")A.fragment="",ve=Ci;else if(Z!=B&&(ve=Bt,Z!="/"))continue;break;case Bt:if(Z==B||Z=="/"||Z=="\\"&&Ee(A)||!re&&(Z=="?"||Z=="#")){if(gr(He)?(dt(A),Z!="/"&&!(Z=="\\"&&Ee(A))&&A.path.push("")):Nt(He)?Z!="/"&&!(Z=="\\"&&Ee(A))&&A.path.push(""):(A.scheme=="file"&&!A.path.length&&De(He)&&(A.host&&(A.host=""),He=He.charAt(0)+":"),A.path.push(He)),He="",A.scheme=="file"&&(Z==B||Z=="?"||Z=="#"))for(;A.path.length>1&&A.path[0]==="";)A.path.shift();Z=="?"?(A.query="",ve=Li):Z=="#"&&(A.fragment="",ve=Ci)}else He+=de(Z,X);break;case Wr:Z=="?"?(A.query="",ve=Li):Z=="#"?(A.fragment="",ve=Ci):Z!=B&&(A.path[0]+=de(Z,fe));break;case Li:!re&&Z=="#"?(A.fragment="",ve=Ci):Z!=B&&(Z=="'"&&Ee(A)?A.query+="%27":Z=="#"?A.query+="%23":A.query+=de(Z,fe));break;case Ci:Z!=B&&(A.fragment+=de(Z,te));break}ut++}},Co=function(ie){var re=s(this,Co,"URL"),pe=arguments.length>1?arguments[1]:void 0,ve=String(ie),ut=_(re,{type:"URL"}),He,Pt;if(pe!==void 0){if(pe instanceof Co)He=b(pe);else if(Pt=Ui(He={},String(pe)),Pt)throw TypeError(Pt)}if(Pt=Ui(ut,ve,null,He),Pt)throw TypeError(Pt);var We=ut.searchParams=new m,ze=y(We);ze.updateSearchParams(ut.query),ze.updateURL=function(){ut.query=String(We)||null},t||(re.href=fn.call(re),re.origin=Bh.call(re),re.protocol=S0.call(re),re.username=C0.call(re),re.password=k0.call(re),re.host=T0.call(re),re.hostname=E0.call(re),re.port=D0.call(re),re.pathname=cm.call(re),re.search=xl.call(re),re.searchParams=Mc.call(re),re.hash=ko.call(re))},Oc=Co.prototype,fn=function(){var A=b(this),ie=A.scheme,re=A.username,pe=A.password,ve=A.host,ut=A.port,He=A.path,Pt=A.query,We=A.fragment,ze=ie+":";return ve!==null?(ze+="//",ye(A)&&(ze+=re+(pe?":"+pe:"")+"@"),ze+=Se(ve),ut!==null&&(ze+=":"+ut)):ie=="file"&&(ze+="//"),ze+=A.cannotBeABaseURL?He[0]:He.length?"/"+He.join("/"):"",Pt!==null&&(ze+="?"+Pt),We!==null&&(ze+="#"+We),ze},Bh=function(){var A=b(this),ie=A.scheme,re=A.port;if(ie=="blob")try{return new URL(ie.path[0]).origin}catch{return"null"}return ie=="file"||!Ee(A)?"null":ie+"://"+Se(A.host)+(re!==null?":"+re:"")},S0=function(){return b(this).scheme+":"},C0=function(){return b(this).username},k0=function(){return b(this).password},T0=function(){var A=b(this),ie=A.host,re=A.port;return ie===null?"":re===null?Se(ie):Se(ie)+":"+re},E0=function(){var A=b(this).host;return A===null?"":Se(A)},D0=function(){var A=b(this).port;return A===null?"":String(A)},cm=function(){var A=b(this),ie=A.path;return A.cannotBeABaseURL?ie[0]:ie.length?"/"+ie.join("/"):""},xl=function(){var A=b(this).query;return A?"?"+A:""},Mc=function(){return b(this).searchParams},ko=function(){var A=b(this).fragment;return A?"#"+A:""},fi=function(A,ie){return{get:A,set:ie,configurable:!0,enumerable:!0}};t&&n(Oc,{href:fi(fn,function(A){var ie=b(this),re=String(A),pe=Ui(ie,re);if(pe)throw TypeError(pe);y(ie.searchParams).updateSearchParams(ie.query)}),origin:fi(Bh),protocol:fi(S0,function(A){var ie=b(this);Ui(ie,String(A)+":",Xt)}),username:fi(C0,function(A){var ie=b(this),re=c(String(A));if(!he(ie)){ie.username="";for(var pe=0;pe<re.length;pe++)ie.username+=de(re[pe],le)}}),password:fi(k0,function(A){var ie=b(this),re=c(String(A));if(!he(ie)){ie.password="";for(var pe=0;pe<re.length;pe++)ie.password+=de(re[pe],le)}}),host:fi(T0,function(A){var ie=b(this);ie.cannotBeABaseURL||Ui(ie,String(A),Ie)}),hostname:fi(E0,function(A){var ie=b(this);ie.cannotBeABaseURL||Ui(ie,String(A),Oe)}),port:fi(D0,function(A){var ie=b(this);he(ie)||(A=String(A),A==""?ie.port=null:Ui(ie,A,qe))}),pathname:fi(cm,function(A){var ie=b(this);ie.cannotBeABaseURL||(ie.path=[],Ui(ie,A+"",Mt))}),search:fi(xl,function(A){var ie=b(this);A=String(A),A==""?ie.query=null:(A.charAt(0)=="?"&&(A=A.slice(1)),ie.query="",Ui(ie,A,Li)),y(ie.searchParams).updateSearchParams(ie.query)}),searchParams:fi(Mc),hash:fi(ko,function(A){var ie=b(this);if(A=String(A),A==""){ie.fragment=null;return}A.charAt(0)=="#"&&(A=A.slice(1)),ie.fragment="",Ui(ie,A,Ci)})}),o(Oc,"toJSON",function(){return fn.call(this)},{enumerable:!0}),o(Oc,"toString",function(){return fn.call(this)},{enumerable:!0}),g&&(Pc=g.createObjectURL,Lh=g.revokeObjectURL,Pc&&o(Co,"createObjectURL",function(ie){return Pc.apply(g,arguments)}),Lh&&o(Co,"revokeObjectURL",function(ie){return Lh.apply(g,arguments)}));var Pc,Lh;d(Co,"URL"),e({global:!0,forced:!r,sham:!t},{URL:Co})}),Yhe=T(()=>{var e=Y();e({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})}),Qhe=T((e,t)=>{Nhe(),jhe(),Hhe(),Whe(),Vhe(),Xhe(),Yhe(),N$();var r=Cc();t.exports=r}),Khe=T((e,t)=>{Uhe(),Qhe();var r=Cc();t.exports=r}),Zhe=T((e,t)=>{var r=function(i){var n=Object.prototype,o=n.hasOwnProperty,s,a=typeof Symbol=="function"?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function f(U,N,B){return Object.defineProperty(U,N,{value:B,enumerable:!0,configurable:!0,writable:!0}),U[N]}try{f({},"")}catch{f=function(N,B,W){return N[B]=W}}function d(U,N,B,W){var q=N&&N.prototype instanceof b?N:b,xe=Object.create(q.prototype),Te=new V(W||[]);return xe._invoke=R(U,B,Te),xe}i.wrap=d;function p(U,N,B){try{return{type:"normal",arg:U.call(N,B)}}catch(W){return{type:"throw",arg:W}}}var v="suspendedStart",g="suspendedYield",m="executing",y="completed",_={};function b(){}function w(){}function S(){}var C={};C[l]=function(){return this};var D=Object.getPrototypeOf,E=D&&D(D(J([])));E&&E!==n&&o.call(E,l)&&(C=E);var I=S.prototype=b.prototype=Object.create(C);w.prototype=I.constructor=S,S.constructor=w,w.displayName=f(S,h,"GeneratorFunction");function M(U){["next","throw","return"].forEach(function(N){f(U,N,function(B){return this._invoke(N,B)})})}i.isGeneratorFunction=function(U){var N=typeof U=="function"&&U.constructor;return N?N===w||(N.displayName||N.name)==="GeneratorFunction":!1},i.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,S):(U.__proto__=S,f(U,h,"GeneratorFunction")),U.prototype=Object.create(I),U},i.awrap=function(U){return{__await:U}};function k(U,N){function B(xe,Te,Se,fe){var te=p(U[xe],U,Te);if(te.type==="throw")fe(te.arg);else{var X=te.arg,le=X.value;return le&&typeof le=="object"&&o.call(le,"__await")?N.resolve(le.__await).then(function(de){B("next",de,Se,fe)},function(de){B("throw",de,Se,fe)}):N.resolve(le).then(function(de){X.value=de,Se(X)},function(de){return B("throw",de,Se,fe)})}}var W;function q(xe,Te){function Se(){return new N(function(fe,te){B(xe,Te,fe,te)})}return W=W?W.then(Se,Se):Se()}this._invoke=q}M(k.prototype),k.prototype[c]=function(){return this},i.AsyncIterator=k,i.async=function(U,N,B,W,q){q===void 0&&(q=Promise);var xe=new k(d(U,N,B,W),q);return i.isGeneratorFunction(N)?xe:xe.next().then(function(Te){return Te.done?Te.value:xe.next()})};function R(U,N,B){var W=v;return function(xe,Te){if(W===m)throw new Error("Generator is already running");if(W===y){if(xe==="throw")throw Te;return ae()}for(B.method=xe,B.arg=Te;;){var Se=B.delegate;if(Se){var fe=$(Se,B);if(fe){if(fe===_)continue;return fe}}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(W===v)throw W=y,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);W=m;var te=p(U,N,B);if(te.type==="normal"){if(W=B.done?y:g,te.arg===_)continue;return{value:te.arg,done:B.done}}else te.type==="throw"&&(W=y,B.method="throw",B.arg=te.arg)}}}function $(U,N){var B=U.iterator[N.method];if(B===s){if(N.delegate=null,N.method==="throw"){if(U.iterator.return&&(N.method="return",N.arg=s,$(U,N),N.method==="throw"))return _;N.method="throw",N.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var W=p(B,U.iterator,N.arg);if(W.type==="throw")return N.method="throw",N.arg=W.arg,N.delegate=null,_;var q=W.arg;if(!q)return N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,_;if(q.done)N[U.resultName]=q.value,N.next=U.nextLoc,N.method!=="return"&&(N.method="next",N.arg=s);else return q;return N.delegate=null,_}M(I),f(I,h,"Generator"),I[l]=function(){return this},I.toString=function(){return"[object Generator]"};function H(U){var N={tryLoc:U[0]};1 in U&&(N.catchLoc=U[1]),2 in U&&(N.finallyLoc=U[2],N.afterLoc=U[3]),this.tryEntries.push(N)}function j(U){var N=U.completion||{};N.type="normal",delete N.arg,U.completion=N}function V(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(H,this),this.reset(!0)}i.keys=function(U){var N=[];for(var B in U)N.push(B);return N.reverse(),function W(){for(;N.length;){var q=N.pop();if(q in U)return W.value=q,W.done=!1,W}return W.done=!0,W}};function J(U){if(U){var N=U[l];if(N)return N.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var B=-1,W=function q(){for(;++B<U.length;)if(o.call(U,B))return q.value=U[B],q.done=!1,q;return q.value=s,q.done=!0,q};return W.next=W}}return{next:ae}}i.values=J;function ae(){return{value:s,done:!0}}return V.prototype={constructor:V,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(j),!U)for(var N in this)N.charAt(0)==="t"&&o.call(this,N)&&!isNaN(+N.slice(1))&&(this[N]=s)},stop:function(){this.done=!0;var U=this.tryEntries[0],N=U.completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var N=this;function B(fe,te){return xe.type="throw",xe.arg=U,N.next=fe,te&&(N.method="next",N.arg=s),!!te}for(var W=this.tryEntries.length-1;W>=0;--W){var q=this.tryEntries[W],xe=q.completion;if(q.tryLoc==="root")return B("end");if(q.tryLoc<=this.prev){var Te=o.call(q,"catchLoc"),Se=o.call(q,"finallyLoc");if(Te&&Se){if(this.prev<q.catchLoc)return B(q.catchLoc,!0);if(this.prev<q.finallyLoc)return B(q.finallyLoc)}else if(Te){if(this.prev<q.catchLoc)return B(q.catchLoc,!0)}else if(Se){if(this.prev<q.finallyLoc)return B(q.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(U,N){for(var B=this.tryEntries.length-1;B>=0;--B){var W=this.tryEntries[B];if(W.tryLoc<=this.prev&&o.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var q=W;break}}q&&(U==="break"||U==="continue")&&q.tryLoc<=N&&N<=q.finallyLoc&&(q=null);var xe=q?q.completion:{};return xe.type=U,xe.arg=N,q?(this.method="next",this.next=q.finallyLoc,_):this.complete(xe)},complete:function(U,N){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&N&&(this.next=N),_},finish:function(U){for(var N=this.tryEntries.length-1;N>=0;--N){var B=this.tryEntries[N];if(B.finallyLoc===U)return this.complete(B.completion,B.afterLoc),j(B),_}},catch:function(U){for(var N=this.tryEntries.length-1;N>=0;--N){var B=this.tryEntries[N];if(B.tryLoc===U){var W=B.completion;if(W.type==="throw"){var q=W.arg;j(B)}return q}}throw new Error("illegal catch attempt")},delegateYield:function(U,N,B){return this.delegate={iterator:J(U),resultName:N,nextLoc:B},this.method==="next"&&(this.arg=s),_}},i}(typeof t=="object"?t.exports:{});try{regeneratorRuntime=r}catch{Function("r","regeneratorRuntime = r")(r)}}),j$=T((e,t)=>{var r=ht(),i=Zs(),n=Function.call;t.exports=function(o,s,a){return i(n,r[o].prototype[s],a)}}),Jhe=T((e,t)=>{y$();var r=j$();t.exports=r("Array","find")}),ede=T((e,t)=>{var r=Jhe();t.exports=r}),tde=T((e,t)=>{w$();var r=j$();t.exports=r("Array","map")}),rde=T((e,t)=>{var r=tde();t.exports=r});typeof Promise=="undefined"&&(Jae().enable(),self.Promise=ele()),typeof window!="undefined"&&tle(),Object.assign=rle(),ule(),dle(),Khe(),Zhe(),ni(ede()),ni(rde());/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ide=Object.defineProperty,nde=Object.defineProperties,ode=Object.getOwnPropertyDescriptors,m0=Object.getOwnPropertySymbols,H$=Object.prototype.hasOwnProperty,W$=Object.prototype.propertyIsEnumerable,V$=(e,t,r)=>t in e?ide(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ei=(e,t)=>{for(var r in t||(t={}))H$.call(t,r)&&V$(e,r,t[r]);if(m0)for(var r of m0(t))W$.call(t,r)&&V$(e,r,t[r]);return e},wo=(e,t)=>nde(e,ode(t)),G$=(e,t)=>{var r={};for(var i in e)H$.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&m0)for(var i of m0(e))t.indexOf(i)<0&&W$.call(e,i)&&(r[i]=e[i]);return r},Mh=(e=>(e[e.TokenExpired=0]="TokenExpired",e[e.TokenCannotFetch=1]="TokenCannotFetch",e[e.TokenRefetchLimit=2]="TokenRefetchLimit",e[e.InvalidParameterValue=3]="InvalidParameterValue",e[e.UnauthorizedDisplaySize=4]="UnauthorizedDisplaySize",e[e.ImageSizeNotFound=5]="ImageSizeNotFound",e))(Mh||{}),vT=(e=>(e.Eps="eps",e.Jpg="jpg",e))(vT||{}),So=(e=>(e.BestMatch="best_match",e.MostPopular="most_popular",e.Newest="newest",e.Random="random",e))(So||{}),g0=(e=>(e.Thumb="thumb",e.Preview="preview",e.Comp="comp",e.Mid="mid_res_comp",e.High="high_res_comp",e))(g0||{}),Rc=(e=>(e.Vertical="vertical",e.Horizontal="horizontal",e.Square="square",e.PanoramicHorizontal="panoramic_horizontal",e.PanoramicVertical="panoramic_vertical",e))(Rc||{}),yT=(e=>(e.XSmall="x_small",e.Small="small",e.Medium="medium",e.Large="large",e.XLarge="x_large",e.XXLarge="xx_large",e.Vector="vector",e))(yT||{}),_T=(e=>(e.RightsManaged="rightsmanaged",e.RoyaltyFree="royaltyfree",e))(_T||{}),_l=(e=>(e.Editorial="editorial",e.Creative="creative",e))(_l||{});const q$="https://api.gettyimages.com/v3/",X$=e=>new URLSearchParams(e).toString(),sde=(e,t)=>{const r=new Headers;return r.append("Api-Key",e),r.append("Authorization",`Bearer ${t}`),r.append("Content-Type","application/json"),{method:"GET",headers:r,redirect:"follow"}},ade=3;let bT=0;const lde=({apiKey:e,token:t,refetchToken:r,onError:i})=>{const n=sde(e,`${t}`);return{searchImages:(o,s)=>fetch(`${q$}search/images${s?`/${s}`:""}?${X$(ei({file_types:vT.Jpg,fields:["summary_set","download_sizes","display_set"]},o))}`,n).then(a=>{if(!a.ok){switch(a.status){case 400:{i(Mh.InvalidParameterValue);break}case 401:{if(bT>=ade)throw i(Mh.TokenRefetchLimit),new Error;bT+=1,r();break}case 403:{i(Mh.UnauthorizedDisplaySize);break}}throw new Error}return bT=0,a.json()}).then(a=>wo(ei({},a),{nextCursor:(o.page||1)+1})),downloadImage:(o,s)=>fetch(`${q$}downloads/images/${o}?${X$(ei({auto_download:!1,file_type:vT.Jpg},s))}`,wo(ei({},n),{method:"POST"})).then(a=>a.json())}};var v0={exports:{}},rm={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Y$=Object.getOwnPropertySymbols,cde=Object.prototype.hasOwnProperty,ude=Object.prototype.propertyIsEnumerable;function hde(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function dde(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(o){n[o]=o}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}dde();/** @license React v17.0.1
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fde=u,Q$=60103;if(rm.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var K$=Symbol.for;Q$=K$("react.element"),rm.Fragment=K$("react.fragment")}var pde=fde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mde=Object.prototype.hasOwnProperty,gde={key:!0,ref:!0,__self:!0,__source:!0};function Z$(e,t,r){var i,n={},o=null,s=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(i in t)mde.call(t,i)&&!gde.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:Q$,type:e,key:o,ref:s,props:n,_owner:pde.current}}rm.jsx=Z$,rm.jsxs=Z$,v0.exports=rm;const at=v0.exports.jsx,Rn=v0.exports.jsxs,xT=v0.exports.Fragment,vde=z.div`
  display: flex;
  flex: 1 1 auto;
  justify-content: center;
  padding: ${({paddingY:e=0})=>`${e}px 10px`};
`,y0=({paddingY:e})=>at(vde,{paddingY:e,children:at(I6,{})}),Fc={SearchDiv:z.div`
  display: flex;
  flex-direction: column;
  padding: 0 24px 24px;
`,ToolbarWrapper:z.div`
    display: flex;
    flex: 1 1 auto;
    flex-direction: column;
    // will force the scrollbar in the ScrollContainer
    min-height: 0px;
    padding-top: 16px;
    padding-bottom: 16px;
    max-height: calc(100% - 32px);
  `,ScrollContainer:z.div`
    display: flex;
    flex: 1 1 auto;
    padding: 16px 24px;
    flex-direction: column;
    overflow-x: hidden;
    overflow-y: auto;
  `,CardContainer:z.div`
    display: flex;
    flex: 1 1 auto;
    flex-wrap: wrap;
    /* width - padding on both sides */
    width: ${e=>e.theme.measurements.advancedUIToolControlBar.width-48}px;
  `,ControlsTrigger:z.div`
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    margin: 0 24px 24px;
    cursor: pointer;
    height: 24px;
  `,ControlsLabel:z(Qae)`
    padding-bottom: 0px;
  `,Caret:z(SP)`
    position: unset;
  `},im={SearchDiv:z.div`
    display: flex;
    flex-direction: column;
    padding: 0 24px 24px;
    margin-bottom: 16px;
    width: 30%;
    @media all and (min-width: 0) and (max-width: 599px) {
      width: 60%;
    }
  `,ToolbarWrapper:z.div`
    display: flex;
    overflow: auto hidden;
    align-items: center;
    flex-direction: column;
    width: 100%;
  `,ScrollContainer:z.div`
    display: flex;
    overflow: auto hidden;
    width: 100%;
  `,CardContainer:z.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
    display: flex;
    flex-direction: row;
    list-style: none;
    padding: 0;
    margin: 0;
  `,Card:z(R6)`
    margin: 2px;
    min-width: ${e=>e.theme.measurements.basicCard.medium.width}px;
    height: ${e=>e.theme.measurements.basicCard.medium.height}px;
    &:nth-child(2n + 1) {
      margin-right: 2px;
    }
  `},yde=z.div`
  display: flex;
  flex: 0 1 auto;
  flex-direction: column;
  padding: 16px 2%;

  user-select: text;
`,_de=z.div`
  display: table;
  table-layout: fixed;
  width: 100%;
`,wT=z.div`
  display: table-row;
`,bde=z.h1`
  font-size: ${e=>e.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline1.letterSpacing}px;
  font-weight: 500;
  color: ${e=>e.theme.toolControlBar.titleForeground};

  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,xde=z.h2`
  font-size: ${e=>e.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.headline2.letterSpacing}px;
  font-weight: 500;
  color: ${e=>e.theme.toolControlBar.titleForeground};

  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,ST=z.span`
  display: table-cell;

  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  color: ${e=>e.theme.toolControlBar.titleForeground};

  width: 128px;
  padding-right: 16px;
  padding-bottom: 8px;

  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,CT=z.span`
  display: table-cell;

  font-size: ${e=>e.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${e=>e.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${e=>e.theme.measurements.fontSystem.body.case};
  color: ${e=>e.theme.textInput.foreground};

  padding-bottom: 8px;

  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,wde=(e,t)=>{const r=e.download_sizes.find(i=>i.name===t);return r?r.height.toString():void 0},J$=(e,t)=>e.display_sizes.find(r=>r.name===t),Sde=(e,t)=>{const r=e[e.length-1],i=e.length*t-t+r.images.length;return r.result_count>i};let kT={};const Ph={set:e=>{kT=ei(ei({},kT),e)},get:()=>kT},eB=({CardComponent:e,images:t,onClick:r})=>at(xT,{children:t.map((i,n)=>{var o;return at(e,{tool:Aa.CUSTOM,type:G4.MEDIUM,onClick:()=>r(i),image:(o=J$(i,g0.Thumb))==null?void 0:o.uri,label:i.title,style:{animationDelay:`${n*.01}s`}},i.id)})}),Ah=K.exports.createContext({phrase:"",setPhrase:()=>null,userEndpoint:null,setUserEndpoint:()=>null,userSearchParams:{},setUserSearchParams:()=>null}),tB={title:"Getty Images",placeholder:"Search the world\u2019s best images",filter:{label:"Filters",endpoint:{label:"Image Type",items:{none:"All",[_l.Creative]:"Creative",[_l.Editorial]:"Editorial"}},orientations:{label:"Orientation",items:{none:"All",[Rc.Vertical]:"Vertical",[Rc.Horizontal]:"Horizontal"}},sort_order:{lable:"Sort By",items:{[So.BestMatch]:"Best Match",[So.MostPopular]:"Most Popular",[So.Newest]:"Newest"}}},meta:{license_model:{label:"License type",items:{[_T.RightsManaged]:"Rights-Managed",[_T.RoyaltyFree]:"Royalty-free"}},collection_name:"Collection",id:{labels:{editorial:"Editorial #",creative:"Creative #"}}}},zh=K.exports.createContext(tB),Cde=()=>{const{userEndpoint:e,setUserEndpoint:t}=K.exports.useContext(Ah),{filter:r}=K.exports.useContext(zh);if(!(r!=null&&r.endpoint))return null;const i=[{label:r.endpoint.items.none,value:"none"},{label:r.endpoint.items[_l.Creative],value:_l.Creative},{label:r.endpoint.items[_l.Editorial],value:_l.Editorial}],n=K.exports.useMemo(()=>{var s;return((s=i.find(({value:a})=>a===e||!e&&a==="none"))==null?void 0:s.label)||""},[e]),o=s=>{s==="none"&&t(null),t(s)};return at(jk,{label:r.endpoint.label,list:i,onSelect:o,selectedItem:n})},kde=()=>{var e;const{userSearchParams:t,setUserSearchParams:r}=K.exports.useContext(Ah),{filter:i}=K.exports.useContext(zh);if(!(i!=null&&i.orientations))return null;const n=[{label:i.orientations.items.none,value:"none"},{label:i.orientations.items[Rc.Vertical],value:Rc.Vertical},{label:i.orientations.items[Rc.Horizontal],value:Rc.Horizontal}],o=((e=n.find(({value:a})=>{var l,c;return((l=t.orientations)==null?void 0:l.includes(a))||!((c=t.orientations)!=null&&c.length)&&a==="none"}))==null?void 0:e.label)||"",s=a=>{a==="none"&&r("orientations",[]),r("orientations",[a])};return at(jk,{label:i.orientations.label,list:n,onSelect:s,selectedItem:o})},Tde=()=>{var e;const{userSearchParams:t,setUserSearchParams:r}=K.exports.useContext(Ah),{filter:i}=K.exports.useContext(zh);if(!(i!=null&&i.sort_order))return null;const n=[{label:i.sort_order.items[So.BestMatch],value:So.BestMatch},{label:i.sort_order.items[So.MostPopular],value:So.MostPopular},{label:i.sort_order.items[So.Newest],value:So.Newest}],o=((e=n.find(({value:s})=>s===t.sort_order))==null?void 0:e.label)||"none";return at(jk,{label:i.sort_order.label,list:n,onSelect:s=>r("sort_order",s),selectedItem:o})},Ede=()=>{const{filter:e}=K.exports.useContext(zh);if(!(e!=null&&e.label))return null;const[t,r]=K.exports.useState(!1),i=()=>{r(n=>!n)};return Rn(xT,{children:[Rn(Fc.ControlsTrigger,{onClick:i,children:[at(Fc.ControlsLabel,{label:e.label}),at(Fc.Caret,{rotation:t?180:0})]}),Rn(Kae,{show:t,children:[at(Cde,{}),at(kde,{}),at(Tde,{})]})]})},Dde=({loading:e,loadingRef:t,pages:r,placeholder:i="",setImage:n,showFilters:o=!1})=>{var s;const{setPhrase:a,phrase:l}=K.exports.useContext(Ah);return Rn(Fc.ToolbarWrapper,{children:[at(Fc.SearchDiv,{children:at(F6,{value:l,onChange:a,placeholder:i})}),o&&at(Ede,{}),at(Fc.ScrollContainer,{children:Rn(Fc.CardContainer,{children:[r.map((c,h)=>at(eB,{images:c.images,onClick:n,CardComponent:R6},h)),e&&at(y0,{}),((s=r[0])==null?void 0:s.result_count)!==0?at("div",{ref:t}):void 0]})})]})},Ide=({loading:e,loadingRef:t,pages:r,placeholder:i="",setImage:n})=>{const{setPhrase:o}=K.exports.useContext(Ah),s=Boolean(r.length);return Rn(im.ToolbarWrapper,{children:[at(im.SearchDiv,{children:at(F6,{onChange:o,placeholder:i})}),Rn(im.ScrollContainer,{children:[at(im.CardContainer,{children:s&&Rn(xT,{children:[r.map((a,l)=>at(eB,{images:a.images,onClick:n,CardComponent:im.Card},l)),e&&at(y0,{}),at("div",{ref:t})]})}),!s&&e?at(y0,{paddingY:10}):null]})]})},Rde=e=>{var t=e,{onClick:r,onConfirm:i,imageSize:n=yT.Medium}=t,o=G$(t,["onClick","onConfirm","imageSize"]);const[s,a]=K.exports.useState(!1),l=D6(),c=async()=>{const{img:d,client:p}=Ph.get();if(!d||!p)throw new Error("Image or API client not found to proceed licensing");const{uri:v}=await p.downloadImage(d.id,{height:wde(d,n)});return Ph.set({img:void 0}),v},h=K.exports.useCallback(d=>(a(!0),c().then(p=>(l(p),r(d),a(!1),p))),[]),f=K.exports.useCallback(d=>{const{img:p}=Ph.get();if(!p){r(d);return}i(()=>h(d),p,()=>c(),()=>r(d))},[r,c,i]);return s?at(I6,{}):at(IP,wo(ei({},o),{onClick:f}))},Fde=e=>t=>at(Rde,ei(ei({},t),e));function TT(e,t){return TT=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i},TT(e,t)}function $h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,TT(e,t)}function qt(){return qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},qt.apply(this,arguments)}var _0=typeof window=="undefined";function ti(){}function rB(e,t){return typeof e=="function"?e(t):e}function ET(e){return typeof e=="number"&&e>=0&&e!==1/0}function DT(e){return Array.isArray(e)?e:[e]}function iB(e,t){return Math.max(e+(t||0)-Date.now(),0)}function b0(e,t,r){return OT(e)?typeof t=="function"?qt({},r,{queryKey:e,queryFn:t}):qt({},t,{queryKey:e}):e}function bl(e,t,r){return OT(e)?[qt({},t,{queryKey:e}),r]:[e||{},t]}function nB(e,t){var r=e.active,i=e.exact,n=e.fetching,o=e.inactive,s=e.predicate,a=e.queryKey,l=e.stale;if(OT(a)){if(i){var c=oB(t.options);if(t.queryHash!==c(a))return!1}else if(!IT(t.queryKey,a))return!1}var h;return o===!1||r&&!o?h=!0:(r===!1||o&&!r)&&(h=!1),!(typeof h=="boolean"&&t.isActive()!==h||typeof l=="boolean"&&t.isStale()!==l||typeof n=="boolean"&&t.isFetching()!==n||s&&!s(t))}function oB(e){return(e==null?void 0:e.queryKeyHashFn)||nm}function nm(e){return Ode(e)}function Ode(e){return JSON.stringify(e,function(t,r){return FT(r)?Object.keys(r).sort().reduce(function(i,n){return i[n]=r[n],i},{}):r})}function IT(e,t){return sB(DT(e),DT(t))}function sB(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(r){return!sB(e[r],t[r])}):!1}function RT(e,t){if(e===t)return e;var r=Array.isArray(e)&&Array.isArray(t);if(r||FT(e)&&FT(t)){for(var i=r?e.length:Object.keys(e).length,n=r?t:Object.keys(t),o=n.length,s=r?[]:{},a=0,l=0;l<o;l++){var c=r?l:n[l];s[c]=RT(e[c],t[c]),s[c]===e[c]&&a++}return i===o&&a===i?e:s}return t}function Mde(e,t){if(e&&!t||t&&!e)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}function FT(e){if(!aB(e))return!1;var t=e.constructor;if(typeof t=="undefined")return!0;var r=t.prototype;return!(!aB(r)||!r.hasOwnProperty("isPrototypeOf"))}function aB(e){return Object.prototype.toString.call(e)==="[object Object]"}function OT(e){return typeof e=="string"||Array.isArray(e)}function Pde(e){return new Promise(function(t){setTimeout(t,e)})}function Ade(e){return{status:e,isLoading:e==="loading",isSuccess:e==="success",isError:e==="error",isIdle:e==="idle"}}function lB(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}var zde=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(r){r()},this.batchNotifyFn=function(r){r()}}var t=e.prototype;return t.batch=function(i){this.transactions++;var n=i();return this.transactions--,this.transactions||this.flush(),n},t.schedule=function(i){var n=this;this.transactions?this.queue.push(i):lB(function(){n.notifyFn(i)})},t.batchCalls=function(i){var n=this;return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];n.schedule(function(){i.apply(void 0,s)})}},t.flush=function(){var i=this,n=this.queue;this.queue=[],n.length&&lB(function(){i.batchNotifyFn(function(){n.forEach(function(o){i.notifyFn(o)})})})},t.setNotifyFunction=function(i){this.notifyFn=i},t.setBatchNotifyFunction=function(i){this.batchNotifyFn=i},e}(),Hr=new zde,$de=console||{error:ti,warn:ti,log:ti};function cB(){return $de}var om=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(i){var n=this,o=i||function(){};return this.listeners.push(o),this.onSubscribe(),function(){n.listeners=n.listeners.filter(function(s){return s!==o}),n.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),Bde=function(e){$h(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},r.setEventListener=function(n){var o=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=n(function(s){typeof s=="boolean"?o.setFocused(s):o.onFocus()})},r.setFocused=function(n){this.focused=n,n&&this.onFocus()},r.onFocus=function(){this.listeners.forEach(function(n){n()})},r.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document=="undefined"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},r.setDefaultEventListener=function(){var n;!_0&&((n=window)==null?void 0:n.addEventListener)&&this.setEventListener(function(o){return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}})},t}(om),sm=new Bde,Lde=function(e){$h(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.onSubscribe=function(){this.removeEventListener||this.setDefaultEventListener()},r.setEventListener=function(n){var o=this;this.removeEventListener&&this.removeEventListener(),this.removeEventListener=n(function(s){typeof s=="boolean"?o.setOnline(s):o.onOnline()})},r.setOnline=function(n){this.online=n,n&&this.onOnline()},r.onOnline=function(){this.listeners.forEach(function(n){n()})},r.isOnline=function(){return typeof this.online=="boolean"?this.online:navigator.onLine===void 0||navigator.onLine},r.setDefaultEventListener=function(){var n;!_0&&((n=window)==null?void 0:n.addEventListener)&&this.setEventListener(function(o){return window.addEventListener("online",o,!1),function(){window.removeEventListener("online",o)}})},t}(om),x0=new Lde;function Ude(e){return Math.min(1e3*Math.pow(2,e),3e4)}function MT(e){return typeof(e==null?void 0:e.cancel)=="function"}var uB=function(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent};function PT(e){return e instanceof uB}var hB=function(t){var r=this,i=!1,n,o,s,a;this.cancel=function(d){return n==null?void 0:n(d)},this.cancelRetry=function(){i=!0},this.continue=function(){return o==null?void 0:o()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(d,p){s=d,a=p});var l=function(p){r.isResolved=!0,o==null||o(),s(p)},c=function(p){r.isResolved=!0,o==null||o(),a(p)},h=function(){return new Promise(function(p){o=p,r.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){o=void 0,r.isPaused=!1,t.onContinue==null||t.onContinue()})},f=function d(){if(!r.isResolved){var p;try{p=t.fn()}catch(v){p=Promise.reject(v)}n=function(g){if(c(new uB(g)),MT(p))try{p.cancel()}catch{}},r.isTransportCancelable=MT(p),Promise.resolve(p).then(l).catch(function(v){var g,m;if(!r.isResolved){var y=(g=t.retry)!=null?g:3,_=(m=t.retryDelay)!=null?m:Ude,b=rB(_,r.failureCount)||0,w=y===!0||typeof y=="number"&&r.failureCount<y||typeof y=="function"&&y(r.failureCount,v);if(i||!w){c(v);return}r.failureCount++,t.onFail==null||t.onFail(r.failureCount,v),Pde(b).then(function(){if(!sm.isFocused()||!x0.isOnline())return h()}).then(function(){i?c(v):d()})}})}};f()},Nde=function(){function e(r){this.defaultOptions=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.cache=r.cache,this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.initialState=r.state||this.getDefaultState(this.options),this.state=this.initialState,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(i){var n;this.options=qt({},this.defaultOptions,i),this.cacheTime=Math.max(this.cacheTime||0,(n=this.options.cacheTime)!=null?n:5*60*1e3)},t.setDefaultOptions=function(i){this.defaultOptions=i},t.scheduleGc=function(){var i=this;this.clearGcTimeout(),ET(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){i.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){clearTimeout(this.gcTimeout),this.gcTimeout=void 0},t.optionalRemove=function(){!this.observers.length&&!this.state.isFetching&&this.cache.remove(this)},t.setData=function(i,n){var o,s,a=this.state.data,l=rB(i,a);return(o=(s=this.options).isDataEqual)!=null&&o.call(s,a,l)?l=a:this.options.structuralSharing!==!1&&(l=RT(a,l)),this.dispatch({data:l,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt}),l},t.setState=function(i){this.dispatch({type:"setState",state:i})},t.cancel=function(i){var n,o=this.promise;return(n=this.retryer)==null||n.cancel(i),o?o.then(ti).catch(ti):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel()},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(i){return i.options.enabled!==!1})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(i){return i.getCurrentResult().isStale})},t.isStaleByTime=function(i){return i===void 0&&(i=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!iB(this.state.dataUpdatedAt,i)},t.onFocus=function(){var i,n=this.observers.find(function(o){return o.willFetchOnWindowFocus()});n&&n.refetch(),(i=this.retryer)==null||i.continue()},t.onOnline=function(){var i,n=this.observers.find(function(o){return o.willFetchOnReconnect()});n&&n.refetch(),(i=this.retryer)==null||i.continue()},t.addObserver=function(i){this.observers.indexOf(i)===-1&&(this.observers.push(i),this.clearGcTimeout(),this.cache.notify(this))},t.removeObserver=function(i){this.observers.indexOf(i)!==-1&&(this.observers=this.observers.filter(function(n){return n!==i}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable?this.retryer.cancel():this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify(this))},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(i,n){var o=this,s,a;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(n==null?void 0:n.cancelRefetch))this.cancel({silent:!0});else if(this.promise)return this.promise}if(i&&this.setOptions(i),!this.options.queryFn){var l=this.observers.find(function(g){return g.options.queryFn});l&&this.setOptions(l.options)}var c=DT(this.queryKey),h={queryKey:c,pageParam:void 0},f=function(){return o.options.queryFn?o.options.queryFn(h):Promise.reject("Missing queryFn")},d={fetchOptions:n,options:this.options,queryKey:c,state:this.state,fetchFn:f};if((s=this.options.behavior)!=null&&s.onFetch){var p;(p=this.options.behavior)==null||p.onFetch(d)}if(!this.state.isFetching||this.state.fetchMeta!==((a=d.fetchOptions)==null?void 0:a.meta)){var v;this.dispatch({type:"fetch",meta:(v=d.fetchOptions)==null?void 0:v.meta})}return this.retryer=new hB({fn:d.fetchFn,onFail:function(){o.dispatch({type:"failed"})},onPause:function(){o.dispatch({type:"pause"})},onContinue:function(){o.dispatch({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay}),this.promise=this.retryer.promise.then(function(g){return o.setData(g)}).catch(function(g){throw PT(g)&&g.silent||o.dispatch({type:"error",error:g}),PT(g)||(o.cache.config.onError&&o.cache.config.onError(g,o),cB().error(g)),o.cacheTime===0&&o.optionalRemove(),g}).then(function(g){return o.cacheTime===0&&o.optionalRemove(),g}),this.promise},t.dispatch=function(i){var n=this;this.state=this.reducer(this.state,i),Hr.batch(function(){n.observers.forEach(function(o){o.onQueryUpdate(i)}),n.cache.notify(n)})},t.getDefaultState=function(i){var n=typeof i.initialData=="function"?i.initialData():i.initialData,o=typeof i.initialData!="undefined",s=o?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0,a=typeof n!="undefined";return{data:n,dataUpdateCount:0,dataUpdatedAt:a?s!=null?s:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:a?"success":"idle"}},t.reducer=function(i,n){var o,s;switch(n.type){case"failed":return qt({},i,{fetchFailureCount:i.fetchFailureCount+1});case"pause":return qt({},i,{isPaused:!0});case"continue":return qt({},i,{isPaused:!1});case"fetch":return qt({},i,{fetchFailureCount:0,fetchMeta:(o=n.meta)!=null?o:null,isFetching:!0,isPaused:!1,status:i.dataUpdatedAt?i.status:"loading"});case"success":return qt({},i,{data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(s=n.dataUpdatedAt)!=null?s:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=n.error;if(PT(a)&&a.revert){var l;return!i.dataUpdatedAt&&!i.errorUpdatedAt?l="idle":i.dataUpdatedAt>i.errorUpdatedAt?l="success":l="error",qt({},i,{fetchFailureCount:0,isFetching:!1,isPaused:!1,status:l})}return qt({},i,{error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return qt({},i,{isInvalidated:!0});case"setState":return qt({},i,n.state);default:return i}},e}(),jde=function(e){$h(t,e);function t(i){var n;return n=e.call(this)||this,n.config=i||{},n.queries=[],n.queriesMap={},n}var r=t.prototype;return r.build=function(n,o,s){var a,l=oB(o),c=o.queryKey,h=(a=o.queryHash)!=null?a:l(c),f=this.get(h);return f||(f=new Nde({cache:this,queryKey:c,queryHash:h,options:n.defaultQueryOptions(o),state:s,defaultOptions:n.getQueryDefaults(c)}),this.add(f)),f},r.add=function(n){this.queriesMap[n.queryHash]||(this.queriesMap[n.queryHash]=n,this.queries.push(n),this.notify(n))},r.remove=function(n){var o=this.queriesMap[n.queryHash];o&&(n.destroy(),this.queries=this.queries.filter(function(s){return s!==n}),o===n&&delete this.queriesMap[n.queryHash],this.notify(n))},r.clear=function(){var n=this;Hr.batch(function(){n.queries.forEach(function(o){n.remove(o)})})},r.get=function(n){return this.queriesMap[n]},r.getAll=function(){return this.queries},r.find=function(n,o){var s=bl(n,o),a=s[0];return this.queries.find(function(l){return nB(a,l)})},r.findAll=function(n,o){var s=bl(n,o),a=s[0];return a?this.queries.filter(function(l){return nB(a,l)}):this.queries},r.notify=function(n){var o=this;Hr.batch(function(){o.listeners.forEach(function(s){s(n)})})},r.onFocus=function(){var n=this;Hr.batch(function(){n.queries.forEach(function(o){o.onFocus()})})},r.onOnline=function(){var n=this;Hr.batch(function(){n.queries.forEach(function(o){o.onOnline()})})},t}(om),Hde=function(){function e(r){this.options=qt({},r.defaultOptions,r.options),this.mutationId=r.mutationId,this.mutationCache=r.mutationCache,this.observers=[],this.state=r.state||Wde()}var t=e.prototype;return t.setState=function(i){this.dispatch({type:"setState",state:i})},t.addObserver=function(i){this.observers.indexOf(i)===-1&&this.observers.push(i)},t.removeObserver=function(i){this.observers=this.observers.filter(function(n){return n!==i})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(ti).catch(ti)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var i=this,n,o=this.state.status==="loading",s=Promise.resolve();return o||(this.dispatch({type:"loading",variables:this.options.variables}),s=s.then(function(){return i.options.onMutate==null?void 0:i.options.onMutate(i.state.variables)}).then(function(a){a!==i.state.context&&i.dispatch({type:"loading",context:a,variables:i.state.variables})})),s.then(function(){return i.executeMutation()}).then(function(a){n=a}).then(function(){return i.options.onSuccess==null?void 0:i.options.onSuccess(n,i.state.variables,i.state.context)}).then(function(){return i.options.onSettled==null?void 0:i.options.onSettled(n,null,i.state.variables,i.state.context)}).then(function(){return i.dispatch({type:"success",data:n}),n}).catch(function(a){return i.mutationCache.config.onError&&i.mutationCache.config.onError(a,i.state.variables,i.state.context,i),cB().error(a),Promise.resolve().then(function(){return i.options.onError==null?void 0:i.options.onError(a,i.state.variables,i.state.context)}).then(function(){return i.options.onSettled==null?void 0:i.options.onSettled(void 0,a,i.state.variables,i.state.context)}).then(function(){throw i.dispatch({type:"error",error:a}),a})})},t.executeMutation=function(){var i=this,n;return this.retryer=new hB({fn:function(){return i.options.mutationFn?i.options.mutationFn(i.state.variables):Promise.reject("No mutationFn found")},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:(n=this.options.retry)!=null?n:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(i){var n=this;this.state=Vde(this.state,i),Hr.batch(function(){n.observers.forEach(function(o){o.onMutationUpdate(i)}),n.mutationCache.notify(n)})},e}();function Wde(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Vde(e,t){switch(t.type){case"failed":return qt({},e,{failureCount:e.failureCount+1});case"pause":return qt({},e,{isPaused:!0});case"continue":return qt({},e,{isPaused:!1});case"loading":return qt({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return qt({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return qt({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return qt({},e,t.state);default:return e}}var Gde=function(e){$h(t,e);function t(i){var n;return n=e.call(this)||this,n.config=i||{},n.mutations=[],n.mutationId=0,n}var r=t.prototype;return r.build=function(n,o,s){var a=new Hde({mutationCache:this,mutationId:++this.mutationId,options:n.defaultMutationOptions(o),state:s,defaultOptions:o.mutationKey?n.getMutationDefaults(o.mutationKey):void 0});return this.add(a),a},r.add=function(n){this.mutations.push(n),this.notify(n)},r.remove=function(n){this.mutations=this.mutations.filter(function(o){return o!==n}),n.cancel(),this.notify(n)},r.clear=function(){var n=this;Hr.batch(function(){n.mutations.forEach(function(o){n.remove(o)})})},r.getAll=function(){return this.mutations},r.notify=function(n){var o=this;Hr.batch(function(){o.listeners.forEach(function(s){s(n)})})},r.onFocus=function(){this.resumePausedMutations()},r.onOnline=function(){this.resumePausedMutations()},r.resumePausedMutations=function(){var n=this.mutations.filter(function(o){return o.state.isPaused});return Hr.batch(function(){return n.reduce(function(o,s){return o.then(function(){return s.continue().catch(ti)})},Promise.resolve())})},t}(om);function dB(){return{onFetch:function(t){t.fetchFn=function(){var r,i,n,o,s=(r=t.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,a=s==null?void 0:s.pageParam,l=(s==null?void 0:s.direction)==="forward",c=(s==null?void 0:s.direction)==="backward",h=((n=t.state.data)==null?void 0:n.pages)||[],f=((o=t.state.data)==null?void 0:o.pageParams)||[],d=f,p=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},v=function(D,E,I,M){if(typeof I=="undefined"&&!E&&D.length)return Promise.resolve(D);var k={queryKey:t.queryKey,pageParam:I},R,$=p(k);$.cancel&&(R=$.cancel);var H=Promise.resolve($).then(function(V){return d=M?[I].concat(d):[].concat(d,[I]),M?[V].concat(D):[].concat(D,[V])});if(R){var j=H;j.cancel=R}return H},g;if(!h.length)g=v([]);else if(l){var m=typeof a!="undefined",y=m?a:AT(t.options,h);g=v(h,m,y)}else if(c){var _=typeof a!="undefined",b=_?a:fB(t.options,h);g=v(h,_,b,!0)}else(function(){d=[];var C=typeof t.options.getNextPageParam=="undefined";g=v([],C,f[0]);for(var D=function(M){g=g.then(function(k){var R=C?f[M]:AT(t.options,k);return v(k,C,R)})},E=1;E<h.length;E++)D(E)})();var w=g.then(function(C){return{pages:C,pageParams:d}});if(MT(g)){var S=w;S.cancel=g.cancel}return w}}}}function AT(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function fB(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}function qde(e,t){if(e.getNextPageParam&&Array.isArray(t)){var r=AT(e,t);return typeof r!="undefined"&&r!==null&&r!==!1}}function Xde(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){var r=fB(e,t);return typeof r!="undefined"&&r!==null&&r!==!1}}var Yde=function(){function e(r){r===void 0&&(r={}),this.queryCache=r.queryCache||new jde,this.mutationCache=r.mutationCache||new Gde,this.defaultOptions=r.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var i=this;this.unsubscribeFocus=sm.subscribe(function(){sm.isFocused()&&x0.isOnline()&&(i.mutationCache.onFocus(),i.queryCache.onFocus())}),this.unsubscribeOnline=x0.subscribe(function(){sm.isFocused()&&x0.isOnline()&&(i.mutationCache.onOnline(),i.queryCache.onOnline())})},t.unmount=function(){var i,n;(i=this.unsubscribeFocus)==null||i.call(this),(n=this.unsubscribeOnline)==null||n.call(this)},t.isFetching=function(i,n){var o=bl(i,n),s=o[0];return s.fetching=!0,this.queryCache.findAll(s).length},t.getQueryData=function(i,n){var o;return(o=this.queryCache.find(i,n))==null?void 0:o.state.data},t.setQueryData=function(i,n,o){var s=b0(i),a=this.defaultQueryOptions(s);return this.queryCache.build(this,a).setData(n,o)},t.getQueryState=function(i,n){var o;return(o=this.queryCache.find(i,n))==null?void 0:o.state},t.removeQueries=function(i,n){var o=bl(i,n),s=o[0],a=this.queryCache;Hr.batch(function(){a.findAll(s).forEach(function(l){a.remove(l)})})},t.resetQueries=function(i,n,o){var s=this,a=bl(i,n,o),l=a[0],c=a[1],h=this.queryCache,f=qt({},l,{active:!0});return Hr.batch(function(){return h.findAll(l).forEach(function(d){d.reset()}),s.refetchQueries(f,c)})},t.cancelQueries=function(i,n,o){var s=this,a=bl(i,n,o),l=a[0],c=a[1],h=c===void 0?{}:c;typeof h.revert=="undefined"&&(h.revert=!0);var f=Hr.batch(function(){return s.queryCache.findAll(l).map(function(d){return d.cancel(h)})});return Promise.all(f).then(ti).catch(ti)},t.invalidateQueries=function(i,n,o){var s,a,l=this,c=bl(i,n,o),h=c[0],f=c[1],d=qt({},h,{active:(s=h.refetchActive)!=null?s:!0,inactive:(a=h.refetchInactive)!=null?a:!1});return Hr.batch(function(){return l.queryCache.findAll(h).forEach(function(p){p.invalidate()}),l.refetchQueries(d,f)})},t.refetchQueries=function(i,n,o){var s=this,a=bl(i,n,o),l=a[0],c=a[1],h=Hr.batch(function(){return s.queryCache.findAll(l).map(function(d){return d.fetch()})}),f=Promise.all(h).then(ti);return c!=null&&c.throwOnError||(f=f.catch(ti)),f},t.fetchQuery=function(i,n,o){var s=b0(i,n,o),a=this.defaultQueryOptions(s);typeof a.retry=="undefined"&&(a.retry=!1);var l=this.queryCache.build(this,a);return l.isStaleByTime(a.staleTime)?l.fetch(a):Promise.resolve(l.state.data)},t.prefetchQuery=function(i,n,o){return this.fetchQuery(i,n,o).then(ti).catch(ti)},t.fetchInfiniteQuery=function(i,n,o){var s=b0(i,n,o);return s.behavior=dB(),this.fetchQuery(s)},t.prefetchInfiniteQuery=function(i,n,o){return this.fetchInfiniteQuery(i,n,o).then(ti).catch(ti)},t.cancelMutations=function(){var i=this,n=Hr.batch(function(){return i.mutationCache.getAll().map(function(o){return o.cancel()})});return Promise.all(n).then(ti).catch(ti)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(i){return this.mutationCache.build(this,i).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(i){this.defaultOptions=i},t.setQueryDefaults=function(i,n){var o=this.queryDefaults.find(function(s){return nm(i)===nm(s.queryKey)});o?o.defaultOptions=n:this.queryDefaults.push({queryKey:i,defaultOptions:n})},t.getQueryDefaults=function(i){var n;return i?(n=this.queryDefaults.find(function(o){return IT(i,o.queryKey)}))==null?void 0:n.defaultOptions:void 0},t.setMutationDefaults=function(i,n){var o=this.mutationDefaults.find(function(s){return nm(i)===nm(s.mutationKey)});o?o.defaultOptions=n:this.mutationDefaults.push({mutationKey:i,defaultOptions:n})},t.getMutationDefaults=function(i){var n;return i?(n=this.mutationDefaults.find(function(o){return IT(i,o.mutationKey)}))==null?void 0:n.defaultOptions:void 0},t.defaultQueryOptions=function(i){return i!=null&&i._defaulted?i:qt({},this.defaultOptions.queries,this.getQueryDefaults(i==null?void 0:i.queryKey),i,{_defaulted:!0})},t.defaultQueryObserverOptions=function(i){return this.defaultQueryOptions(i)},t.defaultMutationOptions=function(i){return i!=null&&i._defaulted?i:qt({},this.defaultOptions.mutations,this.getMutationDefaults(i==null?void 0:i.mutationKey),i,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),Qde=function(e){$h(t,e);function t(i,n){var o;return o=e.call(this)||this,o.client=i,o.options=n,o.initialDataUpdateCount=0,o.initialErrorUpdateCount=0,o.bindMethods(),o.setOptions(n),o}var r=t.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){this.listeners.length===1&&(this.updateQuery(),this.currentQuery.addObserver(this),this.willFetchOnMount()&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.willLoadOnMount=function(){return this.options.enabled!==!1&&!this.currentQuery.state.dataUpdatedAt&&!(this.currentQuery.state.status==="error"&&this.options.retryOnMount===!1)},r.willRefetchOnMount=function(){return this.options.enabled!==!1&&this.currentQuery.state.dataUpdatedAt>0&&(this.options.refetchOnMount==="always"||this.options.refetchOnMount!==!1&&this.isStale())},r.willFetchOnMount=function(){return this.willLoadOnMount()||this.willRefetchOnMount()},r.willFetchOnReconnect=function(){return this.options.enabled!==!1&&(this.options.refetchOnReconnect==="always"||this.options.refetchOnReconnect!==!1&&this.isStale())},r.willFetchOnWindowFocus=function(){return this.options.enabled!==!1&&(this.options.refetchOnWindowFocus==="always"||this.options.refetchOnWindowFocus!==!1&&this.isStale())},r.willFetchOptionally=function(){return this.options.enabled!==!1&&this.isStale()},r.isStale=function(){return this.currentQuery.isStaleByTime(this.options.staleTime)},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(n){var o=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(n),typeof this.options.enabled!="undefined"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");if(this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery(),!!this.listeners.length){if(this.currentQuery!==s){this.optionalFetch(),this.updateTimers();return}this.options.enabled!==!1&&o.enabled===!1&&this.optionalFetch(),(this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout(),(this.options.enabled!==o.enabled||this.options.refetchInterval!==o.refetchInterval)&&this.updateRefetchInterval()}},r.getCurrentResult=function(){return this.currentResult},r.getNextResult=function(n){var o=this;return new Promise(function(s,a){var l=o.subscribe(function(c){c.isFetching||(l(),c.isError&&(n==null?void 0:n.throwOnError)?a(c.error):s(c))})})},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(n){return this.fetch(n)},r.fetch=function(n){var o=this;return this.executeFetch(n).then(function(){return o.updateResult(),o.currentResult})},r.optionalFetch=function(){this.willFetchOptionally()&&this.executeFetch()},r.executeFetch=function(n){this.updateQuery();var o=this.currentQuery.fetch(this.options,n);return n!=null&&n.throwOnError||(o=o.catch(ti)),o},r.updateStaleTimeout=function(){var n=this;if(this.clearStaleTimeout(),!(_0||this.currentResult.isStale||!ET(this.options.staleTime))){var o=iB(this.currentResult.dataUpdatedAt,this.options.staleTime),s=o+1;this.staleTimeoutId=setTimeout(function(){if(!n.currentResult.isStale){var a=n.currentResult;n.updateResult(),n.notify({listeners:n.shouldNotifyListeners(a,n.currentResult),cache:!0})}},s)}},r.updateRefetchInterval=function(){var n=this;this.clearRefetchInterval(),!(_0||this.options.enabled===!1||!ET(this.options.refetchInterval))&&(this.refetchIntervalId=setInterval(function(){(n.options.refetchIntervalInBackground||sm.isFocused())&&n.executeFetch()},this.options.refetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval()},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0},r.clearRefetchInterval=function(){clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0},r.getNewResult=function(n){var o,s=this.currentQuery.state,a=s.isFetching,l=s.status,c=!1,h=!1,f,d=s.dataUpdatedAt;if(n&&(a=!0,d||(l="loading")),this.options.keepPreviousData&&!s.dataUpdateCount&&((o=this.previousQueryResult)==null?void 0:o.isSuccess))f=this.previousQueryResult.data,d=this.previousQueryResult.dataUpdatedAt,l=this.previousQueryResult.status,c=!0;else if(this.options.select&&typeof s.data!="undefined"){var p;if(this.currentResult&&s.data===((p=this.currentResultState)==null?void 0:p.data))f=this.currentResult.data;else if(f=this.options.select(s.data),this.options.structuralSharing!==!1){var v;f=RT((v=this.currentResult)==null?void 0:v.data,f)}}else f=s.data;if(typeof this.options.placeholderData!="undefined"&&typeof f=="undefined"&&l==="loading"){var g=typeof this.options.placeholderData=="function"?this.options.placeholderData():this.options.placeholderData;typeof g!="undefined"&&(l="success",f=g,h=!0)}var m=qt({},Ade(l),{data:f,dataUpdatedAt:d,error:s.error,errorUpdatedAt:s.errorUpdatedAt,failureCount:s.fetchFailureCount,isFetched:s.dataUpdateCount>0||s.errorUpdateCount>0,isFetchedAfterMount:s.dataUpdateCount>this.initialDataUpdateCount||s.errorUpdateCount>this.initialErrorUpdateCount,isFetching:a,isLoadingError:l==="error"&&s.dataUpdatedAt===0,isPlaceholderData:h,isPreviousData:c,isRefetchError:l==="error"&&s.dataUpdatedAt!==0,isStale:this.isStale(),refetch:this.refetch,remove:this.remove});return m},r.shouldNotifyListeners=function(n,o){var s=this.options,a=s.notifyOnChangeProps,l=s.notifyOnChangePropsExclusions;if(n===o)return!1;if(!a&&!l)return!0;for(var c=Object.keys(o),h=function(v){var g=c[v],m=n[g]!==o[g],y=a==null?void 0:a.some(function(b){return b===g}),_=l==null?void 0:l.some(function(b){return b===g});if(m){if(l&&_)return"continue";if(!a||y)return{v:!0}}},f=0;f<c.length;f++){var d=h(f);if(d!=="continue"&&typeof d=="object")return d.v}return!1},r.updateResult=function(n){var o=this.getNewResult(n);this.currentResultState=this.currentQuery.state,Mde(o,this.currentResult)||(this.currentResult=o)},r.updateQuery=function(){var n=this.currentQuery,o=this.client.getQueryCache().build(this.client,this.options);if(o!==n){this.previousQueryResult=this.currentResult,this.currentQuery=o,this.initialDataUpdateCount=o.state.dataUpdateCount,this.initialErrorUpdateCount=o.state.errorUpdateCount;var s=n?this.willFetchOptionally():this.willFetchOnMount();this.updateResult(s),this.hasListeners()&&(n==null||n.removeObserver(this),this.currentQuery.addObserver(this),this.shouldNotifyListeners(this.previousQueryResult,this.currentResult)&&this.notify({listeners:!0}))}},r.onQueryUpdate=function(n){var o=this.currentResult;this.updateResult();var s=this.currentResult;if(this.updateTimers(),o!==s){var a={};n.type==="success"?a.onSuccess=!0:n.type==="error"&&(a.onError=!0),this.shouldNotifyListeners(o,s)&&(a.listeners=!0),this.notify(a)}},r.notify=function(n){var o=this;Hr.batch(function(){n.onSuccess?(o.options.onSuccess==null||o.options.onSuccess(o.currentResult.data),o.options.onSettled==null||o.options.onSettled(o.currentResult.data,null)):n.onError&&(o.options.onError==null||o.options.onError(o.currentResult.error),o.options.onSettled==null||o.options.onSettled(void 0,o.currentResult.error)),n.listeners&&o.listeners.forEach(function(s){s(o.currentResult)}),n.cache&&o.client.getQueryCache().notify(o.currentQuery)})},t}(om),Kde=function(e){$h(t,e);function t(i,n){return e.call(this,i,n)||this}var r=t.prototype;return r.bindMethods=function(){e.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},r.setOptions=function(n){e.prototype.setOptions.call(this,qt({},n,{behavior:dB()}))},r.fetchNextPage=function(n){return this.fetch({cancelRefetch:!0,throwOnError:n==null?void 0:n.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:n==null?void 0:n.pageParam}}})},r.fetchPreviousPage=function(n){return this.fetch({cancelRefetch:!0,throwOnError:n==null?void 0:n.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:n==null?void 0:n.pageParam}}})},r.getNewResult=function(n){var o,s,a,l,c,h,f=this.getCurrentQuery(),d=f.state,p=e.prototype.getNewResult.call(this,n);return qt({},p,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:qde(this.options,(o=d.data)==null?void 0:o.pages),hasPreviousPage:Xde(this.options,(s=d.data)==null?void 0:s.pages),isFetchingNextPage:d.isFetching&&((a=d.fetchMeta)==null||(l=a.fetchMore)==null?void 0:l.direction)==="forward",isFetchingPreviousPage:d.isFetching&&((c=d.fetchMeta)==null||(h=c.fetchMore)==null?void 0:h.direction)==="backward"})},t}(Qde),pB=function(){var e=u.createContext(void 0);return typeof window!="undefined"&&(window.ReactQueryClientContext=e),e}();function mB(){var e;return typeof window!="undefined"&&(e=window.ReactQueryClientContext)!=null?e:pB}var Zde=function(){var t=u.useContext(mB());if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Jde=function(t){var r=t.client,i=t.children;u.useEffect(function(){return r.mount(),function(){r.unmount()}},[r]);var n=mB();return Wi(n.Provider,{value:r,children:i})};function efe(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var tfe=u.createContext(efe()),rfe=function(){return u.useContext(tfe)};function ife(e,t){var r=Zde(),i=rfe(),n=r.defaultQueryObserverOptions(e);n.onError&&(n.onError=Hr.batchCalls(n.onError)),n.onSuccess&&(n.onSuccess=Hr.batchCalls(n.onSuccess)),n.onSettled&&(n.onSettled=Hr.batchCalls(n.onSettled)),n.suspense&&(typeof n.staleTime!="number"&&(n.staleTime=1e3),i.isReset()||(n.retryOnMount=!1));var o=u.useRef(),s=o.current||new t(r,n);o.current=s,s.hasListeners()&&s.setOptions(n);var a=s.getCurrentResult(),l=u.useState(a),c=l[1];if(u.useEffect(function(){return i.clearReset(),s.subscribe(Hr.batchCalls(c))},[s,i]),s.options.suspense||s.options.useErrorBoundary){if(s.options.suspense&&a.isLoading){i.clearReset();var h=s.subscribe();throw s.refetch().finally(h)}if(a.isError)throw a.error}return a}function nfe(e,t,r){var i=b0(e,t,r);return ife(i,Kde)}function ofe(e,t,r){var i=this,n=K.exports.useRef(null),o=K.exports.useRef(0),s=K.exports.useRef(null),a=K.exports.useRef([]),l=K.exports.useRef(),c=K.exports.useRef(),h=K.exports.useRef(e),f=K.exports.useRef(!0);h.current=e;var d=!t&&t!==0&&typeof window!="undefined";if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0,r=r||{};var p=!!r.leading,v="trailing"in r?!!r.trailing:!0,g="maxWait"in r,m=g?Math.max(+r.maxWait||0,t):null,y=K.exports.useCallback(function(k){var R=a.current,$=l.current;return a.current=l.current=null,o.current=k,c.current=h.current.apply($,R)},[]),_=K.exports.useCallback(function(k,R){d&&cancelAnimationFrame(s.current),s.current=d?requestAnimationFrame(k):setTimeout(k,R)},[d]),b=K.exports.useCallback(function(k){if(!f.current)return!1;var R=k-n.current,$=k-o.current;return!n.current||R>=t||R<0||g&&$>=m},[m,g,t]),w=K.exports.useCallback(function(k){return s.current=null,v&&a.current?y(k):(a.current=l.current=null,c.current)},[y,v]),S=K.exports.useCallback(function(){var k=Date.now();if(b(k))return w(k);var R=k-n.current,$=k-o.current,H=t-R,j=g?Math.min(H,m-$):H;_(S,j)},[m,g,b,_,w,t]),C=K.exports.useCallback(function(){s.current&&(d?cancelAnimationFrame(s.current):clearTimeout(s.current)),o.current=0,a.current=n.current=l.current=s.current=null},[d]),D=K.exports.useCallback(function(){return s.current?w(Date.now()):c.current},[w]);K.exports.useEffect(function(){return f.current=!0,function(){f.current=!1}},[]);var E=K.exports.useCallback(function(){for(var k=[],R=0;R<arguments.length;R++)k[R]=arguments[R];var $=Date.now(),H=b($);if(a.current=k,l.current=i,n.current=$,H){if(!s.current&&f.current)return o.current=n.current,_(S,t),p?y(n.current):c.current;if(g)return _(S,t),y(n.current)}return s.current||_(S,t),c.current},[y,p,g,b,_,S,t]),I=K.exports.useCallback(function(){return!!s.current},[]),M=K.exports.useMemo(function(){return{callback:E,cancel:C,flush:D,pending:I}},[E,C,D,I]);return M}function sfe(e,t){return e===t}function afe(e,t,r){var i=r&&r.equalityFn||sfe,n=K.exports.useState(e),o=n[0],s=n[1],a=ofe(K.exports.useCallback(function(c){return s(c)},[]),t,r),l=K.exports.useRef(e);return K.exports.useEffect(function(){i(l.current,e)||(a.callback(e),l.current=e)},[e,a,i]),[o,{cancel:a.cancel,pending:a.pending,flush:a.flush}]}const lfe=({client:e,pageSize:t,phrase:r,searchParams:i,endpoint:n})=>{const{data:o,isFetching:s,isFetchingNextPage:a,fetchNextPage:l}=nfe(["images",r,i,n],({pageParam:h=1})=>{const f=wo(ei({page:h,page_size:t},i),{phrase:r||""});return e.searchImages(f,n)},{retry:3,getNextPageParam:(h,f)=>Sde(f,t)?h.nextCursor:void 0}),c=s||a;return[(o==null?void 0:o.pages)||[],c,l]};function cfe({root:e,target:t,onIntersect:r,threshold:i=1,rootMargin:n="0px",enabled:o=!0}){u.useEffect(()=>{const s=t.current;if(!o||!s)return;const a=new IntersectionObserver(l=>l.forEach(c=>c.isIntersecting&&r()),{root:e&&e.current,rootMargin:n,threshold:i});return a.observe(s),()=>{a.unobserve(s)}},[t.current,o,r])}const gB=30,ufe=({language:e,client:t,searchParams:r,onError:i,displaySize:n=g0.High,endpoint:o,showFilters:s})=>{const a=Gae(),[l,c]=K.exports.useState(!!a),[h,f]=K.exports.useState((r==null?void 0:r.phrase)||""),[d]=afe(h,500),[p,v]=K.exports.useState(r||{}),[g,m]=K.exports.useState(o||null),y=K.exports.useRef(null),_=D6(),b=async k=>{const R=J$(k,n);R?(Ph.set({img:k}),await _(R.uri)):i(Mh.ImageSizeNotFound)},w=(k,R)=>{v($=>wo(ei({},$),{[k]:R}))},[S,C,D]=lfe({client:t,searchParams:p,phrase:d,endpoint:g,pageSize:gB});K.exports.useEffect(()=>{if(!C&&S.length&&!l){const k=Math.floor(Math.random()*gB);b(S[0].images[k]),c(!0)}},[C]);const I=qae()?Dde:Ide;cfe({target:y,onIntersect:D,enabled:!C});const M=K.exports.useMemo(()=>Gs([tB,e]),[e]);return at(zh.Provider,{value:M,children:at(Ah.Provider,{value:{phrase:h,setPhrase:f,userEndpoint:g,setUserEndpoint:m,userSearchParams:p,setUserSearchParams:w},children:at(I,{loading:C,loadingRef:y,placeholder:e.placeholder,setImage:b,pages:S,showFilters:s})})})},w0={token:"",isError:!1,isLoading:!1},hfe=(e,t)=>{const r=K.exports.useRef(!0),[i,n]=K.exports.useState(wo(ei({},w0),{isLoading:!0})),o=K.exports.useCallback(()=>{n(wo(ei({},w0),{isLoading:!0})),e().then(s=>{r.current&&n(wo(ei({},w0),{token:s}))}).catch(s=>{r.current&&n(wo(ei({},w0),{isError:!0})),t(Mh.TokenCannotFetch,s)})},[e,n,t]);return K.exports.useEffect(()=>(o(),()=>{r.current=!1}),[]),K.exports.useMemo(()=>wo(ei({},i),{refetchToken:o}),[i,o])},dfe=new Yde({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),ffe=({language:e})=>at("div",{children:e.error||"Error"}),pfe=e=>{var t=e,{fetchToken:r,apiKey:i,onError:n,ErrorComponent:o=ffe}=t,s=G$(t,["fetchToken","apiKey","onError","ErrorComponent"]);const{token:a,isLoading:l,isError:c,refetchToken:h}=hfe(r,n),f=K.exports.useMemo(()=>lde({apiKey:i,token:a,refetchToken:h,onError:n}),[a,h]);return K.exports.useEffect(()=>{Ph.set({client:f})},[f]),l?at(y0,{}):c?at(o,{language:s.language}):at(Jde,{client:dfe,children:at(ufe,wo(ei({},s),{onError:n,client:f}))})},mfe=e=>t=>at(pfe,ei(ei({},t),e)),gfe=()=>{const{img:e}=Ph.get(),{meta:t}=K.exports.useContext(zh);if(!e)return null;const{id:r,title:i,caption:n,license_model:o,collection_name:s,asset_family:a}=e;return Rn(yde,{children:[i&&at(bde,{children:i}),n&&i!==n&&at(xde,{children:n}),Rn(_de,{children:[r&&a&&Rn(wT,{children:[at(ST,{children:`${t.id.labels[a]}:`}),at(CT,{children:r})]}),o&&Rn(wT,{children:[at(ST,{children:`${t.license_model.label}:`}),at(CT,{children:t.license_model.items[o]})]}),s&&Rn(wT,{children:[at(ST,{children:`${t.collection_name}:`}),at(CT,{children:s})]})]})]})},vfe=()=>Wi("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 98 97",xmlSpace:"preserve",children:Wi("g",{fill:"currentColor",children:Wi("path",{d:"M67.022 22.86c-4.467-.143-7.421.997-9.238 3.277-2.423-1.995-6.36-3.277-9.692-3.277-10.224 0-15.524 6.41-15.524 12.894 0 4.489 2.575 7.338 5.831 9.832-1.741.499-6.134 3.205-6.134 6.767 0 3.99 4.013 4.916 5.83 5.984v.143c-3.407 0-7.117 2.208-7.117 6.84 0 5.841 6.966 8.832 17.568 8.832 12.57 0 18.25-5.698 18.25-10.97 0-14.818-25.898-6.696-25.898-12.681 0-2.137 3.256-2.28 7.344-2.28 9.844 0 14.842-4.987 14.842-11.968 0-2.85-.909-4.987-2.12-6.554 1.44-.855 3.862-.855 6.058-.855V22.86zM46.274 59.904c9.087 0 11.888 2.565 11.888 4.275 0 1.282-2.044 4.132-8.102 4.132-7.875 0-10.45-1.283-10.45-4.132 0-1.567 1.515-4.275 6.664-4.275zm1.742-18.237c-4.013 0-6.816-2.706-6.816-6.127s2.803-6.126 6.816-6.126c3.558 0 6.436 2.706 6.436 6.126s-2.878 6.127-6.436 6.127z"})})}),yfe=z(O6)`
  * button {
    margin-right: 8px;
  }
  * button:nth-child(${e=>e.columns}n) {
    margin-right: 0px;
  }
`,_fe=({columns:e,tool:t,reverse:r,children:i})=>t===Aa.CUSTOM?Wi(yfe,{tool:t,reverse:r,columns:e,children:i}):Wi(O6,{tool:t,reverse:r,children:i}),vB=112,yB=8,_B=24*2;let am=2;const bfe=e=>{if(document){let i=null;if(typeof e=="string"&&(e.startsWith(".")?[i]=document.getElementsByClassName(e.slice(1)):e.startsWith("#")?i=document.getElementById(e.slice(1)):typeof e!="string"&&(i=e)),i&&i.getBoundingClientRect){const{width:n}=i.getBoundingClientRect();n*.4>520?am=4:n*.4>400&&(am=3)}}const t=YA(vB*2+yB*1+_B),r={advancedUIToolControlBar:{width:vB*am+yB*(am-1)+_B+4}};return[am,t,r]},xfe=({tool:e,children:t})=>MG(PG,{children:[t,e===Aa.CUSTOM&&Wi(gfe,{})]}),wfe=e=>{e()},Sfe=e=>{console.log(`Caught error ${e}`)},Cfe=e=>()=>fetch(e,{method:"GET",redirect:"follow"}).then(r=>r.json()).then(r=>r.access_token),kfe=(e,t,r,i,n,o,s="#editor",a=yT.Large,l=g0.High,c=_l.Creative)=>{!r&&!t&&console.warn("The client is not able to access the Getty API if gettyTokenURL or fetchToken is not provided.");const h=mfe({apiKey:e,fetchToken:r||Cfe(t||""),searchParams:L({sort_order:So.BestMatch,orientations:[],phrase:"Adventure"},o),showFilters:!0,displaySize:l,onError:i||Sfe,endpoint:c}),f=Fde({onConfirm:n||wfe,imageSize:a}),d='{"api_token":"BsZ_l2F0g8QaG6h6P2Znmw","app_identifiers":[],"available_actions":[],"domains":["api.photoeditorsdk.com"],"enterprise_license":false,"expires_at":null,"features":["noexporttracking","export","whitelabel","transform"],"issued_at":1649249335,"minimum_sdk_version":"1.0","owner":"img.ly GmbH","platform":"HTML5","products":["pesdk"],"version":"2.4","signature":"JcD+1NBv6iMXcyqYMJc6W8DHoX1JEejVY3UDMrIQWoLiq2ZFo0ubaY5OaW/zb++AopNZovSWE0eF7EDKwRGYVtGhFg+gNKo0vMBOsYeiuFxmbGdE7TbZfinzkGeHzQEHgBzcpNZB2u5l0cuXz7ey+PTcbB2IGfQ9gfWEP+z07yCc1f3IVy7TGrE72QPa99uq62giu0td+fCtvG4T9AP1oflrX+NzCcoVKP407FjI6bernhK1cTp+4FOy94oKx2Q588h15g6OmL/1nyMA5JocAMnWj2OvSAQ20IwMmE4Acs+GvqKeiGJVGV5FHwLE3+VxV8iommVnlaepTH/AFDHsVZbYb9/gNOHPEnEmCD3Su0LRmgB64Ar2cd5+O6W9hcvHfhjOfLfVa4AfwljcrNJZc91zLfp2i1DXRtl60Pmdj+s5VzmJnFyU0Eg5qNS8Xw0ctOeLC7zl4LvWLMY9z+rNLWkwOiyZ3NhbczAULzUtErBdeWhNVGDT/m8bSXxztoRa6TE+ZF/56pMwI3FqDylCMg3yoARCgK3r5k/6/BUJj4S76avQX1V6tSaRXqRDlJQ3luAcu+VzL1VK0RRk5f6TUffakc2FTpyCBFhFwEWf8swaKMh8lMd3mQns7hzCS8oGARiuR4phMG+LiJRbgYJ9LT/O09ge1e2huocD91ISu+I="}',[p,v,g]=bfe(s);return{container:s,license:d,assetBaseUrl:"https://cdn.jsdelivr.net/npm/photoeditorsdk@latest/assets",image:"",defaultTool:Aa.CUSTOM,tools:[Aa.CUSTOM,Aa.TRANSFORM],[Aa.CUSTOM]:{icon:vfe,toolControlBar:h,measurements:g},transform:{advancedUIToolControlBarOrder:[wv.ResetTransformButton,wv.Separator,wv.Items]},export:{image:{enableDownload:!1,exportType:q4.DATA_URL}},custom:{components:{buttons:{mainCanvasActionExport:f},windowContainer:xfe,advancedUIToolControlBar:y=>Wi(_fe,ge(L({},y),{columns:p}))},languages:{en:{customTool:{title:"Getty Images",placeholder:"Search the world\u2019s best images"},mainCanvasActions:{buttonExport:"Export image"}}},measurements:v}}},Tfe=h=>{var f=h,{gettyAPIKey:e,gettyTokenURL:t,fetchToken:r,searchParams:i,displaySize:n,imageSize:o,endpoint:s,onError:a,onConfirm:l}=f,c=To(f,["gettyAPIKey","gettyTokenURL","fetchToken","searchParams","displaySize","imageSize","endpoint","onError","onConfirm"]);const d=kfe(e,t,r,a,l,i,c.container,o,n,s),p=Gs([d,c]);return Vae.init(p)};var bB=(e="image/png")=>`data:${e};base64,`,Fn=class{constructor(e){this.version="3.12.0",this.spriteOrder=0,this.mapRelativeCropPointToImageSpace=t=>{const r=rt.relativeToAbsolutePoint(t,this.cropSpace,!1);return rt.pointFromSpaceToSpace(r,this.cropSpace,this.imageSpace,!1)},this.mapRelativeCropSizeToScaledImageSize=t=>t*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y),this.mapRelativeCropSizeToUnscaledImageSize=t=>t*Math.min(this.outputSize.height,this.outputSize.width),this.editor=e}static deserializeFilter(e){return{intensity:e.intensity,identifier:e.identifier}}static deserializeAdjustments(e){return L({},e)}static deserializeOverlay(e){return{identifier:e.identifier,opacity:e.intensity,blendMode:e.blendMode.replace(/([ _][a-z])/g,t=>t.toUpperCase().replace(" ","").replace("_",""))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:!1,flipVertically:!1,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(e){return e&&e.rgba?e.rgba:[0,0,0,0]}validateVersion(e){return this.version===e}static checkIfPlatformHTML(e){return e==="html5"}static deserializeStickers(e){return{identifier:e.identifier,opacity:e.alpha||0,tintMode:e.tintMode||"none",tintColor:Fn.deserialzeColor(e.tintColor)}}checkIsSerialisationValid(e){if(typeof e!="string"&&this.validateVersion(e.version))return!0;if(typeof e=="string")throw new Error("Invalid input of type string, please provide an object");return!1}deserializeImage(e){const t={};return e.image&&(t.image={width:e.image.width,height:e.image.height,data:e.image.data?e.image.data.replace(bB(),""):""},t.image.data=t.image.data?bB()+t.image.data:""),t}deserializeTransformation(e){const t={},r=e.operations.find(o=>o.type==="orientation"),i=e.operations.find(o=>o.type==="transform"),[n]=this.editor.engine.getRootContainers();return this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition,this.previewSize=this.editor.transformToolStore.maxCropMaskSize,this.imageSpace=n,t.transform=Fn.initializeEmptyTransform(),r!=null&&(t.transform.outputRotation=r.options.rotation,t.transform.flipHorizontally=r.options.flipHorizontally||!1,t.transform.flipVertically=r.options.flipVertically||!1),i&&(t.transform.start=i.options.start,t.transform.end=i.options.end,t.transform.rotation=i.options.rotation||0,t.transform.identifier=i.options.meta?i.options.meta.identifier:""),t}deserialize(e){var t,r;const i={};e.meta&&!Fn.checkIfPlatformHTML(e.meta.platform)&&console.warn("Read serialisation from another Platform");const n=this.editor.engineMediator.output.container.getResolution(),{size:o}=this.editor.engineMediator.image.container.getBounds();return this.outputSize=n,this.imageSize=o,this.cropSpace=this.editor.engine.getOutputContainer(),this.outputScale=this.cropSpace.getScale(),e.operations.forEach(s=>{switch(s.type){case"filter":i.filter=Fn.deserializeFilter(s.options);break;case"adjustments":i.adjustment=Fn.deserializeAdjustments(s.options);break;case"focus":i.focus=this.deserializeFocus(s.options);break;case"sprite":const{sprites:a}=s.options;a.forEach(l=>{switch(l.type){case"frame":i.frame=this.deserializeFrame(l.options);break;case"overlay":i.overlay=Fn.deserializeOverlay(l.options);break;case"brush":i.brush?i.brush.strokes.push(...this.deserializeBrush(l.options).strokes):i.brush=this.deserializeBrush(l.options);break;case"sticker":case"text":case"textdesign":i.sprite||(i.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}});const c=gi();i.sprite.spriteIdList.push(c),i.sprite.common[c]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(l.options.position),tool:"sticker",rotation:l.options.rotation||0,flipHorizontally:l.options.flipHorizontally,flipVertically:l.options.flipVertically},this.spriteOrder+=1,l.type==="sticker"?(i.sprite.common[c].tool="sticker",i.sprite.common[c].size={width:this.mapRelativeCropSizeToScaledImageSize(l.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(l.options.dimensions.y)},i.sprite.sticker[c]=Fn.deserializeStickers(l.options)):l.type==="text"?(i.sprite.common[c].tool="text",i.sprite.text[c]=this.deserializeTexts(l.options)):l.type==="textdesign"&&(i.sprite.common[c].tool="textdesign",i.sprite.textdesign[c]=this.deserializeTextDesign(l.options));break}});break}}),e.assetLibrary&&(i.customStickers=((r=(t=e.assetLibrary)==null?void 0:t.assets)==null?void 0:r.stickers)||[]),i}deserializeFrame(e){return{identifier:e.identifier,opacity:e.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(e.size),color:Fn.deserialzeColor(e.tintColor)}}deserializeFocus(e){switch(e.type){case"linear":return{identifier:"linear",linear:this.deserializeLinearFocus(e.options)};case"gaussian":return{identifier:"gaussian",gaussian:this.deserializeGaussianFocus(e.options)};case"radial":return{identifier:"radial",radial:this.deserializeRadialFocus(e.options)};case"mirrored":return{identifier:"mirrored",mirrored:this.deserializeMirroredFocus(e.options)}}}deserializeRadialFocus(e){return{center:this.mapRelativeCropPointToImageSpace(e.start),radius:new G(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new G(this.mapRelativeCropPointToImageSpace(e.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeLinearFocus(e){return{start:this.mapRelativeCropPointToImageSpace(e.start),end:this.mapRelativeCropPointToImageSpace(e.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeGaussianFocus(e){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeMirroredFocus(e){const t=new G(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new G(this.mapRelativeCropPointToImageSpace(e.end)));return{origin:new G(this.mapRelativeCropPointToImageSpace(e.start)).add(new G(this.mapRelativeCropPointToImageSpace(e.end))).divide(2),rotation:Math.atan2(t.y,t.x),size:this.mapRelativeCropSizeToScaledImageSize(e.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeTexts(e){return{identifier:zc(e.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(e.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(e.maxWidth),alignment:e.alignment,textColor:Fn.deserialzeColor(e.color),backgroundColor:Fn.deserialzeColor(e.backgroundColor),lineHeight:e.lineHeight,text:e.text}}deserializeTextDesign(e){return{identifier:e.identifier,width:this.mapRelativeCropSizeToScaledImageSize(e.width),padding:this.mapRelativeCropSizeToScaledImageSize(e.padding),color:Fn.deserialzeColor(e.color),seed:e.seed,text:e.text,isInverted:e.inverted}}deserializeBrush(e){return{strokes:e.paths.map(t=>({path:{controlPoints:t.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:"imgly_brush_radial",color:Fn.deserialzeColor(t.brush.color),size:t.brush.size,hardness:t.brush.hardness}}))}}},xB=(e="image/png")=>`data:${e};base64,`,On=class{constructor(e){this.version="3.9.0",this.spriteOrder=0,this.mapRelativeCropPointToImageSpace=t=>{const r=rt.relativeToAbsolutePoint(t,this.cropSpace,!1);return rt.pointFromSpaceToSpace(r,this.cropSpace,this.imageSpace,!1)},this.mapRelativeCropSizeToScaledImageSize=t=>t*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y),this.mapRelativeCropSizeToUnscaledImageSize=t=>t*Math.min(this.outputSize.height,this.outputSize.width),this.editor=e}static deserializeFilter(e){return{intensity:e.intensity,identifier:e.identifier}}static deserializeAdjustments(e){return L({},e)}static deserializeOverlay(e){return{identifier:e.identifier,opacity:e.intensity,blendMode:e.blendMode.replace(/([ _][a-z])/g,t=>t.toUpperCase().replace(" ","").replace("_",""))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:!1,flipVertically:!1,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(e){return e&&e.rgba?e.rgba:[0,0,0,0]}validateVersion(e){return this.version===e}static checkIfPlatformHTML(e){return e==="html5"}static deserializeStickers(e){return{identifier:e.identifier,opacity:e.alpha||0,tintMode:e.tintMode||"none",tintColor:On.deserialzeColor(e.tintColor)}}checkIsSerialisationValid(e){if(typeof e!="string"&&this.validateVersion(e.version))return!0;if(typeof e=="string")throw new Error("Invalid input of type string, please provide an object");return!1}deserializeImage(e){const t={};return e.image&&(t.image={width:e.image.width,height:e.image.height,data:e.image.data?e.image.data.replace(xB(),""):""},t.image.data=t.image.data?xB()+t.image.data:""),t}deserializeTransformation(e){const t={},r=e.operations.find(o=>o.type==="orientation"),i=e.operations.find(o=>o.type==="transform"),[n]=this.editor.engine.getRootContainers();return this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition,this.previewSize=this.editor.transformToolStore.maxCropMaskSize,this.imageSpace=n,t.transform=On.initializeEmptyTransform(),r!=null&&(t.transform.outputRotation=r.options.rotation,t.transform.flipHorizontally=r.options.flipHorizontally||!1,t.transform.flipVertically=r.options.flipVertically||!1),i&&(t.transform.start=i.options.start,t.transform.end=i.options.end,t.transform.rotation=i.options.rotation||0,t.transform.identifier=i.options.meta?i.options.meta.identifier:""),t}deserialize(e){var t,r;const i={};e.meta&&!On.checkIfPlatformHTML(e.meta.platform)&&console.warn("Read serialisation from another Platform");const n=this.editor.engineMediator.output.container.getResolution(),{size:o}=this.editor.engineMediator.image.container.getBounds();return this.outputSize=n,this.imageSize=o,this.cropSpace=this.editor.engine.getOutputContainer(),this.outputScale=this.cropSpace.getScale(),e.operations.forEach(s=>{switch(s.type){case"filter":i.filter=On.deserializeFilter(s.options);break;case"adjustments":i.adjustment=On.deserializeAdjustments(s.options);break;case"focus":i.focus=this.deserializeFocus(s.options);break;case"sprite":const{sprites:a}=s.options;a.forEach(l=>{switch(l.type){case"frame":i.frame=this.deserializeFrame(l.options);break;case"overlay":i.overlay=On.deserializeOverlay(l.options);break;case"brush":i.brush?i.brush.strokes.push(...this.deserializeBrush(l.options).strokes):i.brush=this.deserializeBrush(l.options);break;case"sticker":case"text":case"textdesign":i.sprite||(i.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}});const c=gi();i.sprite.spriteIdList.push(c),i.sprite.common[c]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(l.options.position),tool:"sticker",rotation:l.options.rotation||0,flipHorizontally:l.options.flipHorizontally,flipVertically:l.options.flipVertically},this.spriteOrder+=1,l.type==="sticker"?(i.sprite.common[c].tool="sticker",i.sprite.common[c].size={width:this.mapRelativeCropSizeToScaledImageSize(l.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(l.options.dimensions.y)},i.sprite.sticker[c]=On.deserializeStickers(l.options)):l.type==="text"?(i.sprite.common[c].tool="text",i.sprite.text[c]=this.deserializeTexts(l.options)):l.type==="textdesign"&&(i.sprite.common[c].tool="textdesign",i.sprite.textdesign[c]=this.deserializeTextDesign(l.options));break}});break}}),e.assetLibrary&&(i.customStickers=((r=(t=e.assetLibrary)==null?void 0:t.assets)==null?void 0:r.stickers)||[]),i}deserializeFrame(e){return{identifier:e.identifier,opacity:e.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(e.size),color:On.deserialzeColor(e.tintColor)}}deserializeFocus(e){switch(e.type){case"linear":return{identifier:"linear",linear:this.deserializeLinearFocus(e.options)};case"gaussian":return{identifier:"gaussian",gaussian:this.deserializeGaussianFocus(e.options)};case"radial":return{identifier:"radial",radial:this.deserializeRadialFocus(e.options)};case"mirrored":return{identifier:"mirrored",mirrored:this.deserializeMirroredFocus(e.options)};default:return}}deserializeRadialFocus(e){return{center:this.mapRelativeCropPointToImageSpace(e.start),radius:new G(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new G(this.mapRelativeCropPointToImageSpace(e.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeLinearFocus(e){return{start:this.mapRelativeCropPointToImageSpace(e.start),end:this.mapRelativeCropPointToImageSpace(e.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeGaussianFocus(e){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeMirroredFocus(e){const t=new G(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new G(this.mapRelativeCropPointToImageSpace(e.end)));return{origin:new G(this.mapRelativeCropPointToImageSpace(e.start)).add(new G(this.mapRelativeCropPointToImageSpace(e.end))).divide(2),rotation:Math.atan2(t.y,t.x),size:this.mapRelativeCropSizeToScaledImageSize(e.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeTexts(e){return{identifier:zc(e.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(e.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(e.maxWidth),alignment:e.alignment,textColor:On.deserialzeColor(e.color),backgroundColor:On.deserialzeColor(e.backgroundColor),lineHeight:e.lineHeight,text:e.text}}deserializeTextDesign(e){return{identifier:e.identifier,width:this.mapRelativeCropSizeToScaledImageSize(e.width),padding:this.mapRelativeCropSizeToScaledImageSize(e.padding),color:On.deserialzeColor(e.color),seed:e.seed,text:e.text,isInverted:e.inverted}}deserializeBrush(e){return{strokes:e.paths.map(t=>({path:{controlPoints:t.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:"imgly_brush_radial",color:On.deserialzeColor(t.brush.color),size:t.brush.size,hardness:t.brush.hardness}}))}}},Efe="@photoeditorsdk/root",Dfe="5.16.0",Ife="The most comprehensive photo editor SDK for HTML5",Rfe="http://github.com/imgly/pesdk-html5",Ffe="PhotoEditorSDK (img.ly GmbH) <contact@img.ly>",Ofe="SEE LICENSE IN LICENSE.md",Mfe=!0,Pfe={},Afe={start:"yarn workspace @example/react start",build:"yarn sdk-script build","build:rollup":"yarn sdk-script build rollup","package:release":"cd dist/photoeditorsdk && npm publish","package:pre-release":"cd dist/photoeditorsdk && npm publish --tag next","lint:css":"stylelint './packages/**/*.tsx'","lint:ts":"eslint ./packages/**/*.{ts,tsx}","lint:ts-engine":"eslint ./engine/**/*.ts","lint:types":"tsc --noEmit -p tsconfig.json --skipLibCheck","lint:types-engine":"tsc --noEmit -p engine/tsconfig.json --skipLibCheck",lint:"run-p lint:*",test:"$(npm bin)/jest",e2e:"cypress open","e2e:server":"sdk-script ui -P 3000 -D build","e2e:ci":"CYPRESS_RETRIES=2 cypress run --browser chrome --headless",deploy:"yarn workspace examp run deploy:pages",docs:"rm -rf ./docs && typedoc",postinstall:"yarn sdk-script server:build"},zfe={"@elv1n/cypress-plugin-snapshots":"1.4.4","@types/jest":"^24.0.11","@types/pixelmatch":"^5.2.2","@types/pngjs":"^3.4.2","@types/react":"^16.8.13","@types/react-dom":"^16.8.4","@types/styled-components":"4.4.0","@typescript-eslint/eslint-plugin":"4.6.0","@typescript-eslint/parser":"4.6.0",autoprefixer:"^9.7.4","cross-env":"^7.0.2",cypress:"6.6.0",eslint:"7.10.0","eslint-config-airbnb":"18.2.0","eslint-config-prettier":"6.12.0","eslint-import-resolver-typescript":"^2.3.0","eslint-plugin-cypress":"^2.11.2","eslint-plugin-import":"2.22.1","eslint-plugin-jsx-a11y":"6.3.1","eslint-plugin-no-only-tests":"^2.4.0","eslint-plugin-prettier":"3.1.4","eslint-plugin-react":"7.21.3",husky:"4.3.0",jest:"24.9.0",jsdoc:"^3.6.3","lint-staged":"10.4.0","lodash.defaults":"^4.2.0","mobx-react-devtools":"^6.1.1","native-url":"0.3.4","npm-run-all":"^4.1.5",prettier:"^2.0.5",react:"16.8.6","react-dom":"16.8.6","start-server-and-test":"1.11.5","styled-components":"4.4.1",stylelint:"^13.7.2","stylelint-config-recommended":"^3.0.0","stylelint-config-standard":"^20.0.0","stylelint-config-styled-components":"^0.1.1","stylelint-processor-styled-components":"^1.10.0","ts-jest":"24.3.0",typedoc:"^0.17.8",typescript:"3.8.3","utility-types":"^3.10.0"},$fe={"@juggle/resize-observer":"3.2.0","@reach/portal":"^0.13.0","can-use-dom":"0.1.0","lodash.debounce":"4.0.8","lodash.memoize":"4.1.2","lodash.throttle":"4.1.1",mobx:"4.15.7","mobx-react":"6.3.1",photoeditorsdk:"1.0.0","react-app-polyfill":"1.0.6","react-transition-group":"^4.4.1"},Bfe={node:"10.x || 11.x || 12.x || 13.x || 14.x || 15.x"},Lfe={eslint:"7.10.0"},Ufe=["examples/server","examples/material-ui","examples/ssr","examples/react","packages/*","!packages/ui","packages/ui/*","!packages/ui/components","packages/ui/components/*","engine/*","test/*","scripts"],Nfe={hooks:{"pre-commit":"lint-staged","pre-push":"true"}},jfe={name:Efe,version:Dfe,description:Ife,repository:Rfe,author:Ffe,license:Ofe,private:Mfe,bin:Pfe,scripts:Afe,devDependencies:zfe,dependencies:$fe,devEngines:Bfe,resolutions:Lfe,workspaces:Ufe,husky:Nfe},lm=class{constructor(e,t,r,i,n,o){this.version="3.12.0",this.mapImagePointToRelativeCropPoint=s=>{const a=rt.pointFromSpaceToSpace(s,this.imageSpace,this.cropSpace,!1);return rt.absoluteToRelativePoint(a,this.cropSpace,!1)},this.mapSizeToRelativeUnscaledCropSize=s=>s/Math.min(this.outputSize.height,this.outputSize.width),this.mapSizeToRelativeScaledCropSize=s=>s/Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y),this.getPointInDirection=(s,a=0,l=3)=>{const c=Math.tan(a),h=Math.sqrt(c**2+1);return{x:s.x+l/h,y:s.y+l*c/h}},this.previewPosition=e,this.previewSize=t,this.outputSize=r,this.imageSize=i,this.imageSpace=n,this.cropSpace=o,this.outputScale=o.getScale()}static serializeFilters(e){return{type:"filter",options:{intensity:e.intensity,identifier:e.identifier}}}static serializeAdjustments(e){return{type:"adjustments",options:e}}static serializeOverlay(e){return{type:"overlay",options:{identifier:e.identifier,intensity:e.opacity,blendMode:e.blendMode.replace(/[A-Z]/g,t=>` ${t.toLowerCase()}`)}}}static serializeMetaData(){return{platform:"html5",version:jfe.version,createdAt:new Date().toISOString()}}serialise(e,t,r){const i=lm.serializeMetaData(),n={width:this.imageSize.width,height:this.imageSize.height};t&&(n.type=r,n.data=t);const o=[],s=[],{adjustment:a}=e;Object.keys(a).map(v=>a[v]).filter(Boolean).length&&o.push(lm.serializeAdjustments(a));const{filter:l}=e;l.identifier!=="identity"&&o.push(lm.serializeFilters(l));const{overlay:c}=e;if(c.identifier!=="identity"&&s.push(lm.serializeOverlay(c)),e.transform){const{transform:v,orientation:g}=this.serializeTransform(e.transform),m=[v.options.start.x!==0,v.options.start.y!==0,v.options.end.x!==1,v.options.end.y!==1,v.options.rotation!==0],y=[g.options.rotation!==0,g.options.flipVertically!==!1,g.options.flipHorizontally!==!1];m.some(_=>_)&&o.push(v),y.some(_=>_)&&o.push(g)}const{frame:h}=e;h.identifier!=="identity"&&s.push(this.serialzeFrame(h));const{focus:f}=e;if(f.identifier!=="identity"&&o.push(this.serializeFocus(f)),e.sprite&&e.sprite.spriteIdList.forEach(v=>{const g=e.sprite.common[v];switch(g.tool){case"sticker":const m=e.sprite.sticker[v];s.push(this.serializeSticker(m,g,e.transform));break;case"text":const y=e.sprite.text[v];s.push(this.serializeText(y,g));break;case"textdesign":const _=e.sprite.textdesign[v];s.push(this.serializeTextDesign(_,g));break}}),e.brush.strokes.length&&s.push({type:"brush",options:{paths:e.brush.strokes.map(v=>({points:v.path.controlPoints.map(this.mapImagePointToRelativeCropPoint),brush:{color:{rgba:v.brush.color},size:v.brush.size,hardness:v.brush.hardness}}))}}),s.length){const v={type:"sprite",options:{sprites:s}};o.push(v)}const p={assets:{stickers:e.customStickers}};return{version:this.version,meta:i,image:n,operations:o,assetLibrary:p}}serialzeFrame(e){return{type:"frame",options:{identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.color},size:this.mapSizeToRelativeUnscaledCropSize(e.width)}}}serializeFocus(e){const t=Math.sqrt(this.previewSize.width**2+this.previewSize.height**2);switch(e.identifier){case"linear":return{type:"focus",options:{type:"linear",options:{start:this.mapImagePointToRelativeCropPoint(e.linear.start),end:this.mapImagePointToRelativeCropPoint(e.linear.end),blurRadius:this.mapSizeToRelativeScaledCropSize(e.linear.blurRadius)}}};case"radial":return{type:"focus",options:{type:"radial",options:{start:this.mapImagePointToRelativeCropPoint(e.radial.center),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(e.radial.center,0,e.radial.radius)),blurRadius:this.mapSizeToRelativeScaledCropSize(e.radial.blurRadius),gradientRadius:.1}}};case"mirrored":const{mirrored:r}=e;return{type:"focus",options:{type:"mirrored",options:{start:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(r.origin,r.rotation,t/2)),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(r.origin,r.rotation,-t/2)),size:this.mapSizeToRelativeScaledCropSize(e.mirrored.size),blurRadius:this.mapSizeToRelativeScaledCropSize(e.mirrored.blurRadius),gradientSize:.1}}};default:return{type:"focus",options:{type:"gaussian",options:{blurRadius:this.mapSizeToRelativeScaledCropSize(e.gaussian.blurRadius)}}}}}serializeSticker(e,t,r){return{type:"sticker",options:{position:this.mapImagePointToRelativeCropPoint(t.position),dimensions:{x:this.mapSizeToRelativeScaledCropSize(t.size.width),y:this.mapSizeToRelativeScaledCropSize(t.size.height)},rotation:t.rotation,flipVertically:(t.flipVertically||!1)!==(r.flipVertically||!1),flipHorizontally:(t.flipHorizontally||!1)!==(r.flipHorizontally||!1),identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.tintColor},tintMode:e.tintMode}}}serializeText(e,t){return{type:"text",options:{position:this.mapImagePointToRelativeCropPoint(t.position),rotation:t.rotation,flipVertically:!1,flipHorizontally:!1,fontIdentifier:e.identifier,fontSize:this.mapSizeToRelativeScaledCropSize(e.fontSize),maxWidth:this.mapSizeToRelativeScaledCropSize(e.width),text:e.text,lineHeight:e.lineHeight,color:{rgba:e.textColor},backgroundColor:{rgba:e.backgroundColor},alignment:e.alignment}}}serializeTextDesign(e,t){return{type:"textdesign",options:{position:this.mapImagePointToRelativeCropPoint(t.position),rotation:t.rotation,flipVertically:!1,flipHorizontally:!1,identifier:e.identifier,inverted:e.isInverted,text:e.text,seed:e.seed,width:this.mapSizeToRelativeScaledCropSize(e.width),padding:this.mapSizeToRelativeScaledCropSize(e.padding),color:{rgba:e.color}}}}serializeTransform(e){const{start:t,end:r}=e,i={type:"transform",options:{start:t,end:r,rotation:e.rotation,meta:{identifier:e.identifier}}},n={type:"orientation",options:{rotation:e.outputRotation,flipHorizontally:e.flipHorizontally,flipVertically:e.flipVertically}};return{transform:i,orientation:n}}},Hfe={"3.9.0":On,"3.12.0":Fn},wB=Object.freeze(Object.defineProperty({__proto__:null,Deserializers:Hfe,Serializer:lm},Symbol.toStringTag,{value:"Module"})),Wfe=Q(function(){const{config:t,active:r,custom:i}=oe(),{tools:n}=t,o=r.tool,s=h=>{const f=t.state.config[h];if("icon"in f){const p=f.icon;return u.createElement(p,null)}const d=_z[h];return u.createElement(d,null)||null},a=h=>t.locale[h].title,l=(h,f)=>h&&u.createElement(se.Toolbar.Item,{onClick:()=>r.selectTool(h),key:h,label:a(h),isActive:o===h,isDisabled:!(r.image||h==="library"||h==="customTool")},s(h))||u.createElement(se.Toolbar.Separator,{key:h+f,active:!!o}),c=i.getBasicToolbar();return c?u.createElement(c,{show:!!o},n.map(l)):null}),Vfe=({adjustmentsTool:e,custom:t})=>{const r=e.selectedAdjustmentType.toLowerCase(),i=e[r],n=K.exports.useRef(!1),o=K.exports.useRef(i),s=t.getButton("toolControlBarSecondaryButton"),a=l=>{n.current&&l!==o.current&&(e.toolSnapshot(),n.current=!1,o.current=l)};return u.createElement(se.ControlsbarContainer,{show:Boolean(r)},s&&u.createElement(s,{tool:"adjustment",ariaLabel:e.locale.controls.buttonReset,onClick:e.reset,icon:u.createElement(kn.reset,null),label:e.locale.controls.buttonReset}),u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Spacer,{count:2}),u.createElement(se.Slider,{"aria-hidden":!r,adjust:!0,style:{width:"280px"},label:e.selectedOptionLabel,value:i,onChange:l=>{e.editAdjustments({type:r,value:l}),n.current=i!==l},onMouseUp:a,onTouchEnd:a,snap:0}),u.createElement(ce.Spacer,{count:2}),u.createElement(se.BarSeparator,null)),u.createElement(se.Other.EmptyDiv,null))},Gfe=vt("adjustmentsTool","custom")(Q(Vfe)),qfe=Q(()=>{const{brushTool:e}=oe(),{colorList:t,locale:r,localeColor:i}=e,n=r.controls,o=i.colorPicker;return u.createElement(u.Fragment,null,u.createElement(ce.Input.Selection,{showLabel:!1,label:n.selectColor},u.createElement(Zn,{tool:"brush",activeColor:e.color,colors:t,labelsColor:o,colorPickerDirection:"top",onChange:e.changeColor})))}),Xfe=Q(()=>{const{brushTool:e}=oe(),{locale:t}=e,r=t.controls;return u.createElement(se.Slider,{"data-test":Le.BrushHardness,style:{width:"280px"},showLabel:!1,label:r.sliderHardness,value:e.hardness,min:0,max:1,onChange:e.changeHardness})}),Yfe=Q(()=>{const{brushTool:e}=oe(),{locale:t}=e,r=t.controls;return u.createElement(se.Slider,{"data-test":Le.BrushSize,style:{width:"280px"},showLabel:!1,label:r.sliderSize,value:e.relativeSize,min:1,max:100,divider:1,onChange:e.changeRelativeSize})}),Qfe=se.TabWrapper,{Tab:zT}=se,Kfe=Q(()=>{const{brushTool:e,custom:t}=oe(),{locale:r,config:i}=e,{basicUIToolControlBarTabsOrder:n}=i,o=r.controls,s=t.getButton("toolControlBarSecondaryButton"),a=l=>{switch(l){case"brushColor":return u.createElement(zT,{key:l,label:o.tabColor},u.createElement(qfe,null));case"brushSize":return u.createElement(zT,{key:l,label:o.tabSize},u.createElement(Yfe,null));case"brushHardness":return u.createElement(zT,{key:l,label:o.tabHardness},u.createElement(Xfe,null));default:return null}};return u.createElement(se.ControlsbarContainer,{style:{justifyContent:"center"},show:!0},s&&u.createElement(s,{tool:"brush",ariaLabel:o.buttonReset,onClick:e.reset,icon:u.createElement(kn.reset,null),isDisabled:!e.isDirty,label:o.buttonReset}),u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Input.Form,null,u.createElement(Qfe,null,n.map(l=>a(l))))))}),Zfe=Q(()=>{const{filterTool:e}=oe(),{state:t}=e,r=e.locale.controls,i=()=>{e.toolSnapshot()};return u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Spacer,{count:2}),u.createElement(se.Slider,{"aria-hidden":!e.isOptionSelected,style:{width:"280px"},label:r.sliderIntensity,value:t.intensity,min:0,max:1,onMouseUp:i,onTouchEnd:i,onChange:e.changeIntensity,snap:t.isDuotone?.5:null}),u.createElement(ce.Spacer,{count:2}),u.createElement(se.BarSeparator,null))}),Jfe=Q(()=>{const{filterTool:e,custom:t}=oe(),{config:r}=e,{basicUIToolControlBarTabsOrder:i}=r,n=t.getButton("toolControlBarSecondaryButton"),o=s=>{switch(s){case"filterIntensity":return u.createElement(Zfe,{key:s});default:return null}};return u.createElement(se.ControlsbarContainer,{show:e.isOptionSelected},n&&u.createElement(n,{tool:"filter",ariaLabel:e.locale.controls.buttonReset,onClick:e.reset,icon:u.createElement(kn.reset,null),label:e.locale.controls.buttonReset}),i.map(s=>o(s)),u.createElement(se.Other.EmptyDiv,null))}),epe=Q(()=>{const{focusTool:e,custom:t}=oe(),r=e.locale.controls,i=t.getButton("toolControlBarSecondaryButton"),n=()=>{e.toolSnapshot(r.sliderIntensity)};return u.createElement(se.ControlsbarContainer,{show:e.isOptionSelected},i&&u.createElement(i,{tool:"focus",ariaLabel:r.buttonReset,onClick:e.reset,icon:u.createElement(kn.reset,null),label:r.buttonReset}),u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Spacer,{count:2}),u.createElement(se.Slider,{"aria-hidden":!e.isOptionSelected,style:{width:"280px"},label:r.sliderIntensity,value:e.relativeIntensity,min:0,max:100,divider:1,onChange:e.changeRelativeIntensity,onMouseUp:n,onTouchEnd:n}),u.createElement(ce.Spacer,{count:2}),u.createElement(se.BarSeparator,null)),u.createElement(se.Other.EmptyDiv,null))}),tpe=Q(()=>{const{frameTool:e}=oe(),t=e.locale.controls,r=e.localeColor.colorPicker,{colorList:i}=e;return u.createElement(ce.Input.Selection,{label:t.selectColor,showLabel:!1},u.createElement(Zn,{tool:"frame",activeColor:e.color,colors:i,labelsColor:r,colorPickerDirection:"top",onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))}),rpe=Q(()=>{const{frameTool:e}=oe(),t=e.locale.controls,r=()=>{e.toolSnapshot(t.sliderOpacity)};return u.createElement(se.Slider,{"aria-hidden":!e.isOptionSelected,showLabel:!1,style:{width:"280px"},label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:r,onTouchEnd:r})}),ipe=Q(()=>{const{frameTool:e}=oe(),t=e.locale.controls,r=()=>{e.toolSnapshot(t.sliderSize)};return u.createElement(se.Slider,{"aria-hidden":!e.isOptionSelected,showLabel:!1,style:{width:"280px"},label:t.sliderSize,value:e.size,min:e.minSize,max:e.maxSize,divider:1,onChange:e.changeWidth,onMouseUp:r,onTouchEnd:r})}),npe=se.TabWrapper,{Tab:$T}=se,ope=Q(()=>{const{frameTool:e,custom:t}=oe(),r=e.locale.controls,{tintable:i,config:n}=e,{basicUIToolControlBarTabsOrder:o}=n,s=t.getButton("toolControlBarSecondaryButton"),a=l=>{switch(l){case"frameOpacity":return u.createElement($T,{key:l,label:r.tabOpacity},u.createElement(rpe,null));case"frameSize":return u.createElement($T,{key:l,label:r.tabSize},u.createElement(ipe,null));case"frameColor":return i&&u.createElement($T,{key:l,label:r.tabColor},u.createElement(tpe,null));default:return null}};return u.createElement(se.ControlsbarContainer,{show:e.isOptionSelected},s&&u.createElement(s,{tool:"frame",ariaLabel:r.buttonReset,onClick:e.reset,icon:u.createElement(kn.reset,null),label:r.buttonReset}),u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Spacer,null),u.createElement(npe,null,o.map(l=>a(l))),u.createElement(se.BarSeparator,null)),u.createElement(se.Other.EmptyDiv,null))}),spe=z(se.ControlsbarContainer)`
  ${e=>e.firstChildMargin&&ne`
      > :first-child {
        margin-right: 16px;
      }
    `}
`,ape=({library:e,active:t,custom:r})=>{const i=e.locale.controls.placeholderSearch,{config:n}=e,o=r.getButton("toolControlBarPrimaryButton"),s=h=>{e.fetchImages(h)},a=h=>{const{files:f}=h.target;if(f.length){const d=new FileReader;d.onload=p=>{t.newImage(p.target.result)},d.readAsDataURL(f[0])}},l=()=>{t.selectWebcam(!0)},c=()=>{const h=document.getElementById("fileUpload");h&&h.click()};return u.createElement(spe,{firstChildMargin:n.enableWebcam&&!e.libraryProvider,show:!0},n.enableUpload&&o&&u.createElement(o,{tool:"library","data-test":Le.LibraryUploadButton,ariaLabel:e.locale.controls.buttonUpload,onClick:c,icon:u.createElement(kn.uploadImage,null),label:e.locale.controls.buttonUpload},u.createElement(ce.Input.File,{onChange:a})),e.libraryProvider&&u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Input.Search,{onChange:s,placeholder:i})),n.enableWebcam&&u.createElement(Kz,{tool:"library",onClick:l,icon:u.createElement(kn.openWebcam,null),label:e.locale.controls.buttonWebcamOpen}),u.createElement(se.BarSeparator,null))},lpe=vt("library","active","custom")(Q(ape)),cpe=Q(()=>{const{overlayTool:e}=oe(),t=e.locale.controls,{blendMode:r,allBlendModes:i}=e,n=o=>{e.changeBlendMode(o)};return u.createElement(ce.Input.CarouselSlider,{showLabel:!1,label:t.carouselBlendMode,defaultIdentifier:r,onSelect:n,list:i})}),upe=Q(()=>{const{overlayTool:e}=oe(),t=e.locale.controls,{state:r}=e,i=()=>{e.toolSnapshot()};return u.createElement(se.Slider,{"aria-hidden":!e.isOptionSelected,showLabel:!1,style:{width:"280px"},label:t.sliderOpacity,value:r.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:i,onTouchEnd:i})}),hpe=se.TabWrapper,{Tab:SB}=se,dpe=Q(()=>{const{overlayTool:e,custom:t}=oe(),{config:r}=e,{basicUIToolControlBarTabsOrder:i}=r,n=e.locale.controls,o=t.getButton("toolControlBarSecondaryButton"),s=a=>{switch(a){case"overlayBlendMode":return u.createElement(SB,{key:a,label:n.tabBlendMode},u.createElement(cpe,null));case"overlayOpacity":return u.createElement(SB,{key:a,label:n.tabOpacity},u.createElement(upe,null));default:return null}};return u.createElement(se.ControlsbarContainer,{show:e.isOptionSelected},o&&u.createElement(o,{tool:"overlay",ariaLabel:n.buttonReset,onClick:e.reset,icon:u.createElement(kn.reset,null),label:n.buttonReset}),u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Spacer,null),u.createElement(hpe,null,i.map(a=>s(a))),u.createElement(se.BarSeparator,null)),u.createElement(se.Other.EmptyDiv,null))}),fpe=Q(()=>{const{stickerTool:e}=oe(),t=e.locale.controls,r=e.localeColor.colorPicker,{colorList:i}=e;return u.createElement(u.Fragment,null,u.createElement(ce.Input.Selection,{isDisabled:!e.isStickerSelected,showLabel:!1,label:t.selectColor},u.createElement(Zn,{tool:"sticker",activeSprite:e.id,activeColor:e.tintColor,colors:i,labelsColor:r,isDisabled:!e.isStickerSelected,colorPickerDirection:"top",onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot})))}),ppe=Q(()=>{const{stickerTool:e}=oe(),t=e.locale.controls,r=()=>{e.toolSnapshot()};return u.createElement(se.Slider,{isDisabled:!e.isStickerSelected,showLabel:!1,style:{width:"280px"},label:t.sliderOpacity,value:e.opacity,min:0,max:1,onMouseUp:r,onTouchEnd:r,onChange:e.changeOpacity})}),mpe=se.TabWrapper,{Tab:CB}=se,gpe=z.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${GA.VisuallyHidden}
`,vpe=Q(()=>{const{stickerTool:e,custom:t}=oe(),{config:r}=e,{basicUIToolControlBarTabsOrder:i}=r,n=e.locale.controls,o=t.getButton("toolControlBarPrimaryButton"),s=()=>{const h=document.getElementById("fileUpload");h&&(h.value=null,h.click())},a=h=>{const{files:f}=h.target;e.addFiles(f)},l=h=>{switch(h){case"stickerColor":return e.tintable?u.createElement(CB,{key:h,label:n.tabColor},u.createElement(fpe,null)):null;case"stickerOpacity":return u.createElement(CB,{key:h,label:n.tabOpacity},u.createElement(ppe,null));default:return null}},c=()=>e.isCustomStickerEnabled&&o?u.createElement(o,{tool:"sticker",ariaLabel:n.buttonUpload,onClick:s,icon:u.createElement(kn.uploadImage,null),label:n.buttonUpload},u.createElement(gpe,{onChange:a})):null;return u.createElement(se.ControlsbarContainer,{show:!0},c(),u.createElement(se.Other.ControlsWrapper,null,u.createElement(mpe,null,i.map(h=>l(h))),u.createElement(se.BarSeparator,null)),u.createElement(se.Other.EmptyDiv,null))}),ype=Q(()=>{const{textTool:e}=oe(),{backgroundColorList:t}=e,r=e.locale.controls,i=e.localeColor.colorPicker;return u.createElement(ce.Input.Selection,{isDisabled:!e.isTextSelected,showLabel:!1,label:r.selectBackgroundColor},u.createElement(Zn,{tool:"text",activeSprite:e.id,activeColor:e.backgroundColor,colors:t,labelsColor:i,colorPickerDirection:"top",isDisabled:!e.isTextSelected,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot}))}),_pe=z(ce.Input.NumericInput)`
  max-width: 55px;
  > div > input {
    text-align: center;
  }
`,bpe=Q(()=>{const{textTool:e}=oe(),t=r=>{const i=r?parseFloat(r):0;e.setFontSize(Math.max(10,Math.min(690,i)))};return u.createElement(_pe,{value:e.fontSize.toFixed(0),onSubmit:t,isDisabled:!e.isTextSelected})}),xpe=Q(()=>{const{textTool:e}=oe(),t=e.locale.controls,r=()=>{e.toolSnapshot()};return u.createElement(se.Slider,{isDisabled:!e.isTextSelected,showLabel:!1,label:t.sliderLineSpacing,value:e.lineHeight,min:.5,max:3,onChange:e.changeLineHeight,onMouseUp:r,onTouchEnd:r,snap:1,divider:1,decimal:1})}),wpe=Q(()=>{const{textTool:e,custom:t}=oe(),r=e.locale.controls,i=["left","center","right"],n=t.getButton("textAlignment");return u.createElement(ce.Input.Selection,{isDisabled:!e.isTextSelected,showLabel:!1,label:r.selectAlignment,"data-test":Le.TextAlignment},i.map(o=>{const s=bz[o];return u.createElement(n,{tool:o,isDisabled:!e.isTextSelected,ariaLabel:`Align ${o}`,isActive:o===e.alignment,key:o,icon:u.createElement(s,null),onClick:()=>e.changeAlignment(o)})}))}),Spe=Q(()=>{const{textTool:e}=oe(),{colorList:t}=e,r=e.locale.controls,i=e.localeColor.colorPicker;return u.createElement(ce.Input.Selection,{isDisabled:!e.isTextSelected,showLabel:!1,label:r.selectFontColor},u.createElement(Zn,{tool:"text",activeSprite:e.id,activeColor:e.textColor,colors:t,labelsColor:i,colorPickerDirection:"top",isDisabled:!e.isTextSelected,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))}),Cpe=se.ResponsiveTabWrapper,kpe=Q(()=>{const{textTool:e,custom:t}=oe(),{config:r}=e,{basicUIToolControlBarTabsOrder:i}=r,n=e.locale.controls,o=t.getButton("toolControlBarPrimaryButton"),s=a=>{switch(a){case"fontSize":return u.createElement(kh,{key:a,label:n.tabFontSize},u.createElement(bpe,null));case"textAlignment":return u.createElement(kh,{key:a,label:n.tabAlignment},u.createElement(wpe,null));case"textColor":return u.createElement(kh,{key:a,label:n.tabColor},u.createElement(Spe,null));case"backgroundColor":return u.createElement(kh,{key:a,label:n.tabBgColor},u.createElement(ype,null));case"lineSpacing":return u.createElement(kh,{key:a,label:n.tabLineHeight},u.createElement(xpe,null));default:return null}};return u.createElement(se.ControlsbarContainer,{show:!0},u.createElement(o,{tool:"text",ariaLabel:n.buttonNew,onClick:e.add,icon:u.createElement(kn.addText,null),label:n.buttonNew}),u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Spacer,null),u.createElement(Cpe,null,i.map(a=>s(a))),u.createElement(se.BarSeparator,null)),u.createElement(se.Other.EmptyDiv,null))}),Tpe=({textDesignTool:e,custom:t})=>{const r=e.locale.controls,i=e.localeColor.colorPicker,{colorList:n}=e,o=t.getButton("toolControlBarSecondaryButton"),s=t.getButton("toolControlBarPrimaryButton");return u.createElement(se.ControlsbarContainer,{show:!0},s&&u.createElement(s,{tool:"textdesign",ariaLabel:r.buttonNew,onClick:e.add,icon:u.createElement(kn.addText,null),label:r.buttonNew}),u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Input.Selection,{isDisabled:!e.isTextDesignSelected,label:r.selectColor},u.createElement(Zn,{tool:"textdesign",activeSprite:e.id,activeColor:e.color,colors:n,labelsColor:i,colorPickerDirection:"top",isDisabled:!e.isTextDesignSelected,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))),o&&u.createElement(o,{tool:"textdesign",ariaLabel:r.buttonShuffle,onClick:e.changeSeed,icon:u.createElement(kn.shuffle,null),label:r.buttonShuffle}),u.createElement(se.BarSeparator,null))},Epe=vt("textDesignTool","custom")(Q(Tpe)),Dpe=Q(()=>{const{transformTool:e}=oe(),t=e.locale.controls,{forceDimensions:r}=e;return u.createElement(Hz,{isDisabled:r,showLabel:!1,valueHeight:e.localOutputHeight,valueWidth:e.localOutputWidth,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:t.inputCropSize,labelHeight:t.inputHeight,labelWidth:t.inputWidth})}),Ipe=()=>u.createElement(Lz,null),Rpe=Q(()=>{const{transformTool:e,custom:t}=oe(),r=e.locale.controls,{forceDimensions:i}=e,n=t.getCheckbox();return n?u.createElement(n,{tool:"transform",isDisabled:i,style:{paddingTop:"5px",justifyContent:"center"},value:e.lockResolution,checkMarkPosition:"left",label:r.checkboxKeepResolution,onClick:e.changeLockResolution}):null}),Fpe=se.ResponsiveTabWrapper,{Tab:BT}=se,Ope=Q(()=>{const{transformTool:e,custom:t}=oe(),{config:r}=e,{basicUIToolControlBarTabsOrder:i}=r,n=e.locale.controls,o=t.getButton("toolControlBarSecondaryButton"),s=a=>{switch(a){case"flipRotate":return u.createElement(BT,{key:a,label:n.tabFlipAndRotate},u.createElement(Ipe,null));case"resolution":return u.createElement(BT,{key:a,label:n.tabResolution},u.createElement(Rpe,null));case"cropSize":return u.createElement(BT,{key:a,label:n.tabCropSize},u.createElement(Dpe,null));default:return null}};return u.createElement(se.ControlsbarContainer,{show:!0},o&&u.createElement(o,{tool:"transform",ariaLabel:e.locale.controls.buttonReset,onClick:e.reset,icon:u.createElement(kn.reset,null),label:e.locale.controls.buttonReset}),u.createElement(se.Other.ControlsWrapper,null,u.createElement(ce.Spacer,null),u.createElement(Fpe,null,i.map(a=>s(a))),u.createElement(se.BarSeparator,null)),u.createElement(se.Other.EmptyDiv,null))}),Mpe=Q(function(){const{active:t,custom:r}=oe(),i=t.tool,n=r.getBasicToolControlBar();return n?u.createElement(n,{show:!!i,tool:i},u.createElement(ce.Switch.Index,{type:i},u.createElement(ce.Switch.Case,{value:"filter"},u.createElement(Jfe,null)),u.createElement(ce.Switch.Case,{value:"focus"},u.createElement(epe,null)),u.createElement(ce.Switch.Case,{value:"adjustment"},u.createElement(Gfe,null)),u.createElement(ce.Switch.Case,{value:"overlay"},u.createElement(dpe,null)),u.createElement(ce.Switch.Case,{value:"sticker"},u.createElement(vpe,null)),u.createElement(ce.Switch.Case,{value:"text"},u.createElement(kpe,null)),u.createElement(ce.Switch.Case,{value:"textdesign"},u.createElement(Epe,null)),u.createElement(ce.Switch.Case,{value:"library"},u.createElement(lpe,null)),u.createElement(ce.Switch.Case,{value:"frame"},u.createElement(ope,null)),u.createElement(ce.Switch.Case,{value:"brush"},u.createElement(Kfe,null)),u.createElement(ce.Switch.Case,{value:"transform"},u.createElement(Ope,null)))):null}),Ppe=z.div`
  position: relative;
  top: -8px;
  color: ${e=>e.theme.card.foreground};
`,Ape=({adjustmentsTool:e})=>{const t=(r,i)=>{const n=ire[r.identifier];return u.createElement(se.Card,{"data-test":r.identifier,tool:"adjustment",type:"medium",onClick:()=>e.toggleOptionSelection(r.identifier),isActive:r.identifier===e.selectedAdjustmentType,key:`${r.identifier}-${i}`,label:r.name,style:{animationDelay:`${wr(i)}s`}},u.createElement(Ppe,null,u.createElement(n,null)),u.createElement(se.CardLabel,null,e.locale.items[r.identifier]||r.name))};return u.createElement(se.CardContainer,null,e.items.map(t))},zpe=vt("adjustmentsTool")(Q(Ape)),$pe=()=>{const{config:e}=oe(),t=e.state.config.customTool.toolControlBar;return u.createElement(t,{language:e.state.locale.customTool})},LT=class extends u.Component{constructor(){super(...arguments),this.onCategoryClick=e=>{const{filterTool:t}=this.props;t.toggleCategorySelection(e)},this.renderItem=(e,t)=>{const{filterTool:r}=this.props;return u.createElement(se.Card,{tool:"filter",type:"medium",onClick:()=>r.selectFilter(e.identifier,e.defaultIntensity),isActive:r.identifier===e.identifier,key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{animationDelay:`${wr(t)}s`}},u.createElement(se.CardLabel,{withBackground:!0},r.locale.categories[e.identifier]||r.locale.items[e.identifier]||e.name))},this.renderCategory=(e,t)=>{const{filterTool:r}=this.props,{selectedCategoryIdentifier:i}=r,n=i===e.identifier;return e.items?u.createElement(se.CategoryContainer,{key:e.identifier},u.createElement(se.Card,{tool:"filter",type:"large",onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${wr(t)}s`}},u.createElement(se.CardLabel,{withBackground:!0},e.name)),u.createElement(se.ExpandableContainer,{show:n},e.items.map(this.renderItem))):null}}render(){const{filterTool:e}=this.props,{categories:t,config:r,items:i}=e;return r.flattenCategories?u.createElement(se.CardContainer,null,i.map(this.renderItem)):u.createElement(se.CardContainer,null,t.map(this.renderCategory))}};LT=x([vt("filterTool","active"),Q],LT);var Bpe=({focusTool:e})=>{const t=i=>{e.selectFocus(i)},r=(i,n)=>u.createElement(se.Card,{isActive:i.identifier===e.identifier,tool:"focus",type:"medium",onClick:()=>t(i.identifier),key:`${i.identifier}-${n}`,image:i.thumbnailURI,label:i.name,style:{animationDelay:`${wr(n)}s`}},u.createElement(se.CardLabel,{withBackground:!0},e.locale.items[i.identifier]||i.name));return u.createElement(se.CardContainer,null,e.items.map(r))},Lpe=vt("focusTool")(Q(Bpe)),Upe=({frameTool:e})=>{const t=e.identifier,r=(i,n)=>u.createElement(se.Card,{tool:"frame",type:"medium",onClick:()=>e.selectFrame(i.identifier),isActive:i.identifier===t,key:`${i.identifier}-${n}`,image:i.thumbnailURI,label:i.name,style:{animationDelay:`${wr(n)}s`,backgroundSize:"60%"}}," ",u.createElement(se.CardLabel,{hidden:!0},e.locale.items[i.identifier]||i.name));return u.createElement(se.CardContainer,null,e.items.map(r))},Npe=vt("frameTool")(Q(Upe)),jpe=z.p`
  height: ${e=>e.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`,UT=class extends u.Component{constructor(){super(...arguments),this.onCategoryClick=e=>{const{library:t}=this.props;t.toggleCategorySelection(e)},this.renderItem=(e,t)=>{const{active:r}=this.props;return u.createElement(se.Card,{tool:"library",type:"medium",onClick:()=>r.newImage(e.rawUrl),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{animationDelay:`${wr(t)}s`}})},this.renderCategory=(e,t)=>{const{library:r}=this.props,{selectedCategoryIdentifier:i}=r,n=i===e.identifier;return e.items?u.createElement(se.CategoryContainer,{key:e.identifier},u.createElement(se.Card,{tool:"library",type:"large",onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${wr(t)}s`}},u.createElement(se.CardLabel,{withBackground:!0},e.name)),u.createElement(se.ExpandableContainer,{show:n},e.items.map(this.renderItem))):null}}render(){const{library:e}=this.props,{query:t,categories:r,items:i,locale:n,config:o}=e;return t?i.length?u.createElement(se.CardContainer,null,i.map(this.renderItem)):u.createElement(jpe,{"data-test":Le.NoResult},n.controls.noResults):o.flattenCategories?u.createElement(se.CardContainer,null,i.map(this.renderItem)):u.createElement(se.CardContainer,null,r.map(this.renderCategory))}};UT=x([vt("library","active"),Q],UT);var Hpe=({overlayTool:e})=>{const{identifier:t,items:r,selectOverlay:i,locale:n}=e,o=(s,a)=>u.createElement(se.Card,{tool:"overlay",type:"medium",onClick:()=>i(s.identifier),isActive:s.identifier===t,key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,style:{animationDelay:`${wr(a)}s`}},u.createElement(se.CardLabel,{withBackground:!0},n.items[s.identifier]||s.name));return u.createElement(se.CardContainer,null,r.map(o))},Wpe=vt("overlayTool")(Q(Hpe)),NT=class extends u.Component{constructor(){super(...arguments),this.onCategoryClick=e=>{const{stickerTool:t}=this.props;t.toggleCategorySelection(e)},this.renderItem=(e,t)=>{const{stickerTool:r}=this.props;return u.createElement(se.Card,{tool:"sticker",type:"medium",onClick:()=>r.add(e.identifier),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,style:{backgroundSize:"55%",animationDelay:`${tF(t)}s`}},u.createElement(se.CardLabel,{hidden:!0},r.locale.items[e.identifier]||e.name))},this.renderCategory=(e,t)=>{const{stickerTool:r}=this.props,{selectedCategoryIdentifier:i,locale:n}=r,o=i===e.identifier;return e.items?u.createElement(se.CategoryContainer,{key:e.identifier},u.createElement(se.Card,{tool:"sticker",type:"large",onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${wr(t)}s`}},u.createElement(se.CardLabel,{withBackground:!0},n.categories[e.identifier]||e.name)),u.createElement(se.ExpandableContainer,{show:o},e.items.map(this.renderItem))):null}}render(){const{stickerTool:e}=this.props,{categories:t,items:r,config:i}=e;return i.flattenCategories?u.createElement(se.CardContainer,null,r.map(this.renderItem)):u.createElement(se.CardContainer,null,t.map(this.renderCategory))}};NT=x([vt("stickerTool","active"),Q],NT);var Vpe=z.div`
  font-size: 20px;
  position: absolute;
  left: 50%;
  top: 50%;
  transform-origin: left top;
`,Gpe=class extends u.Component{constructor(){super(...arguments),this.getWidth=({fontFamily:e,fontStyle:t,fontWeight:r},i)=>{const o=document.createElement("canvas").getContext("2d");return o.font=`${t} ${r} 20px ${e}`,o.fillText(i,0,0),o.measureText(i).width},this.renderItem=(e,t)=>{const{config:r,textTool:i}=this.props,{fontFamily:n,fontWeight:o,fontStyle:s,identifier:a}=e,l=`${e.fontFamily} ${nt.getDisplayFontStyle(e)}`,c=this.getWidth(e,l),h=(r.measurements.basicCard.medium.width-20)/c;return u.createElement(se.Card,{tool:"text",type:"medium",onClick:()=>i.changeFont(a),isDisabled:!this.textTool.isTextSelected,isActive:i.identifier===a,key:`${e.identifier}-${t}`,label:l,style:{animationDelay:`${wr(t)}s`}},u.createElement(Vpe,{style:{transform:`scale(${h}) translate(-50%, -50%)`,fontFamily:n,fontStyle:s,fontWeight:o}},l))}}get textTool(){return this.props.textTool}render(){const{textTool:e}=this.props,{fontsLoaded:t,fontFamilies:r}=e;return t?u.createElement(se.CardContainer,null,r.map(this.renderItem)):null}},qpe=vt("textTool","config")(Q(Gpe)),Xpe=({textDesignTool:e})=>{const{items:t,changeIdentifier:r,isTextDesignSelected:i,identifier:n}=e,o=(s,a)=>u.createElement(se.Card,{tool:"textdesign",type:"medium",onClick:()=>r(s.identifier),isDisabled:!i,isActive:n===s.identifier,key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,style:{animationDelay:`${wr(a)}s`,backgroundSize:"60%"}},u.createElement(se.CardLabel,{hidden:!0},s.name));return u.createElement(se.CardContainer,null,t.map(o))},Ype=vt("textDesignTool")(Q(Xpe)),Qpe=z.div`
  svg {
    margin-bottom: 12px;
  }
`,Kpe=z.div`
  svg {
    width: ${e=>e.theme.measurements.basicCard.medium.height}px;
    height: ${e=>e.theme.measurements.basicCard.medium.height}px;
  }

  ${vc} {
    width: ${e=>e.theme.measurements.basicCard.medium.width-32}px;
    height: ${e=>e.theme.measurements.basicCard.medium.height-32}px;
    padding: 6px 0px 24px;
  }
`,jT=class extends u.Component{constructor(){super(...arguments),this.onCategoryClick=e=>{const{transformTool:t}=this.props;t.toggleCategorySelection(e)},this.renderItem=(e,t)=>{const{transformTool:r,config:i}=this.props,{locale:n,identifier:o}=r,s=r.checkIfTransformThumbnailExits(e.thumbnailURI),a=tr.crops[e.identifier]||tr.crops.imgly_transform_common_custom,l=u.createElement(se.CardLabel,null,n.items[e.identifier]||e.name),c=s?l:u.createElement(Kpe,null,u.createElement(a,{main:i.theme.transform.crops.main,highlight:i.theme.transform.crops.highlight,shadow:i.theme.transform.crops.shadow}),l);return u.createElement(se.Card,{tool:"transform",type:"medium",onClick:()=>r.changeIdentifier(e.identifier,!0),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,isActive:e.identifier===o,style:{backgroundSize:"55%",animationDelay:`${wr(t)}s`}},c)},this.renderCategory=(e,t)=>{const{transformTool:r}=this.props,{selectedCategoryIdentifier:i,locale:n}=r,o=i===e.identifier;if(!e.items)return null;const s=r.checkIfTransformThumbnailExits(e.thumbnailURI),a=u.createElement(se.CardLabel,null,n.categories[e.identifier]||e.name),l=s?a:u.createElement(Qpe,null,tr.categories[e.identifier]&&u.createElement(tr.categories[e.identifier]),a);return u.createElement(se.CategoryContainer,{key:e.identifier},u.createElement(se.Card,{tool:"transform",type:"large",onClick:()=>this.onCategoryClick(e.identifier),image:s?e.thumbnailURI:"",label:e.name,style:{animationDelay:`${wr(t)}s`}},l),u.createElement(se.ExpandableContainer,{show:o},e.items.map(this.renderItem)))}}render(){const{transformTool:e}=this.props,{categories:t,config:r,items:i}=e;return r.flattenCategories?u.createElement(se.CardContainer,null,i.map(this.renderItem)):u.createElement(se.CardContainer,null,t.map(this.renderCategory))}};jT=x([vt("transformTool","config"),Q],jT);var Zpe=Q(function(){const{active:t,library:r,custom:i}=oe(),n=t.tool,o=K.exports.useMemo(()=>{switch(n){case"library":return u.createElement(UT,null);case"filter":return u.createElement(LT,null);case"focus":return u.createElement(Lpe,null);case"adjustment":return u.createElement(zpe,null);case"overlay":return u.createElement(Wpe,null);case"sticker":return u.createElement(NT,null);case"text":return u.createElement(qpe,null);case"textdesign":return u.createElement(Ype,null);case"frame":return u.createElement(Npe,null);case"transform":return u.createElement(jT,null);case"customTool":return u.createElement($pe,null);default:return null}},[n]),s=i.getBasicToolItemsBar();return!s||n==="brush"||n==="library"&&!r.libraryProvider?null:u.createElement(s,{show:!!n},o)}),Jpe=z.div`
  position: absolute;
  width: 100%;
  height: ${e=>e.theme.measurements.basicUIToolControlBar.maxHeight}px;
  bottom: 0;
  left: 0;
  background: ${e=>e.theme.webcam.backdrop};
  z-index: ${e=>e.theme.measurements.zIndex.disable};
`,HT=class extends u.Component{static getDerivedStateFromError(e){return console.error(e),{hasError:!0}}render(){const{active:e,custom:t}=this.props,r=t.getWindowContainer();return u.createElement(ce.Container,{"data-test":Le.EditorContainer},e.isWebcam?u.createElement(Jpe,null):null,u.createElement(yk,null),u.createElement(O_,null,u.createElement(ZC,null),r&&u.createElement(r,{tool:e.tool},u.createElement(wk,null,e.isWebcam?u.createElement(xk,null):null,e.image&&u.createElement(vk,null))),u.createElement(Mpe,null),u.createElement(Zpe,null),u.createElement(Wfe,null)))}};HT=x([vt("active","custom"),Q],HT);var eme=class extends u.Component{constructor(){super(...arguments),this.componentWillUnmount=()=>{this.editor.cleanUpCanvasMemory()}}componentDidMount(){const{editor:e,storeProps:t}=this.props;this.editor=e,this.storeProps=t;const r=new Nz(this.editor.configStore.config.custom.components,{basicUIToolbar:se.Toolbar.Index,basicUIToolControlBar:se.Controlsbar,basicUIToolItemsBar:se.Itemsbar}),i={getDialog:r.getDialog,getButton:r.getButton,getColorItem:r.getColorItem,getCheckbox:r.getCheckbox,getBasicToolbar:r.getBasicToolbar,getBasicToolControlBar:r.getBasicToolControlBar,getBasicToolItemsBar:r.getBasicToolItemsBar,getWindowContainer:r.getWindowContainer};this.storeProps.custom=i,this.forceUpdate()}render(){return this.storeProps?u.createElement(bC,L({},this.storeProps),u.createElement(IO,{theme:ge(L({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},u.createElement(HT,null))):null}},tme=Object.freeze(Object.defineProperty({__proto__:null,default:eme},Symbol.toStringTag,{value:"Module"}));yr.init=Tfe,Object.defineProperties(yr,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
